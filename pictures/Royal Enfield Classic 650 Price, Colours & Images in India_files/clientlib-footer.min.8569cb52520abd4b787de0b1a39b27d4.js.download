console.log("Footer component initialized");
const accordionHeaders = document.querySelectorAll('.menu-accordion-header');
document.querySelectorAll('.re-revamp__footer-fragment--action-item').forEach(item => {
    item.addEventListener('click', function () {
        const url = this.getAttribute('data-redirection');
        if (url) {
            window.location.href = url;
        } else {
            console.warn('Invalid redirection URL:', url);
        }
    });
});


accordionHeaders.forEach(header => {
    header.addEventListener('click', function () {
        const icon = this.querySelector('.accordion-icon');
        const content = this.nextElementSibling;

        icon.classList.toggle('active');
        content.classList.toggle('active');

        // Close other open accordions
        accordionHeaders.forEach(otherHeader => {
            if (otherHeader !== header) {
                const otherIcon = otherHeader.querySelector('.accordion-icon');
                const otherContent = otherHeader.nextElementSibling;
                otherIcon.classList.remove('active');
                otherContent.classList.remove('active');
            }
        });
    });
});



document.querySelectorAll('.re-revamp__footer-fragment--action-item').forEach(item => {
    item.addEventListener('click', function (e) {
        const linkText = this.querySelector('a')?.innerText?.trim();

        dataLayer.push({
            event: 'preFooterCardComponent',
            eventCategory: 'preFooterCardComponent',
            eventAction:  this.querySelector('a')?.innerText,
            eventLabel: this.querySelector('a').href,
            pageType: document.title,
       
        });
    });
});

document.querySelectorAll('.re-revamp__footer-fragment--menu-column a, .menu-accordion-content a').forEach(link => {
    link.addEventListener('click', function () {
        const category = this.closest('.re-revamp__footer-fragment--menu-column, .menu-accordion-item')?.querySelector('h3')?.innerText.trim();
        const bikeName = this.innerText.trim();

        dataLayer.push({
            event: 'footerHeadingComponent',
            eventCategory: 'footerHeadingComponent',
            eventAction: bikeName,
            eventLabel: link.href,
            pageType: document.title,
            sectionHeading: category
        });
    });
});

document.querySelectorAll('.re-revamp__footer-fragment--contact-info a').forEach(link => {
    link.addEventListener('click', function () {
        const type = this.href.startsWith('tel') ? 'support_phone_click' : 'support_email_click';

        dataLayer.push({
            event: 'contactCardComponent',
            eventCategory: 'contactCardComponent',
            eventAction: type,
            pageType: document.title,
          
        });
    });
});

document.querySelectorAll('.re-revamp__footer-fragment--social-icon').forEach(icon => {
    icon.addEventListener('click', function () {
       var platform = this.href.split('.')[1]; // e.g. facebook, instagram
        const links = this.href;
        if(platform.includes('com')){
            platform = 'X';
        }
        dataLayer.push({
            event: 'socialMediaIconComponent',
            eventCategory: 'socialMediaIconComponent',
            eventAction: platform,
            eventLabel: links,
            pageType: document.title,
        });
    });
});

document.querySelectorAll('.re-revamp__footer-fragment--legal-links a').forEach(link => {
    link.addEventListener('click', function () {
        dataLayer.push({
            event: 'documentationLinksComponent',
            eventCategory: 'documentationLinksComponent',
            eventAction: this.innerText.trim(),
            eventLabel: this.href,
            pageType: document.title,
        });
    });
});