/*! For license information please see ridesmain.js.LICENSE.txt */
!(function () {
  "use strict";
  var e = {
      27: function (e, t, n) {
        function r(e) {
          return e && e.__esModule ? e : { default: e };
        }
        (t.__esModule = !0),
          (t.parseWithoutProcessing = l),
          (t.parse = function (e, t) {
            var n = l(e, t);
            return new s.default(t).accept(n);
          });
        var i = r(n(201)),
          s = r(n(915)),
          o = (function (e) {
            if (e && e.__esModule) return e;
            var t = {};
            if (null != e)
              for (var n in e)
                Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
            return (t.default = e), t;
          })(n(425)),
          a = n(849);
        t.parser = i.default;
        var c = {};
        function l(e, t) {
          return "Program" === e.type
            ? e
            : ((i.default.yy = c),
              (c.locInfo = function (e) {
                return new c.SourceLocation(t && t.srcName, e);
              }),
              i.default.parse(e));
        }
        a.extend(c, o);
      },
      97: function (e, t, n) {
        t.__esModule = !0;
        var r = n(849);
        (t.default = function (e) {
          e.registerHelper("blockHelperMissing", function (t, n) {
            var i = n.inverse,
              s = n.fn;
            if (!0 === t) return s(this);
            if (!1 === t || null == t) return i(this);
            if (r.isArray(t))
              return t.length > 0
                ? (n.ids && (n.ids = [n.name]), e.helpers.each(t, n))
                : i(this);
            if (n.data && n.ids) {
              var o = r.createFrame(n.data);
              (o.contextPath = r.appendContextPath(n.data.contextPath, n.name)),
                (n = { data: o });
            }
            return s(t, n);
          });
        }),
          (e.exports = t.default);
      },
      127: function (e, t, n) {
        function r(e) {
          return e && e.__esModule ? e : { default: e };
        }
        (t.__esModule = !0),
          (t.Compiler = c),
          (t.precompile = function (e, t, n) {
            if (null == e || ("string" != typeof e && "Program" !== e.type))
              throw new i.default(
                "You must pass a string or Handlebars AST to Handlebars.precompile. You passed " +
                  e
              );
            "data" in (t = t || {}) || (t.data = !0);
            t.compat && (t.useDepths = !0);
            var r = n.parse(e, t),
              s = new n.Compiler().compile(r, t);
            return new n.JavaScriptCompiler().compile(s, t);
          }),
          (t.compile = function (e, t, n) {
            void 0 === t && (t = {});
            if (null == e || ("string" != typeof e && "Program" !== e.type))
              throw new i.default(
                "You must pass a string or Handlebars AST to Handlebars.compile. You passed " +
                  e
              );
            "data" in (t = s.extend({}, t)) || (t.data = !0);
            t.compat && (t.useDepths = !0);
            var r = void 0;
            function o() {
              var r = n.parse(e, t),
                i = new n.Compiler().compile(r, t),
                s = new n.JavaScriptCompiler().compile(i, t, void 0, !0);
              return n.template(s);
            }
            function a(e, t) {
              return r || (r = o()), r.call(this, e, t);
            }
            return (
              (a._setup = function (e) {
                return r || (r = o()), r._setup(e);
              }),
              (a._child = function (e, t, n, i) {
                return r || (r = o()), r._child(e, t, n, i);
              }),
              a
            );
          });
        var i = r(n(769)),
          s = n(849),
          o = r(n(919)),
          a = [].slice;
        function c() {}
        function l(e, t) {
          if (e === t) return !0;
          if (s.isArray(e) && s.isArray(t) && e.length === t.length) {
            for (var n = 0; n < e.length; n++) if (!l(e[n], t[n])) return !1;
            return !0;
          }
        }
        function u(e) {
          if (!e.path.parts) {
            var t = e.path;
            e.path = {
              type: "PathExpression",
              data: !1,
              depth: 0,
              parts: [t.original + ""],
              original: t.original + "",
              loc: t.loc,
            };
          }
        }
        c.prototype = {
          compiler: c,
          equals: function (e) {
            var t = this.opcodes.length;
            if (e.opcodes.length !== t) return !1;
            for (var n = 0; n < t; n++) {
              var r = this.opcodes[n],
                i = e.opcodes[n];
              if (r.opcode !== i.opcode || !l(r.args, i.args)) return !1;
            }
            t = this.children.length;
            for (n = 0; n < t; n++)
              if (!this.children[n].equals(e.children[n])) return !1;
            return !0;
          },
          guid: 0,
          compile: function (e, t) {
            return (
              (this.sourceNode = []),
              (this.opcodes = []),
              (this.children = []),
              (this.options = t),
              (this.stringParams = t.stringParams),
              (this.trackIds = t.trackIds),
              (t.blockParams = t.blockParams || []),
              (t.knownHelpers = s.extend(
                Object.create(null),
                {
                  helperMissing: !0,
                  blockHelperMissing: !0,
                  each: !0,
                  if: !0,
                  unless: !0,
                  with: !0,
                  log: !0,
                  lookup: !0,
                },
                t.knownHelpers
              )),
              this.accept(e)
            );
          },
          compileProgram: function (e) {
            var t = new this.compiler().compile(e, this.options),
              n = this.guid++;
            return (
              (this.usePartial = this.usePartial || t.usePartial),
              (this.children[n] = t),
              (this.useDepths = this.useDepths || t.useDepths),
              n
            );
          },
          accept: function (e) {
            if (!this[e.type])
              throw new i.default("Unknown type: " + e.type, e);
            this.sourceNode.unshift(e);
            var t = this[e.type](e);
            return this.sourceNode.shift(), t;
          },
          Program: function (e) {
            this.options.blockParams.unshift(e.blockParams);
            for (var t = e.body, n = t.length, r = 0; r < n; r++)
              this.accept(t[r]);
            return (
              this.options.blockParams.shift(),
              (this.isSimple = 1 === n),
              (this.blockParams = e.blockParams ? e.blockParams.length : 0),
              this
            );
          },
          BlockStatement: function (e) {
            u(e);
            var t = e.program,
              n = e.inverse;
            (t = t && this.compileProgram(t)),
              (n = n && this.compileProgram(n));
            var r = this.classifySexpr(e);
            "helper" === r
              ? this.helperSexpr(e, t, n)
              : "simple" === r
              ? (this.simpleSexpr(e),
                this.opcode("pushProgram", t),
                this.opcode("pushProgram", n),
                this.opcode("emptyHash"),
                this.opcode("blockValue", e.path.original))
              : (this.ambiguousSexpr(e, t, n),
                this.opcode("pushProgram", t),
                this.opcode("pushProgram", n),
                this.opcode("emptyHash"),
                this.opcode("ambiguousBlockValue")),
              this.opcode("append");
          },
          DecoratorBlock: function (e) {
            var t = e.program && this.compileProgram(e.program),
              n = this.setupFullMustacheParams(e, t, void 0),
              r = e.path;
            (this.useDecorators = !0),
              this.opcode("registerDecorator", n.length, r.original);
          },
          PartialStatement: function (e) {
            this.usePartial = !0;
            var t = e.program;
            t && (t = this.compileProgram(e.program));
            var n = e.params;
            if (n.length > 1)
              throw new i.default(
                "Unsupported number of partial arguments: " + n.length,
                e
              );
            n.length ||
              (this.options.explicitPartialContext
                ? this.opcode("pushLiteral", "undefined")
                : n.push({ type: "PathExpression", parts: [], depth: 0 }));
            var r = e.name.original,
              s = "SubExpression" === e.name.type;
            s && this.accept(e.name),
              this.setupFullMustacheParams(e, t, void 0, !0);
            var o = e.indent || "";
            this.options.preventIndent &&
              o &&
              (this.opcode("appendContent", o), (o = "")),
              this.opcode("invokePartial", s, r, o),
              this.opcode("append");
          },
          PartialBlockStatement: function (e) {
            this.PartialStatement(e);
          },
          MustacheStatement: function (e) {
            this.SubExpression(e),
              e.escaped && !this.options.noEscape
                ? this.opcode("appendEscaped")
                : this.opcode("append");
          },
          Decorator: function (e) {
            this.DecoratorBlock(e);
          },
          ContentStatement: function (e) {
            e.value && this.opcode("appendContent", e.value);
          },
          CommentStatement: function () {},
          SubExpression: function (e) {
            u(e);
            var t = this.classifySexpr(e);
            "simple" === t
              ? this.simpleSexpr(e)
              : "helper" === t
              ? this.helperSexpr(e)
              : this.ambiguousSexpr(e);
          },
          ambiguousSexpr: function (e, t, n) {
            var r = e.path,
              i = r.parts[0],
              s = null != t || null != n;
            this.opcode("getContext", r.depth),
              this.opcode("pushProgram", t),
              this.opcode("pushProgram", n),
              (r.strict = !0),
              this.accept(r),
              this.opcode("invokeAmbiguous", i, s);
          },
          simpleSexpr: function (e) {
            var t = e.path;
            (t.strict = !0),
              this.accept(t),
              this.opcode("resolvePossibleLambda");
          },
          helperSexpr: function (e, t, n) {
            var r = this.setupFullMustacheParams(e, t, n),
              s = e.path,
              a = s.parts[0];
            if (this.options.knownHelpers[a])
              this.opcode("invokeKnownHelper", r.length, a);
            else {
              if (this.options.knownHelpersOnly)
                throw new i.default(
                  "You specified knownHelpersOnly, but used the unknown helper " +
                    a,
                  e
                );
              (s.strict = !0),
                (s.falsy = !0),
                this.accept(s),
                this.opcode(
                  "invokeHelper",
                  r.length,
                  s.original,
                  o.default.helpers.simpleId(s)
                );
            }
          },
          PathExpression: function (e) {
            this.addDepth(e.depth), this.opcode("getContext", e.depth);
            var t = e.parts[0],
              n = o.default.helpers.scopedId(e),
              r = !e.depth && !n && this.blockParamIndex(t);
            r
              ? this.opcode("lookupBlockParam", r, e.parts)
              : t
              ? e.data
                ? ((this.options.data = !0),
                  this.opcode("lookupData", e.depth, e.parts, e.strict))
                : this.opcode("lookupOnContext", e.parts, e.falsy, e.strict, n)
              : this.opcode("pushContext");
          },
          StringLiteral: function (e) {
            this.opcode("pushString", e.value);
          },
          NumberLiteral: function (e) {
            this.opcode("pushLiteral", e.value);
          },
          BooleanLiteral: function (e) {
            this.opcode("pushLiteral", e.value);
          },
          UndefinedLiteral: function () {
            this.opcode("pushLiteral", "undefined");
          },
          NullLiteral: function () {
            this.opcode("pushLiteral", "null");
          },
          Hash: function (e) {
            var t = e.pairs,
              n = 0,
              r = t.length;
            for (this.opcode("pushHash"); n < r; n++)
              this.pushParam(t[n].value);
            for (; n--; ) this.opcode("assignToHash", t[n].key);
            this.opcode("popHash");
          },
          opcode: function (e) {
            this.opcodes.push({
              opcode: e,
              args: a.call(arguments, 1),
              loc: this.sourceNode[0].loc,
            });
          },
          addDepth: function (e) {
            e && (this.useDepths = !0);
          },
          classifySexpr: function (e) {
            var t = o.default.helpers.simpleId(e.path),
              n = t && !!this.blockParamIndex(e.path.parts[0]),
              r = !n && o.default.helpers.helperExpression(e),
              i = !n && (r || t);
            if (i && !r) {
              var s = e.path.parts[0],
                a = this.options;
              a.knownHelpers[s] ? (r = !0) : a.knownHelpersOnly && (i = !1);
            }
            return r ? "helper" : i ? "ambiguous" : "simple";
          },
          pushParams: function (e) {
            for (var t = 0, n = e.length; t < n; t++) this.pushParam(e[t]);
          },
          pushParam: function (e) {
            var t = null != e.value ? e.value : e.original || "";
            if (this.stringParams)
              t.replace &&
                (t = t.replace(/^(\.?\.\/)*/g, "").replace(/\//g, ".")),
                e.depth && this.addDepth(e.depth),
                this.opcode("getContext", e.depth || 0),
                this.opcode("pushStringParam", t, e.type),
                "SubExpression" === e.type && this.accept(e);
            else {
              if (this.trackIds) {
                var n = void 0;
                if (
                  (!e.parts ||
                    o.default.helpers.scopedId(e) ||
                    e.depth ||
                    (n = this.blockParamIndex(e.parts[0])),
                  n)
                ) {
                  var r = e.parts.slice(1).join(".");
                  this.opcode("pushId", "BlockParam", n, r);
                } else
                  (t = e.original || t).replace &&
                    (t = t
                      .replace(/^this(?:\.|$)/, "")
                      .replace(/^\.\//, "")
                      .replace(/^\.$/, "")),
                    this.opcode("pushId", e.type, t);
              }
              this.accept(e);
            }
          },
          setupFullMustacheParams: function (e, t, n, r) {
            var i = e.params;
            return (
              this.pushParams(i),
              this.opcode("pushProgram", t),
              this.opcode("pushProgram", n),
              e.hash ? this.accept(e.hash) : this.opcode("emptyHash", r),
              i
            );
          },
          blockParamIndex: function (e) {
            for (var t = 0, n = this.options.blockParams.length; t < n; t++) {
              var r = this.options.blockParams[t],
                i = r && s.indexOf(r, e);
              if (r && i >= 0) return [t, i];
            }
          },
        };
      },
      148: function (e, t) {
        (t.__esModule = !0),
          (t.default = function (e) {
            "object" != typeof globalThis &&
              (Object.prototype.__defineGetter__("__magic__", function () {
                return this;
              }),
              (__magic__.globalThis = __magic__),
              delete Object.prototype.__magic__);
            var t = globalThis.Handlebars;
            e.noConflict = function () {
              return (
                globalThis.Handlebars === e && (globalThis.Handlebars = t), e
              );
            };
          }),
          (e.exports = t.default);
      },
      201: function (e, t) {
        t.__esModule = !0;
        var n = (function () {
          var e = {
              trace: function () {},
              yy: {},
              symbols_: {
                error: 2,
                root: 3,
                program: 4,
                EOF: 5,
                program_repetition0: 6,
                statement: 7,
                mustache: 8,
                block: 9,
                rawBlock: 10,
                partial: 11,
                partialBlock: 12,
                content: 13,
                COMMENT: 14,
                CONTENT: 15,
                openRawBlock: 16,
                rawBlock_repetition0: 17,
                END_RAW_BLOCK: 18,
                OPEN_RAW_BLOCK: 19,
                helperName: 20,
                openRawBlock_repetition0: 21,
                openRawBlock_option0: 22,
                CLOSE_RAW_BLOCK: 23,
                openBlock: 24,
                block_option0: 25,
                closeBlock: 26,
                openInverse: 27,
                block_option1: 28,
                OPEN_BLOCK: 29,
                openBlock_repetition0: 30,
                openBlock_option0: 31,
                openBlock_option1: 32,
                CLOSE: 33,
                OPEN_INVERSE: 34,
                openInverse_repetition0: 35,
                openInverse_option0: 36,
                openInverse_option1: 37,
                openInverseChain: 38,
                OPEN_INVERSE_CHAIN: 39,
                openInverseChain_repetition0: 40,
                openInverseChain_option0: 41,
                openInverseChain_option1: 42,
                inverseAndProgram: 43,
                INVERSE: 44,
                inverseChain: 45,
                inverseChain_option0: 46,
                OPEN_ENDBLOCK: 47,
                OPEN: 48,
                mustache_repetition0: 49,
                mustache_option0: 50,
                OPEN_UNESCAPED: 51,
                mustache_repetition1: 52,
                mustache_option1: 53,
                CLOSE_UNESCAPED: 54,
                OPEN_PARTIAL: 55,
                partialName: 56,
                partial_repetition0: 57,
                partial_option0: 58,
                openPartialBlock: 59,
                OPEN_PARTIAL_BLOCK: 60,
                openPartialBlock_repetition0: 61,
                openPartialBlock_option0: 62,
                param: 63,
                sexpr: 64,
                OPEN_SEXPR: 65,
                sexpr_repetition0: 66,
                sexpr_option0: 67,
                CLOSE_SEXPR: 68,
                hash: 69,
                hash_repetition_plus0: 70,
                hashSegment: 71,
                ID: 72,
                EQUALS: 73,
                blockParams: 74,
                OPEN_BLOCK_PARAMS: 75,
                blockParams_repetition_plus0: 76,
                CLOSE_BLOCK_PARAMS: 77,
                path: 78,
                dataName: 79,
                STRING: 80,
                NUMBER: 81,
                BOOLEAN: 82,
                UNDEFINED: 83,
                NULL: 84,
                DATA: 85,
                pathSegments: 86,
                SEP: 87,
                $accept: 0,
                $end: 1,
              },
              terminals_: {
                2: "error",
                5: "EOF",
                14: "COMMENT",
                15: "CONTENT",
                18: "END_RAW_BLOCK",
                19: "OPEN_RAW_BLOCK",
                23: "CLOSE_RAW_BLOCK",
                29: "OPEN_BLOCK",
                33: "CLOSE",
                34: "OPEN_INVERSE",
                39: "OPEN_INVERSE_CHAIN",
                44: "INVERSE",
                47: "OPEN_ENDBLOCK",
                48: "OPEN",
                51: "OPEN_UNESCAPED",
                54: "CLOSE_UNESCAPED",
                55: "OPEN_PARTIAL",
                60: "OPEN_PARTIAL_BLOCK",
                65: "OPEN_SEXPR",
                68: "CLOSE_SEXPR",
                72: "ID",
                73: "EQUALS",
                75: "OPEN_BLOCK_PARAMS",
                77: "CLOSE_BLOCK_PARAMS",
                80: "STRING",
                81: "NUMBER",
                82: "BOOLEAN",
                83: "UNDEFINED",
                84: "NULL",
                85: "DATA",
                87: "SEP",
              },
              productions_: [
                0,
                [3, 2],
                [4, 1],
                [7, 1],
                [7, 1],
                [7, 1],
                [7, 1],
                [7, 1],
                [7, 1],
                [7, 1],
                [13, 1],
                [10, 3],
                [16, 5],
                [9, 4],
                [9, 4],
                [24, 6],
                [27, 6],
                [38, 6],
                [43, 2],
                [45, 3],
                [45, 1],
                [26, 3],
                [8, 5],
                [8, 5],
                [11, 5],
                [12, 3],
                [59, 5],
                [63, 1],
                [63, 1],
                [64, 5],
                [69, 1],
                [71, 3],
                [74, 3],
                [20, 1],
                [20, 1],
                [20, 1],
                [20, 1],
                [20, 1],
                [20, 1],
                [20, 1],
                [56, 1],
                [56, 1],
                [79, 2],
                [78, 1],
                [86, 3],
                [86, 1],
                [6, 0],
                [6, 2],
                [17, 0],
                [17, 2],
                [21, 0],
                [21, 2],
                [22, 0],
                [22, 1],
                [25, 0],
                [25, 1],
                [28, 0],
                [28, 1],
                [30, 0],
                [30, 2],
                [31, 0],
                [31, 1],
                [32, 0],
                [32, 1],
                [35, 0],
                [35, 2],
                [36, 0],
                [36, 1],
                [37, 0],
                [37, 1],
                [40, 0],
                [40, 2],
                [41, 0],
                [41, 1],
                [42, 0],
                [42, 1],
                [46, 0],
                [46, 1],
                [49, 0],
                [49, 2],
                [50, 0],
                [50, 1],
                [52, 0],
                [52, 2],
                [53, 0],
                [53, 1],
                [57, 0],
                [57, 2],
                [58, 0],
                [58, 1],
                [61, 0],
                [61, 2],
                [62, 0],
                [62, 1],
                [66, 0],
                [66, 2],
                [67, 0],
                [67, 1],
                [70, 1],
                [70, 2],
                [76, 1],
                [76, 2],
              ],
              performAction: function (e, t, n, r, i, s, o) {
                var a = s.length - 1;
                switch (i) {
                  case 1:
                    return s[a - 1];
                  case 2:
                    this.$ = r.prepareProgram(s[a]);
                    break;
                  case 3:
                  case 4:
                  case 5:
                  case 6:
                  case 7:
                  case 8:
                  case 20:
                  case 27:
                  case 28:
                  case 33:
                  case 34:
                  case 40:
                  case 41:
                    this.$ = s[a];
                    break;
                  case 9:
                    this.$ = {
                      type: "CommentStatement",
                      value: r.stripComment(s[a]),
                      strip: r.stripFlags(s[a], s[a]),
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 10:
                    this.$ = {
                      type: "ContentStatement",
                      original: s[a],
                      value: s[a],
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 11:
                    this.$ = r.prepareRawBlock(
                      s[a - 2],
                      s[a - 1],
                      s[a],
                      this._$
                    );
                    break;
                  case 12:
                    this.$ = {
                      path: s[a - 3],
                      params: s[a - 2],
                      hash: s[a - 1],
                    };
                    break;
                  case 13:
                    this.$ = r.prepareBlock(
                      s[a - 3],
                      s[a - 2],
                      s[a - 1],
                      s[a],
                      !1,
                      this._$
                    );
                    break;
                  case 14:
                    this.$ = r.prepareBlock(
                      s[a - 3],
                      s[a - 2],
                      s[a - 1],
                      s[a],
                      !0,
                      this._$
                    );
                    break;
                  case 15:
                    this.$ = {
                      open: s[a - 5],
                      path: s[a - 4],
                      params: s[a - 3],
                      hash: s[a - 2],
                      blockParams: s[a - 1],
                      strip: r.stripFlags(s[a - 5], s[a]),
                    };
                    break;
                  case 16:
                  case 17:
                    this.$ = {
                      path: s[a - 4],
                      params: s[a - 3],
                      hash: s[a - 2],
                      blockParams: s[a - 1],
                      strip: r.stripFlags(s[a - 5], s[a]),
                    };
                    break;
                  case 18:
                    this.$ = {
                      strip: r.stripFlags(s[a - 1], s[a - 1]),
                      program: s[a],
                    };
                    break;
                  case 19:
                    var c = r.prepareBlock(
                        s[a - 2],
                        s[a - 1],
                        s[a],
                        s[a],
                        !1,
                        this._$
                      ),
                      l = r.prepareProgram([c], s[a - 1].loc);
                    (l.chained = !0),
                      (this.$ = {
                        strip: s[a - 2].strip,
                        program: l,
                        chain: !0,
                      });
                    break;
                  case 21:
                    this.$ = {
                      path: s[a - 1],
                      strip: r.stripFlags(s[a - 2], s[a]),
                    };
                    break;
                  case 22:
                  case 23:
                    this.$ = r.prepareMustache(
                      s[a - 3],
                      s[a - 2],
                      s[a - 1],
                      s[a - 4],
                      r.stripFlags(s[a - 4], s[a]),
                      this._$
                    );
                    break;
                  case 24:
                    this.$ = {
                      type: "PartialStatement",
                      name: s[a - 3],
                      params: s[a - 2],
                      hash: s[a - 1],
                      indent: "",
                      strip: r.stripFlags(s[a - 4], s[a]),
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 25:
                    this.$ = r.preparePartialBlock(
                      s[a - 2],
                      s[a - 1],
                      s[a],
                      this._$
                    );
                    break;
                  case 26:
                    this.$ = {
                      path: s[a - 3],
                      params: s[a - 2],
                      hash: s[a - 1],
                      strip: r.stripFlags(s[a - 4], s[a]),
                    };
                    break;
                  case 29:
                    this.$ = {
                      type: "SubExpression",
                      path: s[a - 3],
                      params: s[a - 2],
                      hash: s[a - 1],
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 30:
                    this.$ = {
                      type: "Hash",
                      pairs: s[a],
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 31:
                    this.$ = {
                      type: "HashPair",
                      key: r.id(s[a - 2]),
                      value: s[a],
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 32:
                    this.$ = r.id(s[a - 1]);
                    break;
                  case 35:
                    this.$ = {
                      type: "StringLiteral",
                      value: s[a],
                      original: s[a],
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 36:
                    this.$ = {
                      type: "NumberLiteral",
                      value: Number(s[a]),
                      original: Number(s[a]),
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 37:
                    this.$ = {
                      type: "BooleanLiteral",
                      value: "true" === s[a],
                      original: "true" === s[a],
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 38:
                    this.$ = {
                      type: "UndefinedLiteral",
                      original: void 0,
                      value: void 0,
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 39:
                    this.$ = {
                      type: "NullLiteral",
                      original: null,
                      value: null,
                      loc: r.locInfo(this._$),
                    };
                    break;
                  case 42:
                    this.$ = r.preparePath(!0, s[a], this._$);
                    break;
                  case 43:
                    this.$ = r.preparePath(!1, s[a], this._$);
                    break;
                  case 44:
                    s[a - 2].push({
                      part: r.id(s[a]),
                      original: s[a],
                      separator: s[a - 1],
                    }),
                      (this.$ = s[a - 2]);
                    break;
                  case 45:
                    this.$ = [{ part: r.id(s[a]), original: s[a] }];
                    break;
                  case 46:
                  case 48:
                  case 50:
                  case 58:
                  case 64:
                  case 70:
                  case 78:
                  case 82:
                  case 86:
                  case 90:
                  case 94:
                    this.$ = [];
                    break;
                  case 47:
                  case 49:
                  case 51:
                  case 59:
                  case 65:
                  case 71:
                  case 79:
                  case 83:
                  case 87:
                  case 91:
                  case 95:
                  case 99:
                  case 101:
                    s[a - 1].push(s[a]);
                    break;
                  case 98:
                  case 100:
                    this.$ = [s[a]];
                }
              },
              table: [
                {
                  3: 1,
                  4: 2,
                  5: [2, 46],
                  6: 3,
                  14: [2, 46],
                  15: [2, 46],
                  19: [2, 46],
                  29: [2, 46],
                  34: [2, 46],
                  48: [2, 46],
                  51: [2, 46],
                  55: [2, 46],
                  60: [2, 46],
                },
                { 1: [3] },
                { 5: [1, 4] },
                {
                  5: [2, 2],
                  7: 5,
                  8: 6,
                  9: 7,
                  10: 8,
                  11: 9,
                  12: 10,
                  13: 11,
                  14: [1, 12],
                  15: [1, 20],
                  16: 17,
                  19: [1, 23],
                  24: 15,
                  27: 16,
                  29: [1, 21],
                  34: [1, 22],
                  39: [2, 2],
                  44: [2, 2],
                  47: [2, 2],
                  48: [1, 13],
                  51: [1, 14],
                  55: [1, 18],
                  59: 19,
                  60: [1, 24],
                },
                { 1: [2, 1] },
                {
                  5: [2, 47],
                  14: [2, 47],
                  15: [2, 47],
                  19: [2, 47],
                  29: [2, 47],
                  34: [2, 47],
                  39: [2, 47],
                  44: [2, 47],
                  47: [2, 47],
                  48: [2, 47],
                  51: [2, 47],
                  55: [2, 47],
                  60: [2, 47],
                },
                {
                  5: [2, 3],
                  14: [2, 3],
                  15: [2, 3],
                  19: [2, 3],
                  29: [2, 3],
                  34: [2, 3],
                  39: [2, 3],
                  44: [2, 3],
                  47: [2, 3],
                  48: [2, 3],
                  51: [2, 3],
                  55: [2, 3],
                  60: [2, 3],
                },
                {
                  5: [2, 4],
                  14: [2, 4],
                  15: [2, 4],
                  19: [2, 4],
                  29: [2, 4],
                  34: [2, 4],
                  39: [2, 4],
                  44: [2, 4],
                  47: [2, 4],
                  48: [2, 4],
                  51: [2, 4],
                  55: [2, 4],
                  60: [2, 4],
                },
                {
                  5: [2, 5],
                  14: [2, 5],
                  15: [2, 5],
                  19: [2, 5],
                  29: [2, 5],
                  34: [2, 5],
                  39: [2, 5],
                  44: [2, 5],
                  47: [2, 5],
                  48: [2, 5],
                  51: [2, 5],
                  55: [2, 5],
                  60: [2, 5],
                },
                {
                  5: [2, 6],
                  14: [2, 6],
                  15: [2, 6],
                  19: [2, 6],
                  29: [2, 6],
                  34: [2, 6],
                  39: [2, 6],
                  44: [2, 6],
                  47: [2, 6],
                  48: [2, 6],
                  51: [2, 6],
                  55: [2, 6],
                  60: [2, 6],
                },
                {
                  5: [2, 7],
                  14: [2, 7],
                  15: [2, 7],
                  19: [2, 7],
                  29: [2, 7],
                  34: [2, 7],
                  39: [2, 7],
                  44: [2, 7],
                  47: [2, 7],
                  48: [2, 7],
                  51: [2, 7],
                  55: [2, 7],
                  60: [2, 7],
                },
                {
                  5: [2, 8],
                  14: [2, 8],
                  15: [2, 8],
                  19: [2, 8],
                  29: [2, 8],
                  34: [2, 8],
                  39: [2, 8],
                  44: [2, 8],
                  47: [2, 8],
                  48: [2, 8],
                  51: [2, 8],
                  55: [2, 8],
                  60: [2, 8],
                },
                {
                  5: [2, 9],
                  14: [2, 9],
                  15: [2, 9],
                  19: [2, 9],
                  29: [2, 9],
                  34: [2, 9],
                  39: [2, 9],
                  44: [2, 9],
                  47: [2, 9],
                  48: [2, 9],
                  51: [2, 9],
                  55: [2, 9],
                  60: [2, 9],
                },
                {
                  20: 25,
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  20: 36,
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  4: 37,
                  6: 3,
                  14: [2, 46],
                  15: [2, 46],
                  19: [2, 46],
                  29: [2, 46],
                  34: [2, 46],
                  39: [2, 46],
                  44: [2, 46],
                  47: [2, 46],
                  48: [2, 46],
                  51: [2, 46],
                  55: [2, 46],
                  60: [2, 46],
                },
                {
                  4: 38,
                  6: 3,
                  14: [2, 46],
                  15: [2, 46],
                  19: [2, 46],
                  29: [2, 46],
                  34: [2, 46],
                  44: [2, 46],
                  47: [2, 46],
                  48: [2, 46],
                  51: [2, 46],
                  55: [2, 46],
                  60: [2, 46],
                },
                { 15: [2, 48], 17: 39, 18: [2, 48] },
                {
                  20: 41,
                  56: 40,
                  64: 42,
                  65: [1, 43],
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  4: 44,
                  6: 3,
                  14: [2, 46],
                  15: [2, 46],
                  19: [2, 46],
                  29: [2, 46],
                  34: [2, 46],
                  47: [2, 46],
                  48: [2, 46],
                  51: [2, 46],
                  55: [2, 46],
                  60: [2, 46],
                },
                {
                  5: [2, 10],
                  14: [2, 10],
                  15: [2, 10],
                  18: [2, 10],
                  19: [2, 10],
                  29: [2, 10],
                  34: [2, 10],
                  39: [2, 10],
                  44: [2, 10],
                  47: [2, 10],
                  48: [2, 10],
                  51: [2, 10],
                  55: [2, 10],
                  60: [2, 10],
                },
                {
                  20: 45,
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  20: 46,
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  20: 47,
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  20: 41,
                  56: 48,
                  64: 42,
                  65: [1, 43],
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  33: [2, 78],
                  49: 49,
                  65: [2, 78],
                  72: [2, 78],
                  80: [2, 78],
                  81: [2, 78],
                  82: [2, 78],
                  83: [2, 78],
                  84: [2, 78],
                  85: [2, 78],
                },
                {
                  23: [2, 33],
                  33: [2, 33],
                  54: [2, 33],
                  65: [2, 33],
                  68: [2, 33],
                  72: [2, 33],
                  75: [2, 33],
                  80: [2, 33],
                  81: [2, 33],
                  82: [2, 33],
                  83: [2, 33],
                  84: [2, 33],
                  85: [2, 33],
                },
                {
                  23: [2, 34],
                  33: [2, 34],
                  54: [2, 34],
                  65: [2, 34],
                  68: [2, 34],
                  72: [2, 34],
                  75: [2, 34],
                  80: [2, 34],
                  81: [2, 34],
                  82: [2, 34],
                  83: [2, 34],
                  84: [2, 34],
                  85: [2, 34],
                },
                {
                  23: [2, 35],
                  33: [2, 35],
                  54: [2, 35],
                  65: [2, 35],
                  68: [2, 35],
                  72: [2, 35],
                  75: [2, 35],
                  80: [2, 35],
                  81: [2, 35],
                  82: [2, 35],
                  83: [2, 35],
                  84: [2, 35],
                  85: [2, 35],
                },
                {
                  23: [2, 36],
                  33: [2, 36],
                  54: [2, 36],
                  65: [2, 36],
                  68: [2, 36],
                  72: [2, 36],
                  75: [2, 36],
                  80: [2, 36],
                  81: [2, 36],
                  82: [2, 36],
                  83: [2, 36],
                  84: [2, 36],
                  85: [2, 36],
                },
                {
                  23: [2, 37],
                  33: [2, 37],
                  54: [2, 37],
                  65: [2, 37],
                  68: [2, 37],
                  72: [2, 37],
                  75: [2, 37],
                  80: [2, 37],
                  81: [2, 37],
                  82: [2, 37],
                  83: [2, 37],
                  84: [2, 37],
                  85: [2, 37],
                },
                {
                  23: [2, 38],
                  33: [2, 38],
                  54: [2, 38],
                  65: [2, 38],
                  68: [2, 38],
                  72: [2, 38],
                  75: [2, 38],
                  80: [2, 38],
                  81: [2, 38],
                  82: [2, 38],
                  83: [2, 38],
                  84: [2, 38],
                  85: [2, 38],
                },
                {
                  23: [2, 39],
                  33: [2, 39],
                  54: [2, 39],
                  65: [2, 39],
                  68: [2, 39],
                  72: [2, 39],
                  75: [2, 39],
                  80: [2, 39],
                  81: [2, 39],
                  82: [2, 39],
                  83: [2, 39],
                  84: [2, 39],
                  85: [2, 39],
                },
                {
                  23: [2, 43],
                  33: [2, 43],
                  54: [2, 43],
                  65: [2, 43],
                  68: [2, 43],
                  72: [2, 43],
                  75: [2, 43],
                  80: [2, 43],
                  81: [2, 43],
                  82: [2, 43],
                  83: [2, 43],
                  84: [2, 43],
                  85: [2, 43],
                  87: [1, 50],
                },
                { 72: [1, 35], 86: 51 },
                {
                  23: [2, 45],
                  33: [2, 45],
                  54: [2, 45],
                  65: [2, 45],
                  68: [2, 45],
                  72: [2, 45],
                  75: [2, 45],
                  80: [2, 45],
                  81: [2, 45],
                  82: [2, 45],
                  83: [2, 45],
                  84: [2, 45],
                  85: [2, 45],
                  87: [2, 45],
                },
                {
                  52: 52,
                  54: [2, 82],
                  65: [2, 82],
                  72: [2, 82],
                  80: [2, 82],
                  81: [2, 82],
                  82: [2, 82],
                  83: [2, 82],
                  84: [2, 82],
                  85: [2, 82],
                },
                {
                  25: 53,
                  38: 55,
                  39: [1, 57],
                  43: 56,
                  44: [1, 58],
                  45: 54,
                  47: [2, 54],
                },
                { 28: 59, 43: 60, 44: [1, 58], 47: [2, 56] },
                { 13: 62, 15: [1, 20], 18: [1, 61] },
                {
                  33: [2, 86],
                  57: 63,
                  65: [2, 86],
                  72: [2, 86],
                  80: [2, 86],
                  81: [2, 86],
                  82: [2, 86],
                  83: [2, 86],
                  84: [2, 86],
                  85: [2, 86],
                },
                {
                  33: [2, 40],
                  65: [2, 40],
                  72: [2, 40],
                  80: [2, 40],
                  81: [2, 40],
                  82: [2, 40],
                  83: [2, 40],
                  84: [2, 40],
                  85: [2, 40],
                },
                {
                  33: [2, 41],
                  65: [2, 41],
                  72: [2, 41],
                  80: [2, 41],
                  81: [2, 41],
                  82: [2, 41],
                  83: [2, 41],
                  84: [2, 41],
                  85: [2, 41],
                },
                {
                  20: 64,
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                { 26: 65, 47: [1, 66] },
                {
                  30: 67,
                  33: [2, 58],
                  65: [2, 58],
                  72: [2, 58],
                  75: [2, 58],
                  80: [2, 58],
                  81: [2, 58],
                  82: [2, 58],
                  83: [2, 58],
                  84: [2, 58],
                  85: [2, 58],
                },
                {
                  33: [2, 64],
                  35: 68,
                  65: [2, 64],
                  72: [2, 64],
                  75: [2, 64],
                  80: [2, 64],
                  81: [2, 64],
                  82: [2, 64],
                  83: [2, 64],
                  84: [2, 64],
                  85: [2, 64],
                },
                {
                  21: 69,
                  23: [2, 50],
                  65: [2, 50],
                  72: [2, 50],
                  80: [2, 50],
                  81: [2, 50],
                  82: [2, 50],
                  83: [2, 50],
                  84: [2, 50],
                  85: [2, 50],
                },
                {
                  33: [2, 90],
                  61: 70,
                  65: [2, 90],
                  72: [2, 90],
                  80: [2, 90],
                  81: [2, 90],
                  82: [2, 90],
                  83: [2, 90],
                  84: [2, 90],
                  85: [2, 90],
                },
                {
                  20: 74,
                  33: [2, 80],
                  50: 71,
                  63: 72,
                  64: 75,
                  65: [1, 43],
                  69: 73,
                  70: 76,
                  71: 77,
                  72: [1, 78],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                { 72: [1, 79] },
                {
                  23: [2, 42],
                  33: [2, 42],
                  54: [2, 42],
                  65: [2, 42],
                  68: [2, 42],
                  72: [2, 42],
                  75: [2, 42],
                  80: [2, 42],
                  81: [2, 42],
                  82: [2, 42],
                  83: [2, 42],
                  84: [2, 42],
                  85: [2, 42],
                  87: [1, 50],
                },
                {
                  20: 74,
                  53: 80,
                  54: [2, 84],
                  63: 81,
                  64: 75,
                  65: [1, 43],
                  69: 82,
                  70: 76,
                  71: 77,
                  72: [1, 78],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                { 26: 83, 47: [1, 66] },
                { 47: [2, 55] },
                {
                  4: 84,
                  6: 3,
                  14: [2, 46],
                  15: [2, 46],
                  19: [2, 46],
                  29: [2, 46],
                  34: [2, 46],
                  39: [2, 46],
                  44: [2, 46],
                  47: [2, 46],
                  48: [2, 46],
                  51: [2, 46],
                  55: [2, 46],
                  60: [2, 46],
                },
                { 47: [2, 20] },
                {
                  20: 85,
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  4: 86,
                  6: 3,
                  14: [2, 46],
                  15: [2, 46],
                  19: [2, 46],
                  29: [2, 46],
                  34: [2, 46],
                  47: [2, 46],
                  48: [2, 46],
                  51: [2, 46],
                  55: [2, 46],
                  60: [2, 46],
                },
                { 26: 87, 47: [1, 66] },
                { 47: [2, 57] },
                {
                  5: [2, 11],
                  14: [2, 11],
                  15: [2, 11],
                  19: [2, 11],
                  29: [2, 11],
                  34: [2, 11],
                  39: [2, 11],
                  44: [2, 11],
                  47: [2, 11],
                  48: [2, 11],
                  51: [2, 11],
                  55: [2, 11],
                  60: [2, 11],
                },
                { 15: [2, 49], 18: [2, 49] },
                {
                  20: 74,
                  33: [2, 88],
                  58: 88,
                  63: 89,
                  64: 75,
                  65: [1, 43],
                  69: 90,
                  70: 76,
                  71: 77,
                  72: [1, 78],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  65: [2, 94],
                  66: 91,
                  68: [2, 94],
                  72: [2, 94],
                  80: [2, 94],
                  81: [2, 94],
                  82: [2, 94],
                  83: [2, 94],
                  84: [2, 94],
                  85: [2, 94],
                },
                {
                  5: [2, 25],
                  14: [2, 25],
                  15: [2, 25],
                  19: [2, 25],
                  29: [2, 25],
                  34: [2, 25],
                  39: [2, 25],
                  44: [2, 25],
                  47: [2, 25],
                  48: [2, 25],
                  51: [2, 25],
                  55: [2, 25],
                  60: [2, 25],
                },
                {
                  20: 92,
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  20: 74,
                  31: 93,
                  33: [2, 60],
                  63: 94,
                  64: 75,
                  65: [1, 43],
                  69: 95,
                  70: 76,
                  71: 77,
                  72: [1, 78],
                  75: [2, 60],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  20: 74,
                  33: [2, 66],
                  36: 96,
                  63: 97,
                  64: 75,
                  65: [1, 43],
                  69: 98,
                  70: 76,
                  71: 77,
                  72: [1, 78],
                  75: [2, 66],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  20: 74,
                  22: 99,
                  23: [2, 52],
                  63: 100,
                  64: 75,
                  65: [1, 43],
                  69: 101,
                  70: 76,
                  71: 77,
                  72: [1, 78],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  20: 74,
                  33: [2, 92],
                  62: 102,
                  63: 103,
                  64: 75,
                  65: [1, 43],
                  69: 104,
                  70: 76,
                  71: 77,
                  72: [1, 78],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                { 33: [1, 105] },
                {
                  33: [2, 79],
                  65: [2, 79],
                  72: [2, 79],
                  80: [2, 79],
                  81: [2, 79],
                  82: [2, 79],
                  83: [2, 79],
                  84: [2, 79],
                  85: [2, 79],
                },
                { 33: [2, 81] },
                {
                  23: [2, 27],
                  33: [2, 27],
                  54: [2, 27],
                  65: [2, 27],
                  68: [2, 27],
                  72: [2, 27],
                  75: [2, 27],
                  80: [2, 27],
                  81: [2, 27],
                  82: [2, 27],
                  83: [2, 27],
                  84: [2, 27],
                  85: [2, 27],
                },
                {
                  23: [2, 28],
                  33: [2, 28],
                  54: [2, 28],
                  65: [2, 28],
                  68: [2, 28],
                  72: [2, 28],
                  75: [2, 28],
                  80: [2, 28],
                  81: [2, 28],
                  82: [2, 28],
                  83: [2, 28],
                  84: [2, 28],
                  85: [2, 28],
                },
                {
                  23: [2, 30],
                  33: [2, 30],
                  54: [2, 30],
                  68: [2, 30],
                  71: 106,
                  72: [1, 107],
                  75: [2, 30],
                },
                {
                  23: [2, 98],
                  33: [2, 98],
                  54: [2, 98],
                  68: [2, 98],
                  72: [2, 98],
                  75: [2, 98],
                },
                {
                  23: [2, 45],
                  33: [2, 45],
                  54: [2, 45],
                  65: [2, 45],
                  68: [2, 45],
                  72: [2, 45],
                  73: [1, 108],
                  75: [2, 45],
                  80: [2, 45],
                  81: [2, 45],
                  82: [2, 45],
                  83: [2, 45],
                  84: [2, 45],
                  85: [2, 45],
                  87: [2, 45],
                },
                {
                  23: [2, 44],
                  33: [2, 44],
                  54: [2, 44],
                  65: [2, 44],
                  68: [2, 44],
                  72: [2, 44],
                  75: [2, 44],
                  80: [2, 44],
                  81: [2, 44],
                  82: [2, 44],
                  83: [2, 44],
                  84: [2, 44],
                  85: [2, 44],
                  87: [2, 44],
                },
                { 54: [1, 109] },
                {
                  54: [2, 83],
                  65: [2, 83],
                  72: [2, 83],
                  80: [2, 83],
                  81: [2, 83],
                  82: [2, 83],
                  83: [2, 83],
                  84: [2, 83],
                  85: [2, 83],
                },
                { 54: [2, 85] },
                {
                  5: [2, 13],
                  14: [2, 13],
                  15: [2, 13],
                  19: [2, 13],
                  29: [2, 13],
                  34: [2, 13],
                  39: [2, 13],
                  44: [2, 13],
                  47: [2, 13],
                  48: [2, 13],
                  51: [2, 13],
                  55: [2, 13],
                  60: [2, 13],
                },
                {
                  38: 55,
                  39: [1, 57],
                  43: 56,
                  44: [1, 58],
                  45: 111,
                  46: 110,
                  47: [2, 76],
                },
                {
                  33: [2, 70],
                  40: 112,
                  65: [2, 70],
                  72: [2, 70],
                  75: [2, 70],
                  80: [2, 70],
                  81: [2, 70],
                  82: [2, 70],
                  83: [2, 70],
                  84: [2, 70],
                  85: [2, 70],
                },
                { 47: [2, 18] },
                {
                  5: [2, 14],
                  14: [2, 14],
                  15: [2, 14],
                  19: [2, 14],
                  29: [2, 14],
                  34: [2, 14],
                  39: [2, 14],
                  44: [2, 14],
                  47: [2, 14],
                  48: [2, 14],
                  51: [2, 14],
                  55: [2, 14],
                  60: [2, 14],
                },
                { 33: [1, 113] },
                {
                  33: [2, 87],
                  65: [2, 87],
                  72: [2, 87],
                  80: [2, 87],
                  81: [2, 87],
                  82: [2, 87],
                  83: [2, 87],
                  84: [2, 87],
                  85: [2, 87],
                },
                { 33: [2, 89] },
                {
                  20: 74,
                  63: 115,
                  64: 75,
                  65: [1, 43],
                  67: 114,
                  68: [2, 96],
                  69: 116,
                  70: 76,
                  71: 77,
                  72: [1, 78],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                { 33: [1, 117] },
                { 32: 118, 33: [2, 62], 74: 119, 75: [1, 120] },
                {
                  33: [2, 59],
                  65: [2, 59],
                  72: [2, 59],
                  75: [2, 59],
                  80: [2, 59],
                  81: [2, 59],
                  82: [2, 59],
                  83: [2, 59],
                  84: [2, 59],
                  85: [2, 59],
                },
                { 33: [2, 61], 75: [2, 61] },
                { 33: [2, 68], 37: 121, 74: 122, 75: [1, 120] },
                {
                  33: [2, 65],
                  65: [2, 65],
                  72: [2, 65],
                  75: [2, 65],
                  80: [2, 65],
                  81: [2, 65],
                  82: [2, 65],
                  83: [2, 65],
                  84: [2, 65],
                  85: [2, 65],
                },
                { 33: [2, 67], 75: [2, 67] },
                { 23: [1, 123] },
                {
                  23: [2, 51],
                  65: [2, 51],
                  72: [2, 51],
                  80: [2, 51],
                  81: [2, 51],
                  82: [2, 51],
                  83: [2, 51],
                  84: [2, 51],
                  85: [2, 51],
                },
                { 23: [2, 53] },
                { 33: [1, 124] },
                {
                  33: [2, 91],
                  65: [2, 91],
                  72: [2, 91],
                  80: [2, 91],
                  81: [2, 91],
                  82: [2, 91],
                  83: [2, 91],
                  84: [2, 91],
                  85: [2, 91],
                },
                { 33: [2, 93] },
                {
                  5: [2, 22],
                  14: [2, 22],
                  15: [2, 22],
                  19: [2, 22],
                  29: [2, 22],
                  34: [2, 22],
                  39: [2, 22],
                  44: [2, 22],
                  47: [2, 22],
                  48: [2, 22],
                  51: [2, 22],
                  55: [2, 22],
                  60: [2, 22],
                },
                {
                  23: [2, 99],
                  33: [2, 99],
                  54: [2, 99],
                  68: [2, 99],
                  72: [2, 99],
                  75: [2, 99],
                },
                { 73: [1, 108] },
                {
                  20: 74,
                  63: 125,
                  64: 75,
                  65: [1, 43],
                  72: [1, 35],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  5: [2, 23],
                  14: [2, 23],
                  15: [2, 23],
                  19: [2, 23],
                  29: [2, 23],
                  34: [2, 23],
                  39: [2, 23],
                  44: [2, 23],
                  47: [2, 23],
                  48: [2, 23],
                  51: [2, 23],
                  55: [2, 23],
                  60: [2, 23],
                },
                { 47: [2, 19] },
                { 47: [2, 77] },
                {
                  20: 74,
                  33: [2, 72],
                  41: 126,
                  63: 127,
                  64: 75,
                  65: [1, 43],
                  69: 128,
                  70: 76,
                  71: 77,
                  72: [1, 78],
                  75: [2, 72],
                  78: 26,
                  79: 27,
                  80: [1, 28],
                  81: [1, 29],
                  82: [1, 30],
                  83: [1, 31],
                  84: [1, 32],
                  85: [1, 34],
                  86: 33,
                },
                {
                  5: [2, 24],
                  14: [2, 24],
                  15: [2, 24],
                  19: [2, 24],
                  29: [2, 24],
                  34: [2, 24],
                  39: [2, 24],
                  44: [2, 24],
                  47: [2, 24],
                  48: [2, 24],
                  51: [2, 24],
                  55: [2, 24],
                  60: [2, 24],
                },
                { 68: [1, 129] },
                {
                  65: [2, 95],
                  68: [2, 95],
                  72: [2, 95],
                  80: [2, 95],
                  81: [2, 95],
                  82: [2, 95],
                  83: [2, 95],
                  84: [2, 95],
                  85: [2, 95],
                },
                { 68: [2, 97] },
                {
                  5: [2, 21],
                  14: [2, 21],
                  15: [2, 21],
                  19: [2, 21],
                  29: [2, 21],
                  34: [2, 21],
                  39: [2, 21],
                  44: [2, 21],
                  47: [2, 21],
                  48: [2, 21],
                  51: [2, 21],
                  55: [2, 21],
                  60: [2, 21],
                },
                { 33: [1, 130] },
                { 33: [2, 63] },
                { 72: [1, 132], 76: 131 },
                { 33: [1, 133] },
                { 33: [2, 69] },
                { 15: [2, 12], 18: [2, 12] },
                {
                  14: [2, 26],
                  15: [2, 26],
                  19: [2, 26],
                  29: [2, 26],
                  34: [2, 26],
                  47: [2, 26],
                  48: [2, 26],
                  51: [2, 26],
                  55: [2, 26],
                  60: [2, 26],
                },
                {
                  23: [2, 31],
                  33: [2, 31],
                  54: [2, 31],
                  68: [2, 31],
                  72: [2, 31],
                  75: [2, 31],
                },
                { 33: [2, 74], 42: 134, 74: 135, 75: [1, 120] },
                {
                  33: [2, 71],
                  65: [2, 71],
                  72: [2, 71],
                  75: [2, 71],
                  80: [2, 71],
                  81: [2, 71],
                  82: [2, 71],
                  83: [2, 71],
                  84: [2, 71],
                  85: [2, 71],
                },
                { 33: [2, 73], 75: [2, 73] },
                {
                  23: [2, 29],
                  33: [2, 29],
                  54: [2, 29],
                  65: [2, 29],
                  68: [2, 29],
                  72: [2, 29],
                  75: [2, 29],
                  80: [2, 29],
                  81: [2, 29],
                  82: [2, 29],
                  83: [2, 29],
                  84: [2, 29],
                  85: [2, 29],
                },
                {
                  14: [2, 15],
                  15: [2, 15],
                  19: [2, 15],
                  29: [2, 15],
                  34: [2, 15],
                  39: [2, 15],
                  44: [2, 15],
                  47: [2, 15],
                  48: [2, 15],
                  51: [2, 15],
                  55: [2, 15],
                  60: [2, 15],
                },
                { 72: [1, 137], 77: [1, 136] },
                { 72: [2, 100], 77: [2, 100] },
                {
                  14: [2, 16],
                  15: [2, 16],
                  19: [2, 16],
                  29: [2, 16],
                  34: [2, 16],
                  44: [2, 16],
                  47: [2, 16],
                  48: [2, 16],
                  51: [2, 16],
                  55: [2, 16],
                  60: [2, 16],
                },
                { 33: [1, 138] },
                { 33: [2, 75] },
                { 33: [2, 32] },
                { 72: [2, 101], 77: [2, 101] },
                {
                  14: [2, 17],
                  15: [2, 17],
                  19: [2, 17],
                  29: [2, 17],
                  34: [2, 17],
                  39: [2, 17],
                  44: [2, 17],
                  47: [2, 17],
                  48: [2, 17],
                  51: [2, 17],
                  55: [2, 17],
                  60: [2, 17],
                },
              ],
              defaultActions: {
                4: [2, 1],
                54: [2, 55],
                56: [2, 20],
                60: [2, 57],
                73: [2, 81],
                82: [2, 85],
                86: [2, 18],
                90: [2, 89],
                101: [2, 53],
                104: [2, 93],
                110: [2, 19],
                111: [2, 77],
                116: [2, 97],
                119: [2, 63],
                122: [2, 69],
                135: [2, 75],
                136: [2, 32],
              },
              parseError: function (e, t) {
                throw new Error(e);
              },
              parse: function (e) {
                var t = this,
                  n = [0],
                  r = [null],
                  i = [],
                  s = this.table,
                  o = "",
                  a = 0,
                  c = 0,
                  l = 0;
                this.lexer.setInput(e),
                  (this.lexer.yy = this.yy),
                  (this.yy.lexer = this.lexer),
                  (this.yy.parser = this),
                  void 0 === this.lexer.yylloc && (this.lexer.yylloc = {});
                var u = this.lexer.yylloc;
                i.push(u);
                var h = this.lexer.options && this.lexer.options.ranges;
                "function" == typeof this.yy.parseError &&
                  (this.parseError = this.yy.parseError);
                for (var d, p, f, m, g, v, y, _, b, w, S = {}; ; ) {
                  if (
                    ((f = n[n.length - 1]),
                    this.defaultActions[f]
                      ? (m = this.defaultActions[f])
                      : (null == d &&
                          ((w = void 0),
                          "number" != typeof (w = t.lexer.lex() || 1) &&
                            (w = t.symbols_[w] || w),
                          (d = w)),
                        (m = s[f] && s[f][d])),
                    void 0 === m || !m.length || !m[0])
                  ) {
                    var E = "";
                    if (!l) {
                      for (v in ((b = []), s[f]))
                        this.terminals_[v] &&
                          v > 2 &&
                          b.push("'" + this.terminals_[v] + "'");
                      (E = this.lexer.showPosition
                        ? "Parse error on line " +
                          (a + 1) +
                          ":\n" +
                          this.lexer.showPosition() +
                          "\nExpecting " +
                          b.join(", ") +
                          ", got '" +
                          (this.terminals_[d] || d) +
                          "'"
                        : "Parse error on line " +
                          (a + 1) +
                          ": Unexpected " +
                          (1 == d
                            ? "end of input"
                            : "'" + (this.terminals_[d] || d) + "'")),
                        this.parseError(E, {
                          text: this.lexer.match,
                          token: this.terminals_[d] || d,
                          line: this.lexer.yylineno,
                          loc: u,
                          expected: b,
                        });
                    }
                  }
                  if (m[0] instanceof Array && m.length > 1)
                    throw new Error(
                      "Parse Error: multiple actions possible at state: " +
                        f +
                        ", token: " +
                        d
                    );
                  switch (m[0]) {
                    case 1:
                      n.push(d),
                        r.push(this.lexer.yytext),
                        i.push(this.lexer.yylloc),
                        n.push(m[1]),
                        (d = null),
                        p
                          ? ((d = p), (p = null))
                          : ((c = this.lexer.yyleng),
                            (o = this.lexer.yytext),
                            (a = this.lexer.yylineno),
                            (u = this.lexer.yylloc),
                            l > 0 && l--);
                      break;
                    case 2:
                      if (
                        ((y = this.productions_[m[1]][1]),
                        (S.$ = r[r.length - y]),
                        (S._$ = {
                          first_line: i[i.length - (y || 1)].first_line,
                          last_line: i[i.length - 1].last_line,
                          first_column: i[i.length - (y || 1)].first_column,
                          last_column: i[i.length - 1].last_column,
                        }),
                        h &&
                          (S._$.range = [
                            i[i.length - (y || 1)].range[0],
                            i[i.length - 1].range[1],
                          ]),
                        void 0 !==
                          (g = this.performAction.call(
                            S,
                            o,
                            c,
                            a,
                            this.yy,
                            m[1],
                            r,
                            i
                          )))
                      )
                        return g;
                      y &&
                        ((n = n.slice(0, -1 * y * 2)),
                        (r = r.slice(0, -1 * y)),
                        (i = i.slice(0, -1 * y))),
                        n.push(this.productions_[m[1]][0]),
                        r.push(S.$),
                        i.push(S._$),
                        (_ = s[n[n.length - 2]][n[n.length - 1]]),
                        n.push(_);
                      break;
                    case 3:
                      return !0;
                  }
                }
                return !0;
              },
            },
            t = (function () {
              var e = {
                EOF: 1,
                parseError: function (e, t) {
                  if (!this.yy.parser) throw new Error(e);
                  this.yy.parser.parseError(e, t);
                },
                setInput: function (e) {
                  return (
                    (this._input = e),
                    (this._more = this._less = this.done = !1),
                    (this.yylineno = this.yyleng = 0),
                    (this.yytext = this.matched = this.match = ""),
                    (this.conditionStack = ["INITIAL"]),
                    (this.yylloc = {
                      first_line: 1,
                      first_column: 0,
                      last_line: 1,
                      last_column: 0,
                    }),
                    this.options.ranges && (this.yylloc.range = [0, 0]),
                    (this.offset = 0),
                    this
                  );
                },
                input: function () {
                  var e = this._input[0];
                  return (
                    (this.yytext += e),
                    this.yyleng++,
                    this.offset++,
                    (this.match += e),
                    (this.matched += e),
                    e.match(/(?:\r\n?|\n).*/g)
                      ? (this.yylineno++, this.yylloc.last_line++)
                      : this.yylloc.last_column++,
                    this.options.ranges && this.yylloc.range[1]++,
                    (this._input = this._input.slice(1)),
                    e
                  );
                },
                unput: function (e) {
                  var t = e.length,
                    n = e.split(/(?:\r\n?|\n)/g);
                  (this._input = e + this._input),
                    (this.yytext = this.yytext.substr(
                      0,
                      this.yytext.length - t - 1
                    )),
                    (this.offset -= t);
                  var r = this.match.split(/(?:\r\n?|\n)/g);
                  (this.match = this.match.substr(0, this.match.length - 1)),
                    (this.matched = this.matched.substr(
                      0,
                      this.matched.length - 1
                    )),
                    n.length - 1 && (this.yylineno -= n.length - 1);
                  var i = this.yylloc.range;
                  return (
                    (this.yylloc = {
                      first_line: this.yylloc.first_line,
                      last_line: this.yylineno + 1,
                      first_column: this.yylloc.first_column,
                      last_column: n
                        ? (n.length === r.length
                            ? this.yylloc.first_column
                            : 0) +
                          r[r.length - n.length].length -
                          n[0].length
                        : this.yylloc.first_column - t,
                    }),
                    this.options.ranges &&
                      (this.yylloc.range = [i[0], i[0] + this.yyleng - t]),
                    this
                  );
                },
                more: function () {
                  return (this._more = !0), this;
                },
                less: function (e) {
                  this.unput(this.match.slice(e));
                },
                pastInput: function () {
                  var e = this.matched.substr(
                    0,
                    this.matched.length - this.match.length
                  );
                  return (
                    (e.length > 20 ? "..." : "") +
                    e.substr(-20).replace(/\n/g, "")
                  );
                },
                upcomingInput: function () {
                  var e = this.match;
                  return (
                    e.length < 20 &&
                      (e += this._input.substr(0, 20 - e.length)),
                    (e.substr(0, 20) + (e.length > 20 ? "..." : "")).replace(
                      /\n/g,
                      ""
                    )
                  );
                },
                showPosition: function () {
                  var e = this.pastInput(),
                    t = new Array(e.length + 1).join("-");
                  return e + this.upcomingInput() + "\n" + t + "^";
                },
                next: function () {
                  if (this.done) return this.EOF;
                  var e, t, n, r, i;
                  this._input || (this.done = !0),
                    this._more || ((this.yytext = ""), (this.match = ""));
                  for (
                    var s = this._currentRules(), o = 0;
                    o < s.length &&
                    (!(n = this._input.match(this.rules[s[o]])) ||
                      (t && !(n[0].length > t[0].length)) ||
                      ((t = n), (r = o), this.options.flex));
                    o++
                  );
                  return t
                    ? ((i = t[0].match(/(?:\r\n?|\n).*/g)) &&
                        (this.yylineno += i.length),
                      (this.yylloc = {
                        first_line: this.yylloc.last_line,
                        last_line: this.yylineno + 1,
                        first_column: this.yylloc.last_column,
                        last_column: i
                          ? i[i.length - 1].length -
                            i[i.length - 1].match(/\r?\n?/)[0].length
                          : this.yylloc.last_column + t[0].length,
                      }),
                      (this.yytext += t[0]),
                      (this.match += t[0]),
                      (this.matches = t),
                      (this.yyleng = this.yytext.length),
                      this.options.ranges &&
                        (this.yylloc.range = [
                          this.offset,
                          (this.offset += this.yyleng),
                        ]),
                      (this._more = !1),
                      (this._input = this._input.slice(t[0].length)),
                      (this.matched += t[0]),
                      (e = this.performAction.call(
                        this,
                        this.yy,
                        this,
                        s[r],
                        this.conditionStack[this.conditionStack.length - 1]
                      )),
                      this.done && this._input && (this.done = !1),
                      e || void 0)
                    : "" === this._input
                    ? this.EOF
                    : this.parseError(
                        "Lexical error on line " +
                          (this.yylineno + 1) +
                          ". Unrecognized text.\n" +
                          this.showPosition(),
                        { text: "", token: null, line: this.yylineno }
                      );
                },
                lex: function () {
                  var e = this.next();
                  return void 0 !== e ? e : this.lex();
                },
                begin: function (e) {
                  this.conditionStack.push(e);
                },
                popState: function () {
                  return this.conditionStack.pop();
                },
                _currentRules: function () {
                  return this.conditions[
                    this.conditionStack[this.conditionStack.length - 1]
                  ].rules;
                },
                topState: function () {
                  return this.conditionStack[this.conditionStack.length - 2];
                },
                pushState: function (e) {
                  this.begin(e);
                },
                options: {},
                performAction: function (e, t, n, r) {
                  function i(e, n) {
                    return (t.yytext = t.yytext.substring(e, t.yyleng - n + e));
                  }
                  switch (n) {
                    case 0:
                      if (
                        ("\\\\" === t.yytext.slice(-2)
                          ? (i(0, 1), this.begin("mu"))
                          : "\\" === t.yytext.slice(-1)
                          ? (i(0, 1), this.begin("emu"))
                          : this.begin("mu"),
                        t.yytext)
                      )
                        return 15;
                      break;
                    case 1:
                    case 5:
                      return 15;
                    case 2:
                      return this.popState(), 15;
                    case 3:
                      return this.begin("raw"), 15;
                    case 4:
                      return (
                        this.popState(),
                        "raw" ===
                        this.conditionStack[this.conditionStack.length - 1]
                          ? 15
                          : (i(5, 9), "END_RAW_BLOCK")
                      );
                    case 6:
                    case 22:
                      return this.popState(), 14;
                    case 7:
                      return 65;
                    case 8:
                      return 68;
                    case 9:
                      return 19;
                    case 10:
                      return this.popState(), this.begin("raw"), 23;
                    case 11:
                      return 55;
                    case 12:
                      return 60;
                    case 13:
                      return 29;
                    case 14:
                      return 47;
                    case 15:
                    case 16:
                      return this.popState(), 44;
                    case 17:
                      return 34;
                    case 18:
                      return 39;
                    case 19:
                      return 51;
                    case 20:
                    case 23:
                      return 48;
                    case 21:
                      this.unput(t.yytext), this.popState(), this.begin("com");
                      break;
                    case 24:
                      return 73;
                    case 25:
                    case 26:
                    case 41:
                      return 72;
                    case 27:
                      return 87;
                    case 28:
                      break;
                    case 29:
                      return this.popState(), 54;
                    case 30:
                      return this.popState(), 33;
                    case 31:
                      return (t.yytext = i(1, 2).replace(/\\"/g, '"')), 80;
                    case 32:
                      return (t.yytext = i(1, 2).replace(/\\'/g, "'")), 80;
                    case 33:
                      return 85;
                    case 34:
                    case 35:
                      return 82;
                    case 36:
                      return 83;
                    case 37:
                      return 84;
                    case 38:
                      return 81;
                    case 39:
                      return 75;
                    case 40:
                      return 77;
                    case 42:
                      return (
                        (t.yytext = t.yytext.replace(/\\([\\\]])/g, "$1")), 72
                      );
                    case 43:
                      return "INVALID";
                    case 44:
                      return 5;
                  }
                },
                rules: [
                  /^(?:[^\x00]*?(?=(\{\{)))/,
                  /^(?:[^\x00]+)/,
                  /^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,
                  /^(?:\{\{\{\{(?=[^/]))/,
                  /^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,
                  /^(?:[^\x00]+?(?=(\{\{\{\{)))/,
                  /^(?:[\s\S]*?--(~)?\}\})/,
                  /^(?:\()/,
                  /^(?:\))/,
                  /^(?:\{\{\{\{)/,
                  /^(?:\}\}\}\})/,
                  /^(?:\{\{(~)?>)/,
                  /^(?:\{\{(~)?#>)/,
                  /^(?:\{\{(~)?#\*?)/,
                  /^(?:\{\{(~)?\/)/,
                  /^(?:\{\{(~)?\^\s*(~)?\}\})/,
                  /^(?:\{\{(~)?\s*else\s*(~)?\}\})/,
                  /^(?:\{\{(~)?\^)/,
                  /^(?:\{\{(~)?\s*else\b)/,
                  /^(?:\{\{(~)?\{)/,
                  /^(?:\{\{(~)?&)/,
                  /^(?:\{\{(~)?!--)/,
                  /^(?:\{\{(~)?![\s\S]*?\}\})/,
                  /^(?:\{\{(~)?\*?)/,
                  /^(?:=)/,
                  /^(?:\.\.)/,
                  /^(?:\.(?=([=~}\s\/.)|])))/,
                  /^(?:[\/.])/,
                  /^(?:\s+)/,
                  /^(?:\}(~)?\}\})/,
                  /^(?:(~)?\}\})/,
                  /^(?:"(\\["]|[^"])*")/,
                  /^(?:'(\\[']|[^'])*')/,
                  /^(?:@)/,
                  /^(?:true(?=([~}\s)])))/,
                  /^(?:false(?=([~}\s)])))/,
                  /^(?:undefined(?=([~}\s)])))/,
                  /^(?:null(?=([~}\s)])))/,
                  /^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,
                  /^(?:as\s+\|)/,
                  /^(?:\|)/,
                  /^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,
                  /^(?:\[(\\\]|[^\]])*\])/,
                  /^(?:.)/,
                  /^(?:$)/,
                ],
                conditions: {
                  mu: {
                    rules: [
                      7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,
                      22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,
                      36, 37, 38, 39, 40, 41, 42, 43, 44,
                    ],
                    inclusive: !1,
                  },
                  emu: { rules: [2], inclusive: !1 },
                  com: { rules: [6], inclusive: !1 },
                  raw: { rules: [3, 4, 5], inclusive: !1 },
                  INITIAL: { rules: [0, 1, 44], inclusive: !0 },
                },
              };
              return e;
            })();
          function n() {
            this.yy = {};
          }
          return (e.lexer = t), (n.prototype = e), (e.Parser = n), new n();
        })();
        (t.default = n), (e.exports = t.default);
      },
      261: function (e, t, n) {
        function r(e) {
          return e && e.__esModule ? e : { default: e };
        }
        function i(e) {
          if (e && e.__esModule) return e;
          var t = {};
          if (null != e)
            for (var n in e)
              Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
          return (t.default = e), t;
        }
        t.__esModule = !0;
        var s = i(n(871)),
          o = r(n(613)),
          a = r(n(769)),
          c = i(n(849)),
          l = i(n(624)),
          u = r(n(148));
        function h() {
          var e = new s.HandlebarsEnvironment();
          return (
            c.extend(e, s),
            (e.SafeString = o.default),
            (e.Exception = a.default),
            (e.Utils = c),
            (e.escapeExpression = c.escapeExpression),
            (e.VM = l),
            (e.template = function (t) {
              return l.template(t, e);
            }),
            e
          );
        }
        var d = h();
        (d.create = h),
          u.default(d),
          (d.default = d),
          (t.default = d),
          (e.exports = t.default);
      },
      277: function (e, t, n) {
        function r(e) {
          return e && e.__esModule ? e : { default: e };
        }
        (t.__esModule = !0),
          (t.registerDefaultHelpers = function (e) {
            i.default(e),
              s.default(e),
              o.default(e),
              a.default(e),
              c.default(e),
              l.default(e),
              u.default(e);
          }),
          (t.moveHelperToHooks = function (e, t, n) {
            e.helpers[t] &&
              ((e.hooks[t] = e.helpers[t]), n || delete e.helpers[t]);
          });
        var i = r(n(97)),
          s = r(n(785)),
          o = r(n(353)),
          a = r(n(355)),
          c = r(n(300)),
          l = r(n(466)),
          u = r(n(908));
      },
      300: function (e, t) {
        (t.__esModule = !0),
          (t.default = function (e) {
            e.registerHelper("log", function () {
              for (
                var t = [void 0], n = arguments[arguments.length - 1], r = 0;
                r < arguments.length - 1;
                r++
              )
                t.push(arguments[r]);
              var i = 1;
              null != n.hash.level
                ? (i = n.hash.level)
                : n.data && null != n.data.level && (i = n.data.level),
                (t[0] = i),
                e.log.apply(e, t);
            });
          }),
          (e.exports = t.default);
      },
      350: function (e, t, n) {
        t.__esModule = !0;
        var r,
          i = n(769),
          s = (r = i) && r.__esModule ? r : { default: r };
        function o() {
          this.parents = [];
        }
        function a(e) {
          this.acceptRequired(e, "path"),
            this.acceptArray(e.params),
            this.acceptKey(e, "hash");
        }
        function c(e) {
          a.call(this, e),
            this.acceptKey(e, "program"),
            this.acceptKey(e, "inverse");
        }
        function l(e) {
          this.acceptRequired(e, "name"),
            this.acceptArray(e.params),
            this.acceptKey(e, "hash");
        }
        (o.prototype = {
          constructor: o,
          mutating: !1,
          acceptKey: function (e, t) {
            var n = this.accept(e[t]);
            if (this.mutating) {
              if (n && !o.prototype[n.type])
                throw new s.default(
                  'Unexpected node type "' +
                    n.type +
                    '" found when accepting ' +
                    t +
                    " on " +
                    e.type
                );
              e[t] = n;
            }
          },
          acceptRequired: function (e, t) {
            if ((this.acceptKey(e, t), !e[t]))
              throw new s.default(e.type + " requires " + t);
          },
          acceptArray: function (e) {
            for (var t = 0, n = e.length; t < n; t++)
              this.acceptKey(e, t), e[t] || (e.splice(t, 1), t--, n--);
          },
          accept: function (e) {
            if (e) {
              if (!this[e.type])
                throw new s.default("Unknown type: " + e.type, e);
              this.current && this.parents.unshift(this.current),
                (this.current = e);
              var t = this[e.type](e);
              return (
                (this.current = this.parents.shift()),
                !this.mutating || t ? t : !1 !== t ? e : void 0
              );
            }
          },
          Program: function (e) {
            this.acceptArray(e.body);
          },
          MustacheStatement: a,
          Decorator: a,
          BlockStatement: c,
          DecoratorBlock: c,
          PartialStatement: l,
          PartialBlockStatement: function (e) {
            l.call(this, e), this.acceptKey(e, "program");
          },
          ContentStatement: function () {},
          CommentStatement: function () {},
          SubExpression: a,
          PathExpression: function () {},
          StringLiteral: function () {},
          NumberLiteral: function () {},
          BooleanLiteral: function () {},
          UndefinedLiteral: function () {},
          NullLiteral: function () {},
          Hash: function (e) {
            this.acceptArray(e.pairs);
          },
          HashPair: function (e) {
            this.acceptRequired(e, "value");
          },
        }),
          (t.default = o),
          (e.exports = t.default);
      },
      353: function (e, t, n) {
        t.__esModule = !0;
        var r,
          i = n(769),
          s = (r = i) && r.__esModule ? r : { default: r };
        (t.default = function (e) {
          e.registerHelper("helperMissing", function () {
            if (1 !== arguments.length)
              throw new s.default(
                'Missing helper: "' + arguments[arguments.length - 1].name + '"'
              );
          });
        }),
          (e.exports = t.default);
      },
      355: function (e, t, n) {
        t.__esModule = !0;
        var r,
          i = n(849),
          s = n(769),
          o = (r = s) && r.__esModule ? r : { default: r };
        (t.default = function (e) {
          e.registerHelper("if", function (e, t) {
            if (2 != arguments.length)
              throw new o.default("#if requires exactly one argument");
            return (
              i.isFunction(e) && (e = e.call(this)),
              (!t.hash.includeZero && !e) || i.isEmpty(e)
                ? t.inverse(this)
                : t.fn(this)
            );
          }),
            e.registerHelper("unless", function (t, n) {
              if (2 != arguments.length)
                throw new o.default("#unless requires exactly one argument");
              return e.helpers.if.call(this, t, {
                fn: n.inverse,
                inverse: n.fn,
                hash: n.hash,
              });
            });
        }),
          (e.exports = t.default);
      },
      425: function (e, t, n) {
        (t.__esModule = !0),
          (t.SourceLocation = function (e, t) {
            (this.source = e),
              (this.start = { line: t.first_line, column: t.first_column }),
              (this.end = { line: t.last_line, column: t.last_column });
          }),
          (t.id = function (e) {
            return /^\[.*\]$/.test(e) ? e.substring(1, e.length - 1) : e;
          }),
          (t.stripFlags = function (e, t) {
            return {
              open: "~" === e.charAt(2),
              close: "~" === t.charAt(t.length - 3),
            };
          }),
          (t.stripComment = function (e) {
            return e.replace(/^\{\{~?!-?-?/, "").replace(/-?-?~?\}\}$/, "");
          }),
          (t.preparePath = function (e, t, n) {
            n = this.locInfo(n);
            for (
              var r = e ? "@" : "", i = [], o = 0, a = 0, c = t.length;
              a < c;
              a++
            ) {
              var l = t[a].part,
                u = t[a].original !== l;
              if (
                ((r += (t[a].separator || "") + l),
                u || (".." !== l && "." !== l && "this" !== l))
              )
                i.push(l);
              else {
                if (i.length > 0)
                  throw new s.default("Invalid path: " + r, { loc: n });
                ".." === l && o++;
              }
            }
            return {
              type: "PathExpression",
              data: e,
              depth: o,
              parts: i,
              original: r,
              loc: n,
            };
          }),
          (t.prepareMustache = function (e, t, n, r, i, s) {
            var o = r.charAt(3) || r.charAt(2),
              a = "{" !== o && "&" !== o;
            return {
              type: /\*/.test(r) ? "Decorator" : "MustacheStatement",
              path: e,
              params: t,
              hash: n,
              escaped: a,
              strip: i,
              loc: this.locInfo(s),
            };
          }),
          (t.prepareRawBlock = function (e, t, n, r) {
            o(e, n), (r = this.locInfo(r));
            var i = { type: "Program", body: t, strip: {}, loc: r };
            return {
              type: "BlockStatement",
              path: e.path,
              params: e.params,
              hash: e.hash,
              program: i,
              openStrip: {},
              inverseStrip: {},
              closeStrip: {},
              loc: r,
            };
          }),
          (t.prepareBlock = function (e, t, n, r, i, a) {
            r && r.path && o(e, r);
            var c = /\*/.test(e.open);
            t.blockParams = e.blockParams;
            var l = void 0,
              u = void 0;
            if (n) {
              if (c)
                throw new s.default("Unexpected inverse block on decorator", n);
              n.chain && (n.program.body[0].closeStrip = r.strip),
                (u = n.strip),
                (l = n.program);
            }
            i && ((i = l), (l = t), (t = i));
            return {
              type: c ? "DecoratorBlock" : "BlockStatement",
              path: e.path,
              params: e.params,
              hash: e.hash,
              program: t,
              inverse: l,
              openStrip: e.strip,
              inverseStrip: u,
              closeStrip: r && r.strip,
              loc: this.locInfo(a),
            };
          }),
          (t.prepareProgram = function (e, t) {
            if (!t && e.length) {
              var n = e[0].loc,
                r = e[e.length - 1].loc;
              n &&
                r &&
                (t = {
                  source: n.source,
                  start: { line: n.start.line, column: n.start.column },
                  end: { line: r.end.line, column: r.end.column },
                });
            }
            return { type: "Program", body: e, strip: {}, loc: t };
          }),
          (t.preparePartialBlock = function (e, t, n, r) {
            return (
              o(e, n),
              {
                type: "PartialBlockStatement",
                name: e.path,
                params: e.params,
                hash: e.hash,
                program: t,
                openStrip: e.strip,
                closeStrip: n && n.strip,
                loc: this.locInfo(r),
              }
            );
          });
        var r,
          i = n(769),
          s = (r = i) && r.__esModule ? r : { default: r };
        function o(e, t) {
          if (((t = t.path ? t.path.original : t), e.path.original !== t)) {
            var n = { loc: e.path.loc };
            throw new s.default(e.path.original + " doesn't match " + t, n);
          }
        }
      },
      430: function (e, t, n) {
        t.__esModule = !0;
        var r = n(849);
        (t.default = function (e) {
          e.registerDecorator("inline", function (e, t, n, i) {
            var s = e;
            return (
              t.partials ||
                ((t.partials = {}),
                (s = function (i, s) {
                  var o = n.partials;
                  n.partials = r.extend({}, o, t.partials);
                  var a = e(i, s);
                  return (n.partials = o), a;
                })),
              (t.partials[i.args[0]] = i.fn),
              s
            );
          });
        }),
          (e.exports = t.default);
      },
      466: function (e, t) {
        (t.__esModule = !0),
          (t.default = function (e) {
            e.registerHelper("lookup", function (e, t, n) {
              return e ? n.lookupProperty(e, t) : e;
            });
          }),
          (e.exports = t.default);
      },
      566: function (e, t, n) {
        t.__esModule = !0;
        var r = n(849),
          i = {
            methodMap: ["debug", "info", "warn", "error"],
            level: "info",
            lookupLevel: function (e) {
              if ("string" == typeof e) {
                var t = r.indexOf(i.methodMap, e.toLowerCase());
                e = t >= 0 ? t : parseInt(e, 10);
              }
              return e;
            },
            log: function (e) {
              if (
                ((e = i.lookupLevel(e)),
                "undefined" != typeof console && i.lookupLevel(i.level) <= e)
              ) {
                var t = i.methodMap[e];
                console[t] || (t = "log");
                for (
                  var n = arguments.length, r = Array(n > 1 ? n - 1 : 0), s = 1;
                  s < n;
                  s++
                )
                  r[s - 1] = arguments[s];
                console[t].apply(console, r);
              }
            },
          };
        (t.default = i), (e.exports = t.default);
      },
      613: function (e, t) {
        function n(e) {
          this.string = e;
        }
        (t.__esModule = !0),
          (n.prototype.toString = n.prototype.toHTML =
            function () {
              return "" + this.string;
            }),
          (t.default = n),
          (e.exports = t.default);
      },
      614: function (e, t) {
        (t.__esModule = !0),
          (t.wrapHelper = function (e, t) {
            if ("function" != typeof e) return e;
            return function () {
              return (
                (arguments[arguments.length - 1] = t(
                  arguments[arguments.length - 1]
                )),
                e.apply(this, arguments)
              );
            };
          });
      },
      624: function (e, t, n) {
        (t.__esModule = !0),
          (t.checkRevision = function (e) {
            var t = (e && e[0]) || 1,
              n = a.COMPILER_REVISION;
            if (
              t >= a.LAST_COMPATIBLE_COMPILER_REVISION &&
              t <= a.COMPILER_REVISION
            )
              return;
            if (t < a.LAST_COMPATIBLE_COMPILER_REVISION) {
              var r = a.REVISION_CHANGES[n],
                i = a.REVISION_CHANGES[t];
              throw new o.default(
                "Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (" +
                  r +
                  ") or downgrade your runtime to an older version (" +
                  i +
                  ")."
              );
            }
            throw new o.default(
              "Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (" +
                e[1] +
                ")."
            );
          }),
          (t.template = function (e, t) {
            if (!t) throw new o.default("No environment passed to template");
            if (!e || !e.main)
              throw new o.default("Unknown template object: " + typeof e);
            (e.main.decorator = e.main_d), t.VM.checkRevision(e.compiler);
            var n = e.compiler && 7 === e.compiler[0];
            var r = {
              strict: function (e, t, n) {
                if (!e || !(t in e))
                  throw new o.default('"' + t + '" not defined in ' + e, {
                    loc: n,
                  });
                return r.lookupProperty(e, t);
              },
              lookupProperty: function (e, t) {
                var n = e[t];
                return null == n ||
                  Object.prototype.hasOwnProperty.call(e, t) ||
                  u.resultIsAllowed(n, r.protoAccessControl, t)
                  ? n
                  : void 0;
              },
              lookup: function (e, t) {
                for (var n = e.length, i = 0; i < n; i++) {
                  if (null != (e[i] && r.lookupProperty(e[i], t)))
                    return e[i][t];
                }
              },
              lambda: function (e, t) {
                return "function" == typeof e ? e.call(t) : e;
              },
              escapeExpression: i.escapeExpression,
              invokePartial: function (n, r, s) {
                s.hash &&
                  ((r = i.extend({}, r, s.hash)), s.ids && (s.ids[0] = !0)),
                  (n = t.VM.resolvePartial.call(this, n, r, s));
                var a = i.extend({}, s, {
                    hooks: this.hooks,
                    protoAccessControl: this.protoAccessControl,
                  }),
                  c = t.VM.invokePartial.call(this, n, r, a);
                if (
                  (null == c &&
                    t.compile &&
                    ((s.partials[s.name] = t.compile(n, e.compilerOptions, t)),
                    (c = s.partials[s.name](r, a))),
                  null != c)
                ) {
                  if (s.indent) {
                    for (
                      var l = c.split("\n"), u = 0, h = l.length;
                      u < h && (l[u] || u + 1 !== h);
                      u++
                    )
                      l[u] = s.indent + l[u];
                    c = l.join("\n");
                  }
                  return c;
                }
                throw new o.default(
                  "The partial " +
                    s.name +
                    " could not be compiled when running in runtime-only mode"
                );
              },
              fn: function (t) {
                var n = e[t];
                return (n.decorator = e[t + "_d"]), n;
              },
              programs: [],
              program: function (e, t, n, r, i) {
                var s = this.programs[e],
                  o = this.fn(e);
                return (
                  t || i || r || n
                    ? (s = h(this, e, o, t, n, r, i))
                    : s || (s = this.programs[e] = h(this, e, o)),
                  s
                );
              },
              data: function (e, t) {
                for (; e && t--; ) e = e._parent;
                return e;
              },
              mergeIfNeeded: function (e, t) {
                var n = e || t;
                return e && t && e !== t && (n = i.extend({}, t, e)), n;
              },
              nullContext: Object.seal({}),
              noop: t.VM.noop,
              compilerInfo: e.compiler,
            };
            function s(t) {
              var n =
                  arguments.length <= 1 || void 0 === arguments[1]
                    ? {}
                    : arguments[1],
                i = n.data;
              s._setup(n),
                !n.partial &&
                  e.useData &&
                  (i = (function (e, t) {
                    (t && "root" in t) ||
                      ((t = t ? a.createFrame(t) : {}).root = e);
                    return t;
                  })(t, i));
              var o = void 0,
                c = e.useBlockParams ? [] : void 0;
              function l(t) {
                return "" + e.main(r, t, r.helpers, r.partials, i, c, o);
              }
              return (
                e.useDepths &&
                  (o = n.depths
                    ? t != n.depths[0]
                      ? [t].concat(n.depths)
                      : n.depths
                    : [t]),
                (l = p(e.main, l, r, n.depths || [], i, c))(t, n)
              );
            }
            return (
              (s.isTop = !0),
              (s._setup = function (s) {
                if (s.partial)
                  (r.protoAccessControl = s.protoAccessControl),
                    (r.helpers = s.helpers),
                    (r.partials = s.partials),
                    (r.decorators = s.decorators),
                    (r.hooks = s.hooks);
                else {
                  var o = i.extend({}, t.helpers, s.helpers);
                  !(function (e, t) {
                    Object.keys(e).forEach(function (n) {
                      var r = e[n];
                      e[n] = (function (e, t) {
                        var n = t.lookupProperty;
                        return l.wrapHelper(e, function (e) {
                          return i.extend({ lookupProperty: n }, e);
                        });
                      })(r, t);
                    });
                  })(o, r),
                    (r.helpers = o),
                    e.usePartial &&
                      (r.partials = r.mergeIfNeeded(s.partials, t.partials)),
                    (e.usePartial || e.useDecorators) &&
                      (r.decorators = i.extend({}, t.decorators, s.decorators)),
                    (r.hooks = {}),
                    (r.protoAccessControl = u.createProtoAccessControl(s));
                  var a = s.allowCallsToHelperMissing || n;
                  c.moveHelperToHooks(r, "helperMissing", a),
                    c.moveHelperToHooks(r, "blockHelperMissing", a);
                }
              }),
              (s._child = function (t, n, i, s) {
                if (e.useBlockParams && !i)
                  throw new o.default("must pass block params");
                if (e.useDepths && !s)
                  throw new o.default("must pass parent depths");
                return h(r, t, e[t], n, 0, i, s);
              }),
              s
            );
          }),
          (t.wrapProgram = h),
          (t.resolvePartial = function (e, t, n) {
            e
              ? e.call || n.name || ((n.name = e), (e = n.partials[e]))
              : (e =
                  "@partial-block" === n.name
                    ? n.data["partial-block"]
                    : n.partials[n.name]);
            return e;
          }),
          (t.invokePartial = function (e, t, n) {
            var r = n.data && n.data["partial-block"];
            (n.partial = !0),
              n.ids && (n.data.contextPath = n.ids[0] || n.data.contextPath);
            var s = void 0;
            n.fn &&
              n.fn !== d &&
              (function () {
                n.data = a.createFrame(n.data);
                var e = n.fn;
                (s = n.data["partial-block"] =
                  function (t) {
                    var n =
                      arguments.length <= 1 || void 0 === arguments[1]
                        ? {}
                        : arguments[1];
                    return (
                      (n.data = a.createFrame(n.data)),
                      (n.data["partial-block"] = r),
                      e(t, n)
                    );
                  }),
                  e.partials &&
                    (n.partials = i.extend({}, n.partials, e.partials));
              })();
            void 0 === e && s && (e = s);
            if (void 0 === e)
              throw new o.default(
                "The partial " + n.name + " could not be found"
              );
            if (e instanceof Function) return e(t, n);
          }),
          (t.noop = d);
        var r,
          i = (function (e) {
            if (e && e.__esModule) return e;
            var t = {};
            if (null != e)
              for (var n in e)
                Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
            return (t.default = e), t;
          })(n(849)),
          s = n(769),
          o = (r = s) && r.__esModule ? r : { default: r },
          a = n(871),
          c = n(277),
          l = n(614),
          u = n(865);
        function h(e, t, n, r, i, s, o) {
          function a(t) {
            var i =
                arguments.length <= 1 || void 0 === arguments[1]
                  ? {}
                  : arguments[1],
              a = o;
            return (
              !o ||
                t == o[0] ||
                (t === e.nullContext && null === o[0]) ||
                (a = [t].concat(o)),
              n(
                e,
                t,
                e.helpers,
                e.partials,
                i.data || r,
                s && [i.blockParams].concat(s),
                a
              )
            );
          }
          return (
            ((a = p(n, a, e, o, r, s)).program = t),
            (a.depth = o ? o.length : 0),
            (a.blockParams = i || 0),
            a
          );
        }
        function d() {
          return "";
        }
        function p(e, t, n, r, s, o) {
          if (e.decorator) {
            var a = {};
            (t = e.decorator(t, a, n, r && r[0], s, o, r)), i.extend(t, a);
          }
          return t;
        }
      },
      632: function (e, t, n) {
        t.__esModule = !0;
        var r = n(849),
          i = void 0;
        try {
        } catch (e) {}
        function s(e, t, n) {
          if (r.isArray(e)) {
            for (var i = [], s = 0, o = e.length; s < o; s++)
              i.push(t.wrap(e[s], n));
            return i;
          }
          return "boolean" == typeof e || "number" == typeof e ? e + "" : e;
        }
        function o(e) {
          (this.srcFile = e), (this.source = []);
        }
        i ||
          ((i = function (e, t, n, r) {
            (this.src = ""), r && this.add(r);
          }).prototype = {
            add: function (e) {
              r.isArray(e) && (e = e.join("")), (this.src += e);
            },
            prepend: function (e) {
              r.isArray(e) && (e = e.join("")), (this.src = e + this.src);
            },
            toStringWithSourceMap: function () {
              return { code: this.toString() };
            },
            toString: function () {
              return this.src;
            },
          }),
          (o.prototype = {
            isEmpty: function () {
              return !this.source.length;
            },
            prepend: function (e, t) {
              this.source.unshift(this.wrap(e, t));
            },
            push: function (e, t) {
              this.source.push(this.wrap(e, t));
            },
            merge: function () {
              var e = this.empty();
              return (
                this.each(function (t) {
                  e.add(["  ", t, "\n"]);
                }),
                e
              );
            },
            each: function (e) {
              for (var t = 0, n = this.source.length; t < n; t++)
                e(this.source[t]);
            },
            empty: function () {
              var e = this.currentLocation || { start: {} };
              return new i(e.start.line, e.start.column, this.srcFile);
            },
            wrap: function (e) {
              var t =
                arguments.length <= 1 || void 0 === arguments[1]
                  ? this.currentLocation || { start: {} }
                  : arguments[1];
              return e instanceof i
                ? e
                : ((e = s(e, this, t)),
                  new i(t.start.line, t.start.column, this.srcFile, e));
            },
            functionCall: function (e, t, n) {
              return (
                (n = this.generateList(n)),
                this.wrap([e, t ? "." + t + "(" : "(", n, ")"])
              );
            },
            quotedString: function (e) {
              return (
                '"' +
                (e + "")
                  .replace(/\\/g, "\\\\")
                  .replace(/"/g, '\\"')
                  .replace(/\n/g, "\\n")
                  .replace(/\r/g, "\\r")
                  .replace(/\u2028/g, "\\u2028")
                  .replace(/\u2029/g, "\\u2029") +
                '"'
              );
            },
            objectLiteral: function (e) {
              var t = this,
                n = [];
              Object.keys(e).forEach(function (r) {
                var i = s(e[r], t);
                "undefined" !== i && n.push([t.quotedString(r), ":", i]);
              });
              var r = this.generateList(n);
              return r.prepend("{"), r.add("}"), r;
            },
            generateList: function (e) {
              for (var t = this.empty(), n = 0, r = e.length; n < r; n++)
                n && t.add(","), t.add(s(e[n], this));
              return t;
            },
            generateArray: function (e) {
              var t = this.generateList(e);
              return t.prepend("["), t.add("]"), t;
            },
          }),
          (t.default = o),
          (e.exports = t.default);
      },
      639: function (e, t, n) {
        function r(e) {
          return e && e.__esModule ? e : { default: e };
        }
        t.__esModule = !0;
        var i = r(n(261)),
          s = r(n(919)),
          o = n(27),
          a = n(127),
          c = r(n(727)),
          l = r(n(350)),
          u = r(n(148)),
          h = i.default.create;
        function d() {
          var e = h();
          return (
            (e.compile = function (t, n) {
              return a.compile(t, n, e);
            }),
            (e.precompile = function (t, n) {
              return a.precompile(t, n, e);
            }),
            (e.AST = s.default),
            (e.Compiler = a.Compiler),
            (e.JavaScriptCompiler = c.default),
            (e.Parser = o.parser),
            (e.parse = o.parse),
            (e.parseWithoutProcessing = o.parseWithoutProcessing),
            e
          );
        }
        var p = d();
        (p.create = d),
          u.default(p),
          (p.Visitor = l.default),
          (p.default = p),
          (t.default = p),
          (e.exports = t.default);
      },
      726: function (e, t, n) {
        (t.__esModule = !0),
          (t.createNewLookupObject = function () {
            for (var e = arguments.length, t = Array(e), n = 0; n < e; n++)
              t[n] = arguments[n];
            return r.extend.apply(void 0, [Object.create(null)].concat(t));
          });
        var r = n(849);
      },
      727: function (e, t, n) {
        function r(e) {
          return e && e.__esModule ? e : { default: e };
        }
        t.__esModule = !0;
        var i = n(871),
          s = r(n(769)),
          o = n(849),
          a = r(n(632));
        function c(e) {
          this.value = e;
        }
        function l() {}
        (l.prototype = {
          nameLookup: function (e, t) {
            return this.internalNameLookup(e, t);
          },
          depthedLookup: function (e) {
            return [
              this.aliasable("container.lookup"),
              "(depths, ",
              JSON.stringify(e),
              ")",
            ];
          },
          compilerInfo: function () {
            var e = i.COMPILER_REVISION;
            return [e, i.REVISION_CHANGES[e]];
          },
          appendToBuffer: function (e, t, n) {
            return (
              o.isArray(e) || (e = [e]),
              (e = this.source.wrap(e, t)),
              this.environment.isSimple
                ? ["return ", e, ";"]
                : n
                ? ["buffer += ", e, ";"]
                : ((e.appendToBuffer = !0), e)
            );
          },
          initializeBuffer: function () {
            return this.quotedString("");
          },
          internalNameLookup: function (e, t) {
            return (
              (this.lookupPropertyFunctionIsUsed = !0),
              ["lookupProperty(", e, ",", JSON.stringify(t), ")"]
            );
          },
          lookupPropertyFunctionIsUsed: !1,
          compile: function (e, t, n, r) {
            (this.environment = e),
              (this.options = t),
              (this.stringParams = this.options.stringParams),
              (this.trackIds = this.options.trackIds),
              (this.precompile = !r),
              (this.name = this.environment.name),
              (this.isChild = !!n),
              (this.context = n || {
                decorators: [],
                programs: [],
                environments: [],
              }),
              this.preamble(),
              (this.stackSlot = 0),
              (this.stackVars = []),
              (this.aliases = {}),
              (this.registers = { list: [] }),
              (this.hashes = []),
              (this.compileStack = []),
              (this.inlineStack = []),
              (this.blockParams = []),
              this.compileChildren(e, t),
              (this.useDepths =
                this.useDepths ||
                e.useDepths ||
                e.useDecorators ||
                this.options.compat),
              (this.useBlockParams = this.useBlockParams || e.useBlockParams);
            var i = e.opcodes,
              o = void 0,
              a = void 0,
              c = void 0,
              l = void 0;
            for (c = 0, l = i.length; c < l; c++)
              (o = i[c]),
                (this.source.currentLocation = o.loc),
                (a = a || o.loc),
                this[o.opcode].apply(this, o.args);
            if (
              ((this.source.currentLocation = a),
              this.pushSource(""),
              this.stackSlot ||
                this.inlineStack.length ||
                this.compileStack.length)
            )
              throw new s.default(
                "Compile completed with content left on stack"
              );
            this.decorators.isEmpty()
              ? (this.decorators = void 0)
              : ((this.useDecorators = !0),
                this.decorators.prepend([
                  "var decorators = container.decorators, ",
                  this.lookupPropertyFunctionVarDeclaration(),
                  ";\n",
                ]),
                this.decorators.push("return fn;"),
                r
                  ? (this.decorators = Function.apply(this, [
                      "fn",
                      "props",
                      "container",
                      "depth0",
                      "data",
                      "blockParams",
                      "depths",
                      this.decorators.merge(),
                    ]))
                  : (this.decorators.prepend(
                      "function(fn, props, container, depth0, data, blockParams, depths) {\n"
                    ),
                    this.decorators.push("}\n"),
                    (this.decorators = this.decorators.merge())));
            var u = this.createFunctionContext(r);
            if (this.isChild) return u;
            var h = { compiler: this.compilerInfo(), main: u };
            this.decorators &&
              ((h.main_d = this.decorators), (h.useDecorators = !0));
            var d = this.context,
              p = d.programs,
              f = d.decorators;
            for (c = 0, l = p.length; c < l; c++)
              p[c] &&
                ((h[c] = p[c]),
                f[c] && ((h[c + "_d"] = f[c]), (h.useDecorators = !0)));
            return (
              this.environment.usePartial && (h.usePartial = !0),
              this.options.data && (h.useData = !0),
              this.useDepths && (h.useDepths = !0),
              this.useBlockParams && (h.useBlockParams = !0),
              this.options.compat && (h.compat = !0),
              r
                ? (h.compilerOptions = this.options)
                : ((h.compiler = JSON.stringify(h.compiler)),
                  (this.source.currentLocation = {
                    start: { line: 1, column: 0 },
                  }),
                  (h = this.objectLiteral(h)),
                  t.srcName
                    ? ((h = h.toStringWithSourceMap({ file: t.destName })).map =
                        h.map && h.map.toString())
                    : (h = h.toString())),
              h
            );
          },
          preamble: function () {
            (this.lastContext = 0),
              (this.source = new a.default(this.options.srcName)),
              (this.decorators = new a.default(this.options.srcName));
          },
          createFunctionContext: function (e) {
            var t = this,
              n = "",
              r = this.stackVars.concat(this.registers.list);
            r.length > 0 && (n += ", " + r.join(", "));
            var i = 0;
            Object.keys(this.aliases).forEach(function (e) {
              var r = t.aliases[e];
              r.children &&
                r.referenceCount > 1 &&
                ((n += ", alias" + ++i + "=" + e),
                (r.children[0] = "alias" + i));
            }),
              this.lookupPropertyFunctionIsUsed &&
                (n += ", " + this.lookupPropertyFunctionVarDeclaration());
            var s = ["container", "depth0", "helpers", "partials", "data"];
            (this.useBlockParams || this.useDepths) && s.push("blockParams"),
              this.useDepths && s.push("depths");
            var o = this.mergeSource(n);
            return e
              ? (s.push(o), Function.apply(this, s))
              : this.source.wrap(["function(", s.join(","), ") {\n  ", o, "}"]);
          },
          mergeSource: function (e) {
            var t = this.environment.isSimple,
              n = !this.forceBuffer,
              r = void 0,
              i = void 0,
              s = void 0,
              o = void 0;
            return (
              this.source.each(function (e) {
                e.appendToBuffer
                  ? (s ? e.prepend("  + ") : (s = e), (o = e))
                  : (s &&
                      (i ? s.prepend("buffer += ") : (r = !0),
                      o.add(";"),
                      (s = o = void 0)),
                    (i = !0),
                    t || (n = !1));
              }),
              n
                ? s
                  ? (s.prepend("return "), o.add(";"))
                  : i || this.source.push('return "";')
                : ((e += ", buffer = " + (r ? "" : this.initializeBuffer())),
                  s
                    ? (s.prepend("return buffer + "), o.add(";"))
                    : this.source.push("return buffer;")),
              e &&
                this.source.prepend("var " + e.substring(2) + (r ? "" : ";\n")),
              this.source.merge()
            );
          },
          lookupPropertyFunctionVarDeclaration: function () {
            return "\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim();
          },
          blockValue: function (e) {
            var t = this.aliasable("container.hooks.blockHelperMissing"),
              n = [this.contextName(0)];
            this.setupHelperArgs(e, 0, n);
            var r = this.popStack();
            n.splice(1, 0, r),
              this.push(this.source.functionCall(t, "call", n));
          },
          ambiguousBlockValue: function () {
            var e = this.aliasable("container.hooks.blockHelperMissing"),
              t = [this.contextName(0)];
            this.setupHelperArgs("", 0, t, !0), this.flushInline();
            var n = this.topStack();
            t.splice(1, 0, n),
              this.pushSource([
                "if (!",
                this.lastHelper,
                ") { ",
                n,
                " = ",
                this.source.functionCall(e, "call", t),
                "}",
              ]);
          },
          appendContent: function (e) {
            this.pendingContent
              ? (e = this.pendingContent + e)
              : (this.pendingLocation = this.source.currentLocation),
              (this.pendingContent = e);
          },
          append: function () {
            if (this.isInline())
              this.replaceStack(function (e) {
                return [" != null ? ", e, ' : ""'];
              }),
                this.pushSource(this.appendToBuffer(this.popStack()));
            else {
              var e = this.popStack();
              this.pushSource([
                "if (",
                e,
                " != null) { ",
                this.appendToBuffer(e, void 0, !0),
                " }",
              ]),
                this.environment.isSimple &&
                  this.pushSource([
                    "else { ",
                    this.appendToBuffer("''", void 0, !0),
                    " }",
                  ]);
            }
          },
          appendEscaped: function () {
            this.pushSource(
              this.appendToBuffer([
                this.aliasable("container.escapeExpression"),
                "(",
                this.popStack(),
                ")",
              ])
            );
          },
          getContext: function (e) {
            this.lastContext = e;
          },
          pushContext: function () {
            this.pushStackLiteral(this.contextName(this.lastContext));
          },
          lookupOnContext: function (e, t, n, r) {
            var i = 0;
            r || !this.options.compat || this.lastContext
              ? this.pushContext()
              : this.push(this.depthedLookup(e[i++])),
              this.resolvePath("context", e, i, t, n);
          },
          lookupBlockParam: function (e, t) {
            (this.useBlockParams = !0),
              this.push(["blockParams[", e[0], "][", e[1], "]"]),
              this.resolvePath("context", t, 1);
          },
          lookupData: function (e, t, n) {
            e
              ? this.pushStackLiteral("container.data(data, " + e + ")")
              : this.pushStackLiteral("data"),
              this.resolvePath("data", t, 0, !0, n);
          },
          resolvePath: function (e, t, n, r, i) {
            var s = this;
            if (this.options.strict || this.options.assumeObjects)
              this.push(
                (function (e, t, n, r, i) {
                  var s = t.popStack(),
                    o = n.length;
                  e && o--;
                  for (; r < o; r++) s = t.nameLookup(s, n[r], i);
                  return e
                    ? [
                        t.aliasable("container.strict"),
                        "(",
                        s,
                        ", ",
                        t.quotedString(n[r]),
                        ", ",
                        JSON.stringify(t.source.currentLocation),
                        " )",
                      ]
                    : s;
                })(this.options.strict && i, this, t, n, e)
              );
            else
              for (var o = t.length; n < o; n++)
                this.replaceStack(function (i) {
                  var o = s.nameLookup(i, t[n], e);
                  return r ? [" && ", o] : [" != null ? ", o, " : ", i];
                });
          },
          resolvePossibleLambda: function () {
            this.push([
              this.aliasable("container.lambda"),
              "(",
              this.popStack(),
              ", ",
              this.contextName(0),
              ")",
            ]);
          },
          pushStringParam: function (e, t) {
            this.pushContext(),
              this.pushString(t),
              "SubExpression" !== t &&
                ("string" == typeof e
                  ? this.pushString(e)
                  : this.pushStackLiteral(e));
          },
          emptyHash: function (e) {
            this.trackIds && this.push("{}"),
              this.stringParams && (this.push("{}"), this.push("{}")),
              this.pushStackLiteral(e ? "undefined" : "{}");
          },
          pushHash: function () {
            this.hash && this.hashes.push(this.hash),
              (this.hash = { values: {}, types: [], contexts: [], ids: [] });
          },
          popHash: function () {
            var e = this.hash;
            (this.hash = this.hashes.pop()),
              this.trackIds && this.push(this.objectLiteral(e.ids)),
              this.stringParams &&
                (this.push(this.objectLiteral(e.contexts)),
                this.push(this.objectLiteral(e.types))),
              this.push(this.objectLiteral(e.values));
          },
          pushString: function (e) {
            this.pushStackLiteral(this.quotedString(e));
          },
          pushLiteral: function (e) {
            this.pushStackLiteral(e);
          },
          pushProgram: function (e) {
            null != e
              ? this.pushStackLiteral(this.programExpression(e))
              : this.pushStackLiteral(null);
          },
          registerDecorator: function (e, t) {
            var n = this.nameLookup("decorators", t, "decorator"),
              r = this.setupHelperArgs(t, e);
            this.decorators.push([
              "fn = ",
              this.decorators.functionCall(n, "", [
                "fn",
                "props",
                "container",
                r,
              ]),
              " || fn;",
            ]);
          },
          invokeHelper: function (e, t, n) {
            var r = this.popStack(),
              i = this.setupHelper(e, t),
              s = [];
            n && s.push(i.name),
              s.push(r),
              this.options.strict ||
                s.push(this.aliasable("container.hooks.helperMissing"));
            var o = ["(", this.itemsSeparatedBy(s, "||"), ")"],
              a = this.source.functionCall(o, "call", i.callParams);
            this.push(a);
          },
          itemsSeparatedBy: function (e, t) {
            var n = [];
            n.push(e[0]);
            for (var r = 1; r < e.length; r++) n.push(t, e[r]);
            return n;
          },
          invokeKnownHelper: function (e, t) {
            var n = this.setupHelper(e, t);
            this.push(this.source.functionCall(n.name, "call", n.callParams));
          },
          invokeAmbiguous: function (e, t) {
            this.useRegister("helper");
            var n = this.popStack();
            this.emptyHash();
            var r = this.setupHelper(0, e, t),
              i = [
                "(",
                "(helper = ",
                (this.lastHelper = this.nameLookup("helpers", e, "helper")),
                " || ",
                n,
                ")",
              ];
            this.options.strict ||
              ((i[0] = "(helper = "),
              i.push(
                " != null ? helper : ",
                this.aliasable("container.hooks.helperMissing")
              )),
              this.push([
                "(",
                i,
                r.paramsInit ? ["),(", r.paramsInit] : [],
                "),",
                "(typeof helper === ",
                this.aliasable('"function"'),
                " ? ",
                this.source.functionCall("helper", "call", r.callParams),
                " : helper))",
              ]);
          },
          invokePartial: function (e, t, n) {
            var r = [],
              i = this.setupParams(t, 1, r);
            e && ((t = this.popStack()), delete i.name),
              n && (i.indent = JSON.stringify(n)),
              (i.helpers = "helpers"),
              (i.partials = "partials"),
              (i.decorators = "container.decorators"),
              e
                ? r.unshift(t)
                : r.unshift(this.nameLookup("partials", t, "partial")),
              this.options.compat && (i.depths = "depths"),
              (i = this.objectLiteral(i)),
              r.push(i),
              this.push(
                this.source.functionCall("container.invokePartial", "", r)
              );
          },
          assignToHash: function (e) {
            var t = this.popStack(),
              n = void 0,
              r = void 0,
              i = void 0;
            this.trackIds && (i = this.popStack()),
              this.stringParams &&
                ((r = this.popStack()), (n = this.popStack()));
            var s = this.hash;
            n && (s.contexts[e] = n),
              r && (s.types[e] = r),
              i && (s.ids[e] = i),
              (s.values[e] = t);
          },
          pushId: function (e, t, n) {
            "BlockParam" === e
              ? this.pushStackLiteral(
                  "blockParams[" +
                    t[0] +
                    "].path[" +
                    t[1] +
                    "]" +
                    (n ? " + " + JSON.stringify("." + n) : "")
                )
              : "PathExpression" === e
              ? this.pushString(t)
              : "SubExpression" === e
              ? this.pushStackLiteral("true")
              : this.pushStackLiteral("null");
          },
          compiler: l,
          compileChildren: function (e, t) {
            for (
              var n = e.children, r = void 0, i = void 0, s = 0, o = n.length;
              s < o;
              s++
            ) {
              (r = n[s]), (i = new this.compiler());
              var a = this.matchExistingProgram(r);
              if (null == a) {
                this.context.programs.push("");
                var c = this.context.programs.length;
                (r.index = c),
                  (r.name = "program" + c),
                  (this.context.programs[c] = i.compile(
                    r,
                    t,
                    this.context,
                    !this.precompile
                  )),
                  (this.context.decorators[c] = i.decorators),
                  (this.context.environments[c] = r),
                  (this.useDepths = this.useDepths || i.useDepths),
                  (this.useBlockParams =
                    this.useBlockParams || i.useBlockParams),
                  (r.useDepths = this.useDepths),
                  (r.useBlockParams = this.useBlockParams);
              } else
                (r.index = a.index),
                  (r.name = "program" + a.index),
                  (this.useDepths = this.useDepths || a.useDepths),
                  (this.useBlockParams =
                    this.useBlockParams || a.useBlockParams);
            }
          },
          matchExistingProgram: function (e) {
            for (var t = 0, n = this.context.environments.length; t < n; t++) {
              var r = this.context.environments[t];
              if (r && r.equals(e)) return r;
            }
          },
          programExpression: function (e) {
            var t = this.environment.children[e],
              n = [t.index, "data", t.blockParams];
            return (
              (this.useBlockParams || this.useDepths) && n.push("blockParams"),
              this.useDepths && n.push("depths"),
              "container.program(" + n.join(", ") + ")"
            );
          },
          useRegister: function (e) {
            this.registers[e] ||
              ((this.registers[e] = !0), this.registers.list.push(e));
          },
          push: function (e) {
            return (
              e instanceof c || (e = this.source.wrap(e)),
              this.inlineStack.push(e),
              e
            );
          },
          pushStackLiteral: function (e) {
            this.push(new c(e));
          },
          pushSource: function (e) {
            this.pendingContent &&
              (this.source.push(
                this.appendToBuffer(
                  this.source.quotedString(this.pendingContent),
                  this.pendingLocation
                )
              ),
              (this.pendingContent = void 0)),
              e && this.source.push(e);
          },
          replaceStack: function (e) {
            var t = ["("],
              n = void 0,
              r = void 0,
              i = void 0;
            if (!this.isInline())
              throw new s.default("replaceStack on non-inline");
            var o = this.popStack(!0);
            if (o instanceof c) (t = ["(", (n = [o.value])]), (i = !0);
            else {
              r = !0;
              var a = this.incrStack();
              (t = ["((", this.push(a), " = ", o, ")"]), (n = this.topStack());
            }
            var l = e.call(this, n);
            i || this.popStack(),
              r && this.stackSlot--,
              this.push(t.concat(l, ")"));
          },
          incrStack: function () {
            return (
              this.stackSlot++,
              this.stackSlot > this.stackVars.length &&
                this.stackVars.push("stack" + this.stackSlot),
              this.topStackName()
            );
          },
          topStackName: function () {
            return "stack" + this.stackSlot;
          },
          flushInline: function () {
            var e = this.inlineStack;
            this.inlineStack = [];
            for (var t = 0, n = e.length; t < n; t++) {
              var r = e[t];
              if (r instanceof c) this.compileStack.push(r);
              else {
                var i = this.incrStack();
                this.pushSource([i, " = ", r, ";"]), this.compileStack.push(i);
              }
            }
          },
          isInline: function () {
            return this.inlineStack.length;
          },
          popStack: function (e) {
            var t = this.isInline(),
              n = (t ? this.inlineStack : this.compileStack).pop();
            if (!e && n instanceof c) return n.value;
            if (!t) {
              if (!this.stackSlot) throw new s.default("Invalid stack pop");
              this.stackSlot--;
            }
            return n;
          },
          topStack: function () {
            var e = this.isInline() ? this.inlineStack : this.compileStack,
              t = e[e.length - 1];
            return t instanceof c ? t.value : t;
          },
          contextName: function (e) {
            return this.useDepths && e ? "depths[" + e + "]" : "depth" + e;
          },
          quotedString: function (e) {
            return this.source.quotedString(e);
          },
          objectLiteral: function (e) {
            return this.source.objectLiteral(e);
          },
          aliasable: function (e) {
            var t = this.aliases[e];
            return t
              ? (t.referenceCount++, t)
              : (((t = this.aliases[e] = this.source.wrap(e)).aliasable = !0),
                (t.referenceCount = 1),
                t);
          },
          setupHelper: function (e, t, n) {
            var r = [];
            return {
              params: r,
              paramsInit: this.setupHelperArgs(t, e, r, n),
              name: this.nameLookup("helpers", t, "helper"),
              callParams: [
                this.aliasable(
                  this.contextName(0) +
                    " != null ? " +
                    this.contextName(0) +
                    " : (container.nullContext || {})"
                ),
              ].concat(r),
            };
          },
          setupParams: function (e, t, n) {
            var r = {},
              i = [],
              s = [],
              o = [],
              a = !n,
              c = void 0;
            a && (n = []),
              (r.name = this.quotedString(e)),
              (r.hash = this.popStack()),
              this.trackIds && (r.hashIds = this.popStack()),
              this.stringParams &&
                ((r.hashTypes = this.popStack()),
                (r.hashContexts = this.popStack()));
            var l = this.popStack(),
              u = this.popStack();
            (u || l) &&
              ((r.fn = u || "container.noop"),
              (r.inverse = l || "container.noop"));
            for (var h = t; h--; )
              (c = this.popStack()),
                (n[h] = c),
                this.trackIds && (o[h] = this.popStack()),
                this.stringParams &&
                  ((s[h] = this.popStack()), (i[h] = this.popStack()));
            return (
              a && (r.args = this.source.generateArray(n)),
              this.trackIds && (r.ids = this.source.generateArray(o)),
              this.stringParams &&
                ((r.types = this.source.generateArray(s)),
                (r.contexts = this.source.generateArray(i))),
              this.options.data && (r.data = "data"),
              this.useBlockParams && (r.blockParams = "blockParams"),
              r
            );
          },
          setupHelperArgs: function (e, t, n, r) {
            var i = this.setupParams(e, t, n);
            return (
              (i.loc = JSON.stringify(this.source.currentLocation)),
              (i = this.objectLiteral(i)),
              r
                ? (this.useRegister("options"),
                  n.push("options"),
                  ["options=", i])
                : n
                ? (n.push(i), "")
                : i
            );
          },
        }),
          (function () {
            for (
              var e =
                  "break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(
                    " "
                  ),
                t = (l.RESERVED_WORDS = {}),
                n = 0,
                r = e.length;
              n < r;
              n++
            )
              t[e[n]] = !0;
          })(),
          (l.isValidJavaScriptVariableName = function (e) {
            return !l.RESERVED_WORDS[e] && /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e);
          }),
          (t.default = l),
          (e.exports = t.default);
      },
      769: function (e, t) {
        t.__esModule = !0;
        var n = [
          "description",
          "fileName",
          "lineNumber",
          "endLineNumber",
          "message",
          "name",
          "number",
          "stack",
        ];
        function r(e, t) {
          var i = t && t.loc,
            s = void 0,
            o = void 0,
            a = void 0,
            c = void 0;
          i &&
            ((s = i.start.line),
            (o = i.end.line),
            (a = i.start.column),
            (c = i.end.column),
            (e += " - " + s + ":" + a));
          for (
            var l = Error.prototype.constructor.call(this, e), u = 0;
            u < n.length;
            u++
          )
            this[n[u]] = l[n[u]];
          Error.captureStackTrace && Error.captureStackTrace(this, r);
          try {
            i &&
              ((this.lineNumber = s),
              (this.endLineNumber = o),
              Object.defineProperty
                ? (Object.defineProperty(this, "column", {
                    value: a,
                    enumerable: !0,
                  }),
                  Object.defineProperty(this, "endColumn", {
                    value: c,
                    enumerable: !0,
                  }))
                : ((this.column = a), (this.endColumn = c)));
          } catch (e) {}
        }
        (r.prototype = new Error()), (t.default = r), (e.exports = t.default);
      },
      785: function (e, t, n) {
        t.__esModule = !0;
        var r,
          i = n(849),
          s = n(769),
          o = (r = s) && r.__esModule ? r : { default: r };
        (t.default = function (e) {
          e.registerHelper("each", function (e, t) {
            if (!t) throw new o.default("Must pass iterator to #each");
            var n,
              r = t.fn,
              s = t.inverse,
              a = 0,
              c = "",
              l = void 0,
              u = void 0;
            function h(t, n, s) {
              l &&
                ((l.key = t),
                (l.index = n),
                (l.first = 0 === n),
                (l.last = !!s),
                u && (l.contextPath = u + t)),
                (c += r(e[t], {
                  data: l,
                  blockParams: i.blockParams([e[t], t], [u + t, null]),
                }));
            }
            if (
              (t.data &&
                t.ids &&
                (u = i.appendContextPath(t.data.contextPath, t.ids[0]) + "."),
              i.isFunction(e) && (e = e.call(this)),
              t.data && (l = i.createFrame(t.data)),
              e && "object" == typeof e)
            )
              if (i.isArray(e))
                for (var d = e.length; a < d; a++)
                  a in e && h(a, a, a === e.length - 1);
              else if ("function" == typeof Symbol && e[Symbol.iterator]) {
                for (
                  var p = [], f = e[Symbol.iterator](), m = f.next();
                  !m.done;
                  m = f.next()
                )
                  p.push(m.value);
                for (d = (e = p).length; a < d; a++)
                  h(a, a, a === e.length - 1);
              } else
                (n = void 0),
                  Object.keys(e).forEach(function (e) {
                    void 0 !== n && h(n, a - 1), (n = e), a++;
                  }),
                  void 0 !== n && h(n, a - 1, !0);
            return 0 === a && (c = s(this)), c;
          });
        }),
          (e.exports = t.default);
      },
      849: function (e, t) {
        (t.__esModule = !0),
          (t.extend = o),
          (t.indexOf = function (e, t) {
            for (var n = 0, r = e.length; n < r; n++) if (e[n] === t) return n;
            return -1;
          }),
          (t.escapeExpression = function (e) {
            if ("string" != typeof e) {
              if (e && e.toHTML) return e.toHTML();
              if (null == e) return "";
              if (!e) return e + "";
              e = "" + e;
            }
            if (!i.test(e)) return e;
            return e.replace(r, s);
          }),
          (t.isEmpty = function (e) {
            return (!e && 0 !== e) || !(!l(e) || 0 !== e.length);
          }),
          (t.createFrame = function (e) {
            var t = o({}, e);
            return (t._parent = e), t;
          }),
          (t.blockParams = function (e, t) {
            return (e.path = t), e;
          }),
          (t.appendContextPath = function (e, t) {
            return (e ? e + "." : "") + t;
          });
        var n = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;",
            "`": "&#x60;",
            "=": "&#x3D;",
          },
          r = /[&<>"'`=]/g,
          i = /[&<>"'`=]/;
        function s(e) {
          return n[e];
        }
        function o(e) {
          for (var t = 1; t < arguments.length; t++)
            for (var n in arguments[t])
              Object.prototype.hasOwnProperty.call(arguments[t], n) &&
                (e[n] = arguments[t][n]);
          return e;
        }
        var a = Object.prototype.toString;
        t.toString = a;
        var c = function (e) {
          return "function" == typeof e;
        };
        c(/x/) &&
          (t.isFunction = c =
            function (e) {
              return (
                "function" == typeof e && "[object Function]" === a.call(e)
              );
            }),
          (t.isFunction = c);
        var l =
          Array.isArray ||
          function (e) {
            return (
              !(!e || "object" != typeof e) && "[object Array]" === a.call(e)
            );
          };
        t.isArray = l;
      },
      865: function (e, t, n) {
        (t.__esModule = !0),
          (t.createProtoAccessControl = function (e) {
            var t = Object.create(null);
            (t.constructor = !1),
              (t.__defineGetter__ = !1),
              (t.__defineSetter__ = !1),
              (t.__lookupGetter__ = !1);
            var n = Object.create(null);
            return (
              (n.__proto__ = !1),
              {
                properties: {
                  whitelist: i.createNewLookupObject(
                    n,
                    e.allowedProtoProperties
                  ),
                  defaultValue: e.allowProtoPropertiesByDefault,
                },
                methods: {
                  whitelist: i.createNewLookupObject(t, e.allowedProtoMethods),
                  defaultValue: e.allowProtoMethodsByDefault,
                },
              }
            );
          }),
          (t.resultIsAllowed = function (e, t, n) {
            return c("function" == typeof e ? t.methods : t.properties, n);
          }),
          (t.resetLoggedProperties = function () {
            Object.keys(a).forEach(function (e) {
              delete a[e];
            });
          });
        var r,
          i = n(726),
          s = n(566),
          o = (r = s) && r.__esModule ? r : { default: r },
          a = Object.create(null);
        function c(e, t) {
          return void 0 !== e.whitelist[t]
            ? !0 === e.whitelist[t]
            : void 0 !== e.defaultValue
            ? e.defaultValue
            : ((function (e) {
                !0 !== a[e] &&
                  ((a[e] = !0),
                  o.default.log(
                    "error",
                    'Handlebars: Access has been denied to resolve the property "' +
                      e +
                      '" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'
                  ));
              })(t),
              !1);
        }
      },
      871: function (e, t, n) {
        function r(e) {
          return e && e.__esModule ? e : { default: e };
        }
        (t.__esModule = !0), (t.HandlebarsEnvironment = h);
        var i = n(849),
          s = r(n(769)),
          o = n(277),
          a = n(940),
          c = r(n(566)),
          l = n(865);
        t.VERSION = "4.7.8";
        t.COMPILER_REVISION = 8;
        t.LAST_COMPATIBLE_COMPILER_REVISION = 7;
        t.REVISION_CHANGES = {
          1: "<= 1.0.rc.2",
          2: "== 1.0.0-rc.3",
          3: "== 1.0.0-rc.4",
          4: "== 1.x.x",
          5: "== 2.0.0-alpha.x",
          6: ">= 2.0.0-beta.1",
          7: ">= 4.0.0 <4.3.0",
          8: ">= 4.3.0",
        };
        var u = "[object Object]";
        function h(e, t, n) {
          (this.helpers = e || {}),
            (this.partials = t || {}),
            (this.decorators = n || {}),
            o.registerDefaultHelpers(this),
            a.registerDefaultDecorators(this);
        }
        h.prototype = {
          constructor: h,
          logger: c.default,
          log: c.default.log,
          registerHelper: function (e, t) {
            if (i.toString.call(e) === u) {
              if (t)
                throw new s.default("Arg not supported with multiple helpers");
              i.extend(this.helpers, e);
            } else this.helpers[e] = t;
          },
          unregisterHelper: function (e) {
            delete this.helpers[e];
          },
          registerPartial: function (e, t) {
            if (i.toString.call(e) === u) i.extend(this.partials, e);
            else {
              if (void 0 === t)
                throw new s.default(
                  'Attempting to register a partial called "' +
                    e +
                    '" as undefined'
                );
              this.partials[e] = t;
            }
          },
          unregisterPartial: function (e) {
            delete this.partials[e];
          },
          registerDecorator: function (e, t) {
            if (i.toString.call(e) === u) {
              if (t)
                throw new s.default(
                  "Arg not supported with multiple decorators"
                );
              i.extend(this.decorators, e);
            } else this.decorators[e] = t;
          },
          unregisterDecorator: function (e) {
            delete this.decorators[e];
          },
          resetLoggedPropertyAccesses: function () {
            l.resetLoggedProperties();
          },
        };
        var d = c.default.log;
        (t.log = d), (t.createFrame = i.createFrame), (t.logger = c.default);
      },
      908: function (e, t, n) {
        t.__esModule = !0;
        var r,
          i = n(849),
          s = n(769),
          o = (r = s) && r.__esModule ? r : { default: r };
        (t.default = function (e) {
          e.registerHelper("with", function (e, t) {
            if (2 != arguments.length)
              throw new o.default("#with requires exactly one argument");
            i.isFunction(e) && (e = e.call(this));
            var n = t.fn;
            if (i.isEmpty(e)) return t.inverse(this);
            var r = t.data;
            return (
              t.data &&
                t.ids &&
                ((r = i.createFrame(t.data)).contextPath = i.appendContextPath(
                  t.data.contextPath,
                  t.ids[0]
                )),
              n(e, {
                data: r,
                blockParams: i.blockParams([e], [r && r.contextPath]),
              })
            );
          });
        }),
          (e.exports = t.default);
      },
      915: function (e, t, n) {
        t.__esModule = !0;
        var r,
          i = n(350),
          s = (r = i) && r.__esModule ? r : { default: r };
        function o() {
          var e =
            arguments.length <= 0 || void 0 === arguments[0]
              ? {}
              : arguments[0];
          this.options = e;
        }
        function a(e, t, n) {
          void 0 === t && (t = e.length);
          var r = e[t - 1],
            i = e[t - 2];
          return r
            ? "ContentStatement" === r.type
              ? (i || !n ? /\r?\n\s*?$/ : /(^|\r?\n)\s*?$/).test(r.original)
              : void 0
            : n;
        }
        function c(e, t, n) {
          void 0 === t && (t = -1);
          var r = e[t + 1],
            i = e[t + 2];
          return r
            ? "ContentStatement" === r.type
              ? (i || !n ? /^\s*?\r?\n/ : /^\s*?(\r?\n|$)/).test(r.original)
              : void 0
            : n;
        }
        function l(e, t, n) {
          var r = e[null == t ? 0 : t + 1];
          if (r && "ContentStatement" === r.type && (n || !r.rightStripped)) {
            var i = r.value;
            (r.value = r.value.replace(n ? /^\s+/ : /^[ \t]*\r?\n?/, "")),
              (r.rightStripped = r.value !== i);
          }
        }
        function u(e, t, n) {
          var r = e[null == t ? e.length - 1 : t - 1];
          if (r && "ContentStatement" === r.type && (n || !r.leftStripped)) {
            var i = r.value;
            return (
              (r.value = r.value.replace(n ? /\s+$/ : /[ \t]+$/, "")),
              (r.leftStripped = r.value !== i),
              r.leftStripped
            );
          }
        }
        (o.prototype = new s.default()),
          (o.prototype.Program = function (e) {
            var t = !this.options.ignoreStandalone,
              n = !this.isRootSeen;
            this.isRootSeen = !0;
            for (var r = e.body, i = 0, s = r.length; i < s; i++) {
              var o = r[i],
                h = this.accept(o);
              if (h) {
                var d = a(r, i, n),
                  p = c(r, i, n),
                  f = h.openStandalone && d,
                  m = h.closeStandalone && p,
                  g = h.inlineStandalone && d && p;
                h.close && l(r, i, !0),
                  h.open && u(r, i, !0),
                  t &&
                    g &&
                    (l(r, i),
                    u(r, i) &&
                      "PartialStatement" === o.type &&
                      (o.indent = /([ \t]+$)/.exec(r[i - 1].original)[1])),
                  t && f && (l((o.program || o.inverse).body), u(r, i)),
                  t && m && (l(r, i), u((o.inverse || o.program).body));
              }
            }
            return e;
          }),
          (o.prototype.BlockStatement =
            o.prototype.DecoratorBlock =
            o.prototype.PartialBlockStatement =
              function (e) {
                this.accept(e.program), this.accept(e.inverse);
                var t = e.program || e.inverse,
                  n = e.program && e.inverse,
                  r = n,
                  i = n;
                if (n && n.chained)
                  for (r = n.body[0].program; i.chained; )
                    i = i.body[i.body.length - 1].program;
                var s = {
                  open: e.openStrip.open,
                  close: e.closeStrip.close,
                  openStandalone: c(t.body),
                  closeStandalone: a((r || t).body),
                };
                if ((e.openStrip.close && l(t.body, null, !0), n)) {
                  var o = e.inverseStrip;
                  o.open && u(t.body, null, !0),
                    o.close && l(r.body, null, !0),
                    e.closeStrip.open && u(i.body, null, !0),
                    !this.options.ignoreStandalone &&
                      a(t.body) &&
                      c(r.body) &&
                      (u(t.body), l(r.body));
                } else e.closeStrip.open && u(t.body, null, !0);
                return s;
              }),
          (o.prototype.Decorator = o.prototype.MustacheStatement =
            function (e) {
              return e.strip;
            }),
          (o.prototype.PartialStatement = o.prototype.CommentStatement =
            function (e) {
              var t = e.strip || {};
              return { inlineStandalone: !0, open: t.open, close: t.close };
            }),
          (t.default = o),
          (e.exports = t.default);
      },
      919: function (e, t) {
        t.__esModule = !0;
        var n = {
          helpers: {
            helperExpression: function (e) {
              return (
                "SubExpression" === e.type ||
                (("MustacheStatement" === e.type ||
                  "BlockStatement" === e.type) &&
                  !!((e.params && e.params.length) || e.hash))
              );
            },
            scopedId: function (e) {
              return /^\.|this\b/.test(e.original);
            },
            simpleId: function (e) {
              return 1 === e.parts.length && !n.helpers.scopedId(e) && !e.depth;
            },
          },
        };
        (t.default = n), (e.exports = t.default);
      },
      940: function (e, t, n) {
        (t.__esModule = !0),
          (t.registerDefaultDecorators = function (e) {
            s.default(e);
          });
        var r,
          i = n(430),
          s = (r = i) && r.__esModule ? r : { default: r };
      },
    },
    t = {};
  function n(r) {
    var i = t[r];
    if (void 0 !== i) return i.exports;
    var s = (t[r] = { exports: {} });
    return e[r](s, s.exports, n), s.exports;
  }
  (n.n = function (e) {
    var t =
      e && e.__esModule
        ? function () {
            return e.default;
          }
        : function () {
            return e;
          };
    return n.d(t, { a: t }), t;
  }),
    (n.d = function (e, t) {
      for (var r in t)
        n.o(t, r) &&
          !n.o(e, r) &&
          Object.defineProperty(e, r, { enumerable: !0, get: t[r] });
    }),
    (n.g = (function () {
      if ("object" == typeof globalThis) return globalThis;
      try {
        return this || new Function("return this")();
      } catch (e) {
        if ("object" == typeof window) return window;
      }
    })()),
    (n.o = function (e, t) {
      return Object.prototype.hasOwnProperty.call(e, t);
    });
  const r = function (e) {
      const t = [];
      let n = 0;
      for (let r = 0; r < e.length; r++) {
        let i = e.charCodeAt(r);
        i < 128
          ? (t[n++] = i)
          : i < 2048
          ? ((t[n++] = (i >> 6) | 192), (t[n++] = (63 & i) | 128))
          : 55296 == (64512 & i) &&
            r + 1 < e.length &&
            56320 == (64512 & e.charCodeAt(r + 1))
          ? ((i = 65536 + ((1023 & i) << 10) + (1023 & e.charCodeAt(++r))),
            (t[n++] = (i >> 18) | 240),
            (t[n++] = ((i >> 12) & 63) | 128),
            (t[n++] = ((i >> 6) & 63) | 128),
            (t[n++] = (63 & i) | 128))
          : ((t[n++] = (i >> 12) | 224),
            (t[n++] = ((i >> 6) & 63) | 128),
            (t[n++] = (63 & i) | 128));
      }
      return t;
    },
    i = {
      byteToCharMap_: null,
      charToByteMap_: null,
      byteToCharMapWebSafe_: null,
      charToByteMapWebSafe_: null,
      ENCODED_VALS_BASE:
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",
      get ENCODED_VALS() {
        return this.ENCODED_VALS_BASE + "+/=";
      },
      get ENCODED_VALS_WEBSAFE() {
        return this.ENCODED_VALS_BASE + "-_.";
      },
      HAS_NATIVE_SUPPORT: "function" == typeof atob,
      encodeByteArray(e, t) {
        if (!Array.isArray(e))
          throw Error("encodeByteArray takes an array as a parameter");
        this.init_();
        const n = t ? this.byteToCharMapWebSafe_ : this.byteToCharMap_,
          r = [];
        for (let t = 0; t < e.length; t += 3) {
          const i = e[t],
            s = t + 1 < e.length,
            o = s ? e[t + 1] : 0,
            a = t + 2 < e.length,
            c = a ? e[t + 2] : 0,
            l = i >> 2,
            u = ((3 & i) << 4) | (o >> 4);
          let h = ((15 & o) << 2) | (c >> 6),
            d = 63 & c;
          a || ((d = 64), s || (h = 64)), r.push(n[l], n[u], n[h], n[d]);
        }
        return r.join("");
      },
      encodeString(e, t) {
        return this.HAS_NATIVE_SUPPORT && !t
          ? btoa(e)
          : this.encodeByteArray(r(e), t);
      },
      decodeString(e, t) {
        return this.HAS_NATIVE_SUPPORT && !t
          ? atob(e)
          : (function (e) {
              const t = [];
              let n = 0,
                r = 0;
              for (; n < e.length; ) {
                const i = e[n++];
                if (i < 128) t[r++] = String.fromCharCode(i);
                else if (i > 191 && i < 224) {
                  const s = e[n++];
                  t[r++] = String.fromCharCode(((31 & i) << 6) | (63 & s));
                } else if (i > 239 && i < 365) {
                  const s =
                    (((7 & i) << 18) |
                      ((63 & e[n++]) << 12) |
                      ((63 & e[n++]) << 6) |
                      (63 & e[n++])) -
                    65536;
                  (t[r++] = String.fromCharCode(55296 + (s >> 10))),
                    (t[r++] = String.fromCharCode(56320 + (1023 & s)));
                } else {
                  const s = e[n++],
                    o = e[n++];
                  t[r++] = String.fromCharCode(
                    ((15 & i) << 12) | ((63 & s) << 6) | (63 & o)
                  );
                }
              }
              return t.join("");
            })(this.decodeStringToByteArray(e, t));
      },
      decodeStringToByteArray(e, t) {
        this.init_();
        const n = t ? this.charToByteMapWebSafe_ : this.charToByteMap_,
          r = [];
        for (let t = 0; t < e.length; ) {
          const i = n[e.charAt(t++)],
            o = t < e.length ? n[e.charAt(t)] : 0;
          ++t;
          const a = t < e.length ? n[e.charAt(t)] : 64;
          ++t;
          const c = t < e.length ? n[e.charAt(t)] : 64;
          if ((++t, null == i || null == o || null == a || null == c))
            throw new s();
          const l = (i << 2) | (o >> 4);
          if ((r.push(l), 64 !== a)) {
            const e = ((o << 4) & 240) | (a >> 2);
            if ((r.push(e), 64 !== c)) {
              const e = ((a << 6) & 192) | c;
              r.push(e);
            }
          }
        }
        return r;
      },
      init_() {
        if (!this.byteToCharMap_) {
          (this.byteToCharMap_ = {}),
            (this.charToByteMap_ = {}),
            (this.byteToCharMapWebSafe_ = {}),
            (this.charToByteMapWebSafe_ = {});
          for (let e = 0; e < this.ENCODED_VALS.length; e++)
            (this.byteToCharMap_[e] = this.ENCODED_VALS.charAt(e)),
              (this.charToByteMap_[this.byteToCharMap_[e]] = e),
              (this.byteToCharMapWebSafe_[e] =
                this.ENCODED_VALS_WEBSAFE.charAt(e)),
              (this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]] = e),
              e >= this.ENCODED_VALS_BASE.length &&
                ((this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)] = e),
                (this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)] = e));
        }
      },
    };
  class s extends Error {
    constructor() {
      super(...arguments), (this.name = "DecodeBase64StringError");
    }
  }
  const o = function (e) {
      return (function (e) {
        const t = r(e);
        return i.encodeByteArray(t, !0);
      })(e).replace(/\./g, "");
    },
    a = function (e) {
      try {
        return i.decodeString(e, !0);
      } catch (e) {
        console.error("base64Decode failed: ", e);
      }
      return null;
    };
  const c = () =>
      (function () {
        if ("undefined" != typeof self) return self;
        if ("undefined" != typeof window) return window;
        if (void 0 !== n.g) return n.g;
        throw new Error("Unable to locate global object.");
      })().__FIREBASE_DEFAULTS__,
    l = () => {
      try {
        return (
          c() ||
          (() => {
            if ("undefined" == typeof process || void 0 === process.env) return;
            const e = process.env.__FIREBASE_DEFAULTS__;
            return e ? JSON.parse(e) : void 0;
          })() ||
          (() => {
            if ("undefined" == typeof document) return;
            let e;
            try {
              e = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);
            } catch (e) {
              return;
            }
            const t = e && a(e[1]);
            return t && JSON.parse(t);
          })()
        );
      } catch (e) {
        return void console.info(
          `Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`
        );
      }
    },
    u = (e) => {
      var t, n;
      return null ===
        (n = null === (t = l()) || void 0 === t ? void 0 : t.emulatorHosts) ||
        void 0 === n
        ? void 0
        : n[e];
    },
    h = () => {
      var e;
      return null === (e = l()) || void 0 === e ? void 0 : e.config;
    },
    d = (e) => {
      var t;
      return null === (t = l()) || void 0 === t ? void 0 : t[`_${e}`];
    };
  class p {
    constructor() {
      (this.reject = () => {}),
        (this.resolve = () => {}),
        (this.promise = new Promise((e, t) => {
          (this.resolve = e), (this.reject = t);
        }));
    }
    wrapCallback(e) {
      return (t, n) => {
        t ? this.reject(t) : this.resolve(n),
          "function" == typeof e &&
            (this.promise.catch(() => {}), 1 === e.length ? e(t) : e(t, n));
      };
    }
  }
  function f() {
    return "undefined" != typeof navigator &&
      "string" == typeof navigator.userAgent
      ? navigator.userAgent
      : "";
  }
  function m() {
    return (
      !(function () {
        var e;
        const t =
          null === (e = l()) || void 0 === e ? void 0 : e.forceEnvironment;
        if ("node" === t) return !0;
        if ("browser" === t) return !1;
        try {
          return (
            "[object process]" === Object.prototype.toString.call(n.g.process)
          );
        } catch (e) {
          return !1;
        }
      })() &&
      !!navigator.userAgent &&
      navigator.userAgent.includes("Safari") &&
      !navigator.userAgent.includes("Chrome")
    );
  }
  function g() {
    try {
      return "object" == typeof indexedDB;
    } catch (e) {
      return !1;
    }
  }
  class v extends Error {
    constructor(e, t, n) {
      super(t),
        (this.code = e),
        (this.customData = n),
        (this.name = "FirebaseError"),
        Object.setPrototypeOf(this, v.prototype),
        Error.captureStackTrace &&
          Error.captureStackTrace(this, y.prototype.create);
    }
  }
  class y {
    constructor(e, t, n) {
      (this.service = e), (this.serviceName = t), (this.errors = n);
    }
    create(e, ...t) {
      const n = t[0] || {},
        r = `${this.service}/${e}`,
        i = this.errors[e],
        s = i
          ? (function (e, t) {
              return e.replace(_, (e, n) => {
                const r = t[n];
                return null != r ? String(r) : `<${n}?>`;
              });
            })(i, n)
          : "Error",
        o = `${this.serviceName}: ${s} (${r}).`;
      return new v(r, o, n);
    }
  }
  const _ = /\{\$([^}]+)}/g;
  function b(e, t) {
    if (e === t) return !0;
    const n = Object.keys(e),
      r = Object.keys(t);
    for (const i of n) {
      if (!r.includes(i)) return !1;
      const n = e[i],
        s = t[i];
      if (w(n) && w(s)) {
        if (!b(n, s)) return !1;
      } else if (n !== s) return !1;
    }
    for (const e of r) if (!n.includes(e)) return !1;
    return !0;
  }
  function w(e) {
    return null !== e && "object" == typeof e;
  }
  function S(e) {
    const t = [];
    for (const [n, r] of Object.entries(e))
      Array.isArray(r)
        ? r.forEach((e) => {
            t.push(encodeURIComponent(n) + "=" + encodeURIComponent(e));
          })
        : t.push(encodeURIComponent(n) + "=" + encodeURIComponent(r));
    return t.length ? "&" + t.join("&") : "";
  }
  function E(e) {
    const t = {};
    return (
      e
        .replace(/^\?/, "")
        .split("&")
        .forEach((e) => {
          if (e) {
            const [n, r] = e.split("=");
            t[decodeURIComponent(n)] = decodeURIComponent(r);
          }
        }),
      t
    );
  }
  function I(e) {
    const t = e.indexOf("?");
    if (!t) return "";
    const n = e.indexOf("#", t);
    return e.substring(t, n > 0 ? n : void 0);
  }
  class C {
    constructor(e, t) {
      (this.observers = []),
        (this.unsubscribes = []),
        (this.observerCount = 0),
        (this.task = Promise.resolve()),
        (this.finalized = !1),
        (this.onNoObservers = t),
        this.task
          .then(() => {
            e(this);
          })
          .catch((e) => {
            this.error(e);
          });
    }
    next(e) {
      this.forEachObserver((t) => {
        t.next(e);
      });
    }
    error(e) {
      this.forEachObserver((t) => {
        t.error(e);
      }),
        this.close(e);
    }
    complete() {
      this.forEachObserver((e) => {
        e.complete();
      }),
        this.close();
    }
    subscribe(e, t, n) {
      let r;
      if (void 0 === e && void 0 === t && void 0 === n)
        throw new Error("Missing Observer.");
      (r = (function (e, t) {
        if ("object" != typeof e || null === e) return !1;
        for (const n of t) if (n in e && "function" == typeof e[n]) return !0;
        return !1;
      })(e, ["next", "error", "complete"])
        ? e
        : { next: e, error: t, complete: n }),
        void 0 === r.next && (r.next = k),
        void 0 === r.error && (r.error = k),
        void 0 === r.complete && (r.complete = k);
      const i = this.unsubscribeOne.bind(this, this.observers.length);
      return (
        this.finalized &&
          this.task.then(() => {
            try {
              this.finalError ? r.error(this.finalError) : r.complete();
            } catch (e) {}
          }),
        this.observers.push(r),
        i
      );
    }
    unsubscribeOne(e) {
      void 0 !== this.observers &&
        void 0 !== this.observers[e] &&
        (delete this.observers[e],
        (this.observerCount -= 1),
        0 === this.observerCount &&
          void 0 !== this.onNoObservers &&
          this.onNoObservers(this));
    }
    forEachObserver(e) {
      if (!this.finalized)
        for (let t = 0; t < this.observers.length; t++) this.sendOne(t, e);
    }
    sendOne(e, t) {
      this.task.then(() => {
        if (void 0 !== this.observers && void 0 !== this.observers[e])
          try {
            t(this.observers[e]);
          } catch (e) {
            "undefined" != typeof console && console.error && console.error(e);
          }
      });
    }
    close(e) {
      this.finalized ||
        ((this.finalized = !0),
        void 0 !== e && (this.finalError = e),
        this.task.then(() => {
          (this.observers = void 0), (this.onNoObservers = void 0);
        }));
    }
  }
  function k() {}
  function T(e) {
    return e && e._delegate ? e._delegate : e;
  }
  class L {
    constructor(e, t, n) {
      (this.name = e),
        (this.instanceFactory = t),
        (this.type = n),
        (this.multipleInstances = !1),
        (this.serviceProps = {}),
        (this.instantiationMode = "LAZY"),
        (this.onInstanceCreated = null);
    }
    setInstantiationMode(e) {
      return (this.instantiationMode = e), this;
    }
    setMultipleInstances(e) {
      return (this.multipleInstances = e), this;
    }
    setServiceProps(e) {
      return (this.serviceProps = e), this;
    }
    setInstanceCreatedCallback(e) {
      return (this.onInstanceCreated = e), this;
    }
  }
  const A = "[DEFAULT]";
  class N {
    constructor(e, t) {
      (this.name = e),
        (this.container = t),
        (this.component = null),
        (this.instances = new Map()),
        (this.instancesDeferred = new Map()),
        (this.instancesOptions = new Map()),
        (this.onInitCallbacks = new Map());
    }
    get(e) {
      const t = this.normalizeInstanceIdentifier(e);
      if (!this.instancesDeferred.has(t)) {
        const e = new p();
        if (
          (this.instancesDeferred.set(t, e),
          this.isInitialized(t) || this.shouldAutoInitialize())
        )
          try {
            const n = this.getOrInitializeService({ instanceIdentifier: t });
            n && e.resolve(n);
          } catch (e) {}
      }
      return this.instancesDeferred.get(t).promise;
    }
    getImmediate(e) {
      var t;
      const n = this.normalizeInstanceIdentifier(
          null == e ? void 0 : e.identifier
        ),
        r = null !== (t = null == e ? void 0 : e.optional) && void 0 !== t && t;
      if (!this.isInitialized(n) && !this.shouldAutoInitialize()) {
        if (r) return null;
        throw Error(`Service ${this.name} is not available`);
      }
      try {
        return this.getOrInitializeService({ instanceIdentifier: n });
      } catch (e) {
        if (r) return null;
        throw e;
      }
    }
    getComponent() {
      return this.component;
    }
    setComponent(e) {
      if (e.name !== this.name)
        throw Error(
          `Mismatching Component ${e.name} for Provider ${this.name}.`
        );
      if (this.component)
        throw Error(`Component for ${this.name} has already been provided`);
      if (((this.component = e), this.shouldAutoInitialize())) {
        if (
          (function (e) {
            return "EAGER" === e.instantiationMode;
          })(e)
        )
          try {
            this.getOrInitializeService({ instanceIdentifier: A });
          } catch (e) {}
        for (const [e, t] of this.instancesDeferred.entries()) {
          const n = this.normalizeInstanceIdentifier(e);
          try {
            const e = this.getOrInitializeService({ instanceIdentifier: n });
            t.resolve(e);
          } catch (e) {}
        }
      }
    }
    clearInstance(e = A) {
      this.instancesDeferred.delete(e),
        this.instancesOptions.delete(e),
        this.instances.delete(e);
    }
    async delete() {
      const e = Array.from(this.instances.values());
      await Promise.all([
        ...e.filter((e) => "INTERNAL" in e).map((e) => e.INTERNAL.delete()),
        ...e.filter((e) => "_delete" in e).map((e) => e._delete()),
      ]);
    }
    isComponentSet() {
      return null != this.component;
    }
    isInitialized(e = A) {
      return this.instances.has(e);
    }
    getOptions(e = A) {
      return this.instancesOptions.get(e) || {};
    }
    initialize(e = {}) {
      const { options: t = {} } = e,
        n = this.normalizeInstanceIdentifier(e.instanceIdentifier);
      if (this.isInitialized(n))
        throw Error(`${this.name}(${n}) has already been initialized`);
      if (!this.isComponentSet())
        throw Error(`Component ${this.name} has not been registered yet`);
      const r = this.getOrInitializeService({
        instanceIdentifier: n,
        options: t,
      });
      for (const [e, t] of this.instancesDeferred.entries()) {
        n === this.normalizeInstanceIdentifier(e) && t.resolve(r);
      }
      return r;
    }
    onInit(e, t) {
      var n;
      const r = this.normalizeInstanceIdentifier(t),
        i =
          null !== (n = this.onInitCallbacks.get(r)) && void 0 !== n
            ? n
            : new Set();
      i.add(e), this.onInitCallbacks.set(r, i);
      const s = this.instances.get(r);
      return (
        s && e(s, r),
        () => {
          i.delete(e);
        }
      );
    }
    invokeOnInitCallbacks(e, t) {
      const n = this.onInitCallbacks.get(t);
      if (n)
        for (const r of n)
          try {
            r(e, t);
          } catch (e) {}
    }
    getOrInitializeService({ instanceIdentifier: e, options: t = {} }) {
      let n = this.instances.get(e);
      if (
        !n &&
        this.component &&
        ((n = this.component.instanceFactory(this.container, {
          instanceIdentifier: ((r = e), r === A ? void 0 : r),
          options: t,
        })),
        this.instances.set(e, n),
        this.instancesOptions.set(e, t),
        this.invokeOnInitCallbacks(n, e),
        this.component.onInstanceCreated)
      )
        try {
          this.component.onInstanceCreated(this.container, e, n);
        } catch (e) {}
      var r;
      return n || null;
    }
    normalizeInstanceIdentifier(e = A) {
      return this.component ? (this.component.multipleInstances ? e : A) : e;
    }
    shouldAutoInitialize() {
      return (
        !!this.component && "EXPLICIT" !== this.component.instantiationMode
      );
    }
  }
  class P {
    constructor(e) {
      (this.name = e), (this.providers = new Map());
    }
    addComponent(e) {
      const t = this.getProvider(e.name);
      if (t.isComponentSet())
        throw new Error(
          `Component ${e.name} has already been registered with ${this.name}`
        );
      t.setComponent(e);
    }
    addOrOverwriteComponent(e) {
      this.getProvider(e.name).isComponentSet() &&
        this.providers.delete(e.name),
        this.addComponent(e);
    }
    getProvider(e) {
      if (this.providers.has(e)) return this.providers.get(e);
      const t = new N(e, this);
      return this.providers.set(e, t), t;
    }
    getProviders() {
      return Array.from(this.providers.values());
    }
  }
  const O = [];
  var D;
  !(function (e) {
    (e[(e.DEBUG = 0)] = "DEBUG"),
      (e[(e.VERBOSE = 1)] = "VERBOSE"),
      (e[(e.INFO = 2)] = "INFO"),
      (e[(e.WARN = 3)] = "WARN"),
      (e[(e.ERROR = 4)] = "ERROR"),
      (e[(e.SILENT = 5)] = "SILENT");
  })(D || (D = {}));
  const x = {
      debug: D.DEBUG,
      verbose: D.VERBOSE,
      info: D.INFO,
      warn: D.WARN,
      error: D.ERROR,
      silent: D.SILENT,
    },
    M = D.INFO,
    R = {
      [D.DEBUG]: "log",
      [D.VERBOSE]: "log",
      [D.INFO]: "info",
      [D.WARN]: "warn",
      [D.ERROR]: "error",
    },
    q = (e, t, ...n) => {
      if (t < e.logLevel) return;
      const r = new Date().toISOString(),
        i = R[t];
      if (!i)
        throw new Error(
          `Attempted to log a message with an invalid logType (value: ${t})`
        );
      console[i](`[${r}]  ${e.name}:`, ...n);
    };
  class U {
    constructor(e) {
      (this.name = e),
        (this._logLevel = M),
        (this._logHandler = q),
        (this._userLogHandler = null),
        O.push(this);
    }
    get logLevel() {
      return this._logLevel;
    }
    set logLevel(e) {
      if (!(e in D))
        throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);
      this._logLevel = e;
    }
    setLogLevel(e) {
      this._logLevel = "string" == typeof e ? x[e] : e;
    }
    get logHandler() {
      return this._logHandler;
    }
    set logHandler(e) {
      if ("function" != typeof e)
        throw new TypeError(
          "Value assigned to `logHandler` must be a function"
        );
      this._logHandler = e;
    }
    get userLogHandler() {
      return this._userLogHandler;
    }
    set userLogHandler(e) {
      this._userLogHandler = e;
    }
    debug(...e) {
      this._userLogHandler && this._userLogHandler(this, D.DEBUG, ...e),
        this._logHandler(this, D.DEBUG, ...e);
    }
    log(...e) {
      this._userLogHandler && this._userLogHandler(this, D.VERBOSE, ...e),
        this._logHandler(this, D.VERBOSE, ...e);
    }
    info(...e) {
      this._userLogHandler && this._userLogHandler(this, D.INFO, ...e),
        this._logHandler(this, D.INFO, ...e);
    }
    warn(...e) {
      this._userLogHandler && this._userLogHandler(this, D.WARN, ...e),
        this._logHandler(this, D.WARN, ...e);
    }
    error(...e) {
      this._userLogHandler && this._userLogHandler(this, D.ERROR, ...e),
        this._logHandler(this, D.ERROR, ...e);
    }
  }
  let V, F;
  const B = new WeakMap(),
    H = new WeakMap(),
    j = new WeakMap(),
    $ = new WeakMap(),
    z = new WeakMap();
  let K = {
    get(e, t, n) {
      if (e instanceof IDBTransaction) {
        if ("done" === t) return H.get(e);
        if ("objectStoreNames" === t) return e.objectStoreNames || j.get(e);
        if ("store" === t)
          return n.objectStoreNames[1]
            ? void 0
            : n.objectStore(n.objectStoreNames[0]);
      }
      return Q(e[t]);
    },
    set(e, t, n) {
      return (e[t] = n), !0;
    },
    has(e, t) {
      return (
        (e instanceof IDBTransaction && ("done" === t || "store" === t)) ||
        t in e
      );
    },
  };
  function G(e) {
    return e !== IDBDatabase.prototype.transaction ||
      "objectStoreNames" in IDBTransaction.prototype
      ? (
          F ||
          (F = [
            IDBCursor.prototype.advance,
            IDBCursor.prototype.continue,
            IDBCursor.prototype.continuePrimaryKey,
          ])
        ).includes(e)
        ? function (...t) {
            return e.apply(J(this), t), Q(B.get(this));
          }
        : function (...t) {
            return Q(e.apply(J(this), t));
          }
      : function (t, ...n) {
          const r = e.call(J(this), t, ...n);
          return j.set(r, t.sort ? t.sort() : [t]), Q(r);
        };
  }
  function W(e) {
    return "function" == typeof e
      ? G(e)
      : (e instanceof IDBTransaction &&
          (function (e) {
            if (H.has(e)) return;
            const t = new Promise((t, n) => {
              const r = () => {
                  e.removeEventListener("complete", i),
                    e.removeEventListener("error", s),
                    e.removeEventListener("abort", s);
                },
                i = () => {
                  t(), r();
                },
                s = () => {
                  n(e.error || new DOMException("AbortError", "AbortError")),
                    r();
                };
              e.addEventListener("complete", i),
                e.addEventListener("error", s),
                e.addEventListener("abort", s);
            });
            H.set(e, t);
          })(e),
        (t = e),
        (
          V ||
          (V = [
            IDBDatabase,
            IDBObjectStore,
            IDBIndex,
            IDBCursor,
            IDBTransaction,
          ])
        ).some((e) => t instanceof e)
          ? new Proxy(e, K)
          : e);
    var t;
  }
  function Q(e) {
    if (e instanceof IDBRequest)
      return (function (e) {
        const t = new Promise((t, n) => {
          const r = () => {
              e.removeEventListener("success", i),
                e.removeEventListener("error", s);
            },
            i = () => {
              t(Q(e.result)), r();
            },
            s = () => {
              n(e.error), r();
            };
          e.addEventListener("success", i), e.addEventListener("error", s);
        });
        return (
          t
            .then((t) => {
              t instanceof IDBCursor && B.set(t, e);
            })
            .catch(() => {}),
          z.set(t, e),
          t
        );
      })(e);
    if ($.has(e)) return $.get(e);
    const t = W(e);
    return t !== e && ($.set(e, t), z.set(t, e)), t;
  }
  const J = (e) => z.get(e);
  const Y = ["get", "getKey", "getAll", "getAllKeys", "count"],
    X = ["put", "add", "delete", "clear"],
    Z = new Map();
  function ee(e, t) {
    if (!(e instanceof IDBDatabase) || t in e || "string" != typeof t) return;
    if (Z.get(t)) return Z.get(t);
    const n = t.replace(/FromIndex$/, ""),
      r = t !== n,
      i = X.includes(n);
    if (
      !(n in (r ? IDBIndex : IDBObjectStore).prototype) ||
      (!i && !Y.includes(n))
    )
      return;
    const s = async function (e, ...t) {
      const s = this.transaction(e, i ? "readwrite" : "readonly");
      let o = s.store;
      return (
        r && (o = o.index(t.shift())),
        (await Promise.all([o[n](...t), i && s.done]))[0]
      );
    };
    return Z.set(t, s), s;
  }
  K = ((e) => ({
    ...e,
    get: (t, n, r) => ee(t, n) || e.get(t, n, r),
    has: (t, n) => !!ee(t, n) || e.has(t, n),
  }))(K);
  class te {
    constructor(e) {
      this.container = e;
    }
    getPlatformInfoString() {
      return this.container
        .getProviders()
        .map((e) => {
          if (
            (function (e) {
              const t = e.getComponent();
              return "VERSION" === (null == t ? void 0 : t.type);
            })(e)
          ) {
            const t = e.getImmediate();
            return `${t.library}/${t.version}`;
          }
          return null;
        })
        .filter((e) => e)
        .join(" ");
    }
  }
  const ne = "@firebase/app",
    re = "0.10.13",
    ie = new U("@firebase/app"),
    se = "@firebase/app-compat",
    oe = "@firebase/analytics-compat",
    ae = "@firebase/analytics",
    ce = "@firebase/app-check-compat",
    le = "@firebase/app-check",
    ue = "@firebase/auth",
    he = "@firebase/auth-compat",
    de = "@firebase/database",
    pe = "@firebase/data-connect",
    fe = "@firebase/database-compat",
    me = "@firebase/functions",
    ge = "@firebase/functions-compat",
    ve = "@firebase/installations",
    ye = "@firebase/installations-compat",
    _e = "@firebase/messaging",
    be = "@firebase/messaging-compat",
    we = "@firebase/performance",
    Se = "@firebase/performance-compat",
    Ee = "@firebase/remote-config",
    Ie = "@firebase/remote-config-compat",
    Ce = "@firebase/storage",
    ke = "@firebase/storage-compat",
    Te = "@firebase/firestore",
    Le = "@firebase/vertexai-preview",
    Ae = "@firebase/firestore-compat",
    Ne = "firebase",
    Pe = "[DEFAULT]",
    Oe = {
      [ne]: "fire-core",
      [se]: "fire-core-compat",
      [ae]: "fire-analytics",
      [oe]: "fire-analytics-compat",
      [le]: "fire-app-check",
      [ce]: "fire-app-check-compat",
      [ue]: "fire-auth",
      [he]: "fire-auth-compat",
      [de]: "fire-rtdb",
      [pe]: "fire-data-connect",
      [fe]: "fire-rtdb-compat",
      [me]: "fire-fn",
      [ge]: "fire-fn-compat",
      [ve]: "fire-iid",
      [ye]: "fire-iid-compat",
      [_e]: "fire-fcm",
      [be]: "fire-fcm-compat",
      [we]: "fire-perf",
      [Se]: "fire-perf-compat",
      [Ee]: "fire-rc",
      [Ie]: "fire-rc-compat",
      [Ce]: "fire-gcs",
      [ke]: "fire-gcs-compat",
      [Te]: "fire-fst",
      [Ae]: "fire-fst-compat",
      [Le]: "fire-vertex",
      "fire-js": "fire-js",
      [Ne]: "fire-js-all",
    },
    De = new Map(),
    xe = new Map(),
    Me = new Map();
  function Re(e, t) {
    try {
      e.container.addComponent(t);
    } catch (n) {
      ie.debug(
        `Component ${t.name} failed to register with FirebaseApp ${e.name}`,
        n
      );
    }
  }
  function qe(e) {
    const t = e.name;
    if (Me.has(t))
      return (
        ie.debug(`There were multiple attempts to register component ${t}.`), !1
      );
    Me.set(t, e);
    for (const t of De.values()) Re(t, e);
    for (const t of xe.values()) Re(t, e);
    return !0;
  }
  function Ue(e, t) {
    const n = e.container
      .getProvider("heartbeat")
      .getImmediate({ optional: !0 });
    return n && n.triggerHeartbeat(), e.container.getProvider(t);
  }
  function Ve(e) {
    return void 0 !== e.settings;
  }
  const Fe = new y("app", "Firebase", {
    "no-app":
      "No Firebase App '{$appName}' has been created - call initializeApp() first",
    "bad-app-name": "Illegal App name: '{$appName}'",
    "duplicate-app":
      "Firebase App named '{$appName}' already exists with different options or config",
    "app-deleted": "Firebase App named '{$appName}' already deleted",
    "server-app-deleted": "Firebase Server App has been deleted",
    "no-options":
      "Need to provide options, when not being deployed to hosting via source.",
    "invalid-app-argument":
      "firebase.{$appName}() takes either no argument or a Firebase App instance.",
    "invalid-log-argument":
      "First argument to `onLog` must be null or a function.",
    "idb-open":
      "Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",
    "idb-get":
      "Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",
    "idb-set":
      "Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",
    "idb-delete":
      "Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",
    "finalization-registry-not-supported":
      "FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",
    "invalid-server-app-environment":
      "FirebaseServerApp is not for use in browser environments.",
  });
  class Be {
    constructor(e, t, n) {
      (this._isDeleted = !1),
        (this._options = Object.assign({}, e)),
        (this._config = Object.assign({}, t)),
        (this._name = t.name),
        (this._automaticDataCollectionEnabled =
          t.automaticDataCollectionEnabled),
        (this._container = n),
        this.container.addComponent(new L("app", () => this, "PUBLIC"));
    }
    get automaticDataCollectionEnabled() {
      return this.checkDestroyed(), this._automaticDataCollectionEnabled;
    }
    set automaticDataCollectionEnabled(e) {
      this.checkDestroyed(), (this._automaticDataCollectionEnabled = e);
    }
    get name() {
      return this.checkDestroyed(), this._name;
    }
    get options() {
      return this.checkDestroyed(), this._options;
    }
    get config() {
      return this.checkDestroyed(), this._config;
    }
    get container() {
      return this._container;
    }
    get isDeleted() {
      return this._isDeleted;
    }
    set isDeleted(e) {
      this._isDeleted = e;
    }
    checkDestroyed() {
      if (this.isDeleted)
        throw Fe.create("app-deleted", { appName: this._name });
    }
  }
  const He = "10.14.1";
  function je(e, t = {}) {
    let n = e;
    if ("object" != typeof t) {
      t = { name: t };
    }
    const r = Object.assign(
        { name: Pe, automaticDataCollectionEnabled: !1 },
        t
      ),
      i = r.name;
    if ("string" != typeof i || !i)
      throw Fe.create("bad-app-name", { appName: String(i) });
    if ((n || (n = h()), !n)) throw Fe.create("no-options");
    const s = De.get(i);
    if (s) {
      if (b(n, s.options) && b(r, s.config)) return s;
      throw Fe.create("duplicate-app", { appName: i });
    }
    const o = new P(i);
    for (const e of Me.values()) o.addComponent(e);
    const a = new Be(n, r, o);
    return De.set(i, a), a;
  }
  function $e(e = Pe) {
    const t = De.get(e);
    if (!t && e === Pe && h()) return je();
    if (!t) throw Fe.create("no-app", { appName: e });
    return t;
  }
  function ze() {
    return Array.from(De.values());
  }
  function Ke(e, t, n) {
    var r;
    let i = null !== (r = Oe[e]) && void 0 !== r ? r : e;
    n && (i += `-${n}`);
    const s = i.match(/\s|\//),
      o = t.match(/\s|\//);
    if (s || o) {
      const e = [`Unable to register library "${i}" with version "${t}":`];
      return (
        s &&
          e.push(
            `library name "${i}" contains illegal characters (whitespace or "/")`
          ),
        s && o && e.push("and"),
        o &&
          e.push(
            `version name "${t}" contains illegal characters (whitespace or "/")`
          ),
        void ie.warn(e.join(" "))
      );
    }
    qe(new L(`${i}-version`, () => ({ library: i, version: t }), "VERSION"));
  }
  const Ge = "firebase-heartbeat-store";
  let We = null;
  function Qe() {
    return (
      We ||
        (We = (function (
          e,
          t,
          { blocked: n, upgrade: r, blocking: i, terminated: s } = {}
        ) {
          const o = indexedDB.open(e, t),
            a = Q(o);
          return (
            r &&
              o.addEventListener("upgradeneeded", (e) => {
                r(Q(o.result), e.oldVersion, e.newVersion, Q(o.transaction), e);
              }),
            n &&
              o.addEventListener("blocked", (e) =>
                n(e.oldVersion, e.newVersion, e)
              ),
            a
              .then((e) => {
                s && e.addEventListener("close", () => s()),
                  i &&
                    e.addEventListener("versionchange", (e) =>
                      i(e.oldVersion, e.newVersion, e)
                    );
              })
              .catch(() => {}),
            a
          );
        })("firebase-heartbeat-database", 1, {
          upgrade: (e, t) => {
            if (0 === t)
              try {
                e.createObjectStore(Ge);
              } catch (e) {
                console.warn(e);
              }
          },
        }).catch((e) => {
          throw Fe.create("idb-open", { originalErrorMessage: e.message });
        })),
      We
    );
  }
  async function Je(e, t) {
    try {
      const n = (await Qe()).transaction(Ge, "readwrite"),
        r = n.objectStore(Ge);
      await r.put(t, Ye(e)), await n.done;
    } catch (e) {
      if (e instanceof v) ie.warn(e.message);
      else {
        const t = Fe.create("idb-set", {
          originalErrorMessage: null == e ? void 0 : e.message,
        });
        ie.warn(t.message);
      }
    }
  }
  function Ye(e) {
    return `${e.name}!${e.options.appId}`;
  }
  class Xe {
    constructor(e) {
      (this.container = e), (this._heartbeatsCache = null);
      const t = this.container.getProvider("app").getImmediate();
      (this._storage = new et(t)),
        (this._heartbeatsCachePromise = this._storage
          .read()
          .then((e) => ((this._heartbeatsCache = e), e)));
    }
    async triggerHeartbeat() {
      var e, t;
      try {
        const n = this.container
            .getProvider("platform-logger")
            .getImmediate()
            .getPlatformInfoString(),
          r = Ze();
        if (
          null ==
            (null === (e = this._heartbeatsCache) || void 0 === e
              ? void 0
              : e.heartbeats) &&
          ((this._heartbeatsCache = await this._heartbeatsCachePromise),
          null ==
            (null === (t = this._heartbeatsCache) || void 0 === t
              ? void 0
              : t.heartbeats))
        )
          return;
        if (
          this._heartbeatsCache.lastSentHeartbeatDate === r ||
          this._heartbeatsCache.heartbeats.some((e) => e.date === r)
        )
          return;
        return (
          this._heartbeatsCache.heartbeats.push({ date: r, agent: n }),
          (this._heartbeatsCache.heartbeats =
            this._heartbeatsCache.heartbeats.filter((e) => {
              const t = new Date(e.date).valueOf();
              return Date.now() - t <= 2592e6;
            })),
          this._storage.overwrite(this._heartbeatsCache)
        );
      } catch (e) {
        ie.warn(e);
      }
    }
    async getHeartbeatsHeader() {
      var e;
      try {
        if (
          (null === this._heartbeatsCache &&
            (await this._heartbeatsCachePromise),
          null ==
            (null === (e = this._heartbeatsCache) || void 0 === e
              ? void 0
              : e.heartbeats) || 0 === this._heartbeatsCache.heartbeats.length)
        )
          return "";
        const t = Ze(),
          { heartbeatsToSend: n, unsentEntries: r } = (function (e, t = 1024) {
            const n = [];
            let r = e.slice();
            for (const i of e) {
              const e = n.find((e) => e.agent === i.agent);
              if (e) {
                if ((e.dates.push(i.date), tt(n) > t)) {
                  e.dates.pop();
                  break;
                }
              } else if (
                (n.push({ agent: i.agent, dates: [i.date] }), tt(n) > t)
              ) {
                n.pop();
                break;
              }
              r = r.slice(1);
            }
            return { heartbeatsToSend: n, unsentEntries: r };
          })(this._heartbeatsCache.heartbeats),
          i = o(JSON.stringify({ version: 2, heartbeats: n }));
        return (
          (this._heartbeatsCache.lastSentHeartbeatDate = t),
          r.length > 0
            ? ((this._heartbeatsCache.heartbeats = r),
              await this._storage.overwrite(this._heartbeatsCache))
            : ((this._heartbeatsCache.heartbeats = []),
              this._storage.overwrite(this._heartbeatsCache)),
          i
        );
      } catch (e) {
        return ie.warn(e), "";
      }
    }
  }
  function Ze() {
    return new Date().toISOString().substring(0, 10);
  }
  class et {
    constructor(e) {
      (this.app = e),
        (this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck());
    }
    async runIndexedDBEnvironmentCheck() {
      return (
        !!g() &&
        new Promise((e, t) => {
          try {
            let n = !0;
            const r = "validate-browser-context-for-indexeddb-analytics-module",
              i = self.indexedDB.open(r);
            (i.onsuccess = () => {
              i.result.close(), n || self.indexedDB.deleteDatabase(r), e(!0);
            }),
              (i.onupgradeneeded = () => {
                n = !1;
              }),
              (i.onerror = () => {
                var e;
                t(
                  (null === (e = i.error) || void 0 === e
                    ? void 0
                    : e.message) || ""
                );
              });
          } catch (e) {
            t(e);
          }
        })
          .then(() => !0)
          .catch(() => !1)
      );
    }
    async read() {
      if (await this._canUseIndexedDBPromise) {
        const e = await (async function (e) {
          try {
            const t = (await Qe()).transaction(Ge),
              n = await t.objectStore(Ge).get(Ye(e));
            return await t.done, n;
          } catch (e) {
            if (e instanceof v) ie.warn(e.message);
            else {
              const t = Fe.create("idb-get", {
                originalErrorMessage: null == e ? void 0 : e.message,
              });
              ie.warn(t.message);
            }
          }
        })(this.app);
        return (null == e ? void 0 : e.heartbeats) ? e : { heartbeats: [] };
      }
      return { heartbeats: [] };
    }
    async overwrite(e) {
      var t;
      if (await this._canUseIndexedDBPromise) {
        const n = await this.read();
        return Je(this.app, {
          lastSentHeartbeatDate:
            null !== (t = e.lastSentHeartbeatDate) && void 0 !== t
              ? t
              : n.lastSentHeartbeatDate,
          heartbeats: e.heartbeats,
        });
      }
    }
    async add(e) {
      var t;
      if (await this._canUseIndexedDBPromise) {
        const n = await this.read();
        return Je(this.app, {
          lastSentHeartbeatDate:
            null !== (t = e.lastSentHeartbeatDate) && void 0 !== t
              ? t
              : n.lastSentHeartbeatDate,
          heartbeats: [...n.heartbeats, ...e.heartbeats],
        });
      }
    }
  }
  function tt(e) {
    return o(JSON.stringify({ version: 2, heartbeats: e })).length;
  }
  var nt;
  (nt = ""),
    qe(new L("platform-logger", (e) => new te(e), "PRIVATE")),
    qe(new L("heartbeat", (e) => new Xe(e), "PRIVATE")),
    Ke(ne, re, nt),
    Ke(ne, re, "esm2017"),
    Ke("fire-js", "");
  function rt(e, t) {
    var n = {};
    for (var r in e)
      Object.prototype.hasOwnProperty.call(e, r) &&
        t.indexOf(r) < 0 &&
        (n[r] = e[r]);
    if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
      var i = 0;
      for (r = Object.getOwnPropertySymbols(e); i < r.length; i++)
        t.indexOf(r[i]) < 0 &&
          Object.prototype.propertyIsEnumerable.call(e, r[i]) &&
          (n[r[i]] = e[r[i]]);
    }
    return n;
  }
  Object.create;
  Object.create;
  "function" == typeof SuppressedError && SuppressedError;
  function it() {
    return {
      "dependent-sdk-initialized-before-auth":
        "Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",
    };
  }
  const st = it,
    ot = new y("auth", "Firebase", {
      "dependent-sdk-initialized-before-auth":
        "Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",
    }),
    at = new U("@firebase/auth");
  function ct(e, ...t) {
    at.logLevel <= D.ERROR && at.error(`Auth (${He}): ${e}`, ...t);
  }
  function lt(e, ...t) {
    throw pt(e, ...t);
  }
  function ut(e, ...t) {
    return pt(e, ...t);
  }
  function ht(e, t, n) {
    const r = Object.assign(Object.assign({}, st()), { [t]: n });
    return new y("auth", "Firebase", r).create(t, { appName: e.name });
  }
  function dt(e) {
    return ht(
      e,
      "operation-not-supported-in-this-environment",
      "Operations that alter the current user are not supported in conjunction with FirebaseServerApp"
    );
  }
  function pt(e, ...t) {
    if ("string" != typeof e) {
      const n = t[0],
        r = [...t.slice(1)];
      return r[0] && (r[0].appName = e.name), e._errorFactory.create(n, ...r);
    }
    return ot.create(e, ...t);
  }
  function ft(e, t, ...n) {
    if (!e) throw pt(t, ...n);
  }
  function mt(e) {
    const t = "INTERNAL ASSERTION FAILED: " + e;
    throw (ct(t), new Error(t));
  }
  function gt(e, t) {
    e || mt(t);
  }
  function vt() {
    var e;
    return (
      ("undefined" != typeof self &&
        (null === (e = self.location) || void 0 === e ? void 0 : e.href)) ||
      ""
    );
  }
  function yt() {
    return "http:" === _t() || "https:" === _t();
  }
  function _t() {
    var e;
    return (
      ("undefined" != typeof self &&
        (null === (e = self.location) || void 0 === e ? void 0 : e.protocol)) ||
      null
    );
  }
  function bt() {
    return (
      !(
        "undefined" != typeof navigator &&
        navigator &&
        "onLine" in navigator &&
        "boolean" == typeof navigator.onLine &&
        (yt() ||
          (function () {
            const e =
              "object" == typeof chrome
                ? chrome.runtime
                : "object" == typeof browser
                ? browser.runtime
                : void 0;
            return "object" == typeof e && void 0 !== e.id;
          })() ||
          "connection" in navigator)
      ) || navigator.onLine
    );
  }
  class wt {
    constructor(e, t) {
      (this.shortDelay = e),
        (this.longDelay = t),
        gt(t > e, "Short delay should be less than long delay!"),
        (this.isMobile =
          ("undefined" != typeof window &&
            !!(window.cordova || window.phonegap || window.PhoneGap) &&
            /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())) ||
          ("object" == typeof navigator &&
            "ReactNative" === navigator.product));
    }
    get() {
      return bt()
        ? this.isMobile
          ? this.longDelay
          : this.shortDelay
        : Math.min(5e3, this.shortDelay);
    }
  }
  function St(e, t) {
    gt(e.emulator, "Emulator should always be set here");
    const { url: n } = e.emulator;
    return t ? `${n}${t.startsWith("/") ? t.slice(1) : t}` : n;
  }
  class Et {
    static initialize(e, t, n) {
      (this.fetchImpl = e),
        t && (this.headersImpl = t),
        n && (this.responseImpl = n);
    }
    static fetch() {
      return this.fetchImpl
        ? this.fetchImpl
        : "undefined" != typeof self && "fetch" in self
        ? self.fetch
        : "undefined" != typeof globalThis && globalThis.fetch
        ? globalThis.fetch
        : "undefined" != typeof fetch
        ? fetch
        : void mt(
            "Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill"
          );
    }
    static headers() {
      return this.headersImpl
        ? this.headersImpl
        : "undefined" != typeof self && "Headers" in self
        ? self.Headers
        : "undefined" != typeof globalThis && globalThis.Headers
        ? globalThis.Headers
        : "undefined" != typeof Headers
        ? Headers
        : void mt(
            "Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill"
          );
    }
    static response() {
      return this.responseImpl
        ? this.responseImpl
        : "undefined" != typeof self && "Response" in self
        ? self.Response
        : "undefined" != typeof globalThis && globalThis.Response
        ? globalThis.Response
        : "undefined" != typeof Response
        ? Response
        : void mt(
            "Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill"
          );
    }
  }
  const It = {
      CREDENTIAL_MISMATCH: "custom-token-mismatch",
      MISSING_CUSTOM_TOKEN: "internal-error",
      INVALID_IDENTIFIER: "invalid-email",
      MISSING_CONTINUE_URI: "internal-error",
      INVALID_PASSWORD: "wrong-password",
      MISSING_PASSWORD: "missing-password",
      INVALID_LOGIN_CREDENTIALS: "invalid-credential",
      EMAIL_EXISTS: "email-already-in-use",
      PASSWORD_LOGIN_DISABLED: "operation-not-allowed",
      INVALID_IDP_RESPONSE: "invalid-credential",
      INVALID_PENDING_TOKEN: "invalid-credential",
      FEDERATED_USER_ID_ALREADY_LINKED: "credential-already-in-use",
      MISSING_REQ_TYPE: "internal-error",
      EMAIL_NOT_FOUND: "user-not-found",
      RESET_PASSWORD_EXCEED_LIMIT: "too-many-requests",
      EXPIRED_OOB_CODE: "expired-action-code",
      INVALID_OOB_CODE: "invalid-action-code",
      MISSING_OOB_CODE: "internal-error",
      CREDENTIAL_TOO_OLD_LOGIN_AGAIN: "requires-recent-login",
      INVALID_ID_TOKEN: "invalid-user-token",
      TOKEN_EXPIRED: "user-token-expired",
      USER_NOT_FOUND: "user-token-expired",
      TOO_MANY_ATTEMPTS_TRY_LATER: "too-many-requests",
      PASSWORD_DOES_NOT_MEET_REQUIREMENTS:
        "password-does-not-meet-requirements",
      INVALID_CODE: "invalid-verification-code",
      INVALID_SESSION_INFO: "invalid-verification-id",
      INVALID_TEMPORARY_PROOF: "invalid-credential",
      MISSING_SESSION_INFO: "missing-verification-id",
      SESSION_EXPIRED: "code-expired",
      MISSING_ANDROID_PACKAGE_NAME: "missing-android-pkg-name",
      UNAUTHORIZED_DOMAIN: "unauthorized-continue-uri",
      INVALID_OAUTH_CLIENT_ID: "invalid-oauth-client-id",
      ADMIN_ONLY_OPERATION: "admin-restricted-operation",
      INVALID_MFA_PENDING_CREDENTIAL: "invalid-multi-factor-session",
      MFA_ENROLLMENT_NOT_FOUND: "multi-factor-info-not-found",
      MISSING_MFA_ENROLLMENT_ID: "missing-multi-factor-info",
      MISSING_MFA_PENDING_CREDENTIAL: "missing-multi-factor-session",
      SECOND_FACTOR_EXISTS: "second-factor-already-in-use",
      SECOND_FACTOR_LIMIT_EXCEEDED: "maximum-second-factor-count-exceeded",
      BLOCKING_FUNCTION_ERROR_RESPONSE: "internal-error",
      RECAPTCHA_NOT_ENABLED: "recaptcha-not-enabled",
      MISSING_RECAPTCHA_TOKEN: "missing-recaptcha-token",
      INVALID_RECAPTCHA_TOKEN: "invalid-recaptcha-token",
      INVALID_RECAPTCHA_ACTION: "invalid-recaptcha-action",
      MISSING_CLIENT_TYPE: "missing-client-type",
      MISSING_RECAPTCHA_VERSION: "missing-recaptcha-version",
      INVALID_RECAPTCHA_VERSION: "invalid-recaptcha-version",
      INVALID_REQ_TYPE: "invalid-req-type",
    },
    Ct = new wt(3e4, 6e4);
  function kt(e, t) {
    return e.tenantId && !t.tenantId
      ? Object.assign(Object.assign({}, t), { tenantId: e.tenantId })
      : t;
  }
  async function Tt(e, t, n, r, i = {}) {
    return Lt(e, i, async () => {
      let i = {},
        s = {};
      r && ("GET" === t ? (s = r) : (i = { body: JSON.stringify(r) }));
      const o = S(Object.assign({ key: e.config.apiKey }, s)).slice(1),
        a = await e._getAdditionalHeaders();
      (a["Content-Type"] = "application/json"),
        e.languageCode && (a["X-Firebase-Locale"] = e.languageCode);
      const c = Object.assign({ method: t, headers: a }, i);
      return (
        ("undefined" != typeof navigator &&
          "Cloudflare-Workers" === navigator.userAgent) ||
          (c.referrerPolicy = "no-referrer"),
        Et.fetch()(Nt(e, e.config.apiHost, n, o), c)
      );
    });
  }
  async function Lt(e, t, n) {
    e._canInitEmulator = !1;
    const r = Object.assign(Object.assign({}, It), t);
    try {
      const t = new Ot(e),
        i = await Promise.race([n(), t.promise]);
      t.clearNetworkTimeout();
      const s = await i.json();
      if ("needConfirmation" in s)
        throw Dt(e, "account-exists-with-different-credential", s);
      if (i.ok && !("errorMessage" in s)) return s;
      {
        const t = i.ok ? s.errorMessage : s.error.message,
          [n, o] = t.split(" : ");
        if ("FEDERATED_USER_ID_ALREADY_LINKED" === n)
          throw Dt(e, "credential-already-in-use", s);
        if ("EMAIL_EXISTS" === n) throw Dt(e, "email-already-in-use", s);
        if ("USER_DISABLED" === n) throw Dt(e, "user-disabled", s);
        const a = r[n] || n.toLowerCase().replace(/[_\s]+/g, "-");
        if (o) throw ht(e, a, o);
        lt(e, a);
      }
    } catch (t) {
      if (t instanceof v) throw t;
      lt(e, "network-request-failed", { message: String(t) });
    }
  }
  async function At(e, t, n, r, i = {}) {
    const s = await Tt(e, t, n, r, i);
    return (
      "mfaPendingCredential" in s &&
        lt(e, "multi-factor-auth-required", { _serverResponse: s }),
      s
    );
  }
  function Nt(e, t, n, r) {
    const i = `${t}${n}?${r}`;
    return e.config.emulator ? St(e.config, i) : `${e.config.apiScheme}://${i}`;
  }
  function Pt(e) {
    switch (e) {
      case "ENFORCE":
        return "ENFORCE";
      case "AUDIT":
        return "AUDIT";
      case "OFF":
        return "OFF";
      default:
        return "ENFORCEMENT_STATE_UNSPECIFIED";
    }
  }
  class Ot {
    constructor(e) {
      (this.auth = e),
        (this.timer = null),
        (this.promise = new Promise((e, t) => {
          this.timer = setTimeout(
            () => t(ut(this.auth, "network-request-failed")),
            Ct.get()
          );
        }));
    }
    clearNetworkTimeout() {
      clearTimeout(this.timer);
    }
  }
  function Dt(e, t, n) {
    const r = { appName: e.name };
    n.email && (r.email = n.email),
      n.phoneNumber && (r.phoneNumber = n.phoneNumber);
    const i = ut(e, t, r);
    return (i.customData._tokenResponse = n), i;
  }
  function xt(e) {
    return void 0 !== e && void 0 !== e.enterprise;
  }
  class Mt {
    constructor(e) {
      if (
        ((this.siteKey = ""),
        (this.recaptchaEnforcementState = []),
        void 0 === e.recaptchaKey)
      )
        throw new Error("recaptchaKey undefined");
      (this.siteKey = e.recaptchaKey.split("/")[3]),
        (this.recaptchaEnforcementState = e.recaptchaEnforcementState);
    }
    getProviderEnforcementState(e) {
      if (
        !this.recaptchaEnforcementState ||
        0 === this.recaptchaEnforcementState.length
      )
        return null;
      for (const t of this.recaptchaEnforcementState)
        if (t.provider && t.provider === e) return Pt(t.enforcementState);
      return null;
    }
    isProviderEnabled(e) {
      return (
        "ENFORCE" === this.getProviderEnforcementState(e) ||
        "AUDIT" === this.getProviderEnforcementState(e)
      );
    }
  }
  async function Rt(e, t) {
    return Tt(e, "GET", "/v2/recaptchaConfig", kt(e, t));
  }
  async function qt(e, t) {
    return Tt(e, "POST", "/v1/accounts:lookup", t);
  }
  function Ut(e) {
    if (e)
      try {
        const t = new Date(Number(e));
        if (!isNaN(t.getTime())) return t.toUTCString();
      } catch (e) {}
  }
  function Vt(e) {
    return 1e3 * Number(e);
  }
  function Ft(e) {
    const [t, n, r] = e.split(".");
    if (void 0 === t || void 0 === n || void 0 === r)
      return ct("JWT malformed, contained fewer than 3 sections"), null;
    try {
      const e = a(n);
      return e
        ? JSON.parse(e)
        : (ct("Failed to decode base64 JWT payload"), null);
    } catch (e) {
      return (
        ct(
          "Caught error parsing JWT payload as JSON",
          null == e ? void 0 : e.toString()
        ),
        null
      );
    }
  }
  function Bt(e) {
    const t = Ft(e);
    return (
      ft(t, "internal-error"),
      ft(void 0 !== t.exp, "internal-error"),
      ft(void 0 !== t.iat, "internal-error"),
      Number(t.exp) - Number(t.iat)
    );
  }
  async function Ht(e, t, n = !1) {
    if (n) return t;
    try {
      return await t;
    } catch (t) {
      throw (
        (t instanceof v &&
          (function ({ code: e }) {
            return (
              "auth/user-disabled" === e || "auth/user-token-expired" === e
            );
          })(t) &&
          e.auth.currentUser === e &&
          (await e.auth.signOut()),
        t)
      );
    }
  }
  class jt {
    constructor(e) {
      (this.user = e),
        (this.isRunning = !1),
        (this.timerId = null),
        (this.errorBackoff = 3e4);
    }
    _start() {
      this.isRunning || ((this.isRunning = !0), this.schedule());
    }
    _stop() {
      this.isRunning &&
        ((this.isRunning = !1),
        null !== this.timerId && clearTimeout(this.timerId));
    }
    getInterval(e) {
      var t;
      if (e) {
        const e = this.errorBackoff;
        return (this.errorBackoff = Math.min(2 * this.errorBackoff, 96e4)), e;
      }
      {
        this.errorBackoff = 3e4;
        const e =
          (null !== (t = this.user.stsTokenManager.expirationTime) &&
          void 0 !== t
            ? t
            : 0) -
          Date.now() -
          3e5;
        return Math.max(0, e);
      }
    }
    schedule(e = !1) {
      if (!this.isRunning) return;
      const t = this.getInterval(e);
      this.timerId = setTimeout(async () => {
        await this.iteration();
      }, t);
    }
    async iteration() {
      try {
        await this.user.getIdToken(!0);
      } catch (e) {
        return void (
          "auth/network-request-failed" === (null == e ? void 0 : e.code) &&
          this.schedule(!0)
        );
      }
      this.schedule();
    }
  }
  class $t {
    constructor(e, t) {
      (this.createdAt = e), (this.lastLoginAt = t), this._initializeTime();
    }
    _initializeTime() {
      (this.lastSignInTime = Ut(this.lastLoginAt)),
        (this.creationTime = Ut(this.createdAt));
    }
    _copy(e) {
      (this.createdAt = e.createdAt),
        (this.lastLoginAt = e.lastLoginAt),
        this._initializeTime();
    }
    toJSON() {
      return { createdAt: this.createdAt, lastLoginAt: this.lastLoginAt };
    }
  }
  async function zt(e) {
    var t;
    const n = e.auth,
      r = await e.getIdToken(),
      i = await Ht(e, qt(n, { idToken: r }));
    ft(null == i ? void 0 : i.users.length, n, "internal-error");
    const s = i.users[0];
    e._notifyReloadListener(s);
    const o = (
        null === (t = s.providerUserInfo) || void 0 === t ? void 0 : t.length
      )
        ? Kt(s.providerUserInfo)
        : [],
      a =
        ((c = e.providerData),
        (l = o),
        [
          ...c.filter((e) => !l.some((t) => t.providerId === e.providerId)),
          ...l,
        ]);
    var c, l;
    const u = e.isAnonymous,
      h = !((e.email && s.passwordHash) || (null == a ? void 0 : a.length)),
      d = !!u && h,
      p = {
        uid: s.localId,
        displayName: s.displayName || null,
        photoURL: s.photoUrl || null,
        email: s.email || null,
        emailVerified: s.emailVerified || !1,
        phoneNumber: s.phoneNumber || null,
        tenantId: s.tenantId || null,
        providerData: a,
        metadata: new $t(s.createdAt, s.lastLoginAt),
        isAnonymous: d,
      };
    Object.assign(e, p);
  }
  function Kt(e) {
    return e.map((e) => {
      var { providerId: t } = e,
        n = rt(e, ["providerId"]);
      return {
        providerId: t,
        uid: n.rawId || "",
        displayName: n.displayName || null,
        email: n.email || null,
        phoneNumber: n.phoneNumber || null,
        photoURL: n.photoUrl || null,
      };
    });
  }
  class Gt {
    constructor() {
      (this.refreshToken = null),
        (this.accessToken = null),
        (this.expirationTime = null);
    }
    get isExpired() {
      return !this.expirationTime || Date.now() > this.expirationTime - 3e4;
    }
    updateFromServerResponse(e) {
      ft(e.idToken, "internal-error"),
        ft(void 0 !== e.idToken, "internal-error"),
        ft(void 0 !== e.refreshToken, "internal-error");
      const t =
        "expiresIn" in e && void 0 !== e.expiresIn
          ? Number(e.expiresIn)
          : Bt(e.idToken);
      this.updateTokensAndExpiration(e.idToken, e.refreshToken, t);
    }
    updateFromIdToken(e) {
      ft(0 !== e.length, "internal-error");
      const t = Bt(e);
      this.updateTokensAndExpiration(e, null, t);
    }
    async getToken(e, t = !1) {
      return t || !this.accessToken || this.isExpired
        ? (ft(this.refreshToken, e, "user-token-expired"),
          this.refreshToken
            ? (await this.refresh(e, this.refreshToken), this.accessToken)
            : null)
        : this.accessToken;
    }
    clearRefreshToken() {
      this.refreshToken = null;
    }
    async refresh(e, t) {
      const {
        accessToken: n,
        refreshToken: r,
        expiresIn: i,
      } = await (async function (e, t) {
        const n = await Lt(e, {}, async () => {
          const n = S({ grant_type: "refresh_token", refresh_token: t }).slice(
              1
            ),
            { tokenApiHost: r, apiKey: i } = e.config,
            s = Nt(e, r, "/v1/token", `key=${i}`),
            o = await e._getAdditionalHeaders();
          return (
            (o["Content-Type"] = "application/x-www-form-urlencoded"),
            Et.fetch()(s, { method: "POST", headers: o, body: n })
          );
        });
        return {
          accessToken: n.access_token,
          expiresIn: n.expires_in,
          refreshToken: n.refresh_token,
        };
      })(e, t);
      this.updateTokensAndExpiration(n, r, Number(i));
    }
    updateTokensAndExpiration(e, t, n) {
      (this.refreshToken = t || null),
        (this.accessToken = e || null),
        (this.expirationTime = Date.now() + 1e3 * n);
    }
    static fromJSON(e, t) {
      const { refreshToken: n, accessToken: r, expirationTime: i } = t,
        s = new Gt();
      return (
        n &&
          (ft("string" == typeof n, "internal-error", { appName: e }),
          (s.refreshToken = n)),
        r &&
          (ft("string" == typeof r, "internal-error", { appName: e }),
          (s.accessToken = r)),
        i &&
          (ft("number" == typeof i, "internal-error", { appName: e }),
          (s.expirationTime = i)),
        s
      );
    }
    toJSON() {
      return {
        refreshToken: this.refreshToken,
        accessToken: this.accessToken,
        expirationTime: this.expirationTime,
      };
    }
    _assign(e) {
      (this.accessToken = e.accessToken),
        (this.refreshToken = e.refreshToken),
        (this.expirationTime = e.expirationTime);
    }
    _clone() {
      return Object.assign(new Gt(), this.toJSON());
    }
    _performRefresh() {
      return mt("not implemented");
    }
  }
  function Wt(e, t) {
    ft("string" == typeof e || void 0 === e, "internal-error", { appName: t });
  }
  class Qt {
    constructor(e) {
      var { uid: t, auth: n, stsTokenManager: r } = e,
        i = rt(e, ["uid", "auth", "stsTokenManager"]);
      (this.providerId = "firebase"),
        (this.proactiveRefresh = new jt(this)),
        (this.reloadUserInfo = null),
        (this.reloadListener = null),
        (this.uid = t),
        (this.auth = n),
        (this.stsTokenManager = r),
        (this.accessToken = r.accessToken),
        (this.displayName = i.displayName || null),
        (this.email = i.email || null),
        (this.emailVerified = i.emailVerified || !1),
        (this.phoneNumber = i.phoneNumber || null),
        (this.photoURL = i.photoURL || null),
        (this.isAnonymous = i.isAnonymous || !1),
        (this.tenantId = i.tenantId || null),
        (this.providerData = i.providerData ? [...i.providerData] : []),
        (this.metadata = new $t(
          i.createdAt || void 0,
          i.lastLoginAt || void 0
        ));
    }
    async getIdToken(e) {
      const t = await Ht(this, this.stsTokenManager.getToken(this.auth, e));
      return (
        ft(t, this.auth, "internal-error"),
        this.accessToken !== t &&
          ((this.accessToken = t),
          await this.auth._persistUserIfCurrent(this),
          this.auth._notifyListenersIfCurrent(this)),
        t
      );
    }
    getIdTokenResult(e) {
      return (async function (e, t = !1) {
        const n = T(e),
          r = await n.getIdToken(t),
          i = Ft(r);
        ft(i && i.exp && i.auth_time && i.iat, n.auth, "internal-error");
        const s = "object" == typeof i.firebase ? i.firebase : void 0,
          o = null == s ? void 0 : s.sign_in_provider;
        return {
          claims: i,
          token: r,
          authTime: Ut(Vt(i.auth_time)),
          issuedAtTime: Ut(Vt(i.iat)),
          expirationTime: Ut(Vt(i.exp)),
          signInProvider: o || null,
          signInSecondFactor:
            (null == s ? void 0 : s.sign_in_second_factor) || null,
        };
      })(this, e);
    }
    reload() {
      return (async function (e) {
        const t = T(e);
        await zt(t),
          await t.auth._persistUserIfCurrent(t),
          t.auth._notifyListenersIfCurrent(t);
      })(this);
    }
    _assign(e) {
      this !== e &&
        (ft(this.uid === e.uid, this.auth, "internal-error"),
        (this.displayName = e.displayName),
        (this.photoURL = e.photoURL),
        (this.email = e.email),
        (this.emailVerified = e.emailVerified),
        (this.phoneNumber = e.phoneNumber),
        (this.isAnonymous = e.isAnonymous),
        (this.tenantId = e.tenantId),
        (this.providerData = e.providerData.map((e) => Object.assign({}, e))),
        this.metadata._copy(e.metadata),
        this.stsTokenManager._assign(e.stsTokenManager));
    }
    _clone(e) {
      const t = new Qt(
        Object.assign(Object.assign({}, this), {
          auth: e,
          stsTokenManager: this.stsTokenManager._clone(),
        })
      );
      return t.metadata._copy(this.metadata), t;
    }
    _onReload(e) {
      ft(!this.reloadListener, this.auth, "internal-error"),
        (this.reloadListener = e),
        this.reloadUserInfo &&
          (this._notifyReloadListener(this.reloadUserInfo),
          (this.reloadUserInfo = null));
    }
    _notifyReloadListener(e) {
      this.reloadListener ? this.reloadListener(e) : (this.reloadUserInfo = e);
    }
    _startProactiveRefresh() {
      this.proactiveRefresh._start();
    }
    _stopProactiveRefresh() {
      this.proactiveRefresh._stop();
    }
    async _updateTokensIfNecessary(e, t = !1) {
      let n = !1;
      e.idToken &&
        e.idToken !== this.stsTokenManager.accessToken &&
        (this.stsTokenManager.updateFromServerResponse(e), (n = !0)),
        t && (await zt(this)),
        await this.auth._persistUserIfCurrent(this),
        n && this.auth._notifyListenersIfCurrent(this);
    }
    async delete() {
      if (Ve(this.auth.app)) return Promise.reject(dt(this.auth));
      const e = await this.getIdToken();
      return (
        await Ht(
          this,
          (async function (e, t) {
            return Tt(e, "POST", "/v1/accounts:delete", t);
          })(this.auth, { idToken: e })
        ),
        this.stsTokenManager.clearRefreshToken(),
        this.auth.signOut()
      );
    }
    toJSON() {
      return Object.assign(
        Object.assign(
          {
            uid: this.uid,
            email: this.email || void 0,
            emailVerified: this.emailVerified,
            displayName: this.displayName || void 0,
            isAnonymous: this.isAnonymous,
            photoURL: this.photoURL || void 0,
            phoneNumber: this.phoneNumber || void 0,
            tenantId: this.tenantId || void 0,
            providerData: this.providerData.map((e) => Object.assign({}, e)),
            stsTokenManager: this.stsTokenManager.toJSON(),
            _redirectEventId: this._redirectEventId,
          },
          this.metadata.toJSON()
        ),
        { apiKey: this.auth.config.apiKey, appName: this.auth.name }
      );
    }
    get refreshToken() {
      return this.stsTokenManager.refreshToken || "";
    }
    static _fromJSON(e, t) {
      var n, r, i, s, o, a, c, l;
      const u = null !== (n = t.displayName) && void 0 !== n ? n : void 0,
        h = null !== (r = t.email) && void 0 !== r ? r : void 0,
        d = null !== (i = t.phoneNumber) && void 0 !== i ? i : void 0,
        p = null !== (s = t.photoURL) && void 0 !== s ? s : void 0,
        f = null !== (o = t.tenantId) && void 0 !== o ? o : void 0,
        m = null !== (a = t._redirectEventId) && void 0 !== a ? a : void 0,
        g = null !== (c = t.createdAt) && void 0 !== c ? c : void 0,
        v = null !== (l = t.lastLoginAt) && void 0 !== l ? l : void 0,
        {
          uid: y,
          emailVerified: _,
          isAnonymous: b,
          providerData: w,
          stsTokenManager: S,
        } = t;
      ft(y && S, e, "internal-error");
      const E = Gt.fromJSON(this.name, S);
      ft("string" == typeof y, e, "internal-error"),
        Wt(u, e.name),
        Wt(h, e.name),
        ft("boolean" == typeof _, e, "internal-error"),
        ft("boolean" == typeof b, e, "internal-error"),
        Wt(d, e.name),
        Wt(p, e.name),
        Wt(f, e.name),
        Wt(m, e.name),
        Wt(g, e.name),
        Wt(v, e.name);
      const I = new Qt({
        uid: y,
        auth: e,
        email: h,
        emailVerified: _,
        displayName: u,
        isAnonymous: b,
        photoURL: p,
        phoneNumber: d,
        tenantId: f,
        stsTokenManager: E,
        createdAt: g,
        lastLoginAt: v,
      });
      return (
        w &&
          Array.isArray(w) &&
          (I.providerData = w.map((e) => Object.assign({}, e))),
        m && (I._redirectEventId = m),
        I
      );
    }
    static async _fromIdTokenResponse(e, t, n = !1) {
      const r = new Gt();
      r.updateFromServerResponse(t);
      const i = new Qt({
        uid: t.localId,
        auth: e,
        stsTokenManager: r,
        isAnonymous: n,
      });
      return await zt(i), i;
    }
    static async _fromGetAccountInfoResponse(e, t, n) {
      const r = t.users[0];
      ft(void 0 !== r.localId, "internal-error");
      const i = void 0 !== r.providerUserInfo ? Kt(r.providerUserInfo) : [],
        s = !((r.email && r.passwordHash) || (null == i ? void 0 : i.length)),
        o = new Gt();
      o.updateFromIdToken(n);
      const a = new Qt({
          uid: r.localId,
          auth: e,
          stsTokenManager: o,
          isAnonymous: s,
        }),
        c = {
          uid: r.localId,
          displayName: r.displayName || null,
          photoURL: r.photoUrl || null,
          email: r.email || null,
          emailVerified: r.emailVerified || !1,
          phoneNumber: r.phoneNumber || null,
          tenantId: r.tenantId || null,
          providerData: i,
          metadata: new $t(r.createdAt, r.lastLoginAt),
          isAnonymous: !(
            (r.email && r.passwordHash) ||
            (null == i ? void 0 : i.length)
          ),
        };
      return Object.assign(a, c), a;
    }
  }
  const Jt = new Map();
  function Yt(e) {
    gt(e instanceof Function, "Expected a class definition");
    let t = Jt.get(e);
    return t
      ? (gt(t instanceof e, "Instance stored in cache mismatched with class"),
        t)
      : ((t = new e()), Jt.set(e, t), t);
  }
  class Xt {
    constructor() {
      (this.type = "NONE"), (this.storage = {});
    }
    async _isAvailable() {
      return !0;
    }
    async _set(e, t) {
      this.storage[e] = t;
    }
    async _get(e) {
      const t = this.storage[e];
      return void 0 === t ? null : t;
    }
    async _remove(e) {
      delete this.storage[e];
    }
    _addListener(e, t) {}
    _removeListener(e, t) {}
  }
  Xt.type = "NONE";
  const Zt = Xt;
  function en(e, t, n) {
    return `firebase:${e}:${t}:${n}`;
  }
  class tn {
    constructor(e, t, n) {
      (this.persistence = e), (this.auth = t), (this.userKey = n);
      const { config: r, name: i } = this.auth;
      (this.fullUserKey = en(this.userKey, r.apiKey, i)),
        (this.fullPersistenceKey = en("persistence", r.apiKey, i)),
        (this.boundEventHandler = t._onStorageEvent.bind(t)),
        this.persistence._addListener(this.fullUserKey, this.boundEventHandler);
    }
    setCurrentUser(e) {
      return this.persistence._set(this.fullUserKey, e.toJSON());
    }
    async getCurrentUser() {
      const e = await this.persistence._get(this.fullUserKey);
      return e ? Qt._fromJSON(this.auth, e) : null;
    }
    removeCurrentUser() {
      return this.persistence._remove(this.fullUserKey);
    }
    savePersistenceForRedirect() {
      return this.persistence._set(
        this.fullPersistenceKey,
        this.persistence.type
      );
    }
    async setPersistence(e) {
      if (this.persistence === e) return;
      const t = await this.getCurrentUser();
      return (
        await this.removeCurrentUser(),
        (this.persistence = e),
        t ? this.setCurrentUser(t) : void 0
      );
    }
    delete() {
      this.persistence._removeListener(
        this.fullUserKey,
        this.boundEventHandler
      );
    }
    static async create(e, t, n = "authUser") {
      if (!t.length) return new tn(Yt(Zt), e, n);
      const r = (
        await Promise.all(
          t.map(async (e) => {
            if (await e._isAvailable()) return e;
          })
        )
      ).filter((e) => e);
      let i = r[0] || Yt(Zt);
      const s = en(n, e.config.apiKey, e.name);
      let o = null;
      for (const n of t)
        try {
          const t = await n._get(s);
          if (t) {
            const r = Qt._fromJSON(e, t);
            n !== i && (o = r), (i = n);
            break;
          }
        } catch (e) {}
      const a = r.filter((e) => e._shouldAllowMigration);
      return i._shouldAllowMigration && a.length
        ? ((i = a[0]),
          o && (await i._set(s, o.toJSON())),
          await Promise.all(
            t.map(async (e) => {
              if (e !== i)
                try {
                  await e._remove(s);
                } catch (e) {}
            })
          ),
          new tn(i, e, n))
        : new tn(i, e, n);
    }
  }
  function nn(e) {
    const t = e.toLowerCase();
    if (t.includes("opera/") || t.includes("opr/") || t.includes("opios/"))
      return "Opera";
    if (an(t)) return "IEMobile";
    if (t.includes("msie") || t.includes("trident/")) return "IE";
    if (t.includes("edge/")) return "Edge";
    if (rn(t)) return "Firefox";
    if (t.includes("silk/")) return "Silk";
    if (ln(t)) return "Blackberry";
    if (un(t)) return "Webos";
    if (sn(t)) return "Safari";
    if ((t.includes("chrome/") || on(t)) && !t.includes("edge/"))
      return "Chrome";
    if (cn(t)) return "Android";
    {
      const t = /([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,
        n = e.match(t);
      if (2 === (null == n ? void 0 : n.length)) return n[1];
    }
    return "Other";
  }
  function rn(e = f()) {
    return /firefox\//i.test(e);
  }
  function sn(e = f()) {
    const t = e.toLowerCase();
    return (
      t.includes("safari/") &&
      !t.includes("chrome/") &&
      !t.includes("crios/") &&
      !t.includes("android")
    );
  }
  function on(e = f()) {
    return /crios\//i.test(e);
  }
  function an(e = f()) {
    return /iemobile/i.test(e);
  }
  function cn(e = f()) {
    return /android/i.test(e);
  }
  function ln(e = f()) {
    return /blackberry/i.test(e);
  }
  function un(e = f()) {
    return /webos/i.test(e);
  }
  function hn(e = f()) {
    return (
      /iphone|ipad|ipod/i.test(e) || (/macintosh/i.test(e) && /mobile/i.test(e))
    );
  }
  function dn() {
    return (
      (function () {
        const e = f();
        return e.indexOf("MSIE ") >= 0 || e.indexOf("Trident/") >= 0;
      })() && 10 === document.documentMode
    );
  }
  function pn(e = f()) {
    return (
      hn(e) || cn(e) || un(e) || ln(e) || /windows phone/i.test(e) || an(e)
    );
  }
  function fn(e, t = []) {
    let n;
    switch (e) {
      case "Browser":
        n = nn(f());
        break;
      case "Worker":
        n = `${nn(f())}-${e}`;
        break;
      default:
        n = e;
    }
    const r = t.length ? t.join(",") : "FirebaseCore-web";
    return `${n}/JsCore/${He}/${r}`;
  }
  class mn {
    constructor(e) {
      (this.auth = e), (this.queue = []);
    }
    pushCallback(e, t) {
      const n = (t) =>
        new Promise((n, r) => {
          try {
            n(e(t));
          } catch (e) {
            r(e);
          }
        });
      (n.onAbort = t), this.queue.push(n);
      const r = this.queue.length - 1;
      return () => {
        this.queue[r] = () => Promise.resolve();
      };
    }
    async runMiddleware(e) {
      if (this.auth.currentUser === e) return;
      const t = [];
      try {
        for (const n of this.queue) await n(e), n.onAbort && t.push(n.onAbort);
      } catch (e) {
        t.reverse();
        for (const e of t)
          try {
            e();
          } catch (e) {}
        throw this.auth._errorFactory.create("login-blocked", {
          originalMessage: null == e ? void 0 : e.message,
        });
      }
    }
  }
  class gn {
    constructor(e) {
      var t, n, r, i;
      const s = e.customStrengthOptions;
      (this.customStrengthOptions = {}),
        (this.customStrengthOptions.minPasswordLength =
          null !== (t = s.minPasswordLength) && void 0 !== t ? t : 6),
        s.maxPasswordLength &&
          (this.customStrengthOptions.maxPasswordLength = s.maxPasswordLength),
        void 0 !== s.containsLowercaseCharacter &&
          (this.customStrengthOptions.containsLowercaseLetter =
            s.containsLowercaseCharacter),
        void 0 !== s.containsUppercaseCharacter &&
          (this.customStrengthOptions.containsUppercaseLetter =
            s.containsUppercaseCharacter),
        void 0 !== s.containsNumericCharacter &&
          (this.customStrengthOptions.containsNumericCharacter =
            s.containsNumericCharacter),
        void 0 !== s.containsNonAlphanumericCharacter &&
          (this.customStrengthOptions.containsNonAlphanumericCharacter =
            s.containsNonAlphanumericCharacter),
        (this.enforcementState = e.enforcementState),
        "ENFORCEMENT_STATE_UNSPECIFIED" === this.enforcementState &&
          (this.enforcementState = "OFF"),
        (this.allowedNonAlphanumericCharacters =
          null !==
            (r =
              null === (n = e.allowedNonAlphanumericCharacters) || void 0 === n
                ? void 0
                : n.join("")) && void 0 !== r
            ? r
            : ""),
        (this.forceUpgradeOnSignin =
          null !== (i = e.forceUpgradeOnSignin) && void 0 !== i && i),
        (this.schemaVersion = e.schemaVersion);
    }
    validatePassword(e) {
      var t, n, r, i, s, o;
      const a = { isValid: !0, passwordPolicy: this };
      return (
        this.validatePasswordLengthOptions(e, a),
        this.validatePasswordCharacterOptions(e, a),
        a.isValid &&
          (a.isValid =
            null === (t = a.meetsMinPasswordLength) || void 0 === t || t),
        a.isValid &&
          (a.isValid =
            null === (n = a.meetsMaxPasswordLength) || void 0 === n || n),
        a.isValid &&
          (a.isValid =
            null === (r = a.containsLowercaseLetter) || void 0 === r || r),
        a.isValid &&
          (a.isValid =
            null === (i = a.containsUppercaseLetter) || void 0 === i || i),
        a.isValid &&
          (a.isValid =
            null === (s = a.containsNumericCharacter) || void 0 === s || s),
        a.isValid &&
          (a.isValid =
            null === (o = a.containsNonAlphanumericCharacter) ||
            void 0 === o ||
            o),
        a
      );
    }
    validatePasswordLengthOptions(e, t) {
      const n = this.customStrengthOptions.minPasswordLength,
        r = this.customStrengthOptions.maxPasswordLength;
      n && (t.meetsMinPasswordLength = e.length >= n),
        r && (t.meetsMaxPasswordLength = e.length <= r);
    }
    validatePasswordCharacterOptions(e, t) {
      let n;
      this.updatePasswordCharacterOptionsStatuses(t, !1, !1, !1, !1);
      for (let r = 0; r < e.length; r++)
        (n = e.charAt(r)),
          this.updatePasswordCharacterOptionsStatuses(
            t,
            n >= "a" && n <= "z",
            n >= "A" && n <= "Z",
            n >= "0" && n <= "9",
            this.allowedNonAlphanumericCharacters.includes(n)
          );
    }
    updatePasswordCharacterOptionsStatuses(e, t, n, r, i) {
      this.customStrengthOptions.containsLowercaseLetter &&
        (e.containsLowercaseLetter || (e.containsLowercaseLetter = t)),
        this.customStrengthOptions.containsUppercaseLetter &&
          (e.containsUppercaseLetter || (e.containsUppercaseLetter = n)),
        this.customStrengthOptions.containsNumericCharacter &&
          (e.containsNumericCharacter || (e.containsNumericCharacter = r)),
        this.customStrengthOptions.containsNonAlphanumericCharacter &&
          (e.containsNonAlphanumericCharacter ||
            (e.containsNonAlphanumericCharacter = i));
    }
  }
  class vn {
    constructor(e, t, n, r) {
      (this.app = e),
        (this.heartbeatServiceProvider = t),
        (this.appCheckServiceProvider = n),
        (this.config = r),
        (this.currentUser = null),
        (this.emulatorConfig = null),
        (this.operations = Promise.resolve()),
        (this.authStateSubscription = new _n(this)),
        (this.idTokenSubscription = new _n(this)),
        (this.beforeStateQueue = new mn(this)),
        (this.redirectUser = null),
        (this.isProactiveRefreshEnabled = !1),
        (this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION = 1),
        (this._canInitEmulator = !0),
        (this._isInitialized = !1),
        (this._deleted = !1),
        (this._initializationPromise = null),
        (this._popupRedirectResolver = null),
        (this._errorFactory = ot),
        (this._agentRecaptchaConfig = null),
        (this._tenantRecaptchaConfigs = {}),
        (this._projectPasswordPolicy = null),
        (this._tenantPasswordPolicies = {}),
        (this.lastNotifiedUid = void 0),
        (this.languageCode = null),
        (this.tenantId = null),
        (this.settings = { appVerificationDisabledForTesting: !1 }),
        (this.frameworks = []),
        (this.name = e.name),
        (this.clientVersion = r.sdkClientVersion);
    }
    _initializeWithPersistence(e, t) {
      return (
        t && (this._popupRedirectResolver = Yt(t)),
        (this._initializationPromise = this.queue(async () => {
          var n, r;
          if (
            !this._deleted &&
            ((this.persistenceManager = await tn.create(this, e)),
            !this._deleted)
          ) {
            if (
              null === (n = this._popupRedirectResolver) || void 0 === n
                ? void 0
                : n._shouldInitProactively
            )
              try {
                await this._popupRedirectResolver._initialize(this);
              } catch (e) {}
            await this.initializeCurrentUser(t),
              (this.lastNotifiedUid =
                (null === (r = this.currentUser) || void 0 === r
                  ? void 0
                  : r.uid) || null),
              this._deleted || (this._isInitialized = !0);
          }
        })),
        this._initializationPromise
      );
    }
    async _onStorageEvent() {
      if (this._deleted) return;
      const e = await this.assertedPersistence.getCurrentUser();
      return this.currentUser || e
        ? this.currentUser && e && this.currentUser.uid === e.uid
          ? (this._currentUser._assign(e),
            void (await this.currentUser.getIdToken()))
          : void (await this._updateCurrentUser(e, !0))
        : void 0;
    }
    async initializeCurrentUserFromIdToken(e) {
      try {
        const t = await qt(this, { idToken: e }),
          n = await Qt._fromGetAccountInfoResponse(this, t, e);
        await this.directlySetCurrentUser(n);
      } catch (e) {
        console.warn(
          "FirebaseServerApp could not login user with provided authIdToken: ",
          e
        ),
          await this.directlySetCurrentUser(null);
      }
    }
    async initializeCurrentUser(e) {
      var t;
      if (Ve(this.app)) {
        const e = this.app.settings.authIdToken;
        return e
          ? new Promise((t) => {
              setTimeout(() =>
                this.initializeCurrentUserFromIdToken(e).then(t, t)
              );
            })
          : this.directlySetCurrentUser(null);
      }
      const n = await this.assertedPersistence.getCurrentUser();
      let r = n,
        i = !1;
      if (e && this.config.authDomain) {
        await this.getOrInitRedirectPersistenceManager();
        const n =
            null === (t = this.redirectUser) || void 0 === t
              ? void 0
              : t._redirectEventId,
          s = null == r ? void 0 : r._redirectEventId,
          o = await this.tryRedirectSignIn(e);
        (n && n !== s) ||
          !(null == o ? void 0 : o.user) ||
          ((r = o.user), (i = !0));
      }
      if (!r) return this.directlySetCurrentUser(null);
      if (!r._redirectEventId) {
        if (i)
          try {
            await this.beforeStateQueue.runMiddleware(r);
          } catch (e) {
            (r = n),
              this._popupRedirectResolver._overrideRedirectResult(this, () =>
                Promise.reject(e)
              );
          }
        return r
          ? this.reloadAndSetCurrentUserOrClear(r)
          : this.directlySetCurrentUser(null);
      }
      return (
        ft(this._popupRedirectResolver, this, "argument-error"),
        await this.getOrInitRedirectPersistenceManager(),
        this.redirectUser &&
        this.redirectUser._redirectEventId === r._redirectEventId
          ? this.directlySetCurrentUser(r)
          : this.reloadAndSetCurrentUserOrClear(r)
      );
    }
    async tryRedirectSignIn(e) {
      let t = null;
      try {
        t = await this._popupRedirectResolver._completeRedirectFn(this, e, !0);
      } catch (e) {
        await this._setRedirectUser(null);
      }
      return t;
    }
    async reloadAndSetCurrentUserOrClear(e) {
      try {
        await zt(e);
      } catch (e) {
        if ("auth/network-request-failed" !== (null == e ? void 0 : e.code))
          return this.directlySetCurrentUser(null);
      }
      return this.directlySetCurrentUser(e);
    }
    useDeviceLanguage() {
      this.languageCode = (function () {
        if ("undefined" == typeof navigator) return null;
        const e = navigator;
        return (e.languages && e.languages[0]) || e.language || null;
      })();
    }
    async _delete() {
      this._deleted = !0;
    }
    async updateCurrentUser(e) {
      if (Ve(this.app)) return Promise.reject(dt(this));
      const t = e ? T(e) : null;
      return (
        t &&
          ft(
            t.auth.config.apiKey === this.config.apiKey,
            this,
            "invalid-user-token"
          ),
        this._updateCurrentUser(t && t._clone(this))
      );
    }
    async _updateCurrentUser(e, t = !1) {
      if (!this._deleted)
        return (
          e && ft(this.tenantId === e.tenantId, this, "tenant-id-mismatch"),
          t || (await this.beforeStateQueue.runMiddleware(e)),
          this.queue(async () => {
            await this.directlySetCurrentUser(e), this.notifyAuthListeners();
          })
        );
    }
    async signOut() {
      return Ve(this.app)
        ? Promise.reject(dt(this))
        : (await this.beforeStateQueue.runMiddleware(null),
          (this.redirectPersistenceManager || this._popupRedirectResolver) &&
            (await this._setRedirectUser(null)),
          this._updateCurrentUser(null, !0));
    }
    setPersistence(e) {
      return Ve(this.app)
        ? Promise.reject(dt(this))
        : this.queue(async () => {
            await this.assertedPersistence.setPersistence(Yt(e));
          });
    }
    _getRecaptchaConfig() {
      return null == this.tenantId
        ? this._agentRecaptchaConfig
        : this._tenantRecaptchaConfigs[this.tenantId];
    }
    async validatePassword(e) {
      this._getPasswordPolicyInternal() || (await this._updatePasswordPolicy());
      const t = this._getPasswordPolicyInternal();
      return t.schemaVersion !== this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION
        ? Promise.reject(
            this._errorFactory.create(
              "unsupported-password-policy-schema-version",
              {}
            )
          )
        : t.validatePassword(e);
    }
    _getPasswordPolicyInternal() {
      return null === this.tenantId
        ? this._projectPasswordPolicy
        : this._tenantPasswordPolicies[this.tenantId];
    }
    async _updatePasswordPolicy() {
      const e = await (async function (e, t = {}) {
          return Tt(e, "GET", "/v2/passwordPolicy", kt(e, t));
        })(this),
        t = new gn(e);
      null === this.tenantId
        ? (this._projectPasswordPolicy = t)
        : (this._tenantPasswordPolicies[this.tenantId] = t);
    }
    _getPersistence() {
      return this.assertedPersistence.persistence.type;
    }
    _updateErrorMap(e) {
      this._errorFactory = new y("auth", "Firebase", e());
    }
    onAuthStateChanged(e, t, n) {
      return this.registerStateListener(this.authStateSubscription, e, t, n);
    }
    beforeAuthStateChanged(e, t) {
      return this.beforeStateQueue.pushCallback(e, t);
    }
    onIdTokenChanged(e, t, n) {
      return this.registerStateListener(this.idTokenSubscription, e, t, n);
    }
    authStateReady() {
      return new Promise((e, t) => {
        if (this.currentUser) e();
        else {
          const n = this.onAuthStateChanged(() => {
            n(), e();
          }, t);
        }
      });
    }
    async revokeAccessToken(e) {
      if (this.currentUser) {
        const t = {
          providerId: "apple.com",
          tokenType: "ACCESS_TOKEN",
          token: e,
          idToken: await this.currentUser.getIdToken(),
        };
        null != this.tenantId && (t.tenantId = this.tenantId),
          await (async function (e, t) {
            return Tt(e, "POST", "/v2/accounts:revokeToken", kt(e, t));
          })(this, t);
      }
    }
    toJSON() {
      var e;
      return {
        apiKey: this.config.apiKey,
        authDomain: this.config.authDomain,
        appName: this.name,
        currentUser:
          null === (e = this._currentUser) || void 0 === e
            ? void 0
            : e.toJSON(),
      };
    }
    async _setRedirectUser(e, t) {
      const n = await this.getOrInitRedirectPersistenceManager(t);
      return null === e ? n.removeCurrentUser() : n.setCurrentUser(e);
    }
    async getOrInitRedirectPersistenceManager(e) {
      if (!this.redirectPersistenceManager) {
        const t = (e && Yt(e)) || this._popupRedirectResolver;
        ft(t, this, "argument-error"),
          (this.redirectPersistenceManager = await tn.create(
            this,
            [Yt(t._redirectPersistence)],
            "redirectUser"
          )),
          (this.redirectUser =
            await this.redirectPersistenceManager.getCurrentUser());
      }
      return this.redirectPersistenceManager;
    }
    async _redirectUserForId(e) {
      var t, n;
      return (
        this._isInitialized && (await this.queue(async () => {})),
        (null === (t = this._currentUser) || void 0 === t
          ? void 0
          : t._redirectEventId) === e
          ? this._currentUser
          : (null === (n = this.redirectUser) || void 0 === n
              ? void 0
              : n._redirectEventId) === e
          ? this.redirectUser
          : null
      );
    }
    async _persistUserIfCurrent(e) {
      if (e === this.currentUser)
        return this.queue(async () => this.directlySetCurrentUser(e));
    }
    _notifyListenersIfCurrent(e) {
      e === this.currentUser && this.notifyAuthListeners();
    }
    _key() {
      return `${this.config.authDomain}:${this.config.apiKey}:${this.name}`;
    }
    _startProactiveRefresh() {
      (this.isProactiveRefreshEnabled = !0),
        this.currentUser && this._currentUser._startProactiveRefresh();
    }
    _stopProactiveRefresh() {
      (this.isProactiveRefreshEnabled = !1),
        this.currentUser && this._currentUser._stopProactiveRefresh();
    }
    get _currentUser() {
      return this.currentUser;
    }
    notifyAuthListeners() {
      var e, t;
      if (!this._isInitialized) return;
      this.idTokenSubscription.next(this.currentUser);
      const n =
        null !==
          (t =
            null === (e = this.currentUser) || void 0 === e ? void 0 : e.uid) &&
        void 0 !== t
          ? t
          : null;
      this.lastNotifiedUid !== n &&
        ((this.lastNotifiedUid = n),
        this.authStateSubscription.next(this.currentUser));
    }
    registerStateListener(e, t, n, r) {
      if (this._deleted) return () => {};
      const i = "function" == typeof t ? t : t.next.bind(t);
      let s = !1;
      const o = this._isInitialized
        ? Promise.resolve()
        : this._initializationPromise;
      if (
        (ft(o, this, "internal-error"),
        o.then(() => {
          s || i(this.currentUser);
        }),
        "function" == typeof t)
      ) {
        const i = e.addObserver(t, n, r);
        return () => {
          (s = !0), i();
        };
      }
      {
        const n = e.addObserver(t);
        return () => {
          (s = !0), n();
        };
      }
    }
    async directlySetCurrentUser(e) {
      this.currentUser &&
        this.currentUser !== e &&
        this._currentUser._stopProactiveRefresh(),
        e && this.isProactiveRefreshEnabled && e._startProactiveRefresh(),
        (this.currentUser = e),
        e
          ? await this.assertedPersistence.setCurrentUser(e)
          : await this.assertedPersistence.removeCurrentUser();
    }
    queue(e) {
      return (this.operations = this.operations.then(e, e)), this.operations;
    }
    get assertedPersistence() {
      return (
        ft(this.persistenceManager, this, "internal-error"),
        this.persistenceManager
      );
    }
    _logFramework(e) {
      e &&
        !this.frameworks.includes(e) &&
        (this.frameworks.push(e),
        this.frameworks.sort(),
        (this.clientVersion = fn(
          this.config.clientPlatform,
          this._getFrameworks()
        )));
    }
    _getFrameworks() {
      return this.frameworks;
    }
    async _getAdditionalHeaders() {
      var e;
      const t = { "X-Client-Version": this.clientVersion };
      this.app.options.appId &&
        (t["X-Firebase-gmpid"] = this.app.options.appId);
      const n = await (null ===
        (e = this.heartbeatServiceProvider.getImmediate({ optional: !0 })) ||
      void 0 === e
        ? void 0
        : e.getHeartbeatsHeader());
      n && (t["X-Firebase-Client"] = n);
      const r = await this._getAppCheckToken();
      return r && (t["X-Firebase-AppCheck"] = r), t;
    }
    async _getAppCheckToken() {
      var e;
      const t = await (null ===
        (e = this.appCheckServiceProvider.getImmediate({ optional: !0 })) ||
      void 0 === e
        ? void 0
        : e.getToken());
      return (
        (null == t ? void 0 : t.error) &&
          (function (e, ...t) {
            at.logLevel <= D.WARN && at.warn(`Auth (${He}): ${e}`, ...t);
          })(`Error while retrieving App Check token: ${t.error}`),
        null == t ? void 0 : t.token
      );
    }
  }
  function yn(e) {
    return T(e);
  }
  class _n {
    constructor(e) {
      (this.auth = e),
        (this.observer = null),
        (this.addObserver = (function (e, t) {
          const n = new C(e, t);
          return n.subscribe.bind(n);
        })((e) => (this.observer = e)));
    }
    get next() {
      return (
        ft(this.observer, this.auth, "internal-error"),
        this.observer.next.bind(this.observer)
      );
    }
  }
  let bn = {
    async loadJS() {
      throw new Error("Unable to load external scripts");
    },
    recaptchaV2Script: "",
    recaptchaEnterpriseScript: "",
    gapiScript: "",
  };
  function wn(e) {
    return bn.loadJS(e);
  }
  function Sn(e) {
    return `__${e}${Math.floor(1e6 * Math.random())}`;
  }
  class En {
    constructor(e) {
      (this.type = "recaptcha-enterprise"), (this.auth = yn(e));
    }
    async verify(e = "verify", t = !1) {
      function n(t, n, r) {
        const i = window.grecaptcha;
        xt(i)
          ? i.enterprise.ready(() => {
              i.enterprise
                .execute(t, { action: e })
                .then((e) => {
                  n(e);
                })
                .catch(() => {
                  n("NO_RECAPTCHA");
                });
            })
          : r(Error("No reCAPTCHA enterprise script loaded."));
      }
      return new Promise((e, r) => {
        (async function (e) {
          if (!t) {
            if (null == e.tenantId && null != e._agentRecaptchaConfig)
              return e._agentRecaptchaConfig.siteKey;
            if (
              null != e.tenantId &&
              void 0 !== e._tenantRecaptchaConfigs[e.tenantId]
            )
              return e._tenantRecaptchaConfigs[e.tenantId].siteKey;
          }
          return new Promise(async (t, n) => {
            Rt(e, {
              clientType: "CLIENT_TYPE_WEB",
              version: "RECAPTCHA_ENTERPRISE",
            })
              .then((r) => {
                if (void 0 !== r.recaptchaKey) {
                  const n = new Mt(r);
                  return (
                    null == e.tenantId
                      ? (e._agentRecaptchaConfig = n)
                      : (e._tenantRecaptchaConfigs[e.tenantId] = n),
                    t(n.siteKey)
                  );
                }
                n(new Error("recaptcha Enterprise site key undefined"));
              })
              .catch((e) => {
                n(e);
              });
          });
        })(this.auth)
          .then((i) => {
            if (!t && xt(window.grecaptcha)) n(i, e, r);
            else {
              if ("undefined" == typeof window)
                return void r(
                  new Error("RecaptchaVerifier is only supported in browser")
                );
              let t = bn.recaptchaEnterpriseScript;
              0 !== t.length && (t += i),
                wn(t)
                  .then(() => {
                    n(i, e, r);
                  })
                  .catch((e) => {
                    r(e);
                  });
            }
          })
          .catch((e) => {
            r(e);
          });
      });
    }
  }
  async function In(e, t, n, r = !1) {
    const i = new En(e);
    let s;
    try {
      s = await i.verify(n);
    } catch (e) {
      s = await i.verify(n, !0);
    }
    const o = Object.assign({}, t);
    return (
      r
        ? Object.assign(o, { captchaResp: s })
        : Object.assign(o, { captchaResponse: s }),
      Object.assign(o, { clientType: "CLIENT_TYPE_WEB" }),
      Object.assign(o, { recaptchaVersion: "RECAPTCHA_ENTERPRISE" }),
      o
    );
  }
  async function Cn(e, t, n, r) {
    var i;
    if (
      null === (i = e._getRecaptchaConfig()) || void 0 === i
        ? void 0
        : i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")
    ) {
      const i = await In(e, t, n, "getOobCode" === n);
      return r(e, i);
    }
    return r(e, t).catch(async (i) => {
      if ("auth/missing-recaptcha-token" === i.code) {
        console.log(
          `${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`
        );
        const i = await In(e, t, n, "getOobCode" === n);
        return r(e, i);
      }
      return Promise.reject(i);
    });
  }
  function kn(e, t, n) {
    const r = yn(e);
    ft(r._canInitEmulator, r, "emulator-config-failed"),
      ft(/^https?:\/\//.test(t), r, "invalid-emulator-scheme");
    const i = !!(null == n ? void 0 : n.disableWarnings),
      s = Tn(t),
      { host: o, port: a } = (function (e) {
        const t = Tn(e),
          n = /(\/\/)?([^?#/]+)/.exec(e.substr(t.length));
        if (!n) return { host: "", port: null };
        const r = n[2].split("@").pop() || "",
          i = /^(\[[^\]]+\])(:|$)/.exec(r);
        if (i) {
          const e = i[1];
          return { host: e, port: Ln(r.substr(e.length + 1)) };
        }
        {
          const [e, t] = r.split(":");
          return { host: e, port: Ln(t) };
        }
      })(t),
      c = null === a ? "" : `:${a}`;
    (r.config.emulator = { url: `${s}//${o}${c}/` }),
      (r.settings.appVerificationDisabledForTesting = !0),
      (r.emulatorConfig = Object.freeze({
        host: o,
        port: a,
        protocol: s.replace(":", ""),
        options: Object.freeze({ disableWarnings: i }),
      })),
      i ||
        (function () {
          function e() {
            const e = document.createElement("p"),
              t = e.style;
            (e.innerText =
              "Running in emulator mode. Do not use with production credentials."),
              (t.position = "fixed"),
              (t.width = "100%"),
              (t.backgroundColor = "#ffffff"),
              (t.border = ".1em solid #000000"),
              (t.color = "#b50000"),
              (t.bottom = "0px"),
              (t.left = "0px"),
              (t.margin = "0px"),
              (t.zIndex = "10000"),
              (t.textAlign = "center"),
              e.classList.add("firebase-emulator-warning"),
              document.body.appendChild(e);
          }
          "undefined" != typeof console &&
            "function" == typeof console.info &&
            console.info(
              "WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."
            );
          "undefined" != typeof window &&
            "undefined" != typeof document &&
            ("loading" === document.readyState
              ? window.addEventListener("DOMContentLoaded", e)
              : e());
        })();
  }
  function Tn(e) {
    const t = e.indexOf(":");
    return t < 0 ? "" : e.substr(0, t + 1);
  }
  function Ln(e) {
    if (!e) return null;
    const t = Number(e);
    return isNaN(t) ? null : t;
  }
  class An {
    constructor(e, t) {
      (this.providerId = e), (this.signInMethod = t);
    }
    toJSON() {
      return mt("not implemented");
    }
    _getIdTokenResponse(e) {
      return mt("not implemented");
    }
    _linkToIdToken(e, t) {
      return mt("not implemented");
    }
    _getReauthenticationResolver(e) {
      return mt("not implemented");
    }
  }
  async function Nn(e, t) {
    return Tt(e, "POST", "/v1/accounts:signUp", t);
  }
  async function Pn(e, t) {
    return At(e, "POST", "/v1/accounts:signInWithPassword", kt(e, t));
  }
  class On extends An {
    constructor(e, t, n, r = null) {
      super("password", n),
        (this._email = e),
        (this._password = t),
        (this._tenantId = r);
    }
    static _fromEmailAndPassword(e, t) {
      return new On(e, t, "password");
    }
    static _fromEmailAndCode(e, t, n = null) {
      return new On(e, t, "emailLink", n);
    }
    toJSON() {
      return {
        email: this._email,
        password: this._password,
        signInMethod: this.signInMethod,
        tenantId: this._tenantId,
      };
    }
    static fromJSON(e) {
      const t = "string" == typeof e ? JSON.parse(e) : e;
      if ((null == t ? void 0 : t.email) && (null == t ? void 0 : t.password)) {
        if ("password" === t.signInMethod)
          return this._fromEmailAndPassword(t.email, t.password);
        if ("emailLink" === t.signInMethod)
          return this._fromEmailAndCode(t.email, t.password, t.tenantId);
      }
      return null;
    }
    async _getIdTokenResponse(e) {
      switch (this.signInMethod) {
        case "password":
          return Cn(
            e,
            {
              returnSecureToken: !0,
              email: this._email,
              password: this._password,
              clientType: "CLIENT_TYPE_WEB",
            },
            "signInWithPassword",
            Pn
          );
        case "emailLink":
          return (async function (e, t) {
            return At(e, "POST", "/v1/accounts:signInWithEmailLink", kt(e, t));
          })(e, { email: this._email, oobCode: this._password });
        default:
          lt(e, "internal-error");
      }
    }
    async _linkToIdToken(e, t) {
      switch (this.signInMethod) {
        case "password":
          return Cn(
            e,
            {
              idToken: t,
              returnSecureToken: !0,
              email: this._email,
              password: this._password,
              clientType: "CLIENT_TYPE_WEB",
            },
            "signUpPassword",
            Nn
          );
        case "emailLink":
          return (async function (e, t) {
            return At(e, "POST", "/v1/accounts:signInWithEmailLink", kt(e, t));
          })(e, { idToken: t, email: this._email, oobCode: this._password });
        default:
          lt(e, "internal-error");
      }
    }
    _getReauthenticationResolver(e) {
      return this._getIdTokenResponse(e);
    }
  }
  async function Dn(e, t) {
    return At(e, "POST", "/v1/accounts:signInWithIdp", kt(e, t));
  }
  class xn extends An {
    constructor() {
      super(...arguments), (this.pendingToken = null);
    }
    static _fromParams(e) {
      const t = new xn(e.providerId, e.signInMethod);
      return (
        e.idToken || e.accessToken
          ? (e.idToken && (t.idToken = e.idToken),
            e.accessToken && (t.accessToken = e.accessToken),
            e.nonce && !e.pendingToken && (t.nonce = e.nonce),
            e.pendingToken && (t.pendingToken = e.pendingToken))
          : e.oauthToken && e.oauthTokenSecret
          ? ((t.accessToken = e.oauthToken), (t.secret = e.oauthTokenSecret))
          : lt("argument-error"),
        t
      );
    }
    toJSON() {
      return {
        idToken: this.idToken,
        accessToken: this.accessToken,
        secret: this.secret,
        nonce: this.nonce,
        pendingToken: this.pendingToken,
        providerId: this.providerId,
        signInMethod: this.signInMethod,
      };
    }
    static fromJSON(e) {
      const t = "string" == typeof e ? JSON.parse(e) : e,
        { providerId: n, signInMethod: r } = t,
        i = rt(t, ["providerId", "signInMethod"]);
      if (!n || !r) return null;
      const s = new xn(n, r);
      return (
        (s.idToken = i.idToken || void 0),
        (s.accessToken = i.accessToken || void 0),
        (s.secret = i.secret),
        (s.nonce = i.nonce),
        (s.pendingToken = i.pendingToken || null),
        s
      );
    }
    _getIdTokenResponse(e) {
      return Dn(e, this.buildRequest());
    }
    _linkToIdToken(e, t) {
      const n = this.buildRequest();
      return (n.idToken = t), Dn(e, n);
    }
    _getReauthenticationResolver(e) {
      const t = this.buildRequest();
      return (t.autoCreate = !1), Dn(e, t);
    }
    buildRequest() {
      const e = { requestUri: "http://localhost", returnSecureToken: !0 };
      if (this.pendingToken) e.pendingToken = this.pendingToken;
      else {
        const t = {};
        this.idToken && (t.id_token = this.idToken),
          this.accessToken && (t.access_token = this.accessToken),
          this.secret && (t.oauth_token_secret = this.secret),
          (t.providerId = this.providerId),
          this.nonce && !this.pendingToken && (t.nonce = this.nonce),
          (e.postBody = S(t));
      }
      return e;
    }
  }
  const Mn = { USER_NOT_FOUND: "user-not-found" };
  class Rn extends An {
    constructor(e) {
      super("phone", "phone"), (this.params = e);
    }
    static _fromVerification(e, t) {
      return new Rn({ verificationId: e, verificationCode: t });
    }
    static _fromTokenResponse(e, t) {
      return new Rn({ phoneNumber: e, temporaryProof: t });
    }
    _getIdTokenResponse(e) {
      return (async function (e, t) {
        return At(e, "POST", "/v1/accounts:signInWithPhoneNumber", kt(e, t));
      })(e, this._makeVerificationRequest());
    }
    _linkToIdToken(e, t) {
      return (async function (e, t) {
        const n = await At(
          e,
          "POST",
          "/v1/accounts:signInWithPhoneNumber",
          kt(e, t)
        );
        if (n.temporaryProof)
          throw Dt(e, "account-exists-with-different-credential", n);
        return n;
      })(e, Object.assign({ idToken: t }, this._makeVerificationRequest()));
    }
    _getReauthenticationResolver(e) {
      return (async function (e, t) {
        return At(
          e,
          "POST",
          "/v1/accounts:signInWithPhoneNumber",
          kt(e, Object.assign(Object.assign({}, t), { operation: "REAUTH" })),
          Mn
        );
      })(e, this._makeVerificationRequest());
    }
    _makeVerificationRequest() {
      const {
        temporaryProof: e,
        phoneNumber: t,
        verificationId: n,
        verificationCode: r,
      } = this.params;
      return e && t
        ? { temporaryProof: e, phoneNumber: t }
        : { sessionInfo: n, code: r };
    }
    toJSON() {
      const e = { providerId: this.providerId };
      return (
        this.params.phoneNumber && (e.phoneNumber = this.params.phoneNumber),
        this.params.temporaryProof &&
          (e.temporaryProof = this.params.temporaryProof),
        this.params.verificationCode &&
          (e.verificationCode = this.params.verificationCode),
        this.params.verificationId &&
          (e.verificationId = this.params.verificationId),
        e
      );
    }
    static fromJSON(e) {
      "string" == typeof e && (e = JSON.parse(e));
      const {
        verificationId: t,
        verificationCode: n,
        phoneNumber: r,
        temporaryProof: i,
      } = e;
      return n || t || r || i
        ? new Rn({
            verificationId: t,
            verificationCode: n,
            phoneNumber: r,
            temporaryProof: i,
          })
        : null;
    }
  }
  class qn {
    constructor(e) {
      var t, n, r, i, s, o;
      const a = E(I(e)),
        c = null !== (t = a.apiKey) && void 0 !== t ? t : null,
        l = null !== (n = a.oobCode) && void 0 !== n ? n : null,
        u = (function (e) {
          switch (e) {
            case "recoverEmail":
              return "RECOVER_EMAIL";
            case "resetPassword":
              return "PASSWORD_RESET";
            case "signIn":
              return "EMAIL_SIGNIN";
            case "verifyEmail":
              return "VERIFY_EMAIL";
            case "verifyAndChangeEmail":
              return "VERIFY_AND_CHANGE_EMAIL";
            case "revertSecondFactorAddition":
              return "REVERT_SECOND_FACTOR_ADDITION";
            default:
              return null;
          }
        })(null !== (r = a.mode) && void 0 !== r ? r : null);
      ft(c && l && u, "argument-error"),
        (this.apiKey = c),
        (this.operation = u),
        (this.code = l),
        (this.continueUrl =
          null !== (i = a.continueUrl) && void 0 !== i ? i : null),
        (this.languageCode =
          null !== (s = a.languageCode) && void 0 !== s ? s : null),
        (this.tenantId = null !== (o = a.tenantId) && void 0 !== o ? o : null);
    }
    static parseLink(e) {
      const t = (function (e) {
        const t = E(I(e)).link,
          n = t ? E(I(t)).deep_link_id : null,
          r = E(I(e)).deep_link_id;
        return (r ? E(I(r)).link : null) || r || n || t || e;
      })(e);
      try {
        return new qn(t);
      } catch (e) {
        return null;
      }
    }
  }
  class Un {
    constructor() {
      this.providerId = Un.PROVIDER_ID;
    }
    static credential(e, t) {
      return On._fromEmailAndPassword(e, t);
    }
    static credentialWithLink(e, t) {
      const n = qn.parseLink(t);
      return (
        ft(n, "argument-error"), On._fromEmailAndCode(e, n.code, n.tenantId)
      );
    }
  }
  (Un.PROVIDER_ID = "password"),
    (Un.EMAIL_PASSWORD_SIGN_IN_METHOD = "password"),
    (Un.EMAIL_LINK_SIGN_IN_METHOD = "emailLink");
  class Vn {
    constructor(e) {
      (this.providerId = e),
        (this.defaultLanguageCode = null),
        (this.customParameters = {});
    }
    setDefaultLanguage(e) {
      this.defaultLanguageCode = e;
    }
    setCustomParameters(e) {
      return (this.customParameters = e), this;
    }
    getCustomParameters() {
      return this.customParameters;
    }
  }
  class Fn extends Vn {
    constructor() {
      super(...arguments), (this.scopes = []);
    }
    addScope(e) {
      return this.scopes.includes(e) || this.scopes.push(e), this;
    }
    getScopes() {
      return [...this.scopes];
    }
  }
  class Bn extends Fn {
    constructor() {
      super("facebook.com");
    }
    static credential(e) {
      return xn._fromParams({
        providerId: Bn.PROVIDER_ID,
        signInMethod: Bn.FACEBOOK_SIGN_IN_METHOD,
        accessToken: e,
      });
    }
    static credentialFromResult(e) {
      return Bn.credentialFromTaggedObject(e);
    }
    static credentialFromError(e) {
      return Bn.credentialFromTaggedObject(e.customData || {});
    }
    static credentialFromTaggedObject({ _tokenResponse: e }) {
      if (!e || !("oauthAccessToken" in e)) return null;
      if (!e.oauthAccessToken) return null;
      try {
        return Bn.credential(e.oauthAccessToken);
      } catch (e) {
        return null;
      }
    }
  }
  (Bn.FACEBOOK_SIGN_IN_METHOD = "facebook.com"),
    (Bn.PROVIDER_ID = "facebook.com");
  class Hn extends Fn {
    constructor() {
      super("google.com"), this.addScope("profile");
    }
    static credential(e, t) {
      return xn._fromParams({
        providerId: Hn.PROVIDER_ID,
        signInMethod: Hn.GOOGLE_SIGN_IN_METHOD,
        idToken: e,
        accessToken: t,
      });
    }
    static credentialFromResult(e) {
      return Hn.credentialFromTaggedObject(e);
    }
    static credentialFromError(e) {
      return Hn.credentialFromTaggedObject(e.customData || {});
    }
    static credentialFromTaggedObject({ _tokenResponse: e }) {
      if (!e) return null;
      const { oauthIdToken: t, oauthAccessToken: n } = e;
      if (!t && !n) return null;
      try {
        return Hn.credential(t, n);
      } catch (e) {
        return null;
      }
    }
  }
  (Hn.GOOGLE_SIGN_IN_METHOD = "google.com"), (Hn.PROVIDER_ID = "google.com");
  class jn extends Fn {
    constructor() {
      super("github.com");
    }
    static credential(e) {
      return xn._fromParams({
        providerId: jn.PROVIDER_ID,
        signInMethod: jn.GITHUB_SIGN_IN_METHOD,
        accessToken: e,
      });
    }
    static credentialFromResult(e) {
      return jn.credentialFromTaggedObject(e);
    }
    static credentialFromError(e) {
      return jn.credentialFromTaggedObject(e.customData || {});
    }
    static credentialFromTaggedObject({ _tokenResponse: e }) {
      if (!e || !("oauthAccessToken" in e)) return null;
      if (!e.oauthAccessToken) return null;
      try {
        return jn.credential(e.oauthAccessToken);
      } catch (e) {
        return null;
      }
    }
  }
  (jn.GITHUB_SIGN_IN_METHOD = "github.com"), (jn.PROVIDER_ID = "github.com");
  class $n extends Fn {
    constructor() {
      super("twitter.com");
    }
    static credential(e, t) {
      return xn._fromParams({
        providerId: $n.PROVIDER_ID,
        signInMethod: $n.TWITTER_SIGN_IN_METHOD,
        oauthToken: e,
        oauthTokenSecret: t,
      });
    }
    static credentialFromResult(e) {
      return $n.credentialFromTaggedObject(e);
    }
    static credentialFromError(e) {
      return $n.credentialFromTaggedObject(e.customData || {});
    }
    static credentialFromTaggedObject({ _tokenResponse: e }) {
      if (!e) return null;
      const { oauthAccessToken: t, oauthTokenSecret: n } = e;
      if (!t || !n) return null;
      try {
        return $n.credential(t, n);
      } catch (e) {
        return null;
      }
    }
  }
  ($n.TWITTER_SIGN_IN_METHOD = "twitter.com"), ($n.PROVIDER_ID = "twitter.com");
  class zn {
    constructor(e) {
      (this.user = e.user),
        (this.providerId = e.providerId),
        (this._tokenResponse = e._tokenResponse),
        (this.operationType = e.operationType);
    }
    static async _fromIdTokenResponse(e, t, n, r = !1) {
      const i = await Qt._fromIdTokenResponse(e, n, r),
        s = Kn(n);
      return new zn({
        user: i,
        providerId: s,
        _tokenResponse: n,
        operationType: t,
      });
    }
    static async _forOperation(e, t, n) {
      await e._updateTokensIfNecessary(n, !0);
      const r = Kn(n);
      return new zn({
        user: e,
        providerId: r,
        _tokenResponse: n,
        operationType: t,
      });
    }
  }
  function Kn(e) {
    return e.providerId ? e.providerId : "phoneNumber" in e ? "phone" : null;
  }
  class Gn extends v {
    constructor(e, t, n, r) {
      var i;
      super(t.code, t.message),
        (this.operationType = n),
        (this.user = r),
        Object.setPrototypeOf(this, Gn.prototype),
        (this.customData = {
          appName: e.name,
          tenantId: null !== (i = e.tenantId) && void 0 !== i ? i : void 0,
          _serverResponse: t.customData._serverResponse,
          operationType: n,
        });
    }
    static _fromErrorAndOperation(e, t, n, r) {
      return new Gn(e, t, n, r);
    }
  }
  function Wn(e, t, n, r) {
    return (
      "reauthenticate" === t
        ? n._getReauthenticationResolver(e)
        : n._getIdTokenResponse(e)
    ).catch((n) => {
      if ("auth/multi-factor-auth-required" === n.code)
        throw Gn._fromErrorAndOperation(e, n, t, r);
      throw n;
    });
  }
  async function Qn(e, t, n = !1) {
    const r = await Ht(e, t._linkToIdToken(e.auth, await e.getIdToken()), n);
    return zn._forOperation(e, "link", r);
  }
  async function Jn(e, t, n = !1) {
    const { auth: r } = e;
    if (Ve(r.app)) return Promise.reject(dt(r));
    const i = "reauthenticate";
    try {
      const s = await Ht(e, Wn(r, i, t, e), n);
      ft(s.idToken, r, "internal-error");
      const o = Ft(s.idToken);
      ft(o, r, "internal-error");
      const { sub: a } = o;
      return ft(e.uid === a, r, "user-mismatch"), zn._forOperation(e, i, s);
    } catch (e) {
      throw (
        ("auth/user-not-found" === (null == e ? void 0 : e.code) &&
          lt(r, "user-mismatch"),
        e)
      );
    }
  }
  async function Yn(e, t, n = !1) {
    if (Ve(e.app)) return Promise.reject(dt(e));
    const r = "signIn",
      i = await Wn(e, r, t),
      s = await zn._fromIdTokenResponse(e, r, i);
    return n || (await e._updateCurrentUser(s.user)), s;
  }
  async function Xn(e, t) {
    if (Ve(e.app)) return Promise.reject(dt(e));
    const n = yn(e),
      r = await (async function (e, t) {
        return At(e, "POST", "/v1/accounts:signInWithCustomToken", kt(e, t));
      })(n, { token: t, returnSecureToken: !0 }),
      i = await zn._fromIdTokenResponse(n, "signIn", r);
    return await n._updateCurrentUser(i.user), i;
  }
  new WeakMap();
  const Zn = "__sak";
  class er {
    constructor(e, t) {
      (this.storageRetriever = e), (this.type = t);
    }
    _isAvailable() {
      try {
        return this.storage
          ? (this.storage.setItem(Zn, "1"),
            this.storage.removeItem(Zn),
            Promise.resolve(!0))
          : Promise.resolve(!1);
      } catch (e) {
        return Promise.resolve(!1);
      }
    }
    _set(e, t) {
      return this.storage.setItem(e, JSON.stringify(t)), Promise.resolve();
    }
    _get(e) {
      const t = this.storage.getItem(e);
      return Promise.resolve(t ? JSON.parse(t) : null);
    }
    _remove(e) {
      return this.storage.removeItem(e), Promise.resolve();
    }
    get storage() {
      return this.storageRetriever();
    }
  }
  class tr extends er {
    constructor() {
      super(() => window.localStorage, "LOCAL"),
        (this.boundEventHandler = (e, t) => this.onStorageEvent(e, t)),
        (this.listeners = {}),
        (this.localCache = {}),
        (this.pollTimer = null),
        (this.fallbackToPolling = pn()),
        (this._shouldAllowMigration = !0);
    }
    forAllChangedKeys(e) {
      for (const t of Object.keys(this.listeners)) {
        const n = this.storage.getItem(t),
          r = this.localCache[t];
        n !== r && e(t, r, n);
      }
    }
    onStorageEvent(e, t = !1) {
      if (!e.key)
        return void this.forAllChangedKeys((e, t, n) => {
          this.notifyListeners(e, n);
        });
      const n = e.key;
      t ? this.detachListener() : this.stopPolling();
      const r = () => {
          const e = this.storage.getItem(n);
          (t || this.localCache[n] !== e) && this.notifyListeners(n, e);
        },
        i = this.storage.getItem(n);
      dn() && i !== e.newValue && e.newValue !== e.oldValue
        ? setTimeout(r, 10)
        : r();
    }
    notifyListeners(e, t) {
      this.localCache[e] = t;
      const n = this.listeners[e];
      if (n) for (const e of Array.from(n)) e(t ? JSON.parse(t) : t);
    }
    startPolling() {
      this.stopPolling(),
        (this.pollTimer = setInterval(() => {
          this.forAllChangedKeys((e, t, n) => {
            this.onStorageEvent(
              new StorageEvent("storage", { key: e, oldValue: t, newValue: n }),
              !0
            );
          });
        }, 1e3));
    }
    stopPolling() {
      this.pollTimer &&
        (clearInterval(this.pollTimer), (this.pollTimer = null));
    }
    attachListener() {
      window.addEventListener("storage", this.boundEventHandler);
    }
    detachListener() {
      window.removeEventListener("storage", this.boundEventHandler);
    }
    _addListener(e, t) {
      0 === Object.keys(this.listeners).length &&
        (this.fallbackToPolling ? this.startPolling() : this.attachListener()),
        this.listeners[e] ||
          ((this.listeners[e] = new Set()),
          (this.localCache[e] = this.storage.getItem(e))),
        this.listeners[e].add(t);
    }
    _removeListener(e, t) {
      this.listeners[e] &&
        (this.listeners[e].delete(t),
        0 === this.listeners[e].size && delete this.listeners[e]),
        0 === Object.keys(this.listeners).length &&
          (this.detachListener(), this.stopPolling());
    }
    async _set(e, t) {
      await super._set(e, t), (this.localCache[e] = JSON.stringify(t));
    }
    async _get(e) {
      const t = await super._get(e);
      return (this.localCache[e] = JSON.stringify(t)), t;
    }
    async _remove(e) {
      await super._remove(e), delete this.localCache[e];
    }
  }
  tr.type = "LOCAL";
  const nr = tr;
  class rr extends er {
    constructor() {
      super(() => window.sessionStorage, "SESSION");
    }
    _addListener(e, t) {}
    _removeListener(e, t) {}
  }
  rr.type = "SESSION";
  const ir = rr;
  class sr {
    constructor(e) {
      (this.eventTarget = e),
        (this.handlersMap = {}),
        (this.boundEventHandler = this.handleEvent.bind(this));
    }
    static _getInstance(e) {
      const t = this.receivers.find((t) => t.isListeningto(e));
      if (t) return t;
      const n = new sr(e);
      return this.receivers.push(n), n;
    }
    isListeningto(e) {
      return this.eventTarget === e;
    }
    async handleEvent(e) {
      const t = e,
        { eventId: n, eventType: r, data: i } = t.data,
        s = this.handlersMap[r];
      if (!(null == s ? void 0 : s.size)) return;
      t.ports[0].postMessage({ status: "ack", eventId: n, eventType: r });
      const o = Array.from(s).map(async (e) => e(t.origin, i)),
        a = await (function (e) {
          return Promise.all(
            e.map(async (e) => {
              try {
                return { fulfilled: !0, value: await e };
              } catch (e) {
                return { fulfilled: !1, reason: e };
              }
            })
          );
        })(o);
      t.ports[0].postMessage({
        status: "done",
        eventId: n,
        eventType: r,
        response: a,
      });
    }
    _subscribe(e, t) {
      0 === Object.keys(this.handlersMap).length &&
        this.eventTarget.addEventListener("message", this.boundEventHandler),
        this.handlersMap[e] || (this.handlersMap[e] = new Set()),
        this.handlersMap[e].add(t);
    }
    _unsubscribe(e, t) {
      this.handlersMap[e] && t && this.handlersMap[e].delete(t),
        (t && 0 !== this.handlersMap[e].size) || delete this.handlersMap[e],
        0 === Object.keys(this.handlersMap).length &&
          this.eventTarget.removeEventListener(
            "message",
            this.boundEventHandler
          );
    }
  }
  function or(e = "", t = 10) {
    let n = "";
    for (let e = 0; e < t; e++) n += Math.floor(10 * Math.random());
    return e + n;
  }
  sr.receivers = [];
  class ar {
    constructor(e) {
      (this.target = e), (this.handlers = new Set());
    }
    removeMessageHandler(e) {
      e.messageChannel &&
        (e.messageChannel.port1.removeEventListener("message", e.onMessage),
        e.messageChannel.port1.close()),
        this.handlers.delete(e);
    }
    async _send(e, t, n = 50) {
      const r =
        "undefined" != typeof MessageChannel ? new MessageChannel() : null;
      if (!r) throw new Error("connection_unavailable");
      let i, s;
      return new Promise((o, a) => {
        const c = or("", 20);
        r.port1.start();
        const l = setTimeout(() => {
          a(new Error("unsupported_event"));
        }, n);
        (s = {
          messageChannel: r,
          onMessage(e) {
            const t = e;
            if (t.data.eventId === c)
              switch (t.data.status) {
                case "ack":
                  clearTimeout(l),
                    (i = setTimeout(() => {
                      a(new Error("timeout"));
                    }, 3e3));
                  break;
                case "done":
                  clearTimeout(i), o(t.data.response);
                  break;
                default:
                  clearTimeout(l),
                    clearTimeout(i),
                    a(new Error("invalid_response"));
              }
          },
        }),
          this.handlers.add(s),
          r.port1.addEventListener("message", s.onMessage),
          this.target.postMessage({ eventType: e, eventId: c, data: t }, [
            r.port2,
          ]);
      }).finally(() => {
        s && this.removeMessageHandler(s);
      });
    }
  }
  function cr() {
    return window;
  }
  function lr() {
    return (
      void 0 !== cr().WorkerGlobalScope &&
      "function" == typeof cr().importScripts
    );
  }
  const ur = "firebaseLocalStorageDb",
    hr = "firebaseLocalStorage",
    dr = "fbase_key";
  class pr {
    constructor(e) {
      this.request = e;
    }
    toPromise() {
      return new Promise((e, t) => {
        this.request.addEventListener("success", () => {
          e(this.request.result);
        }),
          this.request.addEventListener("error", () => {
            t(this.request.error);
          });
      });
    }
  }
  function fr(e, t) {
    return e.transaction([hr], t ? "readwrite" : "readonly").objectStore(hr);
  }
  function mr() {
    const e = indexedDB.open(ur, 1);
    return new Promise((t, n) => {
      e.addEventListener("error", () => {
        n(e.error);
      }),
        e.addEventListener("upgradeneeded", () => {
          const t = e.result;
          try {
            t.createObjectStore(hr, { keyPath: dr });
          } catch (e) {
            n(e);
          }
        }),
        e.addEventListener("success", async () => {
          const n = e.result;
          n.objectStoreNames.contains(hr)
            ? t(n)
            : (n.close(),
              await (function () {
                const e = indexedDB.deleteDatabase(ur);
                return new pr(e).toPromise();
              })(),
              t(await mr()));
        });
    });
  }
  async function gr(e, t, n) {
    const r = fr(e, !0).put({ [dr]: t, value: n });
    return new pr(r).toPromise();
  }
  function vr(e, t) {
    const n = fr(e, !0).delete(t);
    return new pr(n).toPromise();
  }
  class yr {
    constructor() {
      (this.type = "LOCAL"),
        (this._shouldAllowMigration = !0),
        (this.listeners = {}),
        (this.localCache = {}),
        (this.pollTimer = null),
        (this.pendingWrites = 0),
        (this.receiver = null),
        (this.sender = null),
        (this.serviceWorkerReceiverAvailable = !1),
        (this.activeServiceWorker = null),
        (this._workerInitializationPromise =
          this.initializeServiceWorkerMessaging().then(
            () => {},
            () => {}
          ));
    }
    async _openDb() {
      return this.db || (this.db = await mr()), this.db;
    }
    async _withRetries(e) {
      let t = 0;
      for (;;)
        try {
          const t = await this._openDb();
          return await e(t);
        } catch (e) {
          if (t++ > 3) throw e;
          this.db && (this.db.close(), (this.db = void 0));
        }
    }
    async initializeServiceWorkerMessaging() {
      return lr() ? this.initializeReceiver() : this.initializeSender();
    }
    async initializeReceiver() {
      (this.receiver = sr._getInstance(lr() ? self : null)),
        this.receiver._subscribe("keyChanged", async (e, t) => ({
          keyProcessed: (await this._poll()).includes(t.key),
        })),
        this.receiver._subscribe("ping", async (e, t) => ["keyChanged"]);
    }
    async initializeSender() {
      var e, t;
      if (
        ((this.activeServiceWorker = await (async function () {
          if (
            !(null === navigator || void 0 === navigator
              ? void 0
              : navigator.serviceWorker)
          )
            return null;
          try {
            return (await navigator.serviceWorker.ready).active;
          } catch (e) {
            return null;
          }
        })()),
        !this.activeServiceWorker)
      )
        return;
      this.sender = new ar(this.activeServiceWorker);
      const n = await this.sender._send("ping", {}, 800);
      n &&
        (null === (e = n[0]) || void 0 === e ? void 0 : e.fulfilled) &&
        (null === (t = n[0]) || void 0 === t
          ? void 0
          : t.value.includes("keyChanged")) &&
        (this.serviceWorkerReceiverAvailable = !0);
    }
    async notifyServiceWorker(e) {
      var t;
      if (
        this.sender &&
        this.activeServiceWorker &&
        ((null ===
          (t =
            null === navigator || void 0 === navigator
              ? void 0
              : navigator.serviceWorker) || void 0 === t
          ? void 0
          : t.controller) || null) === this.activeServiceWorker
      )
        try {
          await this.sender._send(
            "keyChanged",
            { key: e },
            this.serviceWorkerReceiverAvailable ? 800 : 50
          );
        } catch (t) {}
    }
    async _isAvailable() {
      try {
        if (!indexedDB) return !1;
        const e = await mr();
        return await gr(e, Zn, "1"), await vr(e, Zn), !0;
      } catch (e) {}
      return !1;
    }
    async _withPendingWrite(e) {
      this.pendingWrites++;
      try {
        await e();
      } finally {
        this.pendingWrites--;
      }
    }
    async _set(e, t) {
      return this._withPendingWrite(
        async () => (
          await this._withRetries((n) => gr(n, e, t)),
          (this.localCache[e] = t),
          this.notifyServiceWorker(e)
        )
      );
    }
    async _get(e) {
      const t = await this._withRetries((t) =>
        (async function (e, t) {
          const n = fr(e, !1).get(t),
            r = await new pr(n).toPromise();
          return void 0 === r ? null : r.value;
        })(t, e)
      );
      return (this.localCache[e] = t), t;
    }
    async _remove(e) {
      return this._withPendingWrite(
        async () => (
          await this._withRetries((t) => vr(t, e)),
          delete this.localCache[e],
          this.notifyServiceWorker(e)
        )
      );
    }
    async _poll() {
      const e = await this._withRetries((e) => {
        const t = fr(e, !1).getAll();
        return new pr(t).toPromise();
      });
      if (!e) return [];
      if (0 !== this.pendingWrites) return [];
      const t = [],
        n = new Set();
      if (0 !== e.length)
        for (const { fbase_key: r, value: i } of e)
          n.add(r),
            JSON.stringify(this.localCache[r]) !== JSON.stringify(i) &&
              (this.notifyListeners(r, i), t.push(r));
      for (const e of Object.keys(this.localCache))
        this.localCache[e] &&
          !n.has(e) &&
          (this.notifyListeners(e, null), t.push(e));
      return t;
    }
    notifyListeners(e, t) {
      this.localCache[e] = t;
      const n = this.listeners[e];
      if (n) for (const e of Array.from(n)) e(t);
    }
    startPolling() {
      this.stopPolling(),
        (this.pollTimer = setInterval(async () => this._poll(), 800));
    }
    stopPolling() {
      this.pollTimer &&
        (clearInterval(this.pollTimer), (this.pollTimer = null));
    }
    _addListener(e, t) {
      0 === Object.keys(this.listeners).length && this.startPolling(),
        this.listeners[e] || ((this.listeners[e] = new Set()), this._get(e)),
        this.listeners[e].add(t);
    }
    _removeListener(e, t) {
      this.listeners[e] &&
        (this.listeners[e].delete(t),
        0 === this.listeners[e].size && delete this.listeners[e]),
        0 === Object.keys(this.listeners).length && this.stopPolling();
    }
  }
  yr.type = "LOCAL";
  const _r = yr;
  Sn("rcb"), new wt(3e4, 6e4);
  const br = "recaptcha";
  async function wr(e, t, n) {
    var r;
    const i = await n.verify();
    try {
      let s;
      if (
        (ft("string" == typeof i, e, "argument-error"),
        ft(n.type === br, e, "argument-error"),
        (s = "string" == typeof t ? { phoneNumber: t } : t),
        "session" in s)
      ) {
        const t = s.session;
        if ("phoneNumber" in s) {
          ft("enroll" === t.type, e, "internal-error");
          const n = await (function (e, t) {
            return Tt(e, "POST", "/v2/accounts/mfaEnrollment:start", kt(e, t));
          })(e, {
            idToken: t.credential,
            phoneEnrollmentInfo: {
              phoneNumber: s.phoneNumber,
              recaptchaToken: i,
            },
          });
          return n.phoneSessionInfo.sessionInfo;
        }
        {
          ft("signin" === t.type, e, "internal-error");
          const n =
            (null === (r = s.multiFactorHint) || void 0 === r
              ? void 0
              : r.uid) || s.multiFactorUid;
          ft(n, e, "missing-multi-factor-info");
          const o = await (function (e, t) {
            return Tt(e, "POST", "/v2/accounts/mfaSignIn:start", kt(e, t));
          })(e, {
            mfaPendingCredential: t.credential,
            mfaEnrollmentId: n,
            phoneSignInInfo: { recaptchaToken: i },
          });
          return o.phoneResponseInfo.sessionInfo;
        }
      }
      {
        const { sessionInfo: t } = await (async function (e, t) {
          return Tt(e, "POST", "/v1/accounts:sendVerificationCode", kt(e, t));
        })(e, { phoneNumber: s.phoneNumber, recaptchaToken: i });
        return t;
      }
    } finally {
      n._reset();
    }
  }
  class Sr {
    constructor(e) {
      (this.providerId = Sr.PROVIDER_ID), (this.auth = yn(e));
    }
    verifyPhoneNumber(e, t) {
      return wr(this.auth, e, T(t));
    }
    static credential(e, t) {
      return Rn._fromVerification(e, t);
    }
    static credentialFromResult(e) {
      const t = e;
      return Sr.credentialFromTaggedObject(t);
    }
    static credentialFromError(e) {
      return Sr.credentialFromTaggedObject(e.customData || {});
    }
    static credentialFromTaggedObject({ _tokenResponse: e }) {
      if (!e) return null;
      const { phoneNumber: t, temporaryProof: n } = e;
      return t && n ? Rn._fromTokenResponse(t, n) : null;
    }
  }
  function Er(e, t) {
    return t
      ? Yt(t)
      : (ft(e._popupRedirectResolver, e, "argument-error"),
        e._popupRedirectResolver);
  }
  (Sr.PROVIDER_ID = "phone"), (Sr.PHONE_SIGN_IN_METHOD = "phone");
  class Ir extends An {
    constructor(e) {
      super("custom", "custom"), (this.params = e);
    }
    _getIdTokenResponse(e) {
      return Dn(e, this._buildIdpRequest());
    }
    _linkToIdToken(e, t) {
      return Dn(e, this._buildIdpRequest(t));
    }
    _getReauthenticationResolver(e) {
      return Dn(e, this._buildIdpRequest());
    }
    _buildIdpRequest(e) {
      const t = {
        requestUri: this.params.requestUri,
        sessionId: this.params.sessionId,
        postBody: this.params.postBody,
        tenantId: this.params.tenantId,
        pendingToken: this.params.pendingToken,
        returnSecureToken: !0,
        returnIdpCredential: !0,
      };
      return e && (t.idToken = e), t;
    }
  }
  function Cr(e) {
    return Yn(e.auth, new Ir(e), e.bypassAuthState);
  }
  function kr(e) {
    const { auth: t, user: n } = e;
    return ft(n, t, "internal-error"), Jn(n, new Ir(e), e.bypassAuthState);
  }
  async function Tr(e) {
    const { auth: t, user: n } = e;
    return ft(n, t, "internal-error"), Qn(n, new Ir(e), e.bypassAuthState);
  }
  class Lr {
    constructor(e, t, n, r, i = !1) {
      (this.auth = e),
        (this.resolver = n),
        (this.user = r),
        (this.bypassAuthState = i),
        (this.pendingPromise = null),
        (this.eventManager = null),
        (this.filter = Array.isArray(t) ? t : [t]);
    }
    execute() {
      return new Promise(async (e, t) => {
        this.pendingPromise = { resolve: e, reject: t };
        try {
          (this.eventManager = await this.resolver._initialize(this.auth)),
            await this.onExecution(),
            this.eventManager.registerConsumer(this);
        } catch (e) {
          this.reject(e);
        }
      });
    }
    async onAuthEvent(e) {
      const {
        urlResponse: t,
        sessionId: n,
        postBody: r,
        tenantId: i,
        error: s,
        type: o,
      } = e;
      if (s) return void this.reject(s);
      const a = {
        auth: this.auth,
        requestUri: t,
        sessionId: n,
        tenantId: i || void 0,
        postBody: r || void 0,
        user: this.user,
        bypassAuthState: this.bypassAuthState,
      };
      try {
        this.resolve(await this.getIdpTask(o)(a));
      } catch (e) {
        this.reject(e);
      }
    }
    onError(e) {
      this.reject(e);
    }
    getIdpTask(e) {
      switch (e) {
        case "signInViaPopup":
        case "signInViaRedirect":
          return Cr;
        case "linkViaPopup":
        case "linkViaRedirect":
          return Tr;
        case "reauthViaPopup":
        case "reauthViaRedirect":
          return kr;
        default:
          lt(this.auth, "internal-error");
      }
    }
    resolve(e) {
      gt(this.pendingPromise, "Pending promise was never set"),
        this.pendingPromise.resolve(e),
        this.unregisterAndCleanUp();
    }
    reject(e) {
      gt(this.pendingPromise, "Pending promise was never set"),
        this.pendingPromise.reject(e),
        this.unregisterAndCleanUp();
    }
    unregisterAndCleanUp() {
      this.eventManager && this.eventManager.unregisterConsumer(this),
        (this.pendingPromise = null),
        this.cleanUp();
    }
  }
  const Ar = new wt(2e3, 1e4);
  class Nr extends Lr {
    constructor(e, t, n, r, i) {
      super(e, t, r, i),
        (this.provider = n),
        (this.authWindow = null),
        (this.pollId = null),
        Nr.currentPopupAction && Nr.currentPopupAction.cancel(),
        (Nr.currentPopupAction = this);
    }
    async executeNotNull() {
      const e = await this.execute();
      return ft(e, this.auth, "internal-error"), e;
    }
    async onExecution() {
      gt(1 === this.filter.length, "Popup operations only handle one event");
      const e = or();
      (this.authWindow = await this.resolver._openPopup(
        this.auth,
        this.provider,
        this.filter[0],
        e
      )),
        (this.authWindow.associatedEvent = e),
        this.resolver._originValidation(this.auth).catch((e) => {
          this.reject(e);
        }),
        this.resolver._isIframeWebStorageSupported(this.auth, (e) => {
          e || this.reject(ut(this.auth, "web-storage-unsupported"));
        }),
        this.pollUserCancellation();
    }
    get eventId() {
      var e;
      return (
        (null === (e = this.authWindow) || void 0 === e
          ? void 0
          : e.associatedEvent) || null
      );
    }
    cancel() {
      this.reject(ut(this.auth, "cancelled-popup-request"));
    }
    cleanUp() {
      this.authWindow && this.authWindow.close(),
        this.pollId && window.clearTimeout(this.pollId),
        (this.authWindow = null),
        (this.pollId = null),
        (Nr.currentPopupAction = null);
    }
    pollUserCancellation() {
      const e = () => {
        var t, n;
        (
          null ===
            (n =
              null === (t = this.authWindow) || void 0 === t
                ? void 0
                : t.window) || void 0 === n
            ? void 0
            : n.closed
        )
          ? (this.pollId = window.setTimeout(() => {
              (this.pollId = null),
                this.reject(ut(this.auth, "popup-closed-by-user"));
            }, 8e3))
          : (this.pollId = window.setTimeout(e, Ar.get()));
      };
      e();
    }
  }
  Nr.currentPopupAction = null;
  const Pr = new Map();
  class Or extends Lr {
    constructor(e, t, n = !1) {
      super(
        e,
        [
          "signInViaRedirect",
          "linkViaRedirect",
          "reauthViaRedirect",
          "unknown",
        ],
        t,
        void 0,
        n
      ),
        (this.eventId = null);
    }
    async execute() {
      let e = Pr.get(this.auth._key());
      if (!e) {
        try {
          const t = (await (async function (e, t) {
            const n = Mr(t),
              r = xr(e);
            if (!(await r._isAvailable())) return !1;
            const i = "true" === (await r._get(n));
            return await r._remove(n), i;
          })(this.resolver, this.auth))
            ? await super.execute()
            : null;
          e = () => Promise.resolve(t);
        } catch (t) {
          e = () => Promise.reject(t);
        }
        Pr.set(this.auth._key(), e);
      }
      return (
        this.bypassAuthState ||
          Pr.set(this.auth._key(), () => Promise.resolve(null)),
        e()
      );
    }
    async onAuthEvent(e) {
      if ("signInViaRedirect" === e.type) return super.onAuthEvent(e);
      if ("unknown" !== e.type) {
        if (e.eventId) {
          const t = await this.auth._redirectUserForId(e.eventId);
          if (t) return (this.user = t), super.onAuthEvent(e);
          this.resolve(null);
        }
      } else this.resolve(null);
    }
    async onExecution() {}
    cleanUp() {}
  }
  function Dr(e, t) {
    Pr.set(e._key(), t);
  }
  function xr(e) {
    return Yt(e._redirectPersistence);
  }
  function Mr(e) {
    return en("pendingRedirect", e.config.apiKey, e.name);
  }
  async function Rr(e, t, n = !1) {
    if (Ve(e.app)) return Promise.reject(dt(e));
    const r = yn(e),
      i = Er(r, t),
      s = new Or(r, i, n),
      o = await s.execute();
    return (
      o &&
        !n &&
        (delete o.user._redirectEventId,
        await r._persistUserIfCurrent(o.user),
        await r._setRedirectUser(null, t)),
      o
    );
  }
  class qr {
    constructor(e) {
      (this.auth = e),
        (this.cachedEventUids = new Set()),
        (this.consumers = new Set()),
        (this.queuedRedirectEvent = null),
        (this.hasHandledPotentialRedirect = !1),
        (this.lastProcessedEventTime = Date.now());
    }
    registerConsumer(e) {
      this.consumers.add(e),
        this.queuedRedirectEvent &&
          this.isEventForConsumer(this.queuedRedirectEvent, e) &&
          (this.sendToConsumer(this.queuedRedirectEvent, e),
          this.saveEventToCache(this.queuedRedirectEvent),
          (this.queuedRedirectEvent = null));
    }
    unregisterConsumer(e) {
      this.consumers.delete(e);
    }
    onEvent(e) {
      if (this.hasEventBeenHandled(e)) return !1;
      let t = !1;
      return (
        this.consumers.forEach((n) => {
          this.isEventForConsumer(e, n) &&
            ((t = !0), this.sendToConsumer(e, n), this.saveEventToCache(e));
        }),
        this.hasHandledPotentialRedirect ||
          !(function (e) {
            switch (e.type) {
              case "signInViaRedirect":
              case "linkViaRedirect":
              case "reauthViaRedirect":
                return !0;
              case "unknown":
                return Vr(e);
              default:
                return !1;
            }
          })(e) ||
          ((this.hasHandledPotentialRedirect = !0),
          t || ((this.queuedRedirectEvent = e), (t = !0))),
        t
      );
    }
    sendToConsumer(e, t) {
      var n;
      if (e.error && !Vr(e)) {
        const r =
          (null === (n = e.error.code) || void 0 === n
            ? void 0
            : n.split("auth/")[1]) || "internal-error";
        t.onError(ut(this.auth, r));
      } else t.onAuthEvent(e);
    }
    isEventForConsumer(e, t) {
      const n = null === t.eventId || (!!e.eventId && e.eventId === t.eventId);
      return t.filter.includes(e.type) && n;
    }
    hasEventBeenHandled(e) {
      return (
        Date.now() - this.lastProcessedEventTime >= 6e5 &&
          this.cachedEventUids.clear(),
        this.cachedEventUids.has(Ur(e))
      );
    }
    saveEventToCache(e) {
      this.cachedEventUids.add(Ur(e)),
        (this.lastProcessedEventTime = Date.now());
    }
  }
  function Ur(e) {
    return [e.type, e.eventId, e.sessionId, e.tenantId]
      .filter((e) => e)
      .join("-");
  }
  function Vr({ type: e, error: t }) {
    return (
      "unknown" === e && "auth/no-auth-event" === (null == t ? void 0 : t.code)
    );
  }
  const Fr = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,
    Br = /^https?/;
  async function Hr(e) {
    if (e.config.emulator) return;
    const { authorizedDomains: t } = await (async function (e, t = {}) {
      return Tt(e, "GET", "/v1/projects", t);
    })(e);
    for (const e of t)
      try {
        if (jr(e)) return;
      } catch (e) {}
    lt(e, "unauthorized-domain");
  }
  function jr(e) {
    const t = vt(),
      { protocol: n, hostname: r } = new URL(t);
    if (e.startsWith("chrome-extension://")) {
      const i = new URL(e);
      return "" === i.hostname && "" === r
        ? "chrome-extension:" === n &&
            e.replace("chrome-extension://", "") ===
              t.replace("chrome-extension://", "")
        : "chrome-extension:" === n && i.hostname === r;
    }
    if (!Br.test(n)) return !1;
    if (Fr.test(e)) return r === e;
    const i = e.replace(/\./g, "\\.");
    return new RegExp("^(.+\\." + i + "|" + i + ")$", "i").test(r);
  }
  const $r = new wt(3e4, 6e4);
  function zr() {
    const e = cr().___jsl;
    if (null == e ? void 0 : e.H)
      for (const t of Object.keys(e.H))
        if (
          ((e.H[t].r = e.H[t].r || []),
          (e.H[t].L = e.H[t].L || []),
          (e.H[t].r = [...e.H[t].L]),
          e.CP)
        )
          for (let t = 0; t < e.CP.length; t++) e.CP[t] = null;
  }
  function Kr(e) {
    return new Promise((t, n) => {
      var r, i, s;
      function o() {
        zr(),
          gapi.load("gapi.iframes", {
            callback: () => {
              t(gapi.iframes.getContext());
            },
            ontimeout: () => {
              zr(), n(ut(e, "network-request-failed"));
            },
            timeout: $r.get(),
          });
      }
      if (
        null ===
          (i = null === (r = cr().gapi) || void 0 === r ? void 0 : r.iframes) ||
        void 0 === i
          ? void 0
          : i.Iframe
      )
        t(gapi.iframes.getContext());
      else {
        if (!(null === (s = cr().gapi) || void 0 === s ? void 0 : s.load)) {
          const t = Sn("iframefcb");
          return (
            (cr()[t] = () => {
              gapi.load ? o() : n(ut(e, "network-request-failed"));
            }),
            wn(`${bn.gapiScript}?onload=${t}`).catch((e) => n(e))
          );
        }
        o();
      }
    }).catch((e) => {
      throw ((Gr = null), e);
    });
  }
  let Gr = null;
  const Wr = new wt(5e3, 15e3),
    Qr = {
      style: {
        position: "absolute",
        top: "-100px",
        width: "1px",
        height: "1px",
      },
      "aria-hidden": "true",
      tabindex: "-1",
    },
    Jr = new Map([
      ["identitytoolkit.googleapis.com", "p"],
      ["staging-identitytoolkit.sandbox.googleapis.com", "s"],
      ["test-identitytoolkit.sandbox.googleapis.com", "t"],
    ]);
  function Yr(e) {
    const t = e.config;
    ft(t.authDomain, e, "auth-domain-config-required");
    const n = t.emulator
        ? St(t, "emulator/auth/iframe")
        : `https://${e.config.authDomain}/__/auth/iframe`,
      r = { apiKey: t.apiKey, appName: e.name, v: He },
      i = Jr.get(e.config.apiHost);
    i && (r.eid = i);
    const s = e._getFrameworks();
    return s.length && (r.fw = s.join(",")), `${n}?${S(r).slice(1)}`;
  }
  async function Xr(e) {
    const t = await (function (e) {
        return (Gr = Gr || Kr(e)), Gr;
      })(e),
      n = cr().gapi;
    return (
      ft(n, e, "internal-error"),
      t.open(
        {
          where: document.body,
          url: Yr(e),
          messageHandlersFilter: n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,
          attributes: Qr,
          dontclear: !0,
        },
        (t) =>
          new Promise(async (n, r) => {
            await t.restyle({ setHideOnLeave: !1 });
            const i = ut(e, "network-request-failed"),
              s = cr().setTimeout(() => {
                r(i);
              }, Wr.get());
            function o() {
              cr().clearTimeout(s), n(t);
            }
            t.ping(o).then(o, () => {
              r(i);
            });
          })
      )
    );
  }
  const Zr = {
    location: "yes",
    resizable: "yes",
    statusbar: "yes",
    toolbar: "no",
  };
  class ei {
    constructor(e) {
      (this.window = e), (this.associatedEvent = null);
    }
    close() {
      if (this.window)
        try {
          this.window.close();
        } catch (e) {}
    }
  }
  function ti(e, t, n, r = 500, i = 600) {
    const s = Math.max((window.screen.availHeight - i) / 2, 0).toString(),
      o = Math.max((window.screen.availWidth - r) / 2, 0).toString();
    let a = "";
    const c = Object.assign(Object.assign({}, Zr), {
        width: r.toString(),
        height: i.toString(),
        top: s,
        left: o,
      }),
      l = f().toLowerCase();
    n && (a = on(l) ? "_blank" : n),
      rn(l) && ((t = t || "http://localhost"), (c.scrollbars = "yes"));
    const u = Object.entries(c).reduce((e, [t, n]) => `${e}${t}=${n},`, "");
    if (
      (function (e = f()) {
        var t;
        return (
          hn(e) &&
          !!(null === (t = window.navigator) || void 0 === t
            ? void 0
            : t.standalone)
        );
      })(l) &&
      "_self" !== a
    )
      return (
        (function (e, t) {
          const n = document.createElement("a");
          (n.href = e), (n.target = t);
          const r = document.createEvent("MouseEvent");
          r.initMouseEvent(
            "click",
            !0,
            !0,
            window,
            1,
            0,
            0,
            0,
            0,
            !1,
            !1,
            !1,
            !1,
            1,
            null
          ),
            n.dispatchEvent(r);
        })(t || "", a),
        new ei(null)
      );
    const h = window.open(t || "", a, u);
    ft(h, e, "popup-blocked");
    try {
      h.focus();
    } catch (e) {}
    return new ei(h);
  }
  const ni = "__/auth/handler",
    ri = "emulator/auth/handler",
    ii = encodeURIComponent("fac");
  async function si(e, t, n, r, i, s) {
    ft(e.config.authDomain, e, "auth-domain-config-required"),
      ft(e.config.apiKey, e, "invalid-api-key");
    const o = {
      apiKey: e.config.apiKey,
      appName: e.name,
      authType: n,
      redirectUrl: r,
      v: He,
      eventId: i,
    };
    if (t instanceof Vn) {
      t.setDefaultLanguage(e.languageCode),
        (o.providerId = t.providerId || ""),
        (function (e) {
          for (const t in e)
            if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
          return !0;
        })(t.getCustomParameters()) ||
          (o.customParameters = JSON.stringify(t.getCustomParameters()));
      for (const [e, t] of Object.entries(s || {})) o[e] = t;
    }
    if (t instanceof Fn) {
      const e = t.getScopes().filter((e) => "" !== e);
      e.length > 0 && (o.scopes = e.join(","));
    }
    e.tenantId && (o.tid = e.tenantId);
    const a = o;
    for (const e of Object.keys(a)) void 0 === a[e] && delete a[e];
    const c = await e._getAppCheckToken(),
      l = c ? `#${ii}=${encodeURIComponent(c)}` : "";
    return `${(function ({ config: e }) {
      if (!e.emulator) return `https://${e.authDomain}/${ni}`;
      return St(e, ri);
    })(e)}?${S(a).slice(1)}${l}`;
  }
  const oi = "webStorageSupport";
  const ai = class {
    constructor() {
      (this.eventManagers = {}),
        (this.iframes = {}),
        (this.originValidationPromises = {}),
        (this._redirectPersistence = ir),
        (this._completeRedirectFn = Rr),
        (this._overrideRedirectResult = Dr);
    }
    async _openPopup(e, t, n, r) {
      var i;
      gt(
        null === (i = this.eventManagers[e._key()]) || void 0 === i
          ? void 0
          : i.manager,
        "_initialize() not called before _openPopup()"
      );
      return ti(e, await si(e, t, n, vt(), r), or());
    }
    async _openRedirect(e, t, n, r) {
      await this._originValidation(e);
      return (
        (function (e) {
          cr().location.href = e;
        })(await si(e, t, n, vt(), r)),
        new Promise(() => {})
      );
    }
    _initialize(e) {
      const t = e._key();
      if (this.eventManagers[t]) {
        const { manager: e, promise: n } = this.eventManagers[t];
        return e
          ? Promise.resolve(e)
          : (gt(n, "If manager is not set, promise should be"), n);
      }
      const n = this.initAndGetManager(e);
      return (
        (this.eventManagers[t] = { promise: n }),
        n.catch(() => {
          delete this.eventManagers[t];
        }),
        n
      );
    }
    async initAndGetManager(e) {
      const t = await Xr(e),
        n = new qr(e);
      return (
        t.register(
          "authEvent",
          (t) => {
            ft(null == t ? void 0 : t.authEvent, e, "invalid-auth-event");
            return { status: n.onEvent(t.authEvent) ? "ACK" : "ERROR" };
          },
          gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER
        ),
        (this.eventManagers[e._key()] = { manager: n }),
        (this.iframes[e._key()] = t),
        n
      );
    }
    _isIframeWebStorageSupported(e, t) {
      this.iframes[e._key()].send(
        oi,
        { type: oi },
        (n) => {
          var r;
          const i =
            null === (r = null == n ? void 0 : n[0]) || void 0 === r
              ? void 0
              : r[oi];
          void 0 !== i && t(!!i), lt(e, "internal-error");
        },
        gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER
      );
    }
    _originValidation(e) {
      const t = e._key();
      return (
        this.originValidationPromises[t] ||
          (this.originValidationPromises[t] = Hr(e)),
        this.originValidationPromises[t]
      );
    }
    get _shouldInitProactively() {
      return pn() || sn() || hn();
    }
  };
  var ci = "@firebase/auth",
    li = "1.7.9";
  class ui {
    constructor(e) {
      (this.auth = e), (this.internalListeners = new Map());
    }
    getUid() {
      var e;
      return (
        this.assertAuthConfigured(),
        (null === (e = this.auth.currentUser) || void 0 === e
          ? void 0
          : e.uid) || null
      );
    }
    async getToken(e) {
      if (
        (this.assertAuthConfigured(),
        await this.auth._initializationPromise,
        !this.auth.currentUser)
      )
        return null;
      return { accessToken: await this.auth.currentUser.getIdToken(e) };
    }
    addAuthTokenListener(e) {
      if ((this.assertAuthConfigured(), this.internalListeners.has(e))) return;
      const t = this.auth.onIdTokenChanged((t) => {
        e((null == t ? void 0 : t.stsTokenManager.accessToken) || null);
      });
      this.internalListeners.set(e, t), this.updateProactiveRefresh();
    }
    removeAuthTokenListener(e) {
      this.assertAuthConfigured();
      const t = this.internalListeners.get(e);
      t &&
        (this.internalListeners.delete(e), t(), this.updateProactiveRefresh());
    }
    assertAuthConfigured() {
      ft(
        this.auth._initializationPromise,
        "dependent-sdk-initialized-before-auth"
      );
    }
    updateProactiveRefresh() {
      this.internalListeners.size > 0
        ? this.auth._startProactiveRefresh()
        : this.auth._stopProactiveRefresh();
    }
  }
  const hi = d("authIdTokenMaxAge") || 300;
  let di = null;
  function pi(e = $e()) {
    const t = Ue(e, "auth");
    if (t.isInitialized()) return t.getImmediate();
    const n = (function (e, t) {
        const n = Ue(e, "auth");
        if (n.isInitialized()) {
          const e = n.getImmediate();
          if (b(n.getOptions(), null != t ? t : {})) return e;
          lt(e, "already-initialized");
        }
        return n.initialize({ options: t });
      })(e, { popupRedirectResolver: ai, persistence: [_r, nr, ir] }),
      r = d("authTokenSyncURL");
    if (r && "boolean" == typeof isSecureContext && isSecureContext) {
      const e = new URL(r, location.origin);
      if (location.origin === e.origin) {
        const t =
          ((i = e.toString()),
          async (e) => {
            const t = e && (await e.getIdTokenResult()),
              n =
                t && (new Date().getTime() - Date.parse(t.issuedAtTime)) / 1e3;
            if (n && n > hi) return;
            const r = null == t ? void 0 : t.token;
            di !== r &&
              ((di = r),
              await fetch(i, {
                method: r ? "POST" : "DELETE",
                headers: r ? { Authorization: `Bearer ${r}` } : {},
              }));
          });
        !(function (e, t, n) {
          T(e).beforeAuthStateChanged(t, n);
        })(n, t, () => t(n.currentUser)),
          (function (e, t, n, r) {
            T(e).onIdTokenChanged(t, n, r);
          })(n, (e) => t(e));
      }
    }
    var i;
    const s = u("auth");
    return s && kn(n, `http://${s}`), n;
  }
  var fi;
  (bn = {
    loadJS(e) {
      return new Promise((t, n) => {
        const r = document.createElement("script");
        var i, s;
        r.setAttribute("src", e),
          (r.onload = t),
          (r.onerror = (e) => {
            const t = ut("internal-error");
            (t.customData = e), n(t);
          }),
          (r.type = "text/javascript"),
          (r.charset = "UTF-8"),
          (null !==
            (s =
              null === (i = document.getElementsByTagName("head")) ||
              void 0 === i
                ? void 0
                : i[0]) && void 0 !== s
            ? s
            : document
          ).appendChild(r);
      });
    },
    gapiScript: "https://apis.google.com/js/api.js",
    recaptchaV2Script: "https://www.google.com/recaptcha/api.js",
    recaptchaEnterpriseScript:
      "https://www.google.com/recaptcha/enterprise.js?render=",
  }),
    (fi = "Browser"),
    qe(
      new L(
        "auth",
        (e, { options: t }) => {
          const n = e.getProvider("app").getImmediate(),
            r = e.getProvider("heartbeat"),
            i = e.getProvider("app-check-internal"),
            { apiKey: s, authDomain: o } = n.options;
          ft(s && !s.includes(":"), "invalid-api-key", { appName: n.name });
          const a = {
              apiKey: s,
              authDomain: o,
              clientPlatform: fi,
              apiHost: "identitytoolkit.googleapis.com",
              tokenApiHost: "securetoken.googleapis.com",
              apiScheme: "https",
              sdkClientVersion: fn(fi),
            },
            c = new vn(n, r, i, a);
          return (
            (function (e, t) {
              const n = (null == t ? void 0 : t.persistence) || [],
                r = (Array.isArray(n) ? n : [n]).map(Yt);
              (null == t ? void 0 : t.errorMap) &&
                e._updateErrorMap(t.errorMap),
                e._initializeWithPersistence(
                  r,
                  null == t ? void 0 : t.popupRedirectResolver
                );
            })(c, t),
            c
          );
        },
        "PUBLIC"
      )
        .setInstantiationMode("EXPLICIT")
        .setInstanceCreatedCallback((e, t, n) => {
          e.getProvider("auth-internal").initialize();
        })
    ),
    qe(
      new L(
        "auth-internal",
        (e) => ((e) => new ui(e))(yn(e.getProvider("auth").getImmediate())),
        "PRIVATE"
      ).setInstantiationMode("EXPLICIT")
    ),
    Ke(
      ci,
      li,
      (function (e) {
        switch (e) {
          case "Node":
            return "node";
          case "ReactNative":
            return "rn";
          case "Worker":
            return "webworker";
          case "Cordova":
            return "cordova";
          case "WebExtension":
            return "web-extension";
          default:
            return;
        }
      })(fi)
    ),
    Ke(ci, li, "esm2017");
  var mi = n(639),
    gi = n.n(mi);
  const vi = (e, t, n) => {
      const r = document.querySelector(t).innerHTML;
      let i = gi().compile(r)(e);
      document.querySelector(n).innerHTML = i;
    },
    yi = (e, t) => {
      document.querySelectorAll(`.${e}`).forEach((e) => {
        e.addEventListener("click", function (e) {
          const n = e.target;
          if (
            e.target &&
            e.target.classList.contains("select-dropdown__list-item")
          ) {
            const r = {};
            for (let e = 0; e < n.attributes.length; e++) {
              const t = n.attributes[e];
              r[t.name] = t.value;
            }
            let i = e.target.innerText;
            const s = e.target
              .closest(".select-dropdown")
              .querySelector(".select-dropdown__button .default");
            s && s.classList.add("d-none");
            const o = e.target
              .closest(".select-dropdown")
              .querySelector(".select-dropdown__button .selected-span");
            o.classList.contains("d-none") && o.classList.remove("d-none"),
              (o.innerText = i),
              e.target
                .closest(".select-dropdown__list")
                .classList.remove("active");
            const a = e.target.closest(".select-dropdown");
            a.classList.remove("active");
            const c = a.querySelector(".blur-overlay-mob");
            c &&
              (c.classList.add("d-none"),
              document.querySelector("body").classList.remove("popup-open")),
              "function" == typeof t && t(r);
          }
        });
      });
    },
    _i = () => {
      const e = document.getElementById("pageLoader");
      e &&
        (e.classList.add("hidden"),
        setTimeout(() => {
          e.style.display = "none";
        }, 500));
    },
    bi = async (e = "", t = {}) => (await fetch(e, t)).json(),
    wi = () => {
      const e = window.location.pathname.split("/").filter((e) => "" != e),
        t = e[0] || "in",
        n = e[1] || "en";
      return (
        console.log("URL Path:", window.location.pathname),
        console.log("Detected Country:", t),
        {
          SUB_DOMAIN_COOKIE_NAME: document
            .querySelector(".re__revamp-v4__logincta")
            ?.getAttribute("sub-domain-cookie"),
          headers: {
            "x-custom-language": n,
            "x-custom-country": t,
            app_id: "1",
          },
          runMode: document
            .querySelector(".login-submit")
            ?.getAttribute("data-runmode"),
          apiUrl: {
            countryJson: document
              .querySelector(".sign-up")
              ?.getAttribute("country-json"),
            forgotPassword: document
              .querySelector(".forgot-password-submit")
              ?.getAttribute("forgot-password-api"),
            forgotPasswordVerify: document
              .querySelector(".forgot-password-otp")
              ?.getAttribute("forgot-password-verify"),
            resetForgotPassword: document
              .querySelector(".sign-up")
              ?.getAttribute("reset-forgot-password"),
            loginSubmitApi: document
              .querySelector(".sign-up")
              ?.getAttribute("login-submit-api"),
            verifyTokenApi: document
              .querySelector(".sign-up")
              ?.getAttribute("verify-token"),
            refreshTokenApi: document
              .querySelector(".sign-up")
              ?.getAttribute("refresh-url"),
            verifyAccountApi: document
              .querySelector(".sign-up")
              ?.getAttribute("data-form-resend"),
            userVerifyAccount: document
              .querySelector(".sign-up")
              ?.getAttribute("user-verify-account"),
            firebaseToken: document
              .querySelector(".sign-up")
              ?.getAttribute("firebase-token-api"),
            googleLoginApi: document
              .querySelector(".sign-up")
              ?.getAttribute("data-attr-google"),
            facebookLoginApi: document
              .querySelector(".sign-up")
              ?.getAttribute("data-attr-facebook"),
          },
          apiHeaders: {
            application_json: "application/json",
            application_url_encode:
              "application/x-www-form-urlencoded; charset=UTF-8",
          },
          apiStatus: {
            post: "POST",
            get: "GET",
            path: "PATH",
            put: "PUT",
            delete: "DELETE",
          },
          fieldLengths: { min: {}, max: {} },
          regex: {
            alphaNumeric: /^[a-zA-Z0-9]+$/,
            alphabetAccent:
              /^(?!\s)[a-zA-Z_\s-]*$/,
            alphabet: /^[a-zA-Z]+$/,
            email: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,
            numeric: /^[0-9]+$/,
            mobile: /^\d{8,15}$/,
            passwordNumber: /\d/g,
            passwordAll: /[A-Za-z]/,
          },
          otpInfo: {
            smsData: {
              message: {
                app_id: "1",
                channel: "WEBOTP",
                priority: "1",
                content: {
                  value: "",
                  type: "TEMPLATE",
                  template: {
                    templateId: "REcare",
                    parameterValues: { otp: "" },
                  },
                },
                recipient: {
                  mobile: "",
                  callingCode: "",
                  recipient_type: "individual",
                },
              },
              metaData: { version: "v1.0.9" },
            },
          },
          messages: {
            globalErrorMessage: "Credentials are invalid",
            forgotPassword: {
              countryCodeMessage: document
                .querySelector(".sign-up")
                ?.getAttribute("country-code-message"),
              otpSuccessMessage: document
                .querySelector(".sign-up")
                ?.getAttribute("otp-success-message"),
              otpErrorMessage: document
                .querySelector(".sign-up")
                ?.getAttribute("otp-error-message"),
              otpLimit: document
                .querySelector(".sign-up")
                ?.getAttribute("otp-limit"),
              mobileInvalid: document
                .querySelector(".sign-up")
                ?.getAttribute("mobile-invalid"),
              wrongCallingCode: document
                .querySelector(".sign-up")
                ?.getAttribute("wrong-calling-code"),
              otpVerifySuccess: document
                .querySelector(".sign-up")
                ?.getAttribute("otp-verify-success"),
              otpVerifyFail: document
                .querySelector(".sign-up")
                ?.getAttribute("otp-verify-fail"),
              userVerify: document
                .querySelector(".sign-up")
                ?.getAttribute("user-verify"),
              digitValidation: document
                .querySelector(".sign-up")
                ?.getAttribute("digit-validation"),
              unmatched: document
                .querySelector(".sign-up")
                ?.getAttribute("un-match"),
              resetSuccess: document
                .querySelector(".sign-up")
                ?.getAttribute("reset-success"),
              resetFail: document
                .querySelector(".sign-up")
                ?.getAttribute("reset-fail"),
            },
            login: {
              loginError: document
                .querySelector(".sign-up")
                ?.getAttribute("login-error"),
              loginValidate: document
                .querySelector(".sign-up")
                ?.getAttribute("login-validate"),
              passwordValidate: document
                .querySelector(".sign-up")
                ?.getAttribute("password-validate"),
              limitExceed: document
                .querySelector(".sign-up")
                ?.getAttribute("limit-exceed"),
              invalidOtp: document
                .querySelector(".sign-up")
                ?.getAttribute("invalid-otp"),
              googleErrorMessage: document
                .querySelector(".sign-up")
                ?.getAttribute("google-error"),
              facebookError: document
                .querySelector(".sign-up")
                ?.getAttribute("facebook-error"),
            },
          },
          firebaseConfig: document
            .querySelector(".sign-up")
            ?.getAttribute("firebase-config"),
        }
      );
    };
  function Si(e) {
    const t = `; ${document.cookie}`.split(`; ${e}=`);
    return 2 === t.length ? t.pop().split(";").shift() : null;
  }
  const Ei = (e, t, n, r, i = 180, s = "/") => {
    const o = new Date();
    o.setTime(o.getTime() + 24 * i * 7 * 60 * 60 * 1e3);
    const a = `${e}#${t}#${n}`,
      c = "expires=" + o.toUTCString(),
      l = btoa(a);
    document.cookie = `${r}=${l}; ${c}; domain=.royalenfield.com; secure=true; sameSite=strict; path=${s}`;
  };
  function Ii(e) {
    let t = Si(e),
      n = window.atob(t).split("#");
    return { user_id: n[0], refresh_token: n[1], jwt_token: n[2] };
  }
  function Ci() {
    let e = document
      .querySelector(".sign-up")
      ?.getAttribute("sub-domain-cookie");
    if (!e) return { userID: null, userStatus: "non logged in" };
    let t = Ii(e),
      n = t?.jwt_token,
      r = n ? "logged in" : "non logged in";
    return {
      userID: "non logged in" === r ? "NA" : t?.user_id || null,
      userStatus: r,
    };
  }
  async function ki(e) {
    let t = document.querySelector(".sign-up")?.getAttribute("data-custom-key");
    t || (t = document.querySelector("body").getAttribute("data-custom-key"));
    const n = new TextEncoder(),
      r = n.encode(t),
      i = n.encode(JSON.stringify(e)),
      s = await crypto.subtle.importKey(
        "raw",
        r,
        { name: "HMAC", hash: { name: "SHA-256" } },
        !1,
        ["sign"]
      ),
      o = await crypto.subtle.sign("HMAC", s, i);
    return Array.from(new Uint8Array(o))
      .map((e) => e.toString(16).padStart(2, "0"))
      .join("");
  }
  async function Ti(e) {
    const t = e.hmac,
      n = { ...e };
    delete n.hmac;
    return t === (await ki(n));
  }
  const Li = (e) => {
    Object.keys(sessionStorage).forEach((t) => {
      e.includes(t) && sessionStorage.removeItem(t);
    });
  };
  var Ai = {
    init: function () {
      function e(e, t) {
        for (; e; ) {
          if (e.classList && e.classList.contains(t))
            return { foundClass: t, status: !0, element: e };
          e = e.parentElement;
        }
        return { foundClass: t, status: !1, element: null };
      }
      document.querySelectorAll("a").forEach(function (e) {
        let t = e.getAttribute("href");
        null === t
          ? e.setAttribute("href", "#")
          : ((t = t.replace("/content/royal-enfield", "")),
            e.setAttribute("href", t));
      }),
        document.addEventListener("click", function (e) {
          if ("modal" === e.target.getAttribute("data-toggle")) {
            console.log("Button clicked");
            const t = e.target.getAttribute("data-target");
            document.getElementById(t).classList.add("popup-show"),
              document.querySelector("body").classList.add("popup-open");
          }
        });
      document.querySelectorAll("button, div, a, span, .close").forEach((t) => {
        t.addEventListener("click", function (t) {
          if ("modal" == this.getAttribute("data-dismiss")) {
            const n = ["popup--otp-login-main", "popup--otp-verify"];
            for (const r of n) {
              const n = e(t.target, r);
              if ("popup--otp-login-main" == n.foundClass && n.status) {
                document
                  .querySelector(".re__revamp-v4__common-otp-login")
                  .classList.remove("d-none"),
                  document
                    .querySelector(".re__revamp-v4__common-otp-code-login")
                    .classList.add("d-none"),
                  document
                    .querySelector(".common-personal-details-sing__up")
                    .classList.add("d-none"),
                  document
                    .querySelector(
                      ".re__revamp-v4__personal-details__signup-cta"
                    )
                    .classList.add("d-none"),
                  document
                    .querySelector(".login-otp-digits")
                    .classList.remove("incorrect-otp"),
                  document
                    .querySelectorAll(".otp-login-input")
                    .forEach(function (e) {
                      e.value = "";
                    }),
                  document
                    .querySelector(".login-resend-otp")
                    .classList.add("d-none"),
                  document
                    .querySelector(".login-otp-time")
                    .classList.remove("d-none");
                document.getElementsByClassName(
                  "login-otp-timer-countdown"
                )[0].innerHTML = "0:30";
                break;
              }
              if ("popup--otp-verify" == n.foundClass && n.status) {
                document.querySelector(".resend-otp").classList.add("d-none"),
                  document
                    .querySelector(".otp-time")
                    .classList.remove("d-none");
                document.getElementsByClassName(
                  "otp-timer-countdown"
                )[0].innerHTML = "0:30";
                break;
              }
            }
            this.closest(".re__revamp-v4__popup").classList.remove(
              "popup-show"
            ),
              document.querySelector("body").classList.remove("popup-open");
          }
        });
      });
    },
  };
  const Ni = (e) => {
      const t = {
        event: "commonLoginComponent",
        eventCategory: e.eventCategory,
        eventAction: "login_signup",
        userId: e.userID,
        user_status: e.user_status,
        sectionHeading: e.sectionHeading,
        pageType: e.pageType,
        eventLabel: e.eventLabel,
      };
      e.errorMessage && (t.errorMessage = e.errorMessage),
        window.dataLayer && window.dataLayer.push(t);
    },
    Pi = {
      constants: {
        OTA_EMAIL: {
          app_id: "1",
          channel: "OTAEMAIL",
          priority: "1",
          templateId: "OTP_EMAIL",
          parameterValues: { userName: "", websiteUrl: "" },
          recipient: { email: "", recipient_type: "individual" },
        },
        OTA_SMS: {
          app_id: "1",
          channel: "OTASMS",
          priority: "1",
          templateId: "OTP_DEFAULT",
          parameterValues: { otp: "" },
          recipient: { callingCode: "", mobile: "" },
        },
        signUpData: {
          fName: "",
          lName: "",
          gender: "Others",
          dob: document.querySelector(".sign-up")?.getAttribute("default-dob"),
          email: "",
          otp: "",
          countryName: "",
          mobile: "",
          isRoyalEnfieldOwner: document
            .querySelector(".sign-up")
            ?.getAttribute("default-royal-enfield-owner"),
          callingCode: "",
        },
        registrationMethod: "",
      },
      variables: {
        isCorporateLogin: document
          .querySelector(".sign-up")
          ?.getAttribute("corporate-login"),
        countryJsonAPI: document
          .querySelector(".sign-up")
          ?.getAttribute("country-json-api"),
        sendOtpApi: document
          .querySelector(".sign-up")
          ?.getAttribute("send-otp-api"),
        verifyOtpApi: document
          .querySelector(".sign-up")
          ?.getAttribute("verify-otp-api"),
        signUpApi: document
          .querySelector(".re__revamp-v4__personal-details__signup-cta")
          ?.getAttribute("sign-up-api"),
        timerId: "",
        mobileMaxLength: Number(
          document
            .querySelector(".re__revamp-v4__login-otp__mobile-number")
            ?.getAttribute("max-length-accepted") || 10
        ),
        authCookieName: document
          .querySelector(".sign-up")
          ?.getAttribute("sub-domain-cookie"),
      },
      resetLoginUI: function () {
        console.log("Resetting login UI to clean state");
        [
          ".re__revamp-v4__corporate-login__mobile-container",
          ".re__revamp-v4__corporate-login__email-input",
          ".re__revamp-v4__login-otp_mobile-label",
          ".login-otp_email-label",
          ".login-number_otp-msg",
          ".login-email_otp-msg",
          ".re__revamp-v4__mobile_otp-login",
          ".re__revamp-v4__sign-up_otp-login",
        ].forEach((e) => {
          const t = document.querySelector(e);
          t && (t.classList.add("d-none"), (t.style.display = "none"));
        });
      },
      corporateLoginMethod: function (e) {
        console.log("=== Corporate Login Method Called ==="),
          console.log("Params object:", e),
          this.resetLoginUI();
        const t = document.querySelector(".sb-login__calling-code"),
          n = document.querySelector(".corporate-login__dropdown-container");
        t && t.classList.add("d-none"), n && n.classList.remove("d-none");
        const r = e.headers["x-custom-country"] || "in";
        console.log("Country detected:", r),
          console.log("Full URL:", window.location.href);
        const i =
          new URLSearchParams(window.location.search).get("country") || r;
        console.log("Final country used:", i),
          console.log("Is NOT India?", "IN" != i.toUpperCase());
        const s = {
          mobileContainer: document.querySelector(
            ".re__revamp-v4__corporate-login__mobile-container"
          ),
          emailContainer: document.querySelector(
            ".re__revamp-v4__corporate-login__email-input"
          ),
          mobileLabel: document.querySelector(
            ".re__revamp-v4__login-otp_mobile-label"
          ),
          emailLabel: document.querySelector(".login-otp_email-label"),
          mobileMsg: document.querySelector(".login-number_otp-msg"),
          emailMsg: document.querySelector(".login-email_otp-msg"),
          mobileOtpSection: document.querySelector(
            ".re__revamp-v4__mobile_otp-login"
          ),
          emailOtpSection: document.querySelector(
            ".re__revamp-v4__sign-up_otp-login"
          ),
        };
        if ((console.log("Found elements:", s), "IN" != i.toUpperCase())) {
          console.log("Setting UI for non-India (Email) login"),
            s.mobileContainer &&
              (s.mobileContainer.classList.add("d-none"),
              (s.mobileContainer.style.display = "none")),
            n && (n.classList.add("d-none"), (n.style.display = "none")),
            s.emailContainer &&
              (s.emailContainer.classList.remove("d-none"),
              (s.emailContainer.style.display = "block")),
            s.mobileLabel &&
              (s.mobileLabel.classList.add("d-none"),
              (s.mobileLabel.style.display = "none")),
            s.emailLabel &&
              (s.emailLabel.classList.remove("d-none"),
              (s.emailLabel.style.display = "block")),
            s.mobileMsg &&
              (s.mobileMsg.classList.add("d-none"),
              (s.mobileMsg.style.display = "none")),
            s.emailMsg &&
              (s.emailMsg.classList.remove("d-none"),
              (s.emailMsg.style.display = "block")),
            s.mobileOtpSection &&
              (s.mobileOtpSection.classList.add("d-none"),
              (s.mobileOtpSection.style.display = "none")),
            s.emailOtpSection &&
              (s.emailOtpSection.classList.remove("d-none"),
              (s.emailOtpSection.style.display = "block"));
          const e = document.querySelector(".email-container"),
            t = document.querySelector(".corporate-sign_up--mobile-container");
          e && (e.classList.add("d-none"), (e.style.display = "none")),
            "IN" !== i.toUpperCase() &&
              t &&
              (t.classList.remove("d-none"), (t.style.display = "block"));
        } else
          console.log("Setting UI for India (Mobile) login"),
            s.mobileContainer &&
              (s.mobileContainer.classList.remove("d-none"),
              (s.mobileContainer.style.display = "flex")),
            s.emailContainer &&
              (s.emailContainer.classList.add("d-none"),
              (s.emailContainer.style.display = "none")),
            s.mobileLabel &&
              (s.mobileLabel.classList.remove("d-none"),
              (s.mobileLabel.style.display = "block")),
            s.emailLabel &&
              (s.emailLabel.classList.add("d-none"),
              (s.emailLabel.style.display = "none")),
            s.mobileMsg &&
              (s.mobileMsg.classList.remove("d-none"),
              (s.mobileMsg.style.display = "block")),
            s.emailMsg &&
              (s.emailMsg.classList.add("d-none"),
              (s.emailMsg.style.display = "none")),
            s.mobileOtpSection &&
              (s.mobileOtpSection.classList.remove("d-none"),
              (s.mobileOtpSection.style.display = "block")),
            s.emailOtpSection &&
              (s.emailOtpSection.classList.add("d-none"),
              (s.emailOtpSection.style.display = "none"));
        document
          .querySelector(".corporate-login__otp-disc")
          .classList.remove("d-none");
      },
      otpTimer: function () {
        Pi.variables.timerId && clearInterval(Pi.variables.timerId);
        let e = document.querySelector(".login-otp-timer-countdown"),
          t = 30;
        document.querySelector(".login-otp-time")?.classList.remove("d-none"),
          document.querySelector(".login-resend-otp")?.classList.add("d-none"),
          e &&
            (e.innerHTML =
              '<span style="color: #a6a6a6; line-height: 21px; font-weight: 400; font-size: 14px; font-family: Montserrat;">Resend OTP in</span> 00:30'),
          (Pi.variables.timerId = setInterval(function () {
            if ((t--, t < 0))
              document
                .querySelector(".login-otp-time")
                ?.classList.add("d-none"),
                document
                  .querySelector(".login-resend-otp")
                  ?.classList.remove("d-none"),
                clearInterval(Pi.variables.timerId);
            else if (
              (document
                .querySelector(".login-otp-time")
                ?.classList.remove("d-none"),
              document
                .querySelector(".login-resend-otp")
                ?.classList.add("d-none"),
              e)
            ) {
              const n = t < 10 ? "0" + t : t;
              e.innerHTML = `<span style="color: #a6a6a6;">Resend OTP in</span> 00:${n}`;
            }
          }, 1e3));
      },
      otpFields: function (e, t) {
        function n() {
          Array.from(e).every((e) => 1 === e.value.length)
            ? (t.classList.remove("disabled"),
              t.removeAttribute("disabled"),
              e.forEach((e) => {
                (e.style.borderColor = ""), (e.style.boxShadow = "");
              }))
            : (t.classList.add("disabled"), t.setAttribute("disabled", "true"));
        }
        e.forEach((t, r) => {
          t.addEventListener("input", (i) => {
            const s = i.target.value;
            if ("insertFromPaste" === i.inputType)
              return void (i.target.value = s.slice(0, 1));
            document
              .querySelector(".login-otp-digits")
              .classList.remove("incorrect-otp"),
              document
                .querySelector(".login-otp-error")
                .classList.add("d-none");
            const o = document.querySelector(".login-otp-info-msg");
            o && (o.classList.remove("d-none"), (o.style.display = "block")),
              (t.value = s.slice(-1)),
              (t.style.borderColor = "#da291b"),
              (t.style.boxShadow = "0 0 0 1px #da291b"),
              t.value && r < e.length - 1 && e[r + 1].focus(),
              n();
          }),
            t.addEventListener("keydown", (n) => {
              "Backspace" === n.key &&
                "" === t.value &&
                r > 0 &&
                e[r - 1].focus();
            });
        }),
          e[0].addEventListener("paste", (t) => {
            const r = t.clipboardData.getData("text").slice(0, e.length);
            e.forEach((e) => (e.value = "")),
              r.split("").forEach((t, n) => {
                e[n] &&
                  ((e[n].value = t),
                  (e[n].style.borderColor = "#da291b"),
                  (e[n].style.boxShadow = "0 0 0 1px #da291b"));
              }),
              n();
          });
      },
      lockScroll: function () {
        const e = document.documentElement,
          t = document.body,
          n = window.scrollY;
        (t.dataset.scrollY = n),
          (e.style.overflow = "hidden"),
          (t.style.overflow = "hidden"),
          t.classList.contains("header-sticky") &&
            t.classList.remove("header-sticky"),
          t.classList.add("popup-open");
      },
      unlockScroll: function () {
        const e = document.documentElement,
          t = document.body;
        (e.style.overflow = ""),
          (t.style.overflow = ""),
          t.classList.remove("popup-open"),
          t.dataset.scrollY && window.scrollTo(0, parseInt(t.dataset.scrollY));
      },
      openOtpModel: function (e, t, n = !1) {
        this.lockScroll();
        const r =
          document.getElementById("popup_otp_login") ||
          document.querySelector(".re__revamp-v4__popup.popup-show");
        if (r) {
          r.querySelectorAll(".re__revamp-v4__header-close-popup").forEach(
            (e) => {
              e.addEventListener("click", () => this.unlockScroll());
            }
          );
          r.querySelectorAll(".back-btn").forEach((e) => {
            e.addEventListener("click", () => this.lockScroll());
          }),
            r.addEventListener("click", (e) => {
              e.target === r && this.unlockScroll();
            }),
            n && r.classList.add("re__revamp-v4__d-block-tabs");
        }
        document.querySelectorAll(".otp-login-input").forEach((e) => {
          e &&
            ((e.value = ""),
            (e.style.borderColor = ""),
            (e.style.boxShadow = ""));
        }),
          document
            .querySelector(".firstname-remove-btn")
            ?.classList.add("d-none"),
          document
            .querySelector(".lastname-remove-btn")
            ?.classList.add("d-none"),
          document.querySelector(".email-remove-btn")?.classList.add("d-none"),
          document
            .querySelector(".login-email-remove-btn")
            ?.classList.add("d-none");
        const i = document.querySelector(".login-otp-digits"),
          s = document.querySelector(".login-otp-error");
        i && i.classList.remove("incorrect-otp"),
          s && s.classList.add("d-none");
        const o = document.querySelector(".verify-btn");
        o && (o.classList.add("disabled"), o.setAttribute("disabled", "true"));
        const a = document.querySelector(
          ".re__revamp-v4__personal-details__signup-cta"
        );
        a && ((a.disabled = !1), a.classList.remove("disabled"));
        const c = document.querySelector(
            ".re__revamp-v4__login-otp__mobile-number"
          ),
          l = document.querySelector(".login-mobile-number"),
          u = document.querySelector(".re__revamp-v4__otp-login_email");
        c && (c.value = ""), l && (l.value = ""), u && (u.value = "");
        const h = document.getElementById("firstNameSignup"),
          d = document.getElementById("lastNameSignup"),
          p = document.getElementById("emailSignup"),
          f = document.querySelector(".sign-up__mobile-number");
        h && (h.value = ""),
          d && (d.value = ""),
          p && (p.value = ""),
          f && (f.value = "");
        const m = document.getElementById("chkAgreeSignup"),
          g = document.getElementById("internationalChkAgreeSignup"),
          v = document.querySelectorAll(
            '.consent__check input[type="checkbox"]'
          );
        m && (m.checked = !1),
          g && (g.checked = !1),
          v &&
            v.forEach((e) => {
              (e.checked = !1),
                e.classList.contains("checked") &&
                  e.classList.remove("checked");
            });
        const y = document.querySelector(".first-name-error"),
          _ = document.querySelector(".last-name-error"),
          b = document.querySelector(".email-error"),
          w = document.querySelector(".mobile-error"),
          S = document.querySelector(".tnc-error"),
          E = document.querySelector(".international-tnc-error"),
          I = document.querySelector(".gdpr-error");
        y && !1 === y.classList.contains("d-none") && y.classList.add("d-none"),
          _ &&
            !1 === _.classList.contains("d-none") &&
            _.classList.add("d-none"),
          b &&
            !1 === b.classList.contains("d-none") &&
            b.classList.add("d-none"),
          w &&
            !1 === w.classList.contains("d-none") &&
            w.classList.add("d-none"),
          S &&
            !1 === S.classList.contains("d-none") &&
            S.classList.add("d-none"),
          E &&
            !1 === E.classList.contains("d-none") &&
            E.classList.add("d-none"),
          I &&
            !1 === I.classList.contains("d-none") &&
            I.classList.add("d-none");
        const C = e.target.getAttribute("data-target"),
          k = document.getElementById(C);
        if (k) {
          const e = document.querySelector(".re__revamp-v4__login_otp-email"),
            n = document.querySelector(
              ".re__revamp-v4__login_otp-calling-code"
            ),
            r = document.querySelector(
              ".re__revamp-v4__login_otp-mobile-number"
            );
          t && t.email && e && (e.innerHTML = t.email),
            t &&
              t.callingCode &&
              t.mobileNumber &&
              n &&
              r &&
              ((n.innerHTML = t.callingCode), (r.innerHTML = t.mobileNumber));
          const i = document.querySelector(".re__revamp-v4__common-otp-login"),
            s = document.querySelector(".re__revamp-v4__common-otp-code-login");
          i && i.classList.add("d-none"),
            s && s.classList.remove("d-none"),
            k.classList.add("popup-show"),
            k.classList.add("service-booking-login"),
            setTimeout(() => {
              const e = document.querySelector(".otp-login-input");
              e && e.focus();
            }, 50);
        } else {
          setTimeout(() => {
            const e = document.querySelector(".otp-login-input");
            e && e.focus();
          }, 50);
          const e = document.querySelector(".re__revamp-v4__common-otp-login"),
            t = document.querySelector(".re__revamp-v4__common-otp-code-login"),
            n = document.querySelector("#popup_otp_login");
          e && e.classList.remove("d-none"),
            t && t.classList.add("d-none"),
            n && n.classList.add("popup-show");
        }
        const T = document.querySelector("body");
        T &&
          (T.classList.contains("header-sticky") &&
            T.classList.remove("header-sticky"),
          T.classList.add("popup-open")),
          Pi.otpTimer();
      },
      loginWithOtp: async function (e, t, n) {
        try {
          const r = document.querySelector(".verify-btn");
          r.classList.add("disabled"), r.setAttribute("disabled", "true");
          const i = { credentials: t },
            s = await ki(i),
            o = await bi(Pi.variables.verifyOtpApi, {
              method: e.apiStatus.post,
              headers: {
                ...e.headers,
                "Content-Type": e.apiHeaders.application_url_encode,
              },
              body: new URLSearchParams({ ...i, hmac: s }),
            });
          let a = await Ti(o);
          if (
            (console.log("Response HMAC verification:", a),
            "200" == o.code && null !== o.data && a)
          ) {
            const {
              data: {
                refreshToken: e,
                jwtAccessToken: t,
                user: { userId: i },
              },
            } = o;
            Ei(i, e, t, Pi.variables.authCookieName);
            const { userID: s, userStatus: a } = Ci();
            try {
              (n.userID = s),
                (n.user_status = a),
                dataLayer.push({
                  event: "loginComponent",
                  eventCategory: "loginComponent",
                  eventAction:
                    document.querySelector(".verify-btn").innerText || "VERIFY",
                  eventLabel: "success",
                  sectionHeading:
                    document.querySelector(
                      ".re__revamp-v4__section__login .re__revamp-v4__otp-content-header"
                    ).innerText || "OTP Verification",
                  errorMessage: "NA",
                  pageType: document.title,
                });
            } catch (e) {
              console.error("Error while fetching user data:", e);
            }
            const c = r?.getAttribute("data-reload");
            console.log("Is reload after login:", c),
              (c && "true" !== c) ||
                (console.log("Reloading the page after successful login"),
                location.reload(!0));
          } else if ("404" == o.code) {
            dataLayer.push({
              event: "loginComponent",
              eventCategory: "loginComponent",
              eventAction:
                document.querySelector(".verify-btn").innerText || "VERIFY",
              eventLabel: "success",
              sectionHeading:
                document.querySelector(
                  ".re__revamp-v4__section__login .re__revamp-v4__otp-content-header"
                ).innerText || "OTP Verification",
              errorMessage: "NA",
              pageType: document.title,
            }),
              document
                .querySelector(".login-otp-digits")
                .classList.add("incorrect-otp"),
              document
                .querySelector(".re__revamp-v4__popup__content--otp")
                .classList.add("d-none"),
              document
                .querySelector(".re__revamp-v4__personal-details__signup-cta")
                .classList.remove("d-none"),
              document
                .querySelector(".popup__content")
                .querySelector(
                  ".re__revamp-v4__popup__content--personal-details"
                )
                .classList.remove("d-none");
            const e = document
              .querySelector(".popup__content")
              .querySelector(".re__revamp-v4__personal-details__signup-cta");
            e && (e.classList.add("disabled"), (e.disabled = !0)),
              r.classList.add("disabled"),
              r.setAttribute("disabled", "true");
          } else if ("419" == o.code) {
            const e = document
              .querySelector(".login-otp-error")
              .textContent.trim();
            dataLayer.push({
              event: "loginComponent",
              eventCategory: "loginComponent",
              eventAction:
                document.querySelector(".verify-btn").innerText || "VERIFY",
              eventLabel: "fail",
              sectionHeading:
                document.querySelector(
                  ".re__revamp-v4__section__login .re__revamp-v4__otp-content-header"
                ).innerText || "OTP Verification",
              errorMessage: e,
              pageType: document.title,
            });
            const t = document.querySelector(".login-otp-info-msg");
            t && (t.classList.add("d-none"), (t.style.display = "none"));
            const n = document.querySelectorAll(".otp-login-input");
            n.forEach((e) => {
              (e.style.borderColor = "#da291c"),
                (e.style.boxShadow = "0 0 0 1px #FD5050");
            }),
              setTimeout(() => {
                n.forEach((e) => {
                  e.value = "";
                }),
                  n.length > 0 && n[0].focus();
              }, 500),
              document
                .querySelector(".login-otp-error")
                .classList.remove("d-none"),
              document
                .querySelector(".login-otp-digits")
                .classList.add("incorrect-otp"),
              r.classList.add("disabled"),
              r.setAttribute("disabled", "true");
          } else if ("413" == o.code) {
            const e = document
              .querySelector(".login-otp-error")
              .textContent.trim();
            Ni({ ...n, eventLabel: "fail", errorMessage: e });
            const t = document.querySelector(".login-otp-info-msg");
            t && (t.classList.add("d-none"), (t.style.display = "none")),
              document
                .querySelector(".login-otp-digits")
                .classList.add("incorrect-otp"),
              r.classList.add("disabled"),
              r.setAttribute("disabled", "true");
          } else if ("500" == o.code) {
            const e = document
              .querySelector(".login-otp-error")
              .textContent.trim();
            Ni({ ...n, eventLabel: "fail", errorMessage: e });
            const t = document.querySelector(".login-otp-info-msg");
            t && (t.classList.add("d-none"), (t.style.display = "none")),
              document
                .querySelector(".login-otp-digits")
                .classList.add("incorrect-otp"),
              document
                .querySelector(".login-otp-error")
                .classList.remove("d-none"),
              r.classList.add("disabled"),
              r.setAttribute("disabled", "true");
          }
        } catch (e) {
          console.debug("error while login with otp", e);
          const t = document.querySelector(".verify-btn");
          t.classList.add("disabled"), t.setAttribute("disabled", "true");
        }
      },
      showErrorPopUp: (e) => {
        const t = document.querySelector(".re__revamp-v4__popup--otp-msg");
        (t.querySelector(".popup-otp__msg").innerText = e),
          t.classList.add("popup-show"),
          document.querySelector("body").classList.add("popup-open");
      },
      singUpMethod: async function (e, t, n) {
        try {
          const r = document.querySelector(".re__revamp-v4__popup--otp-msg"),
            i = r.getAttribute("signup-otp-expried"),
            s = r.getAttribute("already-registered"),
            o = r.getAttribute("already-registered-mobile"),
            a = r.getAttribute("commnon-error-msg"),
            c = await ki(t),
            l = new URLSearchParams({ ...t, hmac: c }).toString(),
            u = await bi(Pi.variables.signUpApi, {
              method: e.apiStatus.post,
              headers: {
                ...e.headers,
                "Content-Type": e.apiHeaders.application_url_encode,
              },
              body: l,
            });
          let h = await Ti(u);
          if ("200" == u.code && null !== u.data && h) {
            const {
              data: {
                refreshToken: e,
                jwtAccessToken: t,
                user: { userId: r },
              },
            } = u;
            Ei(r, e, t, Pi.variables.authCookieName);
            try {
              dataLayer.push({
                event: "create_account_click",
                eventCategory: "create_account_click",
                eventAction:
                  document.querySelector(
                    ".re__revamp-v4__personal-details__signup-cta"
                  ).innerText || "Create Account",
                eventLabel: "success",
                errorMessage: "NA",
                sectionHeading: document.querySelector(
                  ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                ).innerText,
                pageType: document.title,
              });
              const { userID: e, userStatus: t } = Ci();
              (n.userID = e), (n.user_status = t);
            } catch (e) {
              console.error("Error while pushing data layer:", e);
            }
            const i = document.querySelector(
                ".re__revamp-v4__personal-details__signup-cta"
              ),
              s = i?.getAttribute("data-reload");
            console.log("Is reload after login:", s),
              (s && "true" !== s) ||
                (console.log("Reloading the page after successful login"),
                location.reload(!0));
          } else
            "204" == u.code
              ? (console.log("User already registered - signUpData:", t),
                console.log("Mobile:", t.mobile, "Email:", t.email),
                console.log(
                  "Registration method:",
                  Pi.constants.registrationMethod
                ),
                "mobile" === Pi.constants.registrationMethod
                  ? (console.log(
                      "Mobile registration detected - showing email error message"
                    ),
                    console.log("Error message to show:", s),
                    Pi.showErrorPopUp(s),
                    dataLayer.push({
                      event: "create_account_click",
                      eventCategory: "create_account_click",
                      eventAction:
                        document.querySelector(
                          ".re__revamp-v4__personal-details__signup-cta"
                        ).innerText || "Create Account",
                      eventLabel: "fail",
                      errorMessage: s,
                      sectionHeading: document.querySelector(
                        ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                      ).innerText,
                      pageType: document.title,
                    }))
                  : "email" === Pi.constants.registrationMethod &&
                    (console.log(
                      "Email registration detected - showing mobile error message"
                    ),
                    console.log("Error message to show:", o),
                    Pi.showErrorPopUp(o),
                    dataLayer.push({
                      event: "create_account_click",
                      eventCategory: "create_account_click",
                      eventAction:
                        document.querySelector(
                          ".re__revamp-v4__personal-details__signup-cta"
                        ).innerText || "Create Account",
                      eventLabel: "fail",
                      errorMessage: o,
                      sectionHeading: document.querySelector(
                        ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                      ).innerText,
                      pageType: document.title,
                    })))
              : "414" == u.code
              ? (Pi.showErrorPopUp(i),
                dataLayer.push({
                  event: "create_account_click",
                  eventCategory: "create_account_click",
                  eventAction:
                    document.querySelector(
                      ".re__revamp-v4__personal-details__signup-cta"
                    ).innerText || "Create Account",
                  eventLabel: "fail",
                  errorMessage: i,
                  sectionHeading: document.querySelector(
                    ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                  ).innerText,
                  pageType: document.title,
                }))
              : (Pi.showErrorPopUp(a),
                dataLayer.push({
                  event: "create_account_click",
                  eventCategory: "create_account_click",
                  eventAction:
                    document.querySelector(
                      ".re__revamp-v4__personal-details__signup-cta"
                    ).innerText || "Create Account",
                  eventLabel: "fail",
                  errorMessage: a,
                  sectionHeading: document.querySelector(
                    ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                  ).innerText,
                  pageType: document.title,
                }));
        } catch (e) {
          console.debug("error while login with otp", e);
        }
      },
      addCallingCode: async function (e) {
        try {
          const t = await bi(`${Pi.variables.countryJsonAPI}/countries.json`, {
            method: e.apiStatus.get,
            headers: {
              ...e?.headers,
              "Content-Type": e?.apiHeaders?.application_json,
            },
          });
          if (t) {
            let n = t;
            n.sort((e, t) => e.phone_code - t.phone_code),
              vi(n, ".country__code-template", ".login__code-listing"),
              vi(n, ".country__code-template", ".sign-up__code-listing");
            const r = e.headers["x-custom-country"].toUpperCase();
            let i = document.querySelector(
              `.select-dropdown__list-item[data-value=${"UK" == r ? "GB" : r}]`
            );
            if (i) {
              const e = i.getAttribute("data-code"),
                t = document.querySelectorAll(".country__code-span");
              t &&
                t.forEach((t) => {
                  t.textContent = e;
                });
            }
          }
        } catch (e) {
          console.error("Error:", e);
        }
      },
      sendOtp: {
        smsOtpMethod: async (e, t) => {
          try {
            let n = "",
              r = "";
            const i = e.currentTarget;
            let s, o, a, c, l;
            i.classList.contains("service-booking-internal-login")
              ? (document
                  .querySelector(".verify-btn")
                  .classList.contains("common-login") &&
                  document
                    .querySelector(".verify-btn")
                    .classList.remove("common-login"),
                document
                  .querySelector(".verify-btn")
                  .classList.add("service-booking-login"),
                Array.from(i.parentElement.children).forEach((e) => {
                  e.classList.contains("service-tabs__login-field") &&
                    !e.classList.contains("d-none") &&
                    (s = e);
                }),
                (o = s.querySelector(".corporate-login__dropdown-container")),
                (a = s.querySelector(".country__code-span")),
                (c = s.querySelector(".service-login__mobile-code")),
                (l = s.querySelector(".login-mobile-number")))
              : (document
                  .querySelector(".verify-btn")
                  .classList.contains("service-booking-login") &&
                  document
                    .querySelector(".verify-btn")
                    .classList.remove("service-booking-login"),
                document
                  .querySelector(".verify-btn")
                  .classList.add("common-login"),
                Array.from(i.parentElement.parentElement.children).forEach(
                  (e) => {
                    e.classList.contains(
                      "re__revamp-v4__service-tabs__login-field"
                    ) &&
                      !e.classList.contains("d-none") &&
                      (s = e);
                  }
                ),
                (o = s.querySelector(".corporate-login__dropdown-container")),
                (a = s.querySelector(".country__code-span")),
                (c = s.querySelector(".sb-login__calling-code")),
                (l = s.querySelector(
                  ".re__revamp-v4__login-otp__mobile-number"
                ))),
              (r =
                o && !o.classList.contains("d-none")
                  ? a.textContent.trim().replace("+", "")
                  : c.textContent.trim().replace("+", "")),
              (n = l.value.trim()),
              console.log("Calling Code:", r),
              console.log("Mobile Number:", n),
              n.length < Pi.variables.mobileMaxLength ||
              n.length > Pi.variables.mobileMaxLength
                ? document
                    .querySelector(".re__revamp-v4__login-number-error")
                    .classList.remove("d-none")
                : ((Pi.constants.OTA_SMS.recipient.callingCode = r),
                  (Pi.constants.OTA_SMS.recipient.mobile = n),
                  (Pi.constants.signUpData.mobile = n),
                  (Pi.constants.signUpData.callingCode = r),
                  (Pi.constants.signUpData.email = ""),
                  (Pi.constants.registrationMethod = "mobile"),
                  await bi(Pi.variables.sendOtpApi, {
                    method: t.apiStatus.post,
                    headers: {
                      ...t?.headers,
                      "Content-Type": t?.apiHeaders?.application_json,
                    },
                    body: JSON.stringify(Pi.constants.OTA_SMS),
                  }),
                  Pi.openOtpModel(
                    e,
                    { callingCode: r, mobileNumber: n, email: "" },
                    i.classList.contains("service-booking-internal-login")
                  ));
          } catch (e) {
            console.error("Error:", e);
          }
        },
        emailOtpMethod: async (e, t) => {
          try {
            const n = document.querySelector(
                ".re__revamp-v4__corporate-login__email-input .re__revamp-v4__otp-login_email"
              ),
              r = n ? n.value.trim() : "";
            if (
              ((Pi.constants.OTA_EMAIL.recipient.email = r),
              (Pi.constants.OTA_EMAIL.parameterValues.userName = "User"),
              (Pi.constants.OTA_EMAIL.parameterValues.websiteUrl =
                window.location.origin),
              (Pi.constants.signUpData.email = r),
              (Pi.constants.signUpData.mobile = ""),
              (Pi.constants.registrationMethod = "email"),
              !t.regex.email.test(r))
            ) {
              const e = document.querySelector(
                ".re__revamp-v4__login-number-error"
              );
              console.log("Email validation failed, showing error:", {
                email: r,
                emailError: e,
                emailErrorExists: !!e,
              }),
                e &&
                  ((e.innerHTML =
                    '\n      <svg class ="rerevamp_error-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" \n      >\n        <path d="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z" fill="#FD5050"/>\n      </svg> \n      Please enter a valid email ID'),
                  e.classList.remove("d-none"),
                  console.log("Error message set and shown"));
              const t = document.querySelector(".login-email_otp-msg");
              return void (
                t &&
                (t.classList.add("d-none"),
                (t.style.display = "none"),
                console.log("OTP message hidden due to error"))
              );
            }
            {
              const n = document.querySelector(
                ".re__revamp-v4__login-number-error"
              );
              n && n.classList.add("d-none"),
                (Pi.constants.signUpData.email = r),
                (Pi.constants.signUpData.mobile = ""),
                (Pi.constants.registrationMethod = "email"),
                await bi(Pi.variables.sendOtpApi, {
                  method: t.apiStatus.post,
                  headers: {
                    ...t?.headers,
                    "Content-Type": t?.apiHeaders?.application_json,
                  },
                  body: JSON.stringify(Pi.constants.OTA_EMAIL),
                }),
                Pi.openOtpModel(e, {
                  callingCode: "",
                  mobileNumber: "",
                  email: r,
                });
            }
          } catch (e) {
            console.error("Error:", e);
          }
        },
      },
      init: function () {
        const e = wi(),
          t = document.querySelectorAll(".otp-login-input"),
          n = document.querySelector(".verify-btn");
        Pi.otpFields(t, n),
          document
            .querySelector(".re__revamp-v4__logincta")
            ?.addEventListener("click", async function (e) {
              e.preventDefault(), Pi.openOtpModel(e);
            }),
          "true" == Pi.variables.isCorporateLogin
            ? (console.log(
                "Corporate login is enabled, calling corporateLoginMethod"
              ),
              Pi.addCallingCode(e),
              yi("login__code-listing"),
              yi("sign-up__code-listing"),
              Pi.corporateLoginMethod(e))
            : console.log(
                "Corporate login not enabled:",
                Pi.variables.isCorporateLogin
              );
        const r = document.querySelector(
          ".re__revamp-v4__common-otp-code-login"
        );
        if (r) {
          const e = r.querySelector(".back-btn");
          e &&
            e.addEventListener("click", function () {
              const e = document.querySelector(
                  ".re__revamp-v4__login-otp__mobile-number"
                ),
                t = document.querySelector(".login-mobile-number"),
                n = document.querySelector(".re__revamp-v4__otp-login_email");
              e && (e.value = ""), t && (t.value = ""), n && (n.value = "");
              document.querySelectorAll(".otp-login-input").forEach((e) => {
                e && (e.value = "");
              });
              const i = document.querySelector(
                  ".re__revamp-v4__login-number-error"
                ),
                s = document.querySelector(".login-otp-error"),
                o = document.querySelector(".login-otp-digits");
              i && i.classList.add("d-none"),
                s && s.classList.add("d-none"),
                o && o.classList.remove("incorrect-otp"),
                r.classList.add("d-none");
              const a = document.querySelector(
                ".re__revamp-v4__common-otp-login"
              );
              a && a.classList.remove("d-none");
            });
        }
        document
          .querySelector(".re__revamp-v4__otp-login_email")
          ?.addEventListener("input", function (e) {
            document
              .querySelector(".re__revamp-v4__login-number-error")
              .classList.add("d-none");
            const t = e.target;
            let n = t.value;
            const r = document.querySelector(".login-email_otp-msg");
            r &&
              (r.classList.remove("d-none"),
              (r.style.display = "block"),
              console.log("Always showing OTP message")),
              n.includes(" ") && ((n = n.replace(/\s/g, "")), (t.value = n)),
              n.length > 254 && ((n = n.substring(0, 254)), (t.value = n));
            const i = n.indexOf("@");
            let s = "";
            if (
              (i > 0 &&
                ((s = n.substring(0, i)),
                i > 64 &&
                  ((n = n.substring(0, 64) + n.substring(i)),
                  (t.value = n),
                  (s = n.substring(0, 64)))),
              i > 0)
            ) {
              const e = n.substring(i + 1),
                r = 254 - s.length - 1;
              e.length > r &&
                ((n = s + "@" + e.substring(0, r)), (t.value = n));
            }
            const o = document.querySelector(".login-email-remove-btn");
            o &&
              ("" === n.trim()
                ? o.classList.add("d-none")
                : o.classList.remove("d-none"));
            const a = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),
              c = e.target.parentElement.parentElement,
              l = c.parentElement.children;
            for (var u = 0; u < l.length; u++) {
              const e = l[u].children;
              if (
                l[u] !== c &&
                l[u].classList.contains("re__revamp-v4__mob-disc-wrap")
              )
                if (n.length > 0 && a)
                  for (let t = 0; t < e.length; t++)
                    e[t].classList.remove("disabled"),
                      e[t].removeAttribute("disabled");
                else
                  for (let t = 0; t < e.length; t++)
                    e[t].classList.add("disabled"),
                      e[t].setAttribute("disabled", "true");
            }
          }),
          document
            .querySelector(".re__revamp-v4__otp-login_email")
            ?.addEventListener("keydown", function (e) {
              " " === e.key && e.preventDefault();
            }),
          document
            .querySelector(".re__revamp-v4__otp-login_email")
            ?.addEventListener("keyup", function (e) {
              const t = e.target.value.trim(),
                n = document.querySelector(".login-email_otp-msg");
              n &&
                (n.classList.remove("d-none"),
                (n.style.display = "block"),
                console.log(
                  "Keyup - Always showing OTP message, email length:",
                  t.length
                ));
              const r = document.querySelector(".login-email-remove-btn");
              r &&
                ("" === t
                  ? r.classList.add("d-none")
                  : r.classList.remove("d-none"));
            }),
          document
            .querySelectorAll(".re__revamp-v4__login-otp__mobile-number")
            .forEach((t) => {
              t?.addEventListener("input", (t) => {
                document
                  .querySelector(".re__revamp-v4__login-number-error")
                  .classList.add("d-none");
                const n = t.target,
                  r = n.value,
                  i = t.target.parentElement,
                  s = i.parentNode.children;
                if (1 !== r.length || "0" !== r) {
                  if (
                    !e.regex.numeric.test(r) ||
                    r.length > Pi.variables.mobileMaxLength
                  ) {
                    const e = r.substring(0, r.length - 1);
                    n.value = e;
                  }
                  for (var o = 0; o < s.length; o++) {
                    const e = s[o].children;
                    if (
                      r.length < Pi.variables.mobileMaxLength &&
                      s[o] !== i &&
                      s[o].classList.contains("re__revamp-v4__mob-disc-wrap")
                    )
                      for (let t = 0; t < e.length; t++)
                        e[t].classList.add("disabled"),
                          e[t].setAttribute("disabled", "true");
                    if (
                      r.length === Pi.variables.mobileMaxLength &&
                      s[o] !== i &&
                      s[o].classList.contains("re__revamp-v4__mob-disc-wrap")
                    )
                      for (let t = 0; t < e.length; t++)
                        e[t].classList.remove("disabled"),
                          e[t].removeAttribute("disabled", "false");
                  }
                } else n.value = "";
              });
            }),
          document.querySelectorAll(".login-mobile-number").forEach((t) => {
            t?.addEventListener("input", (t) => {
              document
                .querySelector(".re__revamp-v4__login-number-error")
                .classList.add("d-none");
              const n = t.target,
                r = n.value,
                i = t.target.parentElement,
                s = i.parentNode.children;
              if (1 !== r.length || "0" !== r) {
                if (
                  !e.regex.numeric.test(r) ||
                  r.length > Pi.variables.mobileMaxLength
                ) {
                  const e = r.substring(0, r.length - 1);
                  n.value = e;
                }
                for (var o = 0; o < s.length; o++)
                  r.length < Pi.variables.mobileMaxLength &&
                    s[o] !== i &&
                    s[o].classList.contains("login-number-send-otp") &&
                    (s[o].classList.add("disabled"),
                    s[o].setAttribute("disabled", "true")),
                    r.length === Pi.variables.mobileMaxLength &&
                      s[o] !== i &&
                      s[o].classList.contains("login-number-send-otp") &&
                      (s[o].classList.remove("disabled"),
                      s[o].removeAttribute("disabled"));
              } else n.value = "";
            });
          }),
          document.querySelectorAll(".login-number-send-otp").forEach((t) => {
            t?.addEventListener("click", async function (t) {
              if (
                !this.hasAttribute("disabled") &&
                !this.classList.contains("disabled")
              ) {
                this.setAttribute("disabled", "true"),
                  this.classList.add("disabled");
                try {
                  dataLayer.push({
                    event: "loginComponent",
                    eventCategory: "loginComponent",
                    eventAction: this.innerText || "SEND OTP",
                    sectionHeading: document.querySelector(
                      ".re__revamp-v4__section__login .re__revamp-v4__re-login-signup"
                    ).innerText,
                    pageType: document.title,
                  });
                } catch (e) {
                  console.log("Error:", e);
                }
                try {
                  "IN" != e.headers["x-custom-country"].toUpperCase() &&
                    (await Pi.sendOtp.emailOtpMethod(t, e)),
                    "IN" === e.headers["x-custom-country"].toUpperCase() &&
                      (await Pi.sendOtp.smsOtpMethod(t, e));
                } catch (e) {
                  console.error("Error sending OTP:", e),
                    this.removeAttribute("disabled"),
                    this.classList.remove("disabled");
                }
              }
            });
          }),
          document.querySelectorAll(".login-resend-otp").forEach((t) => {
            t.addEventListener("click", async function (t) {
              t.preventDefault();
              try {
                dataLayer.push({
                  event: "loginComponent",
                  eventCategory: "loginComponent",
                  eventAction: this.innerText || "Resend OTP",
                  sectionHeading: document.querySelector(
                    ".re__revamp-v4__section__login .re__revamp-v4__otp-content-header"
                  ).innerText,
                  pageType: document.title,
                }),
                  "IN" != e.headers["x-custom-country"].toUpperCase() &&
                    (await bi(Pi.variables.sendOtpApi, {
                      method: e.apiStatus.post,
                      headers: {
                        ...e?.headers,
                        "Content-Type": e?.apiHeaders?.application_json,
                      },
                      body: JSON.stringify(Pi.constants.OTA_EMAIL),
                    })),
                  "IN" === e.headers["x-custom-country"].toUpperCase() &&
                    (await bi(Pi.variables.sendOtpApi, {
                      method: e.apiStatus.post,
                      headers: {
                        ...e?.headers,
                        "Content-Type": e?.apiHeaders?.application_json,
                      },
                      body: JSON.stringify(Pi.constants.OTA_SMS),
                    }));
                const t = document.querySelector(".login-otp-timer-countdown");
                t && (t.textContent = "00:30"),
                  document
                    .querySelector(".login-otp-time")
                    .classList.remove("d-none"),
                  this.classList.add("d-none"),
                  Pi.otpTimer();
              } catch (e) {
                console.error("Error:", e);
              }
            });
          }),
          document
            .querySelector(".verify-btn")
            ?.addEventListener("click", async function (t) {
              if (this.classList.contains("disabled")) return;
              let n = "",
                r = "";
              if (
                (document
                  .querySelectorAll(".otp-login-input")
                  .forEach(function (e) {
                    r += e.value;
                  }),
                (Pi.constants.signUpData.otp = r),
                6 === r.length)
              ) {
                let i = null;
                const s =
                    document.querySelector("title")?.textContent.trim() ||
                    "Unknown",
                  o = t.target.classList.contains("service-booking-login")
                    ? "book_a_service"
                    : t.target.classList.contains("common-login")
                    ? "top_nav"
                    : null,
                  a = t.target.classList.contains("service-booking-login")
                    ? "service_verify_otp"
                    : t.target.classList.contains("common-login")
                    ? "header_verify_otp"
                    : null;
                o &&
                  (i = {
                    eventCategory: a,
                    userID: "NA",
                    user_status: "non logged in",
                    pageType: s,
                    sectionHeading: o,
                  }),
                  "IN" != e.headers["x-custom-country"].toUpperCase() &&
                    (n = btoa(
                      `${Pi.constants.OTA_EMAIL.recipient.email}:${r}`
                    )),
                  "IN" == e.headers["x-custom-country"].toUpperCase() &&
                    (n = btoa(`${Pi.constants.OTA_SMS.recipient.mobile}:${r}`)),
                  await Pi.loginWithOtp(e, n, i);
              }
            });
        document
          .querySelectorAll("#firstNameSignup, #lastNameSignup")
          .forEach(function (e) {
            function t() {
              let e = this.value;
              (e = e.substring(0, 50).replace(/[^\p{L}\-']/gu, "")),
                (this.value = e);
              const t =
                "firstNameSignup" === this.id
                  ? document.querySelector(".firstname-remove-btn")
                  : document.querySelector(".lastname-remove-btn");
              t && t.classList.toggle("d-none", "" === this.value.trim());
              const n = document
                  .getElementById("firstNameSignup")
                  ?.value?.trim(),
                r = document.getElementById("lastNameSignup")?.value?.trim(),
                i = document.getElementById("emailSignup")?.value?.trim(),
                s =
                  n &&
                  n.length >= 2 &&
                  r &&
                  r.length >= 2 &&
                  i &&
                  /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i),
                o = document.querySelector(
                  ".re__revamp-v4__personal-details__signup-cta"
                );
              o &&
                (s
                  ? (o.classList.remove("disabled"), (o.disabled = !1))
                  : (o.classList.add("disabled"), (o.disabled = !0)));
            }
            e.addEventListener("input", t),
              e.addEventListener("paste", function (e) {
                setTimeout(t.bind(this), 0);
              }),
              e.addEventListener("blur", function () {
                const e =
                  "firstNameSignup" === this.id
                    ? document.querySelector(".first-name-error")
                    : document.querySelector(".last-name-error");
                if (this.value.length < 2 && this.value.length > 0)
                  (e.innerHTML =
                    '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Minimum 2 characters required'),
                    e.classList.remove("d-none");
                else if ("" === this.value) {
                  const t =
                    "firstNameSignup" === this.id
                      ? '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Please enter First Name'
                      : '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Please enter Last Name';
                  (e.innerHTML = t), e.classList.remove("d-none");
                } else e.classList.add("d-none");
              });
          }),
          document
            .getElementById("emailSignup")
            ?.addEventListener("keydown", function (e) {
              const t = Number(this.getAttribute("max-length"));
              " " === e.key
                ? e.preventDefault()
                : this.value.length >= t &&
                  (this.value = this.value.substring(0, t - 1));
            }),
          document
            .getElementById("emailSignup")
            ?.addEventListener("blur", function () {
              const e = this.value.trim(),
                t = document.querySelector(".email-error");
              e
                ? /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)
                  ? t.classList.add("d-none")
                  : ((t.innerHTML =
                      '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Please enter a valid email address'),
                    t.classList.remove("d-none"))
                : ((t.innerHTML =
                    '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Please enter Email'),
                  t.classList.remove("d-none"));
            }),
          document
            .getElementById("emailSignup")
            .addEventListener("input", function () {
              document
                .querySelector(".email-remove-btn")
                .classList.toggle("d-none", "" === this.value.trim()),
                document.querySelector(".email-error").classList.add("d-none");
              const e = document
                  .getElementById("firstNameSignup")
                  ?.value?.trim(),
                t = document.getElementById("lastNameSignup")?.value?.trim(),
                n = this.value.trim(),
                r =
                  e &&
                  e.length >= 2 &&
                  t &&
                  t.length >= 2 &&
                  n &&
                  /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),
                i = document.querySelector(
                  ".re__revamp-v4__personal-details__signup-cta"
                );
              r
                ? (i.classList.remove("disabled"), (i.disabled = !1))
                : (i.classList.add("disabled"), (i.disabled = !0));
            }),
          document
            .querySelector(".firstname-remove-btn")
            .addEventListener("click", function () {
              const e = document.getElementById("firstNameSignup");
              (e.value = ""),
                e.dispatchEvent(new Event("input")),
                this.classList.add("d-none"),
                document
                  .querySelector(".first-name-error")
                  .classList.add("d-none");
            }),
          document
            .querySelector(".lastname-remove-btn")
            .addEventListener("click", function () {
              const e = document.getElementById("lastNameSignup");
              (e.value = ""),
                e.dispatchEvent(new Event("input")),
                this.classList.add("d-none"),
                document
                  .querySelector(".last-name-error")
                  .classList.add("d-none");
            }),
          document
            .querySelector(".email-remove-btn")
            .addEventListener("click", function () {
              const e = document.getElementById("emailSignup");
              (e.value = ""),
                e.dispatchEvent(new Event("input")),
                this.classList.add("d-none"),
                document.querySelector(".email-error").classList.add("d-none");
            }),
          document
            .querySelector(".login-email-remove-btn")
            ?.addEventListener("click", function () {
              const e = document.querySelector(
                ".re__revamp-v4__otp-login_email"
              );
              if (e) {
                (e.value = ""),
                  this.classList.add("d-none"),
                  document
                    .querySelector(".re__revamp-v4__login-number-error")
                    ?.classList.add("d-none");
                const n = document.querySelector(".login-email_otp-msg");
                n &&
                  (n.classList.remove("d-none"), (n.style.display = "block"));
                const r = e.parentElement.parentElement,
                  i = r.parentElement.children;
                for (var t = 0; t < i.length; t++)
                  if (
                    i[t] !== r &&
                    i[t].classList.contains("re__revamp-v4__mob-disc-wrap")
                  ) {
                    const e = i[t].children;
                    for (let t = 0; t < e.length; t++)
                      e[t].classList.add("disabled"),
                        e[t].setAttribute("disabled", "true");
                  }
              }
            }),
          document
            .querySelector("form")
            .addEventListener("submit", function (t) {
              const n = document.getElementById("firstNameSignup"),
                r = document.getElementById("lastNameSignup"),
                i = document.getElementById("emailSignup"),
                s = document.querySelector(".email-error");
              let o = !0;
              const a =
                "IN" === (e.headers["x-custom-country"] || "IN").toUpperCase();
              if (n.value.length < 2) {
                const e = document.querySelector(".first-name-error"),
                  t =
                    0 === n.value.length
                      ? '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Please enter First Name'
                      : '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Minimum 2 characters required';
                (e.innerHTML = t), e.classList.remove("d-none"), (o = !1);
              }
              if (r.value.length < 2) {
                const e = document.querySelector(".last-name-error"),
                  t =
                    0 === r.value.length
                      ? '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Please enter Last Name'
                      : '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Minimum 2 characters required';
                (e.innerHTML = t), e.classList.remove("d-none"), (o = !1);
              }
              if (a) {
                const e = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                "" === i.value.trim()
                  ? ((s.innerHTML =
                      '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Please enter Email'),
                    s.classList.remove("d-none"),
                    (o = !1))
                  : e.test(i.value)
                  ? s.classList.add("d-none")
                  : ((s.innerHTML =
                      '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg> Please enter a valid email address'),
                    s.classList.remove("d-none"),
                    (o = !1));
              }
              o || t.preventDefault();
            });
        const i = document.querySelectorAll(
            '.consent__check input[type="checkbox"]'
          ),
          s = document.getElementById("allpromotions");
        s.addEventListener("change", () => {
          document.querySelector(".gdpr-error").classList.add("d-none");
          const e = s.checked;
          i.forEach((t) => {
            (t.checked = e), t.classList.toggle("checked", e);
          });
        }),
          i.forEach((e) => {
            e !== s &&
              e.addEventListener("change", () => {
                document.querySelector(".gdpr-error").classList.add("d-none"),
                  e.classList.toggle("checked", e.checked),
                  (() => {
                    const e = Array.from(i).every((e) => e.checked || e === s);
                    (s.checked = e), s.classList.toggle("checked", e);
                  })();
              });
          });
        function o() {
          const t = {
            firstName: document.getElementById("firstNameSignup").value,
            lastName: document.getElementById("lastNameSignup").value,
            email: document.getElementById("emailSignup").value,
          };
          let n, r;
          "IN" === (e.headers["x-custom-country"] || "IN").toUpperCase()
            ? ((n = Object.values(t).every((e) => "" !== e.trim())),
              (r = e.regex.email.test(t.email)))
            : ((n = "" !== t.firstName.trim() && "" !== t.lastName.trim()),
              (r = !0)),
            n && r
              ? (document
                  .querySelector(".re__revamp-v4__personal-details__signup-cta")
                  .classList.remove("disabled"),
                (document.querySelector(
                  ".re__revamp-v4__personal-details__signup-cta"
                ).disabled = !1))
              : (document
                  .querySelector(".re__revamp-v4__personal-details__signup-cta")
                  .classList.add("disabled"),
                (document.querySelector(
                  ".re__revamp-v4__personal-details__signup-cta"
                ).disabled = !0));
        }
        document
          .querySelector(".re__revamp-v4__personal-details__signup-cta")
          ?.addEventListener("click", async function (t) {
            t.preventDefault(),
              (this.disabled = !0),
              this.classList.add("disabled");
            try {
              const t = document
                  .getElementById("firstNameSignup")
                  ?.value?.trim(),
                n = document.getElementById("lastNameSignup")?.value?.trim(),
                r =
                  document.getElementById("emailSignup").value ||
                  Pi.constants.OTA_EMAIL.recipient.email,
                i = document.getElementById("chkAgreeSignup"),
                s =
                  (document.getElementById("internationalChkAgreeSignup"),
                  () =>
                    '<svg\nwidth="12"\nheight="12"\nviewBox="0 0 12 12"\nfill="none"\nxmlns="http://www.w3.org/2000/svg"\n>\n<path\nd="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z"\nfill="#FD5050"\n/>\n</svg>');
              if (!t || t.length < 2) {
                const e = t
                  ? "Minimum 2 characters required"
                  : "Please enter First Name";
                return (
                  (document.querySelector(
                    ".first-name-error"
                  ).innerHTML = `${s()} ${e}`),
                  document
                    .querySelector(".first-name-error")
                    .classList.remove("d-none"),
                  document.getElementById("firstNameSignup")?.focus(),
                  dataLayer.push({
                    event: "create_account_click",
                    eventCategory: "create_account_click",
                    eventAction:
                      document.querySelector(
                        ".re__revamp-v4__personal-details__signup-cta"
                      ).innerText || "Create Account",
                    eventLabel: "fail",
                    errorMessage: e,
                    sectionHeading: document.querySelector(
                      ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                    ).innerText,
                    pageType: document.title,
                  }),
                  (this.disabled = !1),
                  void this.classList.remove("disabled")
                );
              }
              if (!n || n.length < 2) {
                const e = n
                  ? "Minimum 2 characters required"
                  : "Please enter Last Name";
                return (
                  (document.querySelector(
                    ".last-name-error"
                  ).innerHTML = `${s()} ${e}`),
                  document
                    .querySelector(".last-name-error")
                    .classList.remove("d-none"),
                  document.getElementById("lastNameSignup")?.focus(),
                  dataLayer.push({
                    event: "create_account_click",
                    eventCategory: "create_account_click",
                    eventAction:
                      document.querySelector(
                        ".re__revamp-v4__personal-details__signup-cta"
                      ).innerText || "Create Account",
                    eventLabel: "fail",
                    errorMessage: e,
                    sectionHeading: document.querySelector(
                      ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                    ).innerText,
                    pageType: document.title,
                  }),
                  (this.disabled = !1),
                  void this.classList.remove("disabled")
                );
              }
              let o, a;
              const c = document.querySelector(
                ".corporate-sign_up--mobile-container"
              );
              if (c) {
                const e = c.querySelector(".country__code-span"),
                  t = c.querySelector(".sign-up__mobile-number");
                (o = e ? e.textContent.trim() : ""),
                  (a = t ? t.value.trim() : "");
              }
              const l = document.querySelectorAll(
                  '.consent__check input[type="checkbox"]'
                ),
                u = {};
              let h = !1;
              l.forEach((e) => {
                (u[e.id] = e.checked), (h = !!e.checked);
              });
              let d = null;
              const p =
                  document.querySelector("title")?.textContent.trim() ||
                  "Unknown",
                f = document
                  .querySelector(".verify-btn")
                  .classList.contains("service-booking-login")
                  ? "book_a_service"
                  : document
                      .querySelector(".verify-btn")
                      .classList.contains("common-login")
                  ? "top_nav"
                  : null;
              if (
                (f &&
                  (d = {
                    eventCategory: "service_signup",
                    userID: "NA",
                    user_status: "non logged in",
                    pageType: p,
                    sectionHeading: f,
                  }),
                !t)
              ) {
                const e = document
                  .querySelector(".first-name-error")
                  .textContent.trim();
                return (
                  document
                    .querySelector(".first-name-error")
                    .classList.remove("d-none"),
                  document.getElementById("firstNameSignup").focus(),
                  dataLayer.push({
                    event: "create_account_click",
                    eventCategory: "create_account_click",
                    eventAction:
                      document.querySelector(
                        ".re__revamp-v4__personal-details__signup-cta"
                      ).innerText || "Create Account",
                    eventLabel: "fail",
                    errorMessage: e,
                    sectionHeading: document.querySelector(
                      ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                    ).innerText,
                    pageType: document.title,
                  }),
                  (this.disabled = !1),
                  void this.classList.remove("disabled")
                );
              }
              if (!n) {
                const e = document
                  .querySelector(".last-name-error")
                  .textContent.trim();
                return (
                  document
                    .querySelector(".last-name-error")
                    .classList.remove("d-none"),
                  document.getElementById("lastNameSignup").focus(),
                  dataLayer.push({
                    event: "create_account_click",
                    eventCategory: "create_account_click",
                    eventAction:
                      document.querySelector(
                        ".re__revamp-v4__personal-details__signup-cta"
                      ).innerText || "Create Account",
                    eventLabel: "fail",
                    errorMessage: e,
                    sectionHeading: document.querySelector(
                      ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                    ).innerText,
                    pageType: document.title,
                  }),
                  (this.disabled = !1),
                  void this.classList.remove("disabled")
                );
              }
              if (
                !document
                  .getElementById("emailSignup")
                  .parentElement.classList.contains("d-none") &&
                !e.regex.email.test(r)
              ) {
                const e = document
                  .querySelector(".email-error")
                  .textContent.trim();
                return (
                  document
                    .querySelector(".email-error")
                    .classList.remove("d-none"),
                  document.getElementById("emailSignup").focus(),
                  dataLayer.push({
                    event: "create_account_click",
                    eventCategory: "create_account_click",
                    eventAction:
                      document.querySelector(
                        ".re__revamp-v4__personal-details__signup-cta"
                      ).innerText || "Create Account",
                    eventLabel: "fail",
                    errorMessage: e,
                    sectionHeading: document.querySelector(
                      ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                    ).innerText,
                    pageType: document.title,
                  }),
                  (this.disabled = !1),
                  void this.classList.remove("disabled")
                );
              }
              if (
                !document
                  .querySelector(".sign-up__mobile-number")
                  .parentElement.parentElement.classList.contains("d-none") &&
                (!a || a.length < 8 || a.length > 15)
              ) {
                let e = "Please enter Mobile Number";
                return (
                  a
                    ? a.length < 8
                      ? (e = "Mobile number must be at least 8 digits")
                      : a.length > 15 &&
                        (e = "Mobile number must not exceed 15 digits")
                    : (e = "Please enter Mobile Number"),
                  (document.querySelector(
                    ".mobile-error"
                  ).innerHTML = `<svg class ="rerevamp_error-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" \n      >\n        <path d="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z" fill="#FD5050"/>\n      </svg>  ${e}`),
                  document
                    .querySelector(".mobile-error")
                    .classList.remove("d-none"),
                  document.querySelector(".sign-up__mobile-number").focus(),
                  dataLayer.push({
                    event: "create_account_click",
                    eventCategory: "create_account_click",
                    eventAction:
                      document.querySelector(
                        ".re__revamp-v4__personal-details__signup-cta"
                      ).innerText || "Create Account",
                    eventLabel: "fail",
                    errorMessage: e,
                    sectionHeading: document.querySelector(
                      ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                    ).innerText,
                    pageType: document.title,
                  }),
                  (this.disabled = !1),
                  void this.classList.remove("disabled")
                );
              }
              if (
                !document
                  .querySelector(".re__revamp-v4__tnc-disc-wrap")
                  .classList.contains("d-none") &&
                !i.checked
              ) {
                const e = document
                  .querySelector(".tnc-error")
                  .textContent.trim();
                return (
                  document
                    .querySelector(".tnc-error")
                    .classList.remove("d-none"),
                  document.getElementById("chkAgreeSignup").focus(),
                  dataLayer.push({
                    event: "create_account_click",
                    eventCategory: "create_account_click",
                    eventAction:
                      document.querySelector(
                        ".re__revamp-v4__personal-details__signup-cta"
                      ).innerText || "Create Account",
                    eventLabel: "fail",
                    errorMessage: e,
                    sectionHeading: document.querySelector(
                      ".re__revamp-v4__section__login .re__revamp-v4__popup__content--personal-details .re__revamp-v4__otp-content-header"
                    ).innerText,
                    pageType: document.title,
                  }),
                  (this.disabled = !1),
                  void this.classList.remove("disabled")
                );
              }
              "IN" != e.headers["x-custom-country"].toUpperCase()
                ? ((Pi.constants.signUpData.countryName =
                    e.headers["x-custom-country"].toUpperCase()),
                  (Pi.constants.signUpData.fName = t),
                  (Pi.constants.signUpData.lName = n),
                  (Pi.constants.signUpData.mobile = a),
                  (Pi.constants.signUpData.callingCode = o.replace("+", "")),
                  await Pi.singUpMethod(e, Pi.constants.signUpData, d))
                : ((Pi.constants.signUpData.countryName =
                    e.headers["x-custom-country"].toUpperCase()),
                  (Pi.constants.signUpData.fName = t),
                  (Pi.constants.signUpData.lName = n),
                  (Pi.constants.signUpData.email = r),
                  await Pi.singUpMethod(e, Pi.constants.signUpData, d));
            } catch (e) {
              console.error("Error during signup:", e),
                (this.disabled = !1),
                this.classList.remove("disabled");
            }
          }),
          document.addEventListener("click", function (e) {
            if (e.target.classList.contains("tnc-btn")) {
              e.preventDefault();
              document.querySelector(".popup__content--personal-details-tnc");
              document
                .querySelector(".common-personal-details-sing__up")
                .classList.add("d-none"),
                document
                  .querySelector(".re__revamp-v4__personal-details__signup-cta")
                  .classList.add("d-none");
            }
          }),
          document
            .querySelector(".step2-back-btn")
            ?.addEventListener("click", async function () {
              (document.querySelector(".sign-up__mobile-number").value = ""),
                (document.querySelector(
                  ".re__revamp-v4__login-otp__mobile-number"
                ).value = ""),
                (document.querySelector(".login-mobile-number").value = ""),
                (document.querySelector(
                  ".re__revamp-v4__otp-login_email"
                ).value = "");
              document
                .querySelectorAll('input[type="checkbox"].checked')
                .forEach((e) => {
                  e.classList.remove("checked");
                });
              (document.getElementById("internationalChkAgreeSignup").checked =
                !1),
                document
                  .querySelector(".common-personal-details-sing__up")
                  .classList.remove("d-none"),
                document
                  .querySelector(".popup__content--personal-details-contact")
                  .classList.add("d-none"),
                document
                  .querySelector(".popup__content--personal-details-tnc")
                  .classList.add("d-none");
            }),
          document
            .querySelector(".desc-tnc-back")
            ?.addEventListener("click", async function (e) {
              document
                .querySelector(".common-personal-details-sing__up")
                .classList.add("d-none"),
                document
                  .querySelector(".re__revamp-v4__personal-details__signup-cta")
                  .classList.remove("d-none"),
                document
                  .querySelector(".popup__content--personal-details-tnc")
                  .classList.add("d-none");
            }),
          document
            .getElementById("firstNameSignup")
            ?.addEventListener("input", function () {
              document
                .querySelector(".first-name-error")
                .classList.add("d-none"),
                document
                  .querySelector(".last-name-error")
                  .classList.add("d-none"),
                document.querySelector(".email-error").classList.add("d-none"),
                document.querySelector(".mobile-error").classList.add("d-none"),
                document.querySelector(".tnc-error").classList.add("d-none"),
                o();
            }),
          document
            .getElementById("lastNameSignup")
            ?.addEventListener("input", function () {
              document
                .querySelector(".last-name-error")
                .classList.add("d-none"),
                document.querySelector(".email-error").classList.add("d-none"),
                document.querySelector(".mobile-error").classList.add("d-none"),
                document.querySelector(".tnc-error").classList.add("d-none"),
                o();
            }),
          document
            .getElementById("emailSignup")
            ?.addEventListener("input", function () {
              document.querySelector(".email-error").classList.add("d-none"),
                document.querySelector(".tnc-error").classList.add("d-none"),
                o();
            }),
          document
            .querySelector(".sign-up__mobile-number")
            ?.addEventListener("input", function () {
              document.querySelector(".mobile-error").classList.add("d-none");
              const e = this.value.trim();
              if (e.length > 0 && (e.length < 8 || e.length > 15)) {
                const t = document.querySelector(".mobile-error"),
                  n =
                    e.length < 8
                      ? "Mobile number must be at least 8 digits"
                      : "Mobile number must not exceed 15 digits";
                (t.innerHTML = `<svg class ="rerevamp_error-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" \n      >\n        <path d="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z" fill="#FD5050"/>\n      </svg>   ${n}`),
                  t.classList.remove("d-none");
              }
            }),
          document
            .querySelector(".sign-up__mobile-number")
            ?.addEventListener("blur", function () {
              const e = this.value.trim(),
                t = document.querySelector(".mobile-error");
              if (e.length > 0 && (e.length < 8 || e.length > 15)) {
                const n =
                  e.length < 8
                    ? "Mobile number must be at least 8 digits"
                    : "Mobile number must not exceed 15 digits";
                (t.innerHTML = `<svg class ="rerevamp_error-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" \n      >\n        <path d="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C10.8 8.652 8.652 10.8 6 10.8Z" fill="#FD5050"/>\n      </svg>   ${n}`),
                  t.classList.remove("d-none");
              } else 0 === e.length ? ((t.innerHTML = '<svg class ="rerevamp_error-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" \n      >\n        <path d="M5.4 7.79045H6.6V9H5.4V7.79045ZM5.4 3H6.6V7H5.4V3ZM5.994 0C2.682 0 0 2.688 0 6C0 9.312 2.682 12 5.994 12C9.312 12 12 9.312 12 6C12 2.688 9.312 0 5.994 0ZM6 10.8C3.348 10.8 1.2 8.652 1.2 6C1.2 3.348 3.348 1.2 6 1.2C8.652 1.2 10.8 3.348 10.8 6C8.652 10.8 6 10.8Z" fill="#FD5050"/>\n      </svg> Please enter Mobile Number'), t.classList.remove("d-none")) : t.classList.add("d-none");
            }),
          document
            .getElementById("chkAgreeSignup")
            ?.addEventListener("input", function () {
              document.querySelector(".tnc-error").classList.add("d-none");
            }),
          document
            .getElementById("internationalChkAgreeSignup")
            ?.addEventListener("input", function () {
              document
                .querySelector(".international-tnc-error")
                .classList.add("d-none");
            }),
          document
            .querySelector(".common-personal-details-sing__up")
            ?.addEventListener(
              "blur",
              function (e) {
                if (!e.target.classList.contains("input-field")) return;
                const t =
                    document.querySelector("title")?.textContent.trim() ||
                    "Unknown",
                  n = document.querySelector(".verify-btn");
                if (!e.target.value) return;
                const r = e.target.name,
                  i = n.classList.contains("service-booking-login"),
                  s = n.classList.contains("common-login");
                (i || s) &&
                  Ni({
                    eventCategory: "service_personal_detail_form",
                    eventLabel: r,
                    userID: "NA",
                    user_status: "non logged in",
                    pageType: t,
                    sectionHeading: i ? "book_a_service" : "top_nav",
                  });
              },
              !0
            ),
          document
            .querySelector("#chkAgreeSignup")
            ?.addEventListener("click", function () {
              const e = this.checked,
                t =
                  document.querySelector("title")?.textContent.trim() ||
                  "Unknown",
                n = document.querySelector(".verify-btn"),
                r = e
                  ? "terms_conditions_checked"
                  : "terms_conditions_unchecked",
                i = n.classList.contains("service-booking-login"),
                s = n.classList.contains("common-login");
              (i || s) &&
                Ni({
                  eventCategory: "service_personal_detail_form",
                  eventLabel: r,
                  userID: "NA",
                  user_status: "non logged in",
                  pageType: t,
                  sectionHeading: i ? "book_a_service" : "top_nav",
                });
            });
      },
      forceEmailLogin: function () {
        console.log("Forcing email login UI"), this.resetLoginUI();
        const e = {
          emailContainer: document.querySelector(
            ".re__revamp-v4__corporate-login__email-input"
          ),
          emailLabel: document.querySelector(".login-otp_email-label"),
          emailMsg: document.querySelector(".login-email_otp-msg"),
          emailOtpSection: document.querySelector(
            ".re__revamp-v4__sign-up_otp-login"
          ),
        };
        e.emailContainer &&
          (e.emailContainer.classList.remove("d-none"),
          (e.emailContainer.style.display = "block")),
          e.emailLabel &&
            (e.emailLabel.classList.remove("d-none"),
            (e.emailLabel.style.display = "block")),
          e.emailMsg &&
            (e.emailMsg.classList.remove("d-none"),
            (e.emailMsg.style.display = "block")),
          e.emailOtpSection &&
            (e.emailOtpSection.classList.remove("d-none"),
            (e.emailOtpSection.style.display = "block")),
          console.log("Email login UI forced");
      },
      forceMobileLogin: function () {
        console.log("Forcing mobile login UI"), this.resetLoginUI();
        const e = {
          mobileContainer: document.querySelector(
            ".re__revamp-v4__corporate-login__mobile-container"
          ),
          mobileLabel: document.querySelector(
            ".re__revamp-v4__login-otp_mobile-label"
          ),
          mobileMsg: document.querySelector(".login-number_otp-msg"),
          mobileOtpSection: document.querySelector(
            ".re__revamp-v4__mobile_otp-login"
          ),
        };
        e.mobileContainer &&
          (e.mobileContainer.classList.remove("d-none"),
          (e.mobileContainer.style.display = "block")),
          e.mobileLabel &&
            (e.mobileLabel.classList.remove("d-none"),
            (e.mobileLabel.style.display = "block")),
          e.mobileMsg &&
            (e.mobileMsg.classList.remove("d-none"),
            (e.mobileMsg.style.display = "block")),
          e.mobileOtpSection &&
            (e.mobileOtpSection.classList.remove("d-none"),
            (e.mobileOtpSection.style.display = "block")),
          console.log("Mobile login UI forced");
      },
    };
  window.LoginOTPComponents = Pi;
  var Oi = Pi;
  Ke("firebase", "10.14.1", "app");
  var Di,
    xi,
    Mi =
      "undefined" != typeof globalThis
        ? globalThis
        : "undefined" != typeof window
        ? window
        : "undefined" != typeof global
        ? global
        : "undefined" != typeof self
        ? self
        : {},
    Ri = {};
  (function () {
    var e;
    function t() {
      (this.blockSize = -1),
        (this.blockSize = 64),
        (this.g = Array(4)),
        (this.B = Array(this.blockSize)),
        (this.o = this.h = 0),
        this.s();
    }
    function n(e, t, n) {
      n || (n = 0);
      var r = Array(16);
      if ("string" == typeof t)
        for (var i = 0; 16 > i; ++i)
          r[i] =
            t.charCodeAt(n++) |
            (t.charCodeAt(n++) << 8) |
            (t.charCodeAt(n++) << 16) |
            (t.charCodeAt(n++) << 24);
      else
        for (i = 0; 16 > i; ++i)
          r[i] = t[n++] | (t[n++] << 8) | (t[n++] << 16) | (t[n++] << 24);
      (t = e.g[0]), (n = e.g[1]), (i = e.g[2]);
      var s = e.g[3],
        o = (t + (s ^ (n & (i ^ s))) + r[0] + 3614090360) & 4294967295;
      (o =
        ((n =
          (i =
            (s =
              (t =
                (n =
                  (i =
                    (s =
                      (t =
                        (n =
                          (i =
                            (s =
                              (t =
                                (n =
                                  (i =
                                    (s =
                                      (t =
                                        (n =
                                          (i =
                                            (s =
                                              (t =
                                                (n =
                                                  (i =
                                                    (s =
                                                      (t =
                                                        (n =
                                                          (i =
                                                            (s =
                                                              (t =
                                                                (n =
                                                                  (i =
                                                                    (s =
                                                                      (t =
                                                                        (n =
                                                                          (i =
                                                                            (s =
                                                                              (t =
                                                                                (n =
                                                                                  (i =
                                                                                    (s =
                                                                                      (t =
                                                                                        (n =
                                                                                          (i =
                                                                                            (s =
                                                                                              (t =
                                                                                                (n =
                                                                                                  (i =
                                                                                                    (s =
                                                                                                      (t =
                                                                                                        (n =
                                                                                                          (i =
                                                                                                            (s =
                                                                                                              (t =
                                                                                                                (n =
                                                                                                                  (i =
                                                                                                                    (s =
                                                                                                                      (t =
                                                                                                                        (n =
                                                                                                                          (i =
                                                                                                                            (s =
                                                                                                                              (t =
                                                                                                                                n +
                                                                                                                                (((o <<
                                                                                                                                  7) &
                                                                                                                                  4294967295) |
                                                                                                                                  (o >>>
                                                                                                                                    25))) +
                                                                                                                              ((((o =
                                                                                                                                (s +
                                                                                                                                  (i ^
                                                                                                                                    (t &
                                                                                                                                      (n ^
                                                                                                                                        i))) +
                                                                                                                                  r[1] +
                                                                                                                                  3905402710) &
                                                                                                                                4294967295) <<
                                                                                                                                12) &
                                                                                                                                4294967295) |
                                                                                                                                (o >>>
                                                                                                                                  20))) +
                                                                                                                            ((((o =
                                                                                                                              (i +
                                                                                                                                (n ^
                                                                                                                                  (s &
                                                                                                                                    (t ^
                                                                                                                                      n))) +
                                                                                                                                r[2] +
                                                                                                                                606105819) &
                                                                                                                              4294967295) <<
                                                                                                                              17) &
                                                                                                                              4294967295) |
                                                                                                                              (o >>>
                                                                                                                                15))) +
                                                                                                                          ((((o =
                                                                                                                            (n +
                                                                                                                              (t ^
                                                                                                                                (i &
                                                                                                                                  (s ^
                                                                                                                                    t))) +
                                                                                                                              r[3] +
                                                                                                                              3250441966) &
                                                                                                                            4294967295) <<
                                                                                                                            22) &
                                                                                                                            4294967295) |
                                                                                                                            (o >>>
                                                                                                                              10))) +
                                                                                                                        ((((o =
                                                                                                                          (t +
                                                                                                                            (s ^
                                                                                                                              (n &
                                                                                                                                (i ^
                                                                                                                                  s))) +
                                                                                                                            r[4] +
                                                                                                                            4118548399) &
                                                                                                                          4294967295) <<
                                                                                                                          7) &
                                                                                                                          4294967295) |
                                                                                                                          (o >>>
                                                                                                                            25))) +
                                                                                                                      ((((o =
                                                                                                                        (s +
                                                                                                                          (i ^
                                                                                                                            (t &
                                                                                                                              (n ^
                                                                                                                                i))) +
                                                                                                                          r[5] +
                                                                                                                          1200080426) &
                                                                                                                        4294967295) <<
                                                                                                                        12) &
                                                                                                                        4294967295) |
                                                                                                                        (o >>>
                                                                                                                          20))) +
                                                                                                                    ((((o =
                                                                                                                      (i +
                                                                                                                        (n ^
                                                                                                                          (s &
                                                                                                                            (t ^
                                                                                                                              n))) +
                                                                                                                        r[6] +
                                                                                                                        2821735955) &
                                                                                                                      4294967295) <<
                                                                                                                      17) &
                                                                                                                      4294967295) |
                                                                                                                      (o >>>
                                                                                                                        15))) +
                                                                                                                  ((((o =
                                                                                                                    (n +
                                                                                                                      (t ^
                                                                                                                        (i &
                                                                                                                          (s ^
                                                                                                                            t))) +
                                                                                                                      r[7] +
                                                                                                                      4249261313) &
                                                                                                                    4294967295) <<
                                                                                                                    22) &
                                                                                                                    4294967295) |
                                                                                                                    (o >>>
                                                                                                                      10))) +
                                                                                                                ((((o =
                                                                                                                  (t +
                                                                                                                    (s ^
                                                                                                                      (n &
                                                                                                                        (i ^
                                                                                                                          s))) +
                                                                                                                    r[8] +
                                                                                                                    1770035416) &
                                                                                                                  4294967295) <<
                                                                                                                  7) &
                                                                                                                  4294967295) |
                                                                                                                  (o >>>
                                                                                                                    25))) +
                                                                                                              ((((o =
                                                                                                                (s +
                                                                                                                  (i ^
                                                                                                                    (t &
                                                                                                                      (n ^
                                                                                                                        i))) +
                                                                                                                  r[9] +
                                                                                                                  2336552879) &
                                                                                                                4294967295) <<
                                                                                                                12) &
                                                                                                                4294967295) |
                                                                                                                (o >>>
                                                                                                                  20))) +
                                                                                                            ((((o =
                                                                                                              (i +
                                                                                                                (n ^
                                                                                                                  (s &
                                                                                                                    (t ^
                                                                                                                      n))) +
                                                                                                                r[10] +
                                                                                                                4294925233) &
                                                                                                              4294967295) <<
                                                                                                              17) &
                                                                                                              4294967295) |
                                                                                                              (o >>>
                                                                                                                15))) +
                                                                                                          ((((o =
                                                                                                            (n +
                                                                                                              (t ^
                                                                                                                (i &
                                                                                                                  (s ^
                                                                                                                    t))) +
                                                                                                              r[11] +
                                                                                                              2304563134) &
                                                                                                            4294967295) <<
                                                                                                            22) &
                                                                                                            4294967295) |
                                                                                                            (o >>>
                                                                                                              10))) +
                                                                                                        ((((o =
                                                                                                          (t +
                                                                                                            (s ^
                                                                                                              (n &
                                                                                                                (i ^
                                                                                                                  s))) +
                                                                                                            r[12] +
                                                                                                            1804603682) &
                                                                                                          4294967295) <<
                                                                                                          7) &
                                                                                                          4294967295) |
                                                                                                          (o >>>
                                                                                                            25))) +
                                                                                                      ((((o =
                                                                                                        (s +
                                                                                                          (i ^
                                                                                                            (t &
                                                                                                              (n ^
                                                                                                                i))) +
                                                                                                          r[13] +
                                                                                                          4254626195) &
                                                                                                        4294967295) <<
                                                                                                        12) &
                                                                                                        4294967295) |
                                                                                                        (o >>>
                                                                                                          20))) +
                                                                                                    ((((o =
                                                                                                      (i +
                                                                                                        (n ^
                                                                                                          (s &
                                                                                                            (t ^
                                                                                                              n))) +
                                                                                                        r[14] +
                                                                                                        2792965006) &
                                                                                                      4294967295) <<
                                                                                                      17) &
                                                                                                      4294967295) |
                                                                                                      (o >>>
                                                                                                        15))) +
                                                                                                  ((((o =
                                                                                                    (n +
                                                                                                      (t ^
                                                                                                        (i &
                                                                                                          (s ^
                                                                                                            t))) +
                                                                                                      r[15] +
                                                                                                      1236535329) &
                                                                                                    4294967295) <<
                                                                                                    22) &
                                                                                                    4294967295) |
                                                                                                    (o >>>
                                                                                                      10))) +
                                                                                                ((((o =
                                                                                                  (t +
                                                                                                    (i ^
                                                                                                      (s &
                                                                                                        (n ^
                                                                                                          i))) +
                                                                                                    r[1] +
                                                                                                    4129170786) &
                                                                                                  4294967295) <<
                                                                                                  5) &
                                                                                                  4294967295) |
                                                                                                  (o >>>
                                                                                                    27))) +
                                                                                              ((((o =
                                                                                                (s +
                                                                                                  (n ^
                                                                                                    (i &
                                                                                                      (t ^
                                                                                                        n))) +
                                                                                                  r[6] +
                                                                                                  3225465664) &
                                                                                                4294967295) <<
                                                                                                9) &
                                                                                                4294967295) |
                                                                                                (o >>>
                                                                                                  23))) +
                                                                                            ((((o =
                                                                                              (i +
                                                                                                (t ^
                                                                                                  (n &
                                                                                                    (s ^
                                                                                                      t))) +
                                                                                                r[11] +
                                                                                                643717713) &
                                                                                              4294967295) <<
                                                                                              14) &
                                                                                              4294967295) |
                                                                                              (o >>>
                                                                                                18))) +
                                                                                          ((((o =
                                                                                            (n +
                                                                                              (s ^
                                                                                                (t &
                                                                                                  (i ^
                                                                                                    s))) +
                                                                                              r[0] +
                                                                                              3921069994) &
                                                                                            4294967295) <<
                                                                                            20) &
                                                                                            4294967295) |
                                                                                            (o >>>
                                                                                              12))) +
                                                                                        ((((o =
                                                                                          (t +
                                                                                            (i ^
                                                                                              (s &
                                                                                                (n ^
                                                                                                  i))) +
                                                                                            r[5] +
                                                                                            3593408605) &
                                                                                          4294967295) <<
                                                                                          5) &
                                                                                          4294967295) |
                                                                                          (o >>>
                                                                                            27))) +
                                                                                      ((((o =
                                                                                        (s +
                                                                                          (n ^
                                                                                            (i &
                                                                                              (t ^
                                                                                                n))) +
                                                                                          r[10] +
                                                                                          38016083) &
                                                                                        4294967295) <<
                                                                                        9) &
                                                                                        4294967295) |
                                                                                        (o >>>
                                                                                          23))) +
                                                                                    ((((o =
                                                                                      (i +
                                                                                        (t ^
                                                                                          (n &
                                                                                            (s ^
                                                                                              t))) +
                                                                                        r[15] +
                                                                                        3634488961) &
                                                                                      4294967295) <<
                                                                                      14) &
                                                                                      4294967295) |
                                                                                      (o >>>
                                                                                        18))) +
                                                                                  ((((o =
                                                                                    (n +
                                                                                      (s ^
                                                                                        (t &
                                                                                          (i ^
                                                                                            s))) +
                                                                                      r[4] +
                                                                                      3889429448) &
                                                                                    4294967295) <<
                                                                                    20) &
                                                                                    4294967295) |
                                                                                    (o >>>
                                                                                      12))) +
                                                                                ((((o =
                                                                                  (t +
                                                                                    (i ^
                                                                                      (s &
                                                                                        (n ^
                                                                                          i))) +
                                                                                    r[9] +
                                                                                    568446438) &
                                                                                  4294967295) <<
                                                                                  5) &
                                                                                  4294967295) |
                                                                                  (o >>>
                                                                                    27))) +
                                                                              ((((o =
                                                                                (s +
                                                                                  (n ^
                                                                                    (i &
                                                                                      (t ^
                                                                                        n))) +
                                                                                  r[14] +
                                                                                  3275163606) &
                                                                                4294967295) <<
                                                                                9) &
                                                                                4294967295) |
                                                                                (o >>>
                                                                                  23))) +
                                                                            ((((o =
                                                                              (i +
                                                                                (t ^
                                                                                  (n &
                                                                                    (s ^
                                                                                      t))) +
                                                                                r[3] +
                                                                                4107603335) &
                                                                              4294967295) <<
                                                                              14) &
                                                                              4294967295) |
                                                                              (o >>>
                                                                                18))) +
                                                                          ((((o =
                                                                            (n +
                                                                              (s ^
                                                                                (t &
                                                                                  (i ^
                                                                                    s))) +
                                                                              r[8] +
                                                                              1163531501) &
                                                                            4294967295) <<
                                                                            20) &
                                                                            4294967295) |
                                                                            (o >>>
                                                                              12))) +
                                                                        ((((o =
                                                                          (t +
                                                                            (i ^
                                                                              (s &
                                                                                (n ^
                                                                                  i))) +
                                                                            r[13] +
                                                                            2850285829) &
                                                                          4294967295) <<
                                                                          5) &
                                                                          4294967295) |
                                                                          (o >>>
                                                                            27))) +
                                                                      ((((o =
                                                                        (s +
                                                                          (n ^
                                                                            (i &
                                                                              (t ^
                                                                                n))) +
                                                                          r[2] +
                                                                          4243563512) &
                                                                        4294967295) <<
                                                                        9) &
                                                                        4294967295) |
                                                                        (o >>>
                                                                          23))) +
                                                                    ((((o =
                                                                      (i +
                                                                        (t ^
                                                                          (n &
                                                                            (s ^
                                                                              t))) +
                                                                        r[7] +
                                                                        1735328473) &
                                                                      4294967295) <<
                                                                      14) &
                                                                      4294967295) |
                                                                      (o >>>
                                                                        18))) +
                                                                  ((((o =
                                                                    (n +
                                                                      (s ^
                                                                        (t &
                                                                          (i ^
                                                                            s))) +
                                                                      r[12] +
                                                                      2368359562) &
                                                                    4294967295) <<
                                                                    20) &
                                                                    4294967295) |
                                                                    (o >>>
                                                                      12))) +
                                                                ((((o =
                                                                  (t +
                                                                    (n ^
                                                                      i ^
                                                                      s) +
                                                                    r[5] +
                                                                    4294588738) &
                                                                  4294967295) <<
                                                                  4) &
                                                                  4294967295) |
                                                                  (o >>> 28))) +
                                                              ((((o =
                                                                (s +
                                                                  (t ^ n ^ i) +
                                                                  r[8] +
                                                                  2272392833) &
                                                                4294967295) <<
                                                                11) &
                                                                4294967295) |
                                                                (o >>> 21))) +
                                                            ((((o =
                                                              (i +
                                                                (s ^ t ^ n) +
                                                                r[11] +
                                                                1839030562) &
                                                              4294967295) <<
                                                              16) &
                                                              4294967295) |
                                                              (o >>> 16))) +
                                                          ((((o =
                                                            (n +
                                                              (i ^ s ^ t) +
                                                              r[14] +
                                                              4259657740) &
                                                            4294967295) <<
                                                            23) &
                                                            4294967295) |
                                                            (o >>> 9))) +
                                                        ((((o =
                                                          (t +
                                                            (n ^ i ^ s) +
                                                            r[1] +
                                                            2763975236) &
                                                          4294967295) <<
                                                          4) &
                                                          4294967295) |
                                                          (o >>> 28))) +
                                                      ((((o =
                                                        (s +
                                                          (t ^ n ^ i) +
                                                          r[4] +
                                                          1272893353) &
                                                        4294967295) <<
                                                        11) &
                                                        4294967295) |
                                                        (o >>> 21))) +
                                                    ((((o =
                                                      (i +
                                                        (s ^ t ^ n) +
                                                        r[7] +
                                                        4139469664) &
                                                      4294967295) <<
                                                      16) &
                                                      4294967295) |
                                                      (o >>> 16))) +
                                                  ((((o =
                                                    (n +
                                                      (i ^ s ^ t) +
                                                      r[10] +
                                                      3200236656) &
                                                    4294967295) <<
                                                    23) &
                                                    4294967295) |
                                                    (o >>> 9))) +
                                                ((((o =
                                                  (t +
                                                    (n ^ i ^ s) +
                                                    r[13] +
                                                    681279174) &
                                                  4294967295) <<
                                                  4) &
                                                  4294967295) |
                                                  (o >>> 28))) +
                                              ((((o =
                                                (s +
                                                  (t ^ n ^ i) +
                                                  r[0] +
                                                  3936430074) &
                                                4294967295) <<
                                                11) &
                                                4294967295) |
                                                (o >>> 21))) +
                                            ((((o =
                                              (i +
                                                (s ^ t ^ n) +
                                                r[3] +
                                                3572445317) &
                                              4294967295) <<
                                              16) &
                                              4294967295) |
                                              (o >>> 16))) +
                                          ((((o =
                                            (n +
                                              (i ^ s ^ t) +
                                              r[6] +
                                              76029189) &
                                            4294967295) <<
                                            23) &
                                            4294967295) |
                                            (o >>> 9))) +
                                        ((((o =
                                          (t +
                                            (n ^ i ^ s) +
                                            r[9] +
                                            3654602809) &
                                          4294967295) <<
                                          4) &
                                          4294967295) |
                                          (o >>> 28))) +
                                      ((((o =
                                        (s + (t ^ n ^ i) + r[12] + 3873151461) &
                                        4294967295) <<
                                        11) &
                                        4294967295) |
                                        (o >>> 21))) +
                                    ((((o =
                                      (i + (s ^ t ^ n) + r[15] + 530742520) &
                                      4294967295) <<
                                      16) &
                                      4294967295) |
                                      (o >>> 16))) +
                                  ((((o =
                                    (n + (i ^ s ^ t) + r[2] + 3299628645) &
                                    4294967295) <<
                                    23) &
                                    4294967295) |
                                    (o >>> 9))) +
                                ((((o =
                                  (t + (i ^ (n | ~s)) + r[0] + 4096336452) &
                                  4294967295) <<
                                  6) &
                                  4294967295) |
                                  (o >>> 26))) +
                              ((((o =
                                (s + (n ^ (t | ~i)) + r[7] + 1126891415) &
                                4294967295) <<
                                10) &
                                4294967295) |
                                (o >>> 22))) +
                            ((((o =
                              (i + (t ^ (s | ~n)) + r[14] + 2878612391) &
                              4294967295) <<
                              15) &
                              4294967295) |
                              (o >>> 17))) +
                          ((((o =
                            (n + (s ^ (i | ~t)) + r[5] + 4237533241) &
                            4294967295) <<
                            21) &
                            4294967295) |
                            (o >>> 11))) +
                        ((((o =
                          (t + (i ^ (n | ~s)) + r[12] + 1700485571) &
                          4294967295) <<
                          6) &
                          4294967295) |
                          (o >>> 26))) +
                      ((((o =
                        (s + (n ^ (t | ~i)) + r[3] + 2399980690) &
                        4294967295) <<
                        10) &
                        4294967295) |
                        (o >>> 22))) +
                    ((((o =
                      (i + (t ^ (s | ~n)) + r[10] + 4293915773) & 4294967295) <<
                      15) &
                      4294967295) |
                      (o >>> 17))) +
                  ((((o =
                    (n + (s ^ (i | ~t)) + r[1] + 2240044497) & 4294967295) <<
                    21) &
                    4294967295) |
                    (o >>> 11))) +
                ((((o =
                  (t + (i ^ (n | ~s)) + r[8] + 1873313359) & 4294967295) <<
                  6) &
                  4294967295) |
                  (o >>> 26))) +
              ((((o = (s + (n ^ (t | ~i)) + r[15] + 4264355552) & 4294967295) <<
                10) &
                4294967295) |
                (o >>> 22))) +
            ((((o = (i + (t ^ (s | ~n)) + r[6] + 2734768916) & 4294967295) <<
              15) &
              4294967295) |
              (o >>> 17))) +
          ((((o = (n + (s ^ (i | ~t)) + r[13] + 1309151649) & 4294967295) <<
            21) &
            4294967295) |
            (o >>> 11))) +
          ((s =
            (t =
              n +
              ((((o = (t + (i ^ (n | ~s)) + r[4] + 4149444226) & 4294967295) <<
                6) &
                4294967295) |
                (o >>> 26))) +
            ((((o = (s + (n ^ (t | ~i)) + r[11] + 3174756917) & 4294967295) <<
              10) &
              4294967295) |
              (o >>> 22))) ^
            ((i =
              s +
              ((((o = (i + (t ^ (s | ~n)) + r[2] + 718787259) & 4294967295) <<
                15) &
                4294967295) |
                (o >>> 17))) |
              ~t)) +
          r[9] +
          3951481745) &
        4294967295),
        (e.g[0] = (e.g[0] + t) & 4294967295),
        (e.g[1] =
          (e.g[1] + (i + (((o << 21) & 4294967295) | (o >>> 11)))) &
          4294967295),
        (e.g[2] = (e.g[2] + i) & 4294967295),
        (e.g[3] = (e.g[3] + s) & 4294967295);
    }
    function r(e, t) {
      this.h = t;
      for (var n = [], r = !0, i = e.length - 1; 0 <= i; i--) {
        var s = 0 | e[i];
        (r && s == t) || ((n[i] = s), (r = !1));
      }
      this.g = n;
    }
    !(function (e, t) {
      function n() {}
      (n.prototype = t.prototype),
        (e.D = t.prototype),
        (e.prototype = new n()),
        (e.prototype.constructor = e),
        (e.C = function (e, n, r) {
          for (
            var i = Array(arguments.length - 2), s = 2;
            s < arguments.length;
            s++
          )
            i[s - 2] = arguments[s];
          return t.prototype[n].apply(e, i);
        });
    })(t, function () {
      this.blockSize = -1;
    }),
      (t.prototype.s = function () {
        (this.g[0] = 1732584193),
          (this.g[1] = 4023233417),
          (this.g[2] = 2562383102),
          (this.g[3] = 271733878),
          (this.o = this.h = 0);
      }),
      (t.prototype.u = function (e, t) {
        void 0 === t && (t = e.length);
        for (
          var r = t - this.blockSize, i = this.B, s = this.h, o = 0;
          o < t;

        ) {
          if (0 == s) for (; o <= r; ) n(this, e, o), (o += this.blockSize);
          if ("string" == typeof e) {
            for (; o < t; )
              if (((i[s++] = e.charCodeAt(o++)), s == this.blockSize)) {
                n(this, i), (s = 0);
                break;
              }
          } else
            for (; o < t; )
              if (((i[s++] = e[o++]), s == this.blockSize)) {
                n(this, i), (s = 0);
                break;
              }
        }
        (this.h = s), (this.o += t);
      }),
      (t.prototype.v = function () {
        var e = Array(
          (56 > this.h ? this.blockSize : 2 * this.blockSize) - this.h
        );
        e[0] = 128;
        for (var t = 1; t < e.length - 8; ++t) e[t] = 0;
        var n = 8 * this.o;
        for (t = e.length - 8; t < e.length; ++t) (e[t] = 255 & n), (n /= 256);
        for (this.u(e), e = Array(16), t = n = 0; 4 > t; ++t)
          for (var r = 0; 32 > r; r += 8) e[n++] = (this.g[t] >>> r) & 255;
        return e;
      });
    var i = {};
    function s(e) {
      return -128 <= e && 128 > e
        ? (function (e, t) {
            var n = i;
            return Object.prototype.hasOwnProperty.call(n, e)
              ? n[e]
              : (n[e] = t(e));
          })(e, function (e) {
            return new r([0 | e], 0 > e ? -1 : 0);
          })
        : new r([0 | e], 0 > e ? -1 : 0);
    }
    function o(e) {
      if (isNaN(e) || !isFinite(e)) return a;
      if (0 > e) return d(o(-e));
      for (var t = [], n = 1, i = 0; e >= n; i++)
        (t[i] = (e / n) | 0), (n *= 4294967296);
      return new r(t, 0);
    }
    var a = s(0),
      c = s(1),
      l = s(16777216);
    function u(e) {
      if (0 != e.h) return !1;
      for (var t = 0; t < e.g.length; t++) if (0 != e.g[t]) return !1;
      return !0;
    }
    function h(e) {
      return -1 == e.h;
    }
    function d(e) {
      for (var t = e.g.length, n = [], i = 0; i < t; i++) n[i] = ~e.g[i];
      return new r(n, ~e.h).add(c);
    }
    function p(e, t) {
      return e.add(d(t));
    }
    function f(e, t) {
      for (; (65535 & e[t]) != e[t]; )
        (e[t + 1] += e[t] >>> 16), (e[t] &= 65535), t++;
    }
    function m(e, t) {
      (this.g = e), (this.h = t);
    }
    function g(e, t) {
      if (u(t)) throw Error("division by zero");
      if (u(e)) return new m(a, a);
      if (h(e)) return (t = g(d(e), t)), new m(d(t.g), d(t.h));
      if (h(t)) return (t = g(e, d(t))), new m(d(t.g), t.h);
      if (30 < e.g.length) {
        if (h(e) || h(t))
          throw Error("slowDivide_ only works with positive integers.");
        for (var n = c, r = t; 0 >= r.l(e); ) (n = v(n)), (r = v(r));
        var i = y(n, 1),
          s = y(r, 1);
        for (r = y(r, 2), n = y(n, 2); !u(r); ) {
          var l = s.add(r);
          0 >= l.l(e) && ((i = i.add(n)), (s = l)),
            (r = y(r, 1)),
            (n = y(n, 1));
        }
        return (t = p(e, i.j(t))), new m(i, t);
      }
      for (i = a; 0 <= e.l(t); ) {
        for (
          n = Math.max(1, Math.floor(e.m() / t.m())),
            r =
              48 >= (r = Math.ceil(Math.log(n) / Math.LN2))
                ? 1
                : Math.pow(2, r - 48),
            l = (s = o(n)).j(t);
          h(l) || 0 < l.l(e);

        )
          l = (s = o((n -= r))).j(t);
        u(s) && (s = c), (i = i.add(s)), (e = p(e, l));
      }
      return new m(i, e);
    }
    function v(e) {
      for (var t = e.g.length + 1, n = [], i = 0; i < t; i++)
        n[i] = (e.i(i) << 1) | (e.i(i - 1) >>> 31);
      return new r(n, e.h);
    }
    function y(e, t) {
      var n = t >> 5;
      t %= 32;
      for (var i = e.g.length - n, s = [], o = 0; o < i; o++)
        s[o] =
          0 < t
            ? (e.i(o + n) >>> t) | (e.i(o + n + 1) << (32 - t))
            : e.i(o + n);
      return new r(s, e.h);
    }
    ((e = r.prototype).m = function () {
      if (h(this)) return -d(this).m();
      for (var e = 0, t = 1, n = 0; n < this.g.length; n++) {
        var r = this.i(n);
        (e += (0 <= r ? r : 4294967296 + r) * t), (t *= 4294967296);
      }
      return e;
    }),
      (e.toString = function (e) {
        if (2 > (e = e || 10) || 36 < e)
          throw Error("radix out of range: " + e);
        if (u(this)) return "0";
        if (h(this)) return "-" + d(this).toString(e);
        for (var t = o(Math.pow(e, 6)), n = this, r = ""; ; ) {
          var i = g(n, t).g,
            s = (
              (0 < (n = p(n, i.j(t))).g.length ? n.g[0] : n.h) >>> 0
            ).toString(e);
          if (u((n = i))) return s + r;
          for (; 6 > s.length; ) s = "0" + s;
          r = s + r;
        }
      }),
      (e.i = function (e) {
        return 0 > e ? 0 : e < this.g.length ? this.g[e] : this.h;
      }),
      (e.l = function (e) {
        return h((e = p(this, e))) ? -1 : u(e) ? 0 : 1;
      }),
      (e.abs = function () {
        return h(this) ? d(this) : this;
      }),
      (e.add = function (e) {
        for (
          var t = Math.max(this.g.length, e.g.length), n = [], i = 0, s = 0;
          s <= t;
          s++
        ) {
          var o = i + (65535 & this.i(s)) + (65535 & e.i(s)),
            a = (o >>> 16) + (this.i(s) >>> 16) + (e.i(s) >>> 16);
          (i = a >>> 16), (o &= 65535), (a &= 65535), (n[s] = (a << 16) | o);
        }
        return new r(n, -2147483648 & n[n.length - 1] ? -1 : 0);
      }),
      (e.j = function (e) {
        if (u(this) || u(e)) return a;
        if (h(this)) return h(e) ? d(this).j(d(e)) : d(d(this).j(e));
        if (h(e)) return d(this.j(d(e)));
        if (0 > this.l(l) && 0 > e.l(l)) return o(this.m() * e.m());
        for (var t = this.g.length + e.g.length, n = [], i = 0; i < 2 * t; i++)
          n[i] = 0;
        for (i = 0; i < this.g.length; i++)
          for (var s = 0; s < e.g.length; s++) {
            var c = this.i(i) >>> 16,
              p = 65535 & this.i(i),
              m = e.i(s) >>> 16,
              g = 65535 & e.i(s);
            (n[2 * i + 2 * s] += p * g),
              f(n, 2 * i + 2 * s),
              (n[2 * i + 2 * s + 1] += c * g),
              f(n, 2 * i + 2 * s + 1),
              (n[2 * i + 2 * s + 1] += p * m),
              f(n, 2 * i + 2 * s + 1),
              (n[2 * i + 2 * s + 2] += c * m),
              f(n, 2 * i + 2 * s + 2);
          }
        for (i = 0; i < t; i++) n[i] = (n[2 * i + 1] << 16) | n[2 * i];
        for (i = t; i < 2 * t; i++) n[i] = 0;
        return new r(n, 0);
      }),
      (e.A = function (e) {
        return g(this, e).h;
      }),
      (e.and = function (e) {
        for (
          var t = Math.max(this.g.length, e.g.length), n = [], i = 0;
          i < t;
          i++
        )
          n[i] = this.i(i) & e.i(i);
        return new r(n, this.h & e.h);
      }),
      (e.or = function (e) {
        for (
          var t = Math.max(this.g.length, e.g.length), n = [], i = 0;
          i < t;
          i++
        )
          n[i] = this.i(i) | e.i(i);
        return new r(n, this.h | e.h);
      }),
      (e.xor = function (e) {
        for (
          var t = Math.max(this.g.length, e.g.length), n = [], i = 0;
          i < t;
          i++
        )
          n[i] = this.i(i) ^ e.i(i);
        return new r(n, this.h ^ e.h);
      }),
      (t.prototype.digest = t.prototype.v),
      (t.prototype.reset = t.prototype.s),
      (t.prototype.update = t.prototype.u),
      (xi = Ri.Md5 = t),
      (r.prototype.add = r.prototype.add),
      (r.prototype.multiply = r.prototype.j),
      (r.prototype.modulo = r.prototype.A),
      (r.prototype.compare = r.prototype.l),
      (r.prototype.toNumber = r.prototype.m),
      (r.prototype.toString = r.prototype.toString),
      (r.prototype.getBits = r.prototype.i),
      (r.fromNumber = o),
      (r.fromString = function e(t, n) {
        if (0 == t.length) throw Error("number format error: empty string");
        if (2 > (n = n || 10) || 36 < n)
          throw Error("radix out of range: " + n);
        if ("-" == t.charAt(0)) return d(e(t.substring(1), n));
        if (0 <= t.indexOf("-"))
          throw Error('number format error: interior "-" character');
        for (var r = o(Math.pow(n, 8)), i = a, s = 0; s < t.length; s += 8) {
          var c = Math.min(8, t.length - s),
            l = parseInt(t.substring(s, s + c), n);
          8 > c
            ? ((c = o(Math.pow(n, c))), (i = i.j(c).add(o(l))))
            : (i = (i = i.j(r)).add(o(l)));
        }
        return i;
      }),
      (Di = Ri.Integer = r);
  }).apply(
    void 0 !== Mi
      ? Mi
      : "undefined" != typeof self
      ? self
      : "undefined" != typeof window
      ? window
      : {}
  );
  var qi,
    Ui,
    Vi,
    Fi,
    Bi,
    Hi,
    ji,
    $i,
    zi =
      "undefined" != typeof globalThis
        ? globalThis
        : "undefined" != typeof window
        ? window
        : "undefined" != typeof global
        ? global
        : "undefined" != typeof self
        ? self
        : {},
    Ki = {};
  (function () {
    var e,
      t =
        "function" == typeof Object.defineProperties
          ? Object.defineProperty
          : function (e, t, n) {
              return (
                e == Array.prototype ||
                  e == Object.prototype ||
                  (e[t] = n.value),
                e
              );
            };
    var n = (function (e) {
      e = [
        "object" == typeof globalThis && globalThis,
        e,
        "object" == typeof window && window,
        "object" == typeof self && self,
        "object" == typeof zi && zi,
      ];
      for (var t = 0; t < e.length; ++t) {
        var n = e[t];
        if (n && n.Math == Math) return n;
      }
      throw Error("Cannot find global object");
    })(this);
    !(function (e, r) {
      if (r)
        e: {
          var i = n;
          e = e.split(".");
          for (var s = 0; s < e.length - 1; s++) {
            var o = e[s];
            if (!(o in i)) break e;
            i = i[o];
          }
          (r = r((s = i[(e = e[e.length - 1])]))) != s &&
            null != r &&
            t(i, e, { configurable: !0, writable: !0, value: r });
        }
    })("Array.prototype.values", function (e) {
      return (
        e ||
        function () {
          return (function (e, t) {
            e instanceof String && (e += "");
            var n = 0,
              r = !1,
              i = {
                next: function () {
                  if (!r && n < e.length) {
                    var i = n++;
                    return { value: t(i, e[i]), done: !1 };
                  }
                  return (r = !0), { done: !0, value: void 0 };
                },
              };
            return (
              (i[Symbol.iterator] = function () {
                return i;
              }),
              i
            );
          })(this, function (e, t) {
            return t;
          });
        }
      );
    });
    var r = r || {},
      i = this || self;
    function s(e) {
      var t = typeof e;
      return (
        "array" ==
          (t =
            "object" != t
              ? t
              : e
              ? Array.isArray(e)
                ? "array"
                : t
              : "null") ||
        ("object" == t && "number" == typeof e.length)
      );
    }
    function o(e) {
      var t = typeof e;
      return ("object" == t && null != e) || "function" == t;
    }
    function a(e, t, n) {
      return e.call.apply(e.bind, arguments);
    }
    function c(e, t, n) {
      if (!e) throw Error();
      if (2 < arguments.length) {
        var r = Array.prototype.slice.call(arguments, 2);
        return function () {
          var n = Array.prototype.slice.call(arguments);
          return Array.prototype.unshift.apply(n, r), e.apply(t, n);
        };
      }
      return function () {
        return e.apply(t, arguments);
      };
    }
    function l(e, t, n) {
      return (l =
        Function.prototype.bind &&
        -1 != Function.prototype.bind.toString().indexOf("native code")
          ? a
          : c).apply(null, arguments);
    }
    function u(e, t) {
      var n = Array.prototype.slice.call(arguments, 1);
      return function () {
        var t = n.slice();
        return t.push.apply(t, arguments), e.apply(this, t);
      };
    }
    function h(e, t) {
      function n() {}
      (n.prototype = t.prototype),
        (e.aa = t.prototype),
        (e.prototype = new n()),
        (e.prototype.constructor = e),
        (e.Qb = function (e, n, r) {
          for (
            var i = Array(arguments.length - 2), s = 2;
            s < arguments.length;
            s++
          )
            i[s - 2] = arguments[s];
          return t.prototype[n].apply(e, i);
        });
    }
    function d(e) {
      const t = e.length;
      if (0 < t) {
        const n = Array(t);
        for (let r = 0; r < t; r++) n[r] = e[r];
        return n;
      }
      return [];
    }
    function p(e, t) {
      for (let t = 1; t < arguments.length; t++) {
        const n = arguments[t];
        if (s(n)) {
          const t = e.length || 0,
            r = n.length || 0;
          e.length = t + r;
          for (let i = 0; i < r; i++) e[t + i] = n[i];
        } else e.push(n);
      }
    }
    function f(e) {
      return /^[\s\xa0]*$/.test(e);
    }
    function m() {
      var e = i.navigator;
      return e && (e = e.userAgent) ? e : "";
    }
    function g(e) {
      return g[" "](e), e;
    }
    g[" "] = function () {};
    var v = !(
      -1 == m().indexOf("Gecko") ||
      (-1 != m().toLowerCase().indexOf("webkit") &&
        -1 == m().indexOf("Edge")) ||
      -1 != m().indexOf("Trident") ||
      -1 != m().indexOf("MSIE") ||
      -1 != m().indexOf("Edge")
    );
    function y(e, t, n) {
      for (const r in e) t.call(n, e[r], r, e);
    }
    function _(e) {
      const t = {};
      for (const n in e) t[n] = e[n];
      return t;
    }
    const b =
      "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(
        " "
      );
    function w(e, t) {
      let n, r;
      for (let t = 1; t < arguments.length; t++) {
        for (n in ((r = arguments[t]), r)) e[n] = r[n];
        for (let t = 0; t < b.length; t++)
          (n = b[t]),
            Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);
      }
    }
    function S(e) {
      var t = 1;
      e = e.split(":");
      const n = [];
      for (; 0 < t && e.length; ) n.push(e.shift()), t--;
      return e.length && n.push(e.join(":")), n;
    }
    function E(e) {
      i.setTimeout(() => {
        throw e;
      }, 0);
    }
    function I() {
      var e = A;
      let t = null;
      return (
        e.g &&
          ((t = e.g), (e.g = e.g.next), e.g || (e.h = null), (t.next = null)),
        t
      );
    }
    var C = new (class {
      constructor(e, t) {
        (this.i = e), (this.j = t), (this.h = 0), (this.g = null);
      }
      get() {
        let e;
        return (
          0 < this.h
            ? (this.h--, (e = this.g), (this.g = e.next), (e.next = null))
            : (e = this.i()),
          e
        );
      }
    })(
      () => new k(),
      (e) => e.reset()
    );
    class k {
      constructor() {
        this.next = this.g = this.h = null;
      }
      set(e, t) {
        (this.h = e), (this.g = t), (this.next = null);
      }
      reset() {
        this.next = this.g = this.h = null;
      }
    }
    let T,
      L = !1,
      A = new (class {
        constructor() {
          this.h = this.g = null;
        }
        add(e, t) {
          const n = C.get();
          n.set(e, t), this.h ? (this.h.next = n) : (this.g = n), (this.h = n);
        }
      })(),
      N = () => {
        const e = i.Promise.resolve(void 0);
        T = () => {
          e.then(P);
        };
      };
    var P = () => {
      for (var e; (e = I()); ) {
        try {
          e.h.call(e.g);
        } catch (e) {
          E(e);
        }
        var t = C;
        t.j(e), 100 > t.h && (t.h++, (e.next = t.g), (t.g = e));
      }
      L = !1;
    };
    function O() {
      (this.s = this.s), (this.C = this.C);
    }
    function D(e, t) {
      (this.type = e), (this.g = this.target = t), (this.defaultPrevented = !1);
    }
    (O.prototype.s = !1),
      (O.prototype.ma = function () {
        this.s || ((this.s = !0), this.N());
      }),
      (O.prototype.N = function () {
        if (this.C) for (; this.C.length; ) this.C.shift()();
      }),
      (D.prototype.h = function () {
        this.defaultPrevented = !0;
      });
    var x = (function () {
      if (!i.addEventListener || !Object.defineProperty) return !1;
      var e = !1,
        t = Object.defineProperty({}, "passive", {
          get: function () {
            e = !0;
          },
        });
      try {
        const e = () => {};
        i.addEventListener("test", e, t), i.removeEventListener("test", e, t);
      } catch (e) {}
      return e;
    })();
    function M(e, t) {
      if (
        (D.call(this, e ? e.type : ""),
        (this.relatedTarget = this.g = this.target = null),
        (this.button =
          this.screenY =
          this.screenX =
          this.clientY =
          this.clientX =
            0),
        (this.key = ""),
        (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
        (this.state = null),
        (this.pointerId = 0),
        (this.pointerType = ""),
        (this.i = null),
        e)
      ) {
        var n = (this.type = e.type),
          r =
            e.changedTouches && e.changedTouches.length
              ? e.changedTouches[0]
              : null;
        if (
          ((this.target = e.target || e.srcElement),
          (this.g = t),
          (t = e.relatedTarget))
        ) {
          if (v) {
            e: {
              try {
                g(t.nodeName);
                var i = !0;
                break e;
              } catch (e) {}
              i = !1;
            }
            i || (t = null);
          }
        } else
          "mouseover" == n
            ? (t = e.fromElement)
            : "mouseout" == n && (t = e.toElement);
        (this.relatedTarget = t),
          r
            ? ((this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX),
              (this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY),
              (this.screenX = r.screenX || 0),
              (this.screenY = r.screenY || 0))
            : ((this.clientX = void 0 !== e.clientX ? e.clientX : e.pageX),
              (this.clientY = void 0 !== e.clientY ? e.clientY : e.pageY),
              (this.screenX = e.screenX || 0),
              (this.screenY = e.screenY || 0)),
          (this.button = e.button),
          (this.key = e.key || ""),
          (this.ctrlKey = e.ctrlKey),
          (this.altKey = e.altKey),
          (this.shiftKey = e.shiftKey),
          (this.metaKey = e.metaKey),
          (this.pointerId = e.pointerId || 0),
          (this.pointerType =
            "string" == typeof e.pointerType
              ? e.pointerType
              : R[e.pointerType] || ""),
          (this.state = e.state),
          (this.i = e),
          e.defaultPrevented && M.aa.h.call(this);
      }
    }
    h(M, D);
    var R = { 2: "touch", 3: "pen", 4: "mouse" };
    M.prototype.h = function () {
      M.aa.h.call(this);
      var e = this.i;
      e.preventDefault ? e.preventDefault() : (e.returnValue = !1);
    };
    var q = "closure_listenable_" + ((1e6 * Math.random()) | 0),
      U = 0;
    function V(e, t, n, r, i) {
      (this.listener = e),
        (this.proxy = null),
        (this.src = t),
        (this.type = n),
        (this.capture = !!r),
        (this.ha = i),
        (this.key = ++U),
        (this.da = this.fa = !1);
    }
    function F(e) {
      (e.da = !0),
        (e.listener = null),
        (e.proxy = null),
        (e.src = null),
        (e.ha = null);
    }
    function B(e) {
      (this.src = e), (this.g = {}), (this.h = 0);
    }
    function H(e, t) {
      var n = t.type;
      if (n in e.g) {
        var r,
          i = e.g[n],
          s = Array.prototype.indexOf.call(i, t, void 0);
        (r = 0 <= s) && Array.prototype.splice.call(i, s, 1),
          r && (F(t), 0 == e.g[n].length && (delete e.g[n], e.h--));
      }
    }
    function j(e, t, n, r) {
      for (var i = 0; i < e.length; ++i) {
        var s = e[i];
        if (!s.da && s.listener == t && s.capture == !!n && s.ha == r) return i;
      }
      return -1;
    }
    B.prototype.add = function (e, t, n, r, i) {
      var s = e.toString();
      (e = this.g[s]) || ((e = this.g[s] = []), this.h++);
      var o = j(e, t, r, i);
      return (
        -1 < o
          ? ((t = e[o]), n || (t.fa = !1))
          : (((t = new V(t, this.src, s, !!r, i)).fa = n), e.push(t)),
        t
      );
    };
    var $ = "closure_lm_" + ((1e6 * Math.random()) | 0),
      z = {};
    function K(e, t, n, r, i) {
      if (r && r.once) return W(e, t, n, r, i);
      if (Array.isArray(t)) {
        for (var s = 0; s < t.length; s++) K(e, t[s], n, r, i);
        return null;
      }
      return (
        (n = te(n)),
        e && e[q]
          ? e.K(t, n, o(r) ? !!r.capture : !!r, i)
          : G(e, t, n, !1, r, i)
      );
    }
    function G(e, t, n, r, i, s) {
      if (!t) throw Error("Invalid event type");
      var a = o(i) ? !!i.capture : !!i,
        c = Z(e);
      if ((c || (e[$] = c = new B(e)), (n = c.add(t, n, r, a, s)).proxy))
        return n;
      if (
        ((r = (function () {
          function e(n) {
            return t.call(e.src, e.listener, n);
          }
          const t = X;
          return e;
        })()),
        (n.proxy = r),
        (r.src = e),
        (r.listener = n),
        e.addEventListener)
      )
        x || (i = a),
          void 0 === i && (i = !1),
          e.addEventListener(t.toString(), r, i);
      else if (e.attachEvent) e.attachEvent(Y(t.toString()), r);
      else {
        if (!e.addListener || !e.removeListener)
          throw Error("addEventListener and attachEvent are unavailable.");
        e.addListener(r);
      }
      return n;
    }
    function W(e, t, n, r, i) {
      if (Array.isArray(t)) {
        for (var s = 0; s < t.length; s++) W(e, t[s], n, r, i);
        return null;
      }
      return (
        (n = te(n)),
        e && e[q]
          ? e.L(t, n, o(r) ? !!r.capture : !!r, i)
          : G(e, t, n, !0, r, i)
      );
    }
    function Q(e, t, n, r, i) {
      if (Array.isArray(t))
        for (var s = 0; s < t.length; s++) Q(e, t[s], n, r, i);
      else
        (r = o(r) ? !!r.capture : !!r),
          (n = te(n)),
          e && e[q]
            ? ((e = e.i),
              (t = String(t).toString()) in e.g &&
                -1 < (n = j((s = e.g[t]), n, r, i)) &&
                (F(s[n]),
                Array.prototype.splice.call(s, n, 1),
                0 == s.length && (delete e.g[t], e.h--)))
            : e &&
              (e = Z(e)) &&
              ((t = e.g[t.toString()]),
              (e = -1),
              t && (e = j(t, n, r, i)),
              (n = -1 < e ? t[e] : null) && J(n));
    }
    function J(e) {
      if ("number" != typeof e && e && !e.da) {
        var t = e.src;
        if (t && t[q]) H(t.i, e);
        else {
          var n = e.type,
            r = e.proxy;
          t.removeEventListener
            ? t.removeEventListener(n, r, e.capture)
            : t.detachEvent
            ? t.detachEvent(Y(n), r)
            : t.addListener && t.removeListener && t.removeListener(r),
            (n = Z(t))
              ? (H(n, e), 0 == n.h && ((n.src = null), (t[$] = null)))
              : F(e);
        }
      }
    }
    function Y(e) {
      return e in z ? z[e] : (z[e] = "on" + e);
    }
    function X(e, t) {
      if (e.da) e = !0;
      else {
        t = new M(t, this);
        var n = e.listener,
          r = e.ha || e.src;
        e.fa && J(e), (e = n.call(r, t));
      }
      return e;
    }
    function Z(e) {
      return (e = e[$]) instanceof B ? e : null;
    }
    var ee = "__closure_events_fn_" + ((1e9 * Math.random()) >>> 0);
    function te(e) {
      return "function" == typeof e
        ? e
        : (e[ee] ||
            (e[ee] = function (t) {
              return e.handleEvent(t);
            }),
          e[ee]);
    }
    function ne() {
      O.call(this), (this.i = new B(this)), (this.M = this), (this.F = null);
    }
    function re(e, t) {
      var n,
        r = e.F;
      if (r) for (n = []; r; r = r.F) n.push(r);
      if (((e = e.M), (r = t.type || t), "string" == typeof t)) t = new D(t, e);
      else if (t instanceof D) t.target = t.target || e;
      else {
        var i = t;
        w((t = new D(r, e)), i);
      }
      if (((i = !0), n))
        for (var s = n.length - 1; 0 <= s; s--) {
          var o = (t.g = n[s]);
          i = ie(o, r, !0, t) && i;
        }
      if (
        ((i = ie((o = t.g = e), r, !0, t) && i), (i = ie(o, r, !1, t) && i), n)
      )
        for (s = 0; s < n.length; s++) i = ie((o = t.g = n[s]), r, !1, t) && i;
    }
    function ie(e, t, n, r) {
      if (!(t = e.i.g[String(t)])) return !0;
      t = t.concat();
      for (var i = !0, s = 0; s < t.length; ++s) {
        var o = t[s];
        if (o && !o.da && o.capture == n) {
          var a = o.listener,
            c = o.ha || o.src;
          o.fa && H(e.i, o), (i = !1 !== a.call(c, r) && i);
        }
      }
      return i && !r.defaultPrevented;
    }
    function se(e, t, n) {
      if ("function" == typeof e) n && (e = l(e, n));
      else {
        if (!e || "function" != typeof e.handleEvent)
          throw Error("Invalid listener argument");
        e = l(e.handleEvent, e);
      }
      return 2147483647 < Number(t) ? -1 : i.setTimeout(e, t || 0);
    }
    function oe(e) {
      e.g = se(() => {
        (e.g = null), e.i && ((e.i = !1), oe(e));
      }, e.l);
      const t = e.h;
      (e.h = null), e.m.apply(null, t);
    }
    h(ne, O),
      (ne.prototype[q] = !0),
      (ne.prototype.removeEventListener = function (e, t, n, r) {
        Q(this, e, t, n, r);
      }),
      (ne.prototype.N = function () {
        if ((ne.aa.N.call(this), this.i)) {
          var e,
            t = this.i;
          for (e in t.g) {
            for (var n = t.g[e], r = 0; r < n.length; r++) F(n[r]);
            delete t.g[e], t.h--;
          }
        }
        this.F = null;
      }),
      (ne.prototype.K = function (e, t, n, r) {
        return this.i.add(String(e), t, !1, n, r);
      }),
      (ne.prototype.L = function (e, t, n, r) {
        return this.i.add(String(e), t, !0, n, r);
      });
    class ae extends O {
      constructor(e, t) {
        super(),
          (this.m = e),
          (this.l = t),
          (this.h = null),
          (this.i = !1),
          (this.g = null);
      }
      j(e) {
        (this.h = arguments), this.g ? (this.i = !0) : oe(this);
      }
      N() {
        super.N(),
          this.g &&
            (i.clearTimeout(this.g),
            (this.g = null),
            (this.i = !1),
            (this.h = null));
      }
    }
    function ce(e) {
      O.call(this), (this.h = e), (this.g = {});
    }
    h(ce, O);
    var le = [];
    function ue(e) {
      y(
        e.g,
        function (e, t) {
          this.g.hasOwnProperty(t) && J(e);
        },
        e
      ),
        (e.g = {});
    }
    (ce.prototype.N = function () {
      ce.aa.N.call(this), ue(this);
    }),
      (ce.prototype.handleEvent = function () {
        throw Error("EventHandler.handleEvent not implemented");
      });
    var he = i.JSON.stringify,
      de = i.JSON.parse,
      pe = class {
        stringify(e) {
          return i.JSON.stringify(e, void 0);
        }
        parse(e) {
          return i.JSON.parse(e, void 0);
        }
      };
    function fe() {}
    function me(e) {
      return e.h || (e.h = e.i());
    }
    function ge() {}
    fe.prototype.h = null;
    var ve = { OPEN: "a", kb: "b", Ja: "c", wb: "d" };
    function ye() {
      D.call(this, "d");
    }
    function _e() {
      D.call(this, "c");
    }
    h(ye, D), h(_e, D);
    var be = {},
      we = null;
    function Se() {
      return (we = we || new ne());
    }
    function Ee(e) {
      D.call(this, be.La, e);
    }
    function Ie(e) {
      const t = Se();
      re(t, new Ee(t));
    }
    function Ce(e, t) {
      D.call(this, be.STAT_EVENT, e), (this.stat = t);
    }
    function ke(e) {
      const t = Se();
      re(t, new Ce(t, e));
    }
    function Te(e, t) {
      D.call(this, be.Ma, e), (this.size = t);
    }
    function Le(e, t) {
      if ("function" != typeof e)
        throw Error("Fn must not be null and must be a function");
      return i.setTimeout(function () {
        e();
      }, t);
    }
    function Ae() {
      this.g = !0;
    }
    function Ne(e, t, n, r) {
      e.info(function () {
        return (
          "XMLHTTP TEXT (" +
          t +
          "): " +
          (function (e, t) {
            if (!e.g) return t;
            if (!t) return null;
            try {
              var n = JSON.parse(t);
              if (n)
                for (e = 0; e < n.length; e++)
                  if (Array.isArray(n[e])) {
                    var r = n[e];
                    if (!(2 > r.length)) {
                      var i = r[1];
                      if (Array.isArray(i) && !(1 > i.length)) {
                        var s = i[0];
                        if ("noop" != s && "stop" != s && "close" != s)
                          for (var o = 1; o < i.length; o++) i[o] = "";
                      }
                    }
                  }
              return he(n);
            } catch (e) {
              return t;
            }
          })(e, n) +
          (r ? " " + r : "")
        );
      });
    }
    (be.La = "serverreachability"),
      h(Ee, D),
      (be.STAT_EVENT = "statevent"),
      h(Ce, D),
      (be.Ma = "timingevent"),
      h(Te, D),
      (Ae.prototype.xa = function () {
        this.g = !1;
      }),
      (Ae.prototype.info = function () {});
    var Pe,
      Oe = {
        NO_ERROR: 0,
        gb: 1,
        tb: 2,
        sb: 3,
        nb: 4,
        rb: 5,
        ub: 6,
        Ia: 7,
        TIMEOUT: 8,
        xb: 9,
      },
      De = {
        lb: "complete",
        Hb: "success",
        Ja: "error",
        Ia: "abort",
        zb: "ready",
        Ab: "readystatechange",
        TIMEOUT: "timeout",
        vb: "incrementaldata",
        yb: "progress",
        ob: "downloadprogress",
        Pb: "uploadprogress",
      };
    function xe() {}
    function Me(e, t, n, r) {
      (this.j = e),
        (this.i = t),
        (this.l = n),
        (this.R = r || 1),
        (this.U = new ce(this)),
        (this.I = 45e3),
        (this.H = null),
        (this.o = !1),
        (this.m = this.A = this.v = this.L = this.F = this.S = this.B = null),
        (this.D = []),
        (this.g = null),
        (this.C = 0),
        (this.s = this.u = null),
        (this.X = -1),
        (this.J = !1),
        (this.O = 0),
        (this.M = null),
        (this.W = this.K = this.T = this.P = !1),
        (this.h = new Re());
    }
    function Re() {
      (this.i = null), (this.g = ""), (this.h = !1);
    }
    h(xe, fe),
      (xe.prototype.g = function () {
        return new XMLHttpRequest();
      }),
      (xe.prototype.i = function () {
        return {};
      }),
      (Pe = new xe());
    var qe = {},
      Ue = {};
    function Ve(e, t, n) {
      (e.L = 1), (e.v = ht(ot(t))), (e.m = n), (e.P = !0), Fe(e, null);
    }
    function Fe(e, t) {
      (e.F = Date.now()), je(e), (e.A = ot(e.v));
      var n = e.A,
        r = e.R;
      Array.isArray(r) || (r = [String(r)]),
        Ct(n.i, "t", r),
        (e.C = 0),
        (n = e.j.J),
        (e.h = new Re()),
        (e.g = pn(e.j, n ? t : null, !e.m)),
        0 < e.O && (e.M = new ae(l(e.Y, e, e.g), e.O)),
        (t = e.U),
        (n = e.g),
        (r = e.ca);
      var i = "readystatechange";
      Array.isArray(i) || (i && (le[0] = i.toString()), (i = le));
      for (var s = 0; s < i.length; s++) {
        var o = K(n, i[s], r || t.handleEvent, !1, t.h || t);
        if (!o) break;
        t.g[o.key] = o;
      }
      (t = e.H ? _(e.H) : {}),
        e.m
          ? (e.u || (e.u = "POST"),
            (t["Content-Type"] = "application/x-www-form-urlencoded"),
            e.g.ea(e.A, e.u, e.m, t))
          : ((e.u = "GET"), e.g.ea(e.A, e.u, null, t)),
        Ie(),
        (function (e, t, n, r, i, s) {
          e.info(function () {
            if (e.g)
              if (s)
                for (var o = "", a = s.split("&"), c = 0; c < a.length; c++) {
                  var l = a[c].split("=");
                  if (1 < l.length) {
                    var u = l[0];
                    l = l[1];
                    var h = u.split("_");
                    o =
                      2 <= h.length && "type" == h[1]
                        ? o + (u + "=") + l + "&"
                        : o + (u + "=redacted&");
                  }
                }
              else o = null;
            else o = s;
            return (
              "XMLHTTP REQ (" +
              r +
              ") [attempt " +
              i +
              "]: " +
              t +
              "\n" +
              n +
              "\n" +
              o
            );
          });
        })(e.i, e.u, e.A, e.l, e.R, e.m);
    }
    function Be(e) {
      return !!e.g && "GET" == e.u && 2 != e.L && e.j.Ca;
    }
    function He(e, t) {
      var n = e.C,
        r = t.indexOf("\n", n);
      return -1 == r
        ? Ue
        : ((n = Number(t.substring(n, r))),
          isNaN(n)
            ? qe
            : (r += 1) + n > t.length
            ? Ue
            : ((t = t.slice(r, r + n)), (e.C = r + n), t));
    }
    function je(e) {
      (e.S = Date.now() + e.I), $e(e, e.I);
    }
    function $e(e, t) {
      if (null != e.B) throw Error("WatchDog timer not null");
      e.B = Le(l(e.ba, e), t);
    }
    function ze(e) {
      e.B && (i.clearTimeout(e.B), (e.B = null));
    }
    function Ke(e) {
      0 == e.j.G || e.J || cn(e.j, e);
    }
    function Ge(e) {
      ze(e);
      var t = e.M;
      t && "function" == typeof t.ma && t.ma(),
        (e.M = null),
        ue(e.U),
        e.g && ((t = e.g), (e.g = null), t.abort(), t.ma());
    }
    function We(e, t) {
      try {
        var n = e.j;
        if (0 != n.G && (n.g == e || Ze(n.h, e)))
          if (!e.K && Ze(n.h, e) && 3 == n.G) {
            try {
              var r = n.Da.g.parse(t);
            } catch (e) {
              r = null;
            }
            if (Array.isArray(r) && 3 == r.length) {
              var i = r;
              if (0 == i[0]) {
                e: if (!n.u) {
                  if (n.g) {
                    if (!(n.g.F + 3e3 < e.F)) break e;
                    an(n), Jt(n);
                  }
                  rn(n), ke(18);
                }
              } else
                (n.za = i[1]),
                  0 < n.za - n.T &&
                    37500 > i[2] &&
                    n.F &&
                    0 == n.v &&
                    !n.C &&
                    (n.C = Le(l(n.Za, n), 6e3));
              if (1 >= Xe(n.h) && n.ca) {
                try {
                  n.ca();
                } catch (e) {}
                n.ca = void 0;
              }
            } else un(n, 11);
          } else if (((e.K || n.g == e) && an(n), !f(t)))
            for (i = n.Da.g.parse(t), t = 0; t < i.length; t++) {
              let l = i[t];
              if (((n.T = l[0]), (l = l[1]), 2 == n.G))
                if ("c" == l[0]) {
                  (n.K = l[1]), (n.ia = l[2]);
                  const t = l[3];
                  null != t && ((n.la = t), n.j.info("VER=" + n.la));
                  const i = l[4];
                  null != i && ((n.Aa = i), n.j.info("SVER=" + n.Aa));
                  const u = l[5];
                  null != u &&
                    "number" == typeof u &&
                    0 < u &&
                    ((r = 1.5 * u),
                    (n.L = r),
                    n.j.info("backChannelRequestTimeoutMs_=" + r)),
                    (r = n);
                  const h = e.g;
                  if (h) {
                    const e = h.g
                      ? h.g.getResponseHeader("X-Client-Wire-Protocol")
                      : null;
                    if (e) {
                      var s = r.h;
                      s.g ||
                        (-1 == e.indexOf("spdy") &&
                          -1 == e.indexOf("quic") &&
                          -1 == e.indexOf("h2")) ||
                        ((s.j = s.l),
                        (s.g = new Set()),
                        s.h && (et(s, s.h), (s.h = null)));
                    }
                    if (r.D) {
                      const e = h.g
                        ? h.g.getResponseHeader("X-HTTP-Session-Id")
                        : null;
                      e && ((r.ya = e), ut(r.I, r.D, e));
                    }
                  }
                  (n.G = 3),
                    n.l && n.l.ua(),
                    n.ba &&
                      ((n.R = Date.now() - e.F),
                      n.j.info("Handshake RTT: " + n.R + "ms"));
                  var o = e;
                  if ((((r = n).qa = dn(r, r.J ? r.ia : null, r.W)), o.K)) {
                    tt(r.h, o);
                    var a = o,
                      c = r.L;
                    c && (a.I = c), a.B && (ze(a), je(a)), (r.g = o);
                  } else nn(r);
                  0 < n.i.length && Xt(n);
                } else ("stop" != l[0] && "close" != l[0]) || un(n, 7);
              else
                3 == n.G &&
                  ("stop" == l[0] || "close" == l[0]
                    ? "stop" == l[0]
                      ? un(n, 7)
                      : Qt(n)
                    : "noop" != l[0] && n.l && n.l.ta(l),
                  (n.v = 0));
            }
        Ie();
      } catch (e) {}
    }
    (Me.prototype.ca = function (e) {
      e = e.target;
      const t = this.M;
      t && 3 == zt(e) ? t.j() : this.Y(e);
    }),
      (Me.prototype.Y = function (e) {
        try {
          if (e == this.g)
            e: {
              const d = zt(this.g);
              var t = this.g.Ba();
              this.g.Z();
              if (
                !(3 > d) &&
                (3 != d || (this.g && (this.h.h || this.g.oa() || Kt(this.g))))
              ) {
                this.J || 4 != d || 7 == t || Ie(), ze(this);
                var n = this.g.Z();
                this.X = n;
                t: if (Be(this)) {
                  var r = Kt(this.g);
                  e = "";
                  var s = r.length,
                    o = 4 == zt(this.g);
                  if (!this.h.i) {
                    if ("undefined" == typeof TextDecoder) {
                      Ge(this), Ke(this);
                      var a = "";
                      break t;
                    }
                    this.h.i = new i.TextDecoder();
                  }
                  for (t = 0; t < s; t++)
                    (this.h.h = !0),
                      (e += this.h.i.decode(r[t], {
                        stream: !(o && t == s - 1),
                      }));
                  (r.length = 0), (this.h.g += e), (this.C = 0), (a = this.h.g);
                } else a = this.g.oa();
                if (
                  ((this.o = 200 == n),
                  (function (e, t, n, r, i, s, o) {
                    e.info(function () {
                      return (
                        "XMLHTTP RESP (" +
                        r +
                        ") [ attempt " +
                        i +
                        "]: " +
                        t +
                        "\n" +
                        n +
                        "\n" +
                        s +
                        " " +
                        o
                      );
                    });
                  })(this.i, this.u, this.A, this.l, this.R, d, n),
                  this.o)
                ) {
                  if (this.T && !this.K) {
                    t: {
                      if (this.g) {
                        var c,
                          l = this.g;
                        if (
                          (c = l.g
                            ? l.g.getResponseHeader("X-HTTP-Initial-Response")
                            : null) &&
                          !f(c)
                        ) {
                          var u = c;
                          break t;
                        }
                      }
                      u = null;
                    }
                    if (!(n = u)) {
                      (this.o = !1), (this.s = 3), ke(12), Ge(this), Ke(this);
                      break e;
                    }
                    Ne(
                      this.i,
                      this.l,
                      n,
                      "Initial handshake response via X-HTTP-Initial-Response"
                    ),
                      (this.K = !0),
                      We(this, n);
                  }
                  if (this.P) {
                    let e;
                    for (n = !0; !this.J && this.C < a.length; ) {
                      if (((e = He(this, a)), e == Ue)) {
                        4 == d && ((this.s = 4), ke(14), (n = !1)),
                          Ne(this.i, this.l, null, "[Incomplete Response]");
                        break;
                      }
                      if (e == qe) {
                        (this.s = 4),
                          ke(15),
                          Ne(this.i, this.l, a, "[Invalid Chunk]"),
                          (n = !1);
                        break;
                      }
                      Ne(this.i, this.l, e, null), We(this, e);
                    }
                    if (
                      (Be(this) &&
                        0 != this.C &&
                        ((this.h.g = this.h.g.slice(this.C)), (this.C = 0)),
                      4 != d ||
                        0 != a.length ||
                        this.h.h ||
                        ((this.s = 1), ke(16), (n = !1)),
                      (this.o = this.o && n),
                      n)
                    ) {
                      if (0 < a.length && !this.W) {
                        this.W = !0;
                        var h = this.j;
                        h.g == this &&
                          h.ba &&
                          !h.M &&
                          (h.j.info(
                            "Great, no buffering proxy detected. Bytes received: " +
                              a.length
                          ),
                          sn(h),
                          (h.M = !0),
                          ke(11));
                      }
                    } else
                      Ne(this.i, this.l, a, "[Invalid Chunked Response]"),
                        Ge(this),
                        Ke(this);
                  } else Ne(this.i, this.l, a, null), We(this, a);
                  4 == d && Ge(this),
                    this.o &&
                      !this.J &&
                      (4 == d ? cn(this.j, this) : ((this.o = !1), je(this)));
                } else
                  (function (e) {
                    const t = {};
                    e = (
                      (e.g && 2 <= zt(e) && e.g.getAllResponseHeaders()) ||
                      ""
                    ).split("\r\n");
                    for (let r = 0; r < e.length; r++) {
                      if (f(e[r])) continue;
                      var n = S(e[r]);
                      const i = n[0];
                      if ("string" != typeof (n = n[1])) continue;
                      n = n.trim();
                      const s = t[i] || [];
                      (t[i] = s), s.push(n);
                    }
                    !(function (e, t) {
                      for (const n in e) t.call(void 0, e[n], n, e);
                    })(t, function (e) {
                      return e.join(", ");
                    });
                  })(this.g),
                    400 == n && 0 < a.indexOf("Unknown SID")
                      ? ((this.s = 3), ke(12))
                      : ((this.s = 0), ke(13)),
                    Ge(this),
                    Ke(this);
              }
            }
        } catch (e) {}
      }),
      (Me.prototype.cancel = function () {
        (this.J = !0), Ge(this);
      }),
      (Me.prototype.ba = function () {
        this.B = null;
        const e = Date.now();
        0 <= e - this.S
          ? ((function (e, t) {
              e.info(function () {
                return "TIMEOUT: " + t;
              });
            })(this.i, this.A),
            2 != this.L && (Ie(), ke(17)),
            Ge(this),
            (this.s = 2),
            Ke(this))
          : $e(this, this.S - e);
      });
    var Qe = class {
      constructor(e, t) {
        (this.g = e), (this.map = t);
      }
    };
    function Je(e) {
      (this.l = e || 10),
        i.PerformanceNavigationTiming
          ? (e =
              0 < (e = i.performance.getEntriesByType("navigation")).length &&
              ("hq" == e[0].nextHopProtocol || "h2" == e[0].nextHopProtocol))
          : (e = !!(
              i.chrome &&
              i.chrome.loadTimes &&
              i.chrome.loadTimes() &&
              i.chrome.loadTimes().wasFetchedViaSpdy
            )),
        (this.j = e ? this.l : 1),
        (this.g = null),
        1 < this.j && (this.g = new Set()),
        (this.h = null),
        (this.i = []);
    }
    function Ye(e) {
      return !!e.h || (!!e.g && e.g.size >= e.j);
    }
    function Xe(e) {
      return e.h ? 1 : e.g ? e.g.size : 0;
    }
    function Ze(e, t) {
      return e.h ? e.h == t : !!e.g && e.g.has(t);
    }
    function et(e, t) {
      e.g ? e.g.add(t) : (e.h = t);
    }
    function tt(e, t) {
      e.h && e.h == t ? (e.h = null) : e.g && e.g.has(t) && e.g.delete(t);
    }
    function nt(e) {
      if (null != e.h) return e.i.concat(e.h.D);
      if (null != e.g && 0 !== e.g.size) {
        let t = e.i;
        for (const n of e.g.values()) t = t.concat(n.D);
        return t;
      }
      return d(e.i);
    }
    function rt(e, t) {
      if (e.forEach && "function" == typeof e.forEach) e.forEach(t, void 0);
      else if (s(e) || "string" == typeof e)
        Array.prototype.forEach.call(e, t, void 0);
      else
        for (
          var n = (function (e) {
              if (e.na && "function" == typeof e.na) return e.na();
              if (!e.V || "function" != typeof e.V) {
                if ("undefined" != typeof Map && e instanceof Map)
                  return Array.from(e.keys());
                if (!("undefined" != typeof Set && e instanceof Set)) {
                  if (s(e) || "string" == typeof e) {
                    var t = [];
                    e = e.length;
                    for (var n = 0; n < e; n++) t.push(n);
                    return t;
                  }
                  (t = []), (n = 0);
                  for (const r in e) t[n++] = r;
                  return t;
                }
              }
            })(e),
            r = (function (e) {
              if (e.V && "function" == typeof e.V) return e.V();
              if (
                ("undefined" != typeof Map && e instanceof Map) ||
                ("undefined" != typeof Set && e instanceof Set)
              )
                return Array.from(e.values());
              if ("string" == typeof e) return e.split("");
              if (s(e)) {
                for (var t = [], n = e.length, r = 0; r < n; r++) t.push(e[r]);
                return t;
              }
              for (r in ((t = []), (n = 0), e)) t[n++] = e[r];
              return t;
            })(e),
            i = r.length,
            o = 0;
          o < i;
          o++
        )
          t.call(void 0, r[o], n && n[o], e);
    }
    Je.prototype.cancel = function () {
      if (((this.i = nt(this)), this.h)) this.h.cancel(), (this.h = null);
      else if (this.g && 0 !== this.g.size) {
        for (const e of this.g.values()) e.cancel();
        this.g.clear();
      }
    };
    var it = RegExp(
      "^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$"
    );
    function st(e) {
      if (
        ((this.g = this.o = this.j = ""),
        (this.s = null),
        (this.m = this.l = ""),
        (this.h = !1),
        e instanceof st)
      ) {
        (this.h = e.h),
          at(this, e.j),
          (this.o = e.o),
          (this.g = e.g),
          ct(this, e.s),
          (this.l = e.l);
        var t = e.i,
          n = new wt();
        (n.i = t.i),
          t.g && ((n.g = new Map(t.g)), (n.h = t.h)),
          lt(this, n),
          (this.m = e.m);
      } else
        e && (t = String(e).match(it))
          ? ((this.h = !1),
            at(this, t[1] || "", !0),
            (this.o = dt(t[2] || "")),
            (this.g = dt(t[3] || "", !0)),
            ct(this, t[4]),
            (this.l = dt(t[5] || "", !0)),
            lt(this, t[6] || "", !0),
            (this.m = dt(t[7] || "")))
          : ((this.h = !1), (this.i = new wt(null, this.h)));
    }
    function ot(e) {
      return new st(e);
    }
    function at(e, t, n) {
      (e.j = n ? dt(t, !0) : t), e.j && (e.j = e.j.replace(/:$/, ""));
    }
    function ct(e, t) {
      if (t) {
        if (((t = Number(t)), isNaN(t) || 0 > t))
          throw Error("Bad port number " + t);
        e.s = t;
      } else e.s = null;
    }
    function lt(e, t, n) {
      t instanceof wt
        ? ((e.i = t),
          (function (e, t) {
            t &&
              !e.j &&
              (St(e),
              (e.i = null),
              e.g.forEach(function (e, t) {
                var n = t.toLowerCase();
                t != n && (Et(this, t), Ct(this, n, e));
              }, e)),
              (e.j = t);
          })(e.i, e.h))
        : (n || (t = pt(t, _t)), (e.i = new wt(t, e.h)));
    }
    function ut(e, t, n) {
      e.i.set(t, n);
    }
    function ht(e) {
      return (
        ut(
          e,
          "zx",
          Math.floor(2147483648 * Math.random()).toString(36) +
            Math.abs(
              Math.floor(2147483648 * Math.random()) ^ Date.now()
            ).toString(36)
        ),
        e
      );
    }
    function dt(e, t) {
      return e
        ? t
          ? decodeURI(e.replace(/%25/g, "%2525"))
          : decodeURIComponent(e)
        : "";
    }
    function pt(e, t, n) {
      return "string" == typeof e
        ? ((e = encodeURI(e).replace(t, ft)),
          n && (e = e.replace(/%25([0-9a-fA-F]{2})/g, "%$1")),
          e)
        : null;
    }
    function ft(e) {
      return (
        "%" +
        (((e = e.charCodeAt(0)) >> 4) & 15).toString(16) +
        (15 & e).toString(16)
      );
    }
    st.prototype.toString = function () {
      var e = [],
        t = this.j;
      t && e.push(pt(t, gt, !0), ":");
      var n = this.g;
      return (
        (n || "file" == t) &&
          (e.push("//"),
          (t = this.o) && e.push(pt(t, gt, !0), "@"),
          e.push(
            encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, "%$1")
          ),
          null != (n = this.s) && e.push(":", String(n))),
        (n = this.l) &&
          (this.g && "/" != n.charAt(0) && e.push("/"),
          e.push(pt(n, "/" == n.charAt(0) ? yt : vt, !0))),
        (n = this.i.toString()) && e.push("?", n),
        (n = this.m) && e.push("#", pt(n, bt)),
        e.join("")
      );
    };
    var mt,
      gt = /[#\/\?@]/g,
      vt = /[#\?:]/g,
      yt = /[#\?]/g,
      _t = /[#\?@]/g,
      bt = /#/g;
    function wt(e, t) {
      (this.h = this.g = null), (this.i = e || null), (this.j = !!t);
    }
    function St(e) {
      e.g ||
        ((e.g = new Map()),
        (e.h = 0),
        e.i &&
          (function (e, t) {
            if (e) {
              e = e.split("&");
              for (var n = 0; n < e.length; n++) {
                var r = e[n].indexOf("="),
                  i = null;
                if (0 <= r) {
                  var s = e[n].substring(0, r);
                  i = e[n].substring(r + 1);
                } else s = e[n];
                t(s, i ? decodeURIComponent(i.replace(/\+/g, " ")) : "");
              }
            }
          })(e.i, function (t, n) {
            e.add(decodeURIComponent(t.replace(/\+/g, " ")), n);
          }));
    }
    function Et(e, t) {
      St(e),
        (t = kt(e, t)),
        e.g.has(t) && ((e.i = null), (e.h -= e.g.get(t).length), e.g.delete(t));
    }
    function It(e, t) {
      return St(e), (t = kt(e, t)), e.g.has(t);
    }
    function Ct(e, t, n) {
      Et(e, t),
        0 < n.length &&
          ((e.i = null), e.g.set(kt(e, t), d(n)), (e.h += n.length));
    }
    function kt(e, t) {
      return (t = String(t)), e.j && (t = t.toLowerCase()), t;
    }
    function Tt(e, t, n, r, i) {
      try {
        i &&
          ((i.onload = null),
          (i.onerror = null),
          (i.onabort = null),
          (i.ontimeout = null)),
          r(n);
      } catch (e) {}
    }
    function Lt() {
      this.g = new pe();
    }
    function At(e, t, n) {
      const r = n || "";
      try {
        rt(e, function (e, n) {
          let i = e;
          o(e) && (i = he(e)), t.push(r + n + "=" + encodeURIComponent(i));
        });
      } catch (e) {
        throw (t.push(r + "type=" + encodeURIComponent("_badmap")), e);
      }
    }
    function Nt(e) {
      (this.l = e.Ub || null), (this.j = e.eb || !1);
    }
    function Pt(e, t) {
      ne.call(this),
        (this.D = e),
        (this.o = t),
        (this.m = void 0),
        (this.status = this.readyState = 0),
        (this.responseType =
          this.responseText =
          this.response =
          this.statusText =
            ""),
        (this.onreadystatechange = null),
        (this.u = new Headers()),
        (this.h = null),
        (this.B = "GET"),
        (this.A = ""),
        (this.g = !1),
        (this.v = this.j = this.l = null);
    }
    function Ot(e) {
      e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e));
    }
    function Dt(e) {
      (e.readyState = 4), (e.l = null), (e.j = null), (e.v = null), xt(e);
    }
    function xt(e) {
      e.onreadystatechange && e.onreadystatechange.call(e);
    }
    function Mt(e) {
      let t = "";
      return (
        y(e, function (e, n) {
          (t += n), (t += ":"), (t += e), (t += "\r\n");
        }),
        t
      );
    }
    function Rt(e, t, n) {
      e: {
        for (r in n) {
          var r = !1;
          break e;
        }
        r = !0;
      }
      r ||
        ((n = Mt(n)),
        "string" == typeof e
          ? null != n && encodeURIComponent(String(n))
          : ut(e, t, n));
    }
    function qt(e) {
      ne.call(this),
        (this.headers = new Map()),
        (this.o = e || null),
        (this.h = !1),
        (this.v = this.g = null),
        (this.D = ""),
        (this.m = 0),
        (this.l = ""),
        (this.j = this.B = this.u = this.A = !1),
        (this.I = null),
        (this.H = ""),
        (this.J = !1);
    }
    ((e = wt.prototype).add = function (e, t) {
      St(this), (this.i = null), (e = kt(this, e));
      var n = this.g.get(e);
      return n || this.g.set(e, (n = [])), n.push(t), (this.h += 1), this;
    }),
      (e.forEach = function (e, t) {
        St(this),
          this.g.forEach(function (n, r) {
            n.forEach(function (n) {
              e.call(t, n, r, this);
            }, this);
          }, this);
      }),
      (e.na = function () {
        St(this);
        const e = Array.from(this.g.values()),
          t = Array.from(this.g.keys()),
          n = [];
        for (let r = 0; r < t.length; r++) {
          const i = e[r];
          for (let e = 0; e < i.length; e++) n.push(t[r]);
        }
        return n;
      }),
      (e.V = function (e) {
        St(this);
        let t = [];
        if ("string" == typeof e)
          It(this, e) && (t = t.concat(this.g.get(kt(this, e))));
        else {
          e = Array.from(this.g.values());
          for (let n = 0; n < e.length; n++) t = t.concat(e[n]);
        }
        return t;
      }),
      (e.set = function (e, t) {
        return (
          St(this),
          (this.i = null),
          It(this, (e = kt(this, e))) && (this.h -= this.g.get(e).length),
          this.g.set(e, [t]),
          (this.h += 1),
          this
        );
      }),
      (e.get = function (e, t) {
        return e && 0 < (e = this.V(e)).length ? String(e[0]) : t;
      }),
      (e.toString = function () {
        if (this.i) return this.i;
        if (!this.g) return "";
        const e = [],
          t = Array.from(this.g.keys());
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          const s = encodeURIComponent(String(r)),
            o = this.V(r);
          for (r = 0; r < o.length; r++) {
            var i = s;
            "" !== o[r] && (i += "=" + encodeURIComponent(String(o[r]))),
              e.push(i);
          }
        }
        return (this.i = e.join("&"));
      }),
      h(Nt, fe),
      (Nt.prototype.g = function () {
        return new Pt(this.l, this.j);
      }),
      (Nt.prototype.i =
        ((mt = {}),
        function () {
          return mt;
        })),
      h(Pt, ne),
      ((e = Pt.prototype).open = function (e, t) {
        if (0 != this.readyState)
          throw (this.abort(), Error("Error reopening a connection"));
        (this.B = e), (this.A = t), (this.readyState = 1), xt(this);
      }),
      (e.send = function (e) {
        if (1 != this.readyState)
          throw (this.abort(), Error("need to call open() first. "));
        this.g = !0;
        const t = {
          headers: this.u,
          method: this.B,
          credentials: this.m,
          cache: void 0,
        };
        e && (t.body = e),
          (this.D || i)
            .fetch(new Request(this.A, t))
            .then(this.Sa.bind(this), this.ga.bind(this));
      }),
      (e.abort = function () {
        (this.response = this.responseText = ""),
          (this.u = new Headers()),
          (this.status = 0),
          this.j && this.j.cancel("Request was aborted.").catch(() => {}),
          1 <= this.readyState &&
            this.g &&
            4 != this.readyState &&
            ((this.g = !1), Dt(this)),
          (this.readyState = 0);
      }),
      (e.Sa = function (e) {
        if (
          this.g &&
          ((this.l = e),
          this.h ||
            ((this.status = this.l.status),
            (this.statusText = this.l.statusText),
            (this.h = e.headers),
            (this.readyState = 2),
            xt(this)),
          this.g && ((this.readyState = 3), xt(this), this.g))
        )
          if ("arraybuffer" === this.responseType)
            e.arrayBuffer().then(this.Qa.bind(this), this.ga.bind(this));
          else if (void 0 !== i.ReadableStream && "body" in e) {
            if (((this.j = e.body.getReader()), this.o)) {
              if (this.responseType)
                throw Error(
                  'responseType must be empty for "streamBinaryChunks" mode responses.'
                );
              this.response = [];
            } else
              (this.response = this.responseText = ""),
                (this.v = new TextDecoder());
            Ot(this);
          } else e.text().then(this.Ra.bind(this), this.ga.bind(this));
      }),
      (e.Pa = function (e) {
        if (this.g) {
          if (this.o && e.value) this.response.push(e.value);
          else if (!this.o) {
            var t = e.value ? e.value : new Uint8Array(0);
            (t = this.v.decode(t, { stream: !e.done })) &&
              (this.response = this.responseText += t);
          }
          e.done ? Dt(this) : xt(this), 3 == this.readyState && Ot(this);
        }
      }),
      (e.Ra = function (e) {
        this.g && ((this.response = this.responseText = e), Dt(this));
      }),
      (e.Qa = function (e) {
        this.g && ((this.response = e), Dt(this));
      }),
      (e.ga = function () {
        this.g && Dt(this);
      }),
      (e.setRequestHeader = function (e, t) {
        this.u.append(e, t);
      }),
      (e.getResponseHeader = function (e) {
        return (this.h && this.h.get(e.toLowerCase())) || "";
      }),
      (e.getAllResponseHeaders = function () {
        if (!this.h) return "";
        const e = [],
          t = this.h.entries();
        for (var n = t.next(); !n.done; )
          (n = n.value), e.push(n[0] + ": " + n[1]), (n = t.next());
        return e.join("\r\n");
      }),
      Object.defineProperty(Pt.prototype, "withCredentials", {
        get: function () {
          return "include" === this.m;
        },
        set: function (e) {
          this.m = e ? "include" : "same-origin";
        },
      }),
      h(qt, ne);
    var Ut = /^https?$/i,
      Vt = ["POST", "PUT"];
    function Ft(e, t) {
      (e.h = !1),
        e.g && ((e.j = !0), e.g.abort(), (e.j = !1)),
        (e.l = t),
        (e.m = 5),
        Bt(e),
        jt(e);
    }
    function Bt(e) {
      e.A || ((e.A = !0), re(e, "complete"), re(e, "error"));
    }
    function Ht(e) {
      if (e.h && void 0 !== r && (!e.v[1] || 4 != zt(e) || 2 != e.Z()))
        if (e.u && 4 == zt(e)) se(e.Ea, 0, e);
        else if ((re(e, "readystatechange"), 4 == zt(e))) {
          e.h = !1;
          try {
            const r = e.Z();
            e: switch (r) {
              case 200:
              case 201:
              case 202:
              case 204:
              case 206:
              case 304:
              case 1223:
                var t = !0;
                break e;
              default:
                t = !1;
            }
            var n;
            if (!(n = t)) {
              var s;
              if ((s = 0 === r)) {
                var o = String(e.D).match(it)[1] || null;
                !o &&
                  i.self &&
                  i.self.location &&
                  (o = i.self.location.protocol.slice(0, -1)),
                  (s = !Ut.test(o ? o.toLowerCase() : ""));
              }
              n = s;
            }
            if (n) re(e, "complete"), re(e, "success");
            else {
              e.m = 6;
              try {
                var a = 2 < zt(e) ? e.g.statusText : "";
              } catch (e) {
                a = "";
              }
              (e.l = a + " [" + e.Z() + "]"), Bt(e);
            }
          } finally {
            jt(e);
          }
        }
    }
    function jt(e, t) {
      if (e.g) {
        $t(e);
        const n = e.g,
          r = e.v[0] ? () => {} : null;
        (e.g = null), (e.v = null), t || re(e, "ready");
        try {
          n.onreadystatechange = r;
        } catch (e) {}
      }
    }
    function $t(e) {
      e.I && (i.clearTimeout(e.I), (e.I = null));
    }
    function zt(e) {
      return e.g ? e.g.readyState : 0;
    }
    function Kt(e) {
      try {
        if (!e.g) return null;
        if ("response" in e.g) return e.g.response;
        switch (e.H) {
          case "":
          case "text":
            return e.g.responseText;
          case "arraybuffer":
            if ("mozResponseArrayBuffer" in e.g)
              return e.g.mozResponseArrayBuffer;
        }
        return null;
      } catch (e) {
        return null;
      }
    }
    function Gt(e, t, n) {
      return (n && n.internalChannelParams && n.internalChannelParams[e]) || t;
    }
    function Wt(e) {
      (this.Aa = 0),
        (this.i = []),
        (this.j = new Ae()),
        (this.ia =
          this.qa =
          this.I =
          this.W =
          this.g =
          this.ya =
          this.D =
          this.H =
          this.m =
          this.S =
          this.o =
            null),
        (this.Ya = this.U = 0),
        (this.Va = Gt("failFast", !1, e)),
        (this.F = this.C = this.u = this.s = this.l = null),
        (this.X = !0),
        (this.za = this.T = -1),
        (this.Y = this.v = this.B = 0),
        (this.Ta = Gt("baseRetryDelayMs", 5e3, e)),
        (this.cb = Gt("retryDelaySeedMs", 1e4, e)),
        (this.Wa = Gt("forwardChannelMaxRetries", 2, e)),
        (this.wa = Gt("forwardChannelRequestTimeoutMs", 2e4, e)),
        (this.pa = (e && e.xmlHttpFactory) || void 0),
        (this.Xa = (e && e.Tb) || void 0),
        (this.Ca = (e && e.useFetchStreams) || !1),
        (this.L = void 0),
        (this.J = (e && e.supportsCrossDomainXhr) || !1),
        (this.K = ""),
        (this.h = new Je(e && e.concurrentRequestLimit)),
        (this.Da = new Lt()),
        (this.P = (e && e.fastHandshake) || !1),
        (this.O = (e && e.encodeInitMessageHeaders) || !1),
        this.P && this.O && (this.O = !1),
        (this.Ua = (e && e.Rb) || !1),
        e && e.xa && this.j.xa(),
        e && e.forceLongPolling && (this.X = !1),
        (this.ba = (!this.P && this.X && e && e.detectBufferingProxy) || !1),
        (this.ja = void 0),
        e &&
          e.longPollingTimeout &&
          0 < e.longPollingTimeout &&
          (this.ja = e.longPollingTimeout),
        (this.ca = void 0),
        (this.R = 0),
        (this.M = !1),
        (this.ka = this.A = null);
    }
    function Qt(e) {
      if ((Yt(e), 3 == e.G)) {
        var t = e.U++,
          n = ot(e.I);
        if (
          (ut(n, "SID", e.K),
          ut(n, "RID", t),
          ut(n, "TYPE", "terminate"),
          en(e, n),
          ((t = new Me(e, e.j, t)).L = 2),
          (t.v = ht(ot(n))),
          (n = !1),
          i.navigator && i.navigator.sendBeacon)
        )
          try {
            n = i.navigator.sendBeacon(t.v.toString(), "");
          } catch (e) {}
        !n && i.Image && ((new Image().src = t.v), (n = !0)),
          n || ((t.g = pn(t.j, null)), t.g.ea(t.v)),
          (t.F = Date.now()),
          je(t);
      }
      hn(e);
    }
    function Jt(e) {
      e.g && (sn(e), e.g.cancel(), (e.g = null));
    }
    function Yt(e) {
      Jt(e),
        e.u && (i.clearTimeout(e.u), (e.u = null)),
        an(e),
        e.h.cancel(),
        e.s && ("number" == typeof e.s && i.clearTimeout(e.s), (e.s = null));
    }
    function Xt(e) {
      if (!Ye(e.h) && !e.s) {
        e.s = !0;
        var t = e.Ga;
        T || N(), L || (T(), (L = !0)), A.add(t, e), (e.B = 0);
      }
    }
    function Zt(e, t) {
      var n;
      n = t ? t.l : e.U++;
      const r = ot(e.I);
      ut(r, "SID", e.K),
        ut(r, "RID", n),
        ut(r, "AID", e.T),
        en(e, r),
        e.m && e.o && Rt(r, e.m, e.o),
        (n = new Me(e, e.j, n, e.B + 1)),
        null === e.m && (n.H = e.o),
        t && (e.i = t.D.concat(e.i)),
        (t = tn(e, n, 1e3)),
        (n.I = Math.round(0.5 * e.wa) + Math.round(0.5 * e.wa * Math.random())),
        et(e.h, n),
        Ve(n, r, t);
    }
    function en(e, t) {
      e.H &&
        y(e.H, function (e, n) {
          ut(t, n, e);
        }),
        e.l &&
          rt({}, function (e, n) {
            ut(t, n, e);
          });
    }
    function tn(e, t, n) {
      n = Math.min(e.i.length, n);
      var r = e.l ? l(e.l.Na, e.l, e) : null;
      e: {
        var i = e.i;
        let t = -1;
        for (;;) {
          const e = ["count=" + n];
          -1 == t
            ? 0 < n
              ? ((t = i[0].g), e.push("ofs=" + t))
              : (t = 0)
            : e.push("ofs=" + t);
          let s = !0;
          for (let o = 0; o < n; o++) {
            let n = i[o].g;
            const a = i[o].map;
            if (((n -= t), 0 > n)) (t = Math.max(0, i[o].g - 100)), (s = !1);
            else
              try {
                At(a, e, "req" + n + "_");
              } catch (e) {
                r && r(a);
              }
          }
          if (s) {
            r = e.join("&");
            break e;
          }
        }
      }
      return (e = e.i.splice(0, n)), (t.D = e), r;
    }
    function nn(e) {
      if (!e.g && !e.u) {
        e.Y = 1;
        var t = e.Fa;
        T || N(), L || (T(), (L = !0)), A.add(t, e), (e.v = 0);
      }
    }
    function rn(e) {
      return (
        !(e.g || e.u || 3 <= e.v) &&
        (e.Y++, (e.u = Le(l(e.Fa, e), ln(e, e.v))), e.v++, !0)
      );
    }
    function sn(e) {
      null != e.A && (i.clearTimeout(e.A), (e.A = null));
    }
    function on(e) {
      (e.g = new Me(e, e.j, "rpc", e.Y)),
        null === e.m && (e.g.H = e.o),
        (e.g.O = 0);
      var t = ot(e.qa);
      ut(t, "RID", "rpc"),
        ut(t, "SID", e.K),
        ut(t, "AID", e.T),
        ut(t, "CI", e.F ? "0" : "1"),
        !e.F && e.ja && ut(t, "TO", e.ja),
        ut(t, "TYPE", "xmlhttp"),
        en(e, t),
        e.m && e.o && Rt(t, e.m, e.o),
        e.L && (e.g.I = e.L);
      var n = e.g;
      (e = e.ia),
        (n.L = 1),
        (n.v = ht(ot(t))),
        (n.m = null),
        (n.P = !0),
        Fe(n, e);
    }
    function an(e) {
      null != e.C && (i.clearTimeout(e.C), (e.C = null));
    }
    function cn(e, t) {
      var n = null;
      if (e.g == t) {
        an(e), sn(e), (e.g = null);
        var r = 2;
      } else {
        if (!Ze(e.h, t)) return;
        (n = t.D), tt(e.h, t), (r = 1);
      }
      if (0 != e.G)
        if (t.o)
          if (1 == r) {
            (n = t.m ? t.m.length : 0), (t = Date.now() - t.F);
            var i = e.B;
            re((r = Se()), new Te(r, n)), Xt(e);
          } else nn(e);
        else if (
          3 == (i = t.s) ||
          (0 == i && 0 < t.X) ||
          !(
            (1 == r &&
              (function (e, t) {
                return !(
                  Xe(e.h) >= e.h.j - (e.s ? 1 : 0) ||
                  (e.s
                    ? ((e.i = t.D.concat(e.i)), 0)
                    : 1 == e.G ||
                      2 == e.G ||
                      e.B >= (e.Va ? 0 : e.Wa) ||
                      ((e.s = Le(l(e.Ga, e, t), ln(e, e.B))), e.B++, 0))
                );
              })(e, t)) ||
            (2 == r && rn(e))
          )
        )
          switch (
            (n && 0 < n.length && ((t = e.h), (t.i = t.i.concat(n))), i)
          ) {
            case 1:
              un(e, 5);
              break;
            case 4:
              un(e, 10);
              break;
            case 3:
              un(e, 6);
              break;
            default:
              un(e, 2);
          }
    }
    function ln(e, t) {
      let n = e.Ta + Math.floor(Math.random() * e.cb);
      return e.isActive() || (n *= 2), n * t;
    }
    function un(e, t) {
      if ((e.j.info("Error code " + t), 2 == t)) {
        var n = l(e.fb, e),
          r = e.Xa;
        const t = !r;
        (r = new st(r || "//www.google.com/images/cleardot.gif")),
          (i.location && "http" == i.location.protocol) || at(r, "https"),
          ht(r),
          t
            ? (function (e, t) {
                const n = new Ae();
                if (i.Image) {
                  const r = new Image();
                  (r.onload = u(Tt, n, "TestLoadImage: loaded", !0, t, r)),
                    (r.onerror = u(Tt, n, "TestLoadImage: error", !1, t, r)),
                    (r.onabort = u(Tt, n, "TestLoadImage: abort", !1, t, r)),
                    (r.ontimeout = u(
                      Tt,
                      n,
                      "TestLoadImage: timeout",
                      !1,
                      t,
                      r
                    )),
                    i.setTimeout(function () {
                      r.ontimeout && r.ontimeout();
                    }, 1e4),
                    (r.src = e);
                } else t(!1);
              })(r.toString(), n)
            : (function (e, t) {
                new Ae();
                const n = new AbortController(),
                  r = setTimeout(() => {
                    n.abort(), Tt(0, 0, !1, t);
                  }, 1e4);
                fetch(e, { signal: n.signal })
                  .then((e) => {
                    clearTimeout(r), e.ok ? Tt(0, 0, !0, t) : Tt(0, 0, !1, t);
                  })
                  .catch(() => {
                    clearTimeout(r), Tt(0, 0, !1, t);
                  });
              })(r.toString(), n);
      } else ke(2);
      (e.G = 0), e.l && e.l.sa(t), hn(e), Yt(e);
    }
    function hn(e) {
      if (((e.G = 0), (e.ka = []), e.l)) {
        const t = nt(e.h);
        (0 == t.length && 0 == e.i.length) ||
          (p(e.ka, t),
          p(e.ka, e.i),
          (e.h.i.length = 0),
          d(e.i),
          (e.i.length = 0)),
          e.l.ra();
      }
    }
    function dn(e, t, n) {
      var r = n instanceof st ? ot(n) : new st(n);
      if ("" != r.g) t && (r.g = t + "." + r.g), ct(r, r.s);
      else {
        var s = i.location;
        (r = s.protocol),
          (t = t ? t + "." + s.hostname : s.hostname),
          (s = +s.port);
        var o = new st(null);
        r && at(o, r), t && (o.g = t), s && ct(o, s), n && (o.l = n), (r = o);
      }
      return (
        (n = e.D),
        (t = e.ya),
        n && t && ut(r, n, t),
        ut(r, "VER", e.la),
        en(e, r),
        r
      );
    }
    function pn(e, t, n) {
      if (t && !e.J)
        throw Error("Can't create secondary domain capable XhrIo object.");
      return (
        (t = e.Ca && !e.pa ? new qt(new Nt({ eb: n })) : new qt(e.pa)).Ha(e.J),
        t
      );
    }
    function fn() {}
    function mn() {}
    function gn(e, t) {
      ne.call(this),
        (this.g = new Wt(t)),
        (this.l = e),
        (this.h = (t && t.messageUrlParams) || null),
        (e = (t && t.messageHeaders) || null),
        t &&
          t.clientProtocolHeaderRequired &&
          (e
            ? (e["X-Client-Protocol"] = "webchannel")
            : (e = { "X-Client-Protocol": "webchannel" })),
        (this.g.o = e),
        (e = (t && t.initMessageHeaders) || null),
        t &&
          t.messageContentType &&
          (e
            ? (e["X-WebChannel-Content-Type"] = t.messageContentType)
            : (e = { "X-WebChannel-Content-Type": t.messageContentType })),
        t &&
          t.va &&
          (e
            ? (e["X-WebChannel-Client-Profile"] = t.va)
            : (e = { "X-WebChannel-Client-Profile": t.va })),
        (this.g.S = e),
        (e = t && t.Sb) && !f(e) && (this.g.m = e),
        (this.v = (t && t.supportsCrossDomainXhr) || !1),
        (this.u = (t && t.sendRawJson) || !1),
        (t = t && t.httpSessionIdParam) &&
          !f(t) &&
          ((this.g.D = t),
          null !== (e = this.h) && t in e && t in (e = this.h) && delete e[t]),
        (this.j = new _n(this));
    }
    function vn(e) {
      ye.call(this),
        e.__headers__ &&
          ((this.headers = e.__headers__),
          (this.statusCode = e.__status__),
          delete e.__headers__,
          delete e.__status__);
      var t = e.__sm__;
      if (t) {
        e: {
          for (const n in t) {
            e = n;
            break e;
          }
          e = void 0;
        }
        (this.i = e) &&
          ((e = this.i), (t = null !== t && e in t ? t[e] : void 0)),
          (this.data = t);
      } else this.data = e;
    }
    function yn() {
      _e.call(this), (this.status = 1);
    }
    function _n(e) {
      this.g = e;
    }
    ((e = qt.prototype).Ha = function (e) {
      this.J = e;
    }),
      (e.ea = function (e, t, n, r) {
        if (this.g)
          throw Error(
            "[goog.net.XhrIo] Object is active with another request=" +
              this.D +
              "; newUri=" +
              e
          );
        (t = t ? t.toUpperCase() : "GET"),
          (this.D = e),
          (this.l = ""),
          (this.m = 0),
          (this.A = !1),
          (this.h = !0),
          (this.g = this.o ? this.o.g() : Pe.g()),
          (this.v = this.o ? me(this.o) : me(Pe)),
          (this.g.onreadystatechange = l(this.Ea, this));
        try {
          (this.B = !0), this.g.open(t, String(e), !0), (this.B = !1);
        } catch (e) {
          return void Ft(this, e);
        }
        if (((e = n || ""), (n = new Map(this.headers)), r))
          if (Object.getPrototypeOf(r) === Object.prototype)
            for (var s in r) n.set(s, r[s]);
          else {
            if ("function" != typeof r.keys || "function" != typeof r.get)
              throw Error("Unknown input type for opt_headers: " + String(r));
            for (const e of r.keys()) n.set(e, r.get(e));
          }
        (r = Array.from(n.keys()).find(
          (e) => "content-type" == e.toLowerCase()
        )),
          (s = i.FormData && e instanceof i.FormData),
          !(0 <= Array.prototype.indexOf.call(Vt, t, void 0)) ||
            r ||
            s ||
            n.set(
              "Content-Type",
              "application/x-www-form-urlencoded;charset=utf-8"
            );
        for (const [e, t] of n) this.g.setRequestHeader(e, t);
        this.H && (this.g.responseType = this.H),
          "withCredentials" in this.g &&
            this.g.withCredentials !== this.J &&
            (this.g.withCredentials = this.J);
        try {
          $t(this), (this.u = !0), this.g.send(e), (this.u = !1);
        } catch (e) {
          Ft(this, e);
        }
      }),
      (e.abort = function (e) {
        this.g &&
          this.h &&
          ((this.h = !1),
          (this.j = !0),
          this.g.abort(),
          (this.j = !1),
          (this.m = e || 7),
          re(this, "complete"),
          re(this, "abort"),
          jt(this));
      }),
      (e.N = function () {
        this.g &&
          (this.h &&
            ((this.h = !1), (this.j = !0), this.g.abort(), (this.j = !1)),
          jt(this, !0)),
          qt.aa.N.call(this);
      }),
      (e.Ea = function () {
        this.s || (this.B || this.u || this.j ? Ht(this) : this.bb());
      }),
      (e.bb = function () {
        Ht(this);
      }),
      (e.isActive = function () {
        return !!this.g;
      }),
      (e.Z = function () {
        try {
          return 2 < zt(this) ? this.g.status : -1;
        } catch (e) {
          return -1;
        }
      }),
      (e.oa = function () {
        try {
          return this.g ? this.g.responseText : "";
        } catch (e) {
          return "";
        }
      }),
      (e.Oa = function (e) {
        if (this.g) {
          var t = this.g.responseText;
          return e && 0 == t.indexOf(e) && (t = t.substring(e.length)), de(t);
        }
      }),
      (e.Ba = function () {
        return this.m;
      }),
      (e.Ka = function () {
        return "string" == typeof this.l ? this.l : String(this.l);
      }),
      ((e = Wt.prototype).la = 8),
      (e.G = 1),
      (e.connect = function (e, t, n, r) {
        ke(0),
          (this.W = e),
          (this.H = t || {}),
          n && void 0 !== r && ((this.H.OSID = n), (this.H.OAID = r)),
          (this.F = this.X),
          (this.I = dn(this, null, this.W)),
          Xt(this);
      }),
      (e.Ga = function (e) {
        if (this.s)
          if (((this.s = null), 1 == this.G)) {
            if (!e) {
              (this.U = Math.floor(1e5 * Math.random())), (e = this.U++);
              const i = new Me(this, this.j, e);
              let s = this.o;
              if (
                (this.S && (s ? ((s = _(s)), w(s, this.S)) : (s = this.S)),
                null !== this.m || this.O || ((i.H = s), (s = null)),
                this.P)
              )
                e: {
                  for (var t = 0, n = 0; n < this.i.length; n++) {
                    var r = this.i[n];
                    if (
                      void 0 ===
                      (r =
                        "__data__" in r.map &&
                        "string" == typeof (r = r.map.__data__)
                          ? r.length
                          : void 0)
                    )
                      break;
                    if (4096 < (t += r)) {
                      t = n;
                      break e;
                    }
                    if (4096 === t || n === this.i.length - 1) {
                      t = n + 1;
                      break e;
                    }
                  }
                  t = 1e3;
                }
              else t = 1e3;
              (t = tn(this, i, t)),
                ut((n = ot(this.I)), "RID", e),
                ut(n, "CVER", 22),
                this.D && ut(n, "X-HTTP-Session-Id", this.D),
                en(this, n),
                s &&
                  (this.O
                    ? (t =
                        "headers=" +
                        encodeURIComponent(String(Mt(s))) +
                        "&" +
                        t)
                    : this.m && Rt(n, this.m, s)),
                et(this.h, i),
                this.Ua && ut(n, "TYPE", "init"),
                this.P
                  ? (ut(n, "$req", t),
                    ut(n, "SID", "null"),
                    (i.T = !0),
                    Ve(i, n, null))
                  : Ve(i, n, t),
                (this.G = 2);
            }
          } else
            3 == this.G &&
              (e ? Zt(this, e) : 0 == this.i.length || Ye(this.h) || Zt(this));
      }),
      (e.Fa = function () {
        if (
          ((this.u = null),
          on(this),
          this.ba && !(this.M || null == this.g || 0 >= this.R))
        ) {
          var e = 2 * this.R;
          this.j.info("BP detection timer enabled: " + e),
            (this.A = Le(l(this.ab, this), e));
        }
      }),
      (e.ab = function () {
        this.A &&
          ((this.A = null),
          this.j.info("BP detection timeout reached."),
          this.j.info("Buffering proxy detected and switch to long-polling!"),
          (this.F = !1),
          (this.M = !0),
          ke(10),
          Jt(this),
          on(this));
      }),
      (e.Za = function () {
        null != this.C && ((this.C = null), Jt(this), rn(this), ke(19));
      }),
      (e.fb = function (e) {
        e
          ? (this.j.info("Successfully pinged google.com"), ke(2))
          : (this.j.info("Failed to ping google.com"), ke(1));
      }),
      (e.isActive = function () {
        return !!this.l && this.l.isActive(this);
      }),
      ((e = fn.prototype).ua = function () {}),
      (e.ta = function () {}),
      (e.sa = function () {}),
      (e.ra = function () {}),
      (e.isActive = function () {
        return !0;
      }),
      (e.Na = function () {}),
      (mn.prototype.g = function (e, t) {
        return new gn(e, t);
      }),
      h(gn, ne),
      (gn.prototype.m = function () {
        (this.g.l = this.j),
          this.v && (this.g.J = !0),
          this.g.connect(this.l, this.h || void 0);
      }),
      (gn.prototype.close = function () {
        Qt(this.g);
      }),
      (gn.prototype.o = function (e) {
        var t = this.g;
        if ("string" == typeof e) {
          var n = {};
          (n.__data__ = e), (e = n);
        } else this.u && (((n = {}).__data__ = he(e)), (e = n));
        t.i.push(new Qe(t.Ya++, e)), 3 == t.G && Xt(t);
      }),
      (gn.prototype.N = function () {
        (this.g.l = null),
          delete this.j,
          Qt(this.g),
          delete this.g,
          gn.aa.N.call(this);
      }),
      h(vn, ye),
      h(yn, _e),
      h(_n, fn),
      (_n.prototype.ua = function () {
        re(this.g, "a");
      }),
      (_n.prototype.ta = function (e) {
        re(this.g, new vn(e));
      }),
      (_n.prototype.sa = function (e) {
        re(this.g, new yn());
      }),
      (_n.prototype.ra = function () {
        re(this.g, "b");
      }),
      (mn.prototype.createWebChannel = mn.prototype.g),
      (gn.prototype.send = gn.prototype.o),
      (gn.prototype.open = gn.prototype.m),
      (gn.prototype.close = gn.prototype.close),
      ($i = Ki.createWebChannelTransport =
        function () {
          return new mn();
        }),
      (ji = Ki.getStatEventTarget =
        function () {
          return Se();
        }),
      (Hi = Ki.Event = be),
      (Bi = Ki.Stat =
        {
          mb: 0,
          pb: 1,
          qb: 2,
          Jb: 3,
          Ob: 4,
          Lb: 5,
          Mb: 6,
          Kb: 7,
          Ib: 8,
          Nb: 9,
          PROXY: 10,
          NOPROXY: 11,
          Gb: 12,
          Cb: 13,
          Db: 14,
          Bb: 15,
          Eb: 16,
          Fb: 17,
          ib: 18,
          hb: 19,
          jb: 20,
        }),
      (Oe.NO_ERROR = 0),
      (Oe.TIMEOUT = 8),
      (Oe.HTTP_ERROR = 6),
      (Fi = Ki.ErrorCode = Oe),
      (De.COMPLETE = "complete"),
      (Vi = Ki.EventType = De),
      (ge.EventType = ve),
      (ve.OPEN = "a"),
      (ve.CLOSE = "b"),
      (ve.ERROR = "c"),
      (ve.MESSAGE = "d"),
      (ne.prototype.listen = ne.prototype.K),
      (Ui = Ki.WebChannel = ge),
      (Ki.FetchXmlHttpFactory = Nt),
      (qt.prototype.listenOnce = qt.prototype.L),
      (qt.prototype.getLastError = qt.prototype.Ka),
      (qt.prototype.getLastErrorCode = qt.prototype.Ba),
      (qt.prototype.getStatus = qt.prototype.Z),
      (qt.prototype.getResponseJson = qt.prototype.Oa),
      (qt.prototype.getResponseText = qt.prototype.oa),
      (qt.prototype.send = qt.prototype.ea),
      (qt.prototype.setWithCredentials = qt.prototype.Ha),
      (qi = Ki.XhrIo = qt);
  }).apply(
    void 0 !== zi
      ? zi
      : "undefined" != typeof self
      ? self
      : "undefined" != typeof window
      ? window
      : {}
  );
  const Gi = "@firebase/firestore";
  class Wi {
    constructor(e) {
      this.uid = e;
    }
    isAuthenticated() {
      return null != this.uid;
    }
    toKey() {
      return this.isAuthenticated() ? "uid:" + this.uid : "anonymous-user";
    }
    isEqual(e) {
      return e.uid === this.uid;
    }
  }
  (Wi.UNAUTHENTICATED = new Wi(null)),
    (Wi.GOOGLE_CREDENTIALS = new Wi("google-credentials-uid")),
    (Wi.FIRST_PARTY = new Wi("first-party-uid")),
    (Wi.MOCK_USER = new Wi("mock-user"));
  let Qi = "10.14.0";
  const Ji = new U("@firebase/firestore");
  function Yi() {
    return Ji.logLevel;
  }
  function Xi(e, ...t) {
    if (Ji.logLevel <= D.DEBUG) {
      const n = t.map(ts);
      Ji.debug(`Firestore (${Qi}): ${e}`, ...n);
    }
  }
  function Zi(e, ...t) {
    if (Ji.logLevel <= D.ERROR) {
      const n = t.map(ts);
      Ji.error(`Firestore (${Qi}): ${e}`, ...n);
    }
  }
  function es(e, ...t) {
    if (Ji.logLevel <= D.WARN) {
      const n = t.map(ts);
      Ji.warn(`Firestore (${Qi}): ${e}`, ...n);
    }
  }
  function ts(e) {
    if ("string" == typeof e) return e;
    try {
      return (function (e) {
        return JSON.stringify(e);
      })(e);
    } catch (t) {
      return e;
    }
  }
  function ns(e = "Unexpected state") {
    const t = `FIRESTORE (${Qi}) INTERNAL ASSERTION FAILED: ` + e;
    throw (Zi(t), new Error(t));
  }
  function rs(e, t) {
    e || ns();
  }
  function is(e, t) {
    return e;
  }
  const ss = {
    OK: "ok",
    CANCELLED: "cancelled",
    UNKNOWN: "unknown",
    INVALID_ARGUMENT: "invalid-argument",
    DEADLINE_EXCEEDED: "deadline-exceeded",
    NOT_FOUND: "not-found",
    ALREADY_EXISTS: "already-exists",
    PERMISSION_DENIED: "permission-denied",
    UNAUTHENTICATED: "unauthenticated",
    RESOURCE_EXHAUSTED: "resource-exhausted",
    FAILED_PRECONDITION: "failed-precondition",
    ABORTED: "aborted",
    OUT_OF_RANGE: "out-of-range",
    UNIMPLEMENTED: "unimplemented",
    INTERNAL: "internal",
    UNAVAILABLE: "unavailable",
    DATA_LOSS: "data-loss",
  };
  class os extends v {
    constructor(e, t) {
      super(e, t),
        (this.code = e),
        (this.message = t),
        (this.toString = () =>
          `${this.name}: [code=${this.code}]: ${this.message}`);
    }
  }
  class as {
    constructor() {
      this.promise = new Promise((e, t) => {
        (this.resolve = e), (this.reject = t);
      });
    }
  }
  class cs {
    constructor(e, t) {
      (this.user = t),
        (this.type = "OAuth"),
        (this.headers = new Map()),
        this.headers.set("Authorization", `Bearer ${e}`);
    }
  }
  class ls {
    getToken() {
      return Promise.resolve(null);
    }
    invalidateToken() {}
    start(e, t) {
      e.enqueueRetryable(() => t(Wi.UNAUTHENTICATED));
    }
    shutdown() {}
  }
  class us {
    constructor(e) {
      (this.token = e), (this.changeListener = null);
    }
    getToken() {
      return Promise.resolve(this.token);
    }
    invalidateToken() {}
    start(e, t) {
      (this.changeListener = t), e.enqueueRetryable(() => t(this.token.user));
    }
    shutdown() {
      this.changeListener = null;
    }
  }
  class hs {
    constructor(e) {
      (this.t = e),
        (this.currentUser = Wi.UNAUTHENTICATED),
        (this.i = 0),
        (this.forceRefresh = !1),
        (this.auth = null);
    }
    start(e, t) {
      rs(void 0 === this.o);
      let n = this.i;
      const r = (e) =>
        this.i !== n ? ((n = this.i), t(e)) : Promise.resolve();
      let i = new as();
      this.o = () => {
        this.i++,
          (this.currentUser = this.u()),
          i.resolve(),
          (i = new as()),
          e.enqueueRetryable(() => r(this.currentUser));
      };
      const s = () => {
          const t = i;
          e.enqueueRetryable(async () => {
            await t.promise, await r(this.currentUser);
          });
        },
        o = (e) => {
          Xi("FirebaseAuthCredentialsProvider", "Auth detected"),
            (this.auth = e),
            this.o && (this.auth.addAuthTokenListener(this.o), s());
        };
      this.t.onInit((e) => o(e)),
        setTimeout(() => {
          if (!this.auth) {
            const e = this.t.getImmediate({ optional: !0 });
            e
              ? o(e)
              : (Xi("FirebaseAuthCredentialsProvider", "Auth not yet detected"),
                i.resolve(),
                (i = new as()));
          }
        }, 0),
        s();
    }
    getToken() {
      const e = this.i,
        t = this.forceRefresh;
      return (
        (this.forceRefresh = !1),
        this.auth
          ? this.auth
              .getToken(t)
              .then((t) =>
                this.i !== e
                  ? (Xi(
                      "FirebaseAuthCredentialsProvider",
                      "getToken aborted due to token change."
                    ),
                    this.getToken())
                  : t
                  ? (rs("string" == typeof t.accessToken),
                    new cs(t.accessToken, this.currentUser))
                  : null
              )
          : Promise.resolve(null)
      );
    }
    invalidateToken() {
      this.forceRefresh = !0;
    }
    shutdown() {
      this.auth && this.o && this.auth.removeAuthTokenListener(this.o),
        (this.o = void 0);
    }
    u() {
      const e = this.auth && this.auth.getUid();
      return rs(null === e || "string" == typeof e), new Wi(e);
    }
  }
  class ds {
    constructor(e, t, n) {
      (this.l = e),
        (this.h = t),
        (this.P = n),
        (this.type = "FirstParty"),
        (this.user = Wi.FIRST_PARTY),
        (this.I = new Map());
    }
    T() {
      return this.P ? this.P() : null;
    }
    get headers() {
      this.I.set("X-Goog-AuthUser", this.l);
      const e = this.T();
      return (
        e && this.I.set("Authorization", e),
        this.h && this.I.set("X-Goog-Iam-Authorization-Token", this.h),
        this.I
      );
    }
  }
  class ps {
    constructor(e, t, n) {
      (this.l = e), (this.h = t), (this.P = n);
    }
    getToken() {
      return Promise.resolve(new ds(this.l, this.h, this.P));
    }
    start(e, t) {
      e.enqueueRetryable(() => t(Wi.FIRST_PARTY));
    }
    shutdown() {}
    invalidateToken() {}
  }
  class fs {
    constructor(e) {
      (this.value = e),
        (this.type = "AppCheck"),
        (this.headers = new Map()),
        e &&
          e.length > 0 &&
          this.headers.set("x-firebase-appcheck", this.value);
    }
  }
  class ms {
    constructor(e) {
      (this.A = e),
        (this.forceRefresh = !1),
        (this.appCheck = null),
        (this.R = null);
    }
    start(e, t) {
      rs(void 0 === this.o);
      const n = (e) => {
        null != e.error &&
          Xi(
            "FirebaseAppCheckTokenProvider",
            `Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`
          );
        const n = e.token !== this.R;
        return (
          (this.R = e.token),
          Xi(
            "FirebaseAppCheckTokenProvider",
            `Received ${n ? "new" : "existing"} token.`
          ),
          n ? t(e.token) : Promise.resolve()
        );
      };
      this.o = (t) => {
        e.enqueueRetryable(() => n(t));
      };
      const r = (e) => {
        Xi("FirebaseAppCheckTokenProvider", "AppCheck detected"),
          (this.appCheck = e),
          this.o && this.appCheck.addTokenListener(this.o);
      };
      this.A.onInit((e) => r(e)),
        setTimeout(() => {
          if (!this.appCheck) {
            const e = this.A.getImmediate({ optional: !0 });
            e
              ? r(e)
              : Xi(
                  "FirebaseAppCheckTokenProvider",
                  "AppCheck not yet detected"
                );
          }
        }, 0);
    }
    getToken() {
      const e = this.forceRefresh;
      return (
        (this.forceRefresh = !1),
        this.appCheck
          ? this.appCheck
              .getToken(e)
              .then((e) =>
                e
                  ? (rs("string" == typeof e.token),
                    (this.R = e.token),
                    new fs(e.token))
                  : null
              )
          : Promise.resolve(null)
      );
    }
    invalidateToken() {
      this.forceRefresh = !0;
    }
    shutdown() {
      this.appCheck && this.o && this.appCheck.removeTokenListener(this.o),
        (this.o = void 0);
    }
  }
  function gs(e) {
    const t = "undefined" != typeof self && (self.crypto || self.msCrypto),
      n = new Uint8Array(e);
    if (t && "function" == typeof t.getRandomValues) t.getRandomValues(n);
    else for (let t = 0; t < e; t++) n[t] = Math.floor(256 * Math.random());
    return n;
  }
  class vs {
    static newId() {
      const e =
          "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",
        t = 62 * Math.floor(256 / 62);
      let n = "";
      for (; n.length < 20; ) {
        const r = gs(40);
        for (let i = 0; i < r.length; ++i)
          n.length < 20 && r[i] < t && (n += e.charAt(r[i] % 62));
      }
      return n;
    }
  }
  function ys(e, t) {
    return e < t ? -1 : e > t ? 1 : 0;
  }
  function _s(e, t, n) {
    return e.length === t.length && e.every((e, r) => n(e, t[r]));
  }
  class bs {
    constructor(e, t) {
      if (((this.seconds = e), (this.nanoseconds = t), t < 0))
        throw new os(
          ss.INVALID_ARGUMENT,
          "Timestamp nanoseconds out of range: " + t
        );
      if (t >= 1e9)
        throw new os(
          ss.INVALID_ARGUMENT,
          "Timestamp nanoseconds out of range: " + t
        );
      if (e < -62135596800)
        throw new os(
          ss.INVALID_ARGUMENT,
          "Timestamp seconds out of range: " + e
        );
      if (e >= 253402300800)
        throw new os(
          ss.INVALID_ARGUMENT,
          "Timestamp seconds out of range: " + e
        );
    }
    static now() {
      return bs.fromMillis(Date.now());
    }
    static fromDate(e) {
      return bs.fromMillis(e.getTime());
    }
    static fromMillis(e) {
      const t = Math.floor(e / 1e3),
        n = Math.floor(1e6 * (e - 1e3 * t));
      return new bs(t, n);
    }
    toDate() {
      return new Date(this.toMillis());
    }
    toMillis() {
      return 1e3 * this.seconds + this.nanoseconds / 1e6;
    }
    _compareTo(e) {
      return this.seconds === e.seconds
        ? ys(this.nanoseconds, e.nanoseconds)
        : ys(this.seconds, e.seconds);
    }
    isEqual(e) {
      return e.seconds === this.seconds && e.nanoseconds === this.nanoseconds;
    }
    toString() {
      return (
        "Timestamp(seconds=" +
        this.seconds +
        ", nanoseconds=" +
        this.nanoseconds +
        ")"
      );
    }
    toJSON() {
      return { seconds: this.seconds, nanoseconds: this.nanoseconds };
    }
    valueOf() {
      const e = this.seconds - -62135596800;
      return (
        String(e).padStart(12, "0") +
        "." +
        String(this.nanoseconds).padStart(9, "0")
      );
    }
  }
  class ws {
    constructor(e) {
      this.timestamp = e;
    }
    static fromTimestamp(e) {
      return new ws(e);
    }
    static min() {
      return new ws(new bs(0, 0));
    }
    static max() {
      return new ws(new bs(253402300799, 999999999));
    }
    compareTo(e) {
      return this.timestamp._compareTo(e.timestamp);
    }
    isEqual(e) {
      return this.timestamp.isEqual(e.timestamp);
    }
    toMicroseconds() {
      return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;
    }
    toString() {
      return "SnapshotVersion(" + this.timestamp.toString() + ")";
    }
    toTimestamp() {
      return this.timestamp;
    }
  }
  class Ss {
    constructor(e, t, n) {
      void 0 === t ? (t = 0) : t > e.length && ns(),
        void 0 === n ? (n = e.length - t) : n > e.length - t && ns(),
        (this.segments = e),
        (this.offset = t),
        (this.len = n);
    }
    get length() {
      return this.len;
    }
    isEqual(e) {
      return 0 === Ss.comparator(this, e);
    }
    child(e) {
      const t = this.segments.slice(this.offset, this.limit());
      return (
        e instanceof Ss
          ? e.forEach((e) => {
              t.push(e);
            })
          : t.push(e),
        this.construct(t)
      );
    }
    limit() {
      return this.offset + this.length;
    }
    popFirst(e) {
      return (
        (e = void 0 === e ? 1 : e),
        this.construct(this.segments, this.offset + e, this.length - e)
      );
    }
    popLast() {
      return this.construct(this.segments, this.offset, this.length - 1);
    }
    firstSegment() {
      return this.segments[this.offset];
    }
    lastSegment() {
      return this.get(this.length - 1);
    }
    get(e) {
      return this.segments[this.offset + e];
    }
    isEmpty() {
      return 0 === this.length;
    }
    isPrefixOf(e) {
      if (e.length < this.length) return !1;
      for (let t = 0; t < this.length; t++)
        if (this.get(t) !== e.get(t)) return !1;
      return !0;
    }
    isImmediateParentOf(e) {
      if (this.length + 1 !== e.length) return !1;
      for (let t = 0; t < this.length; t++)
        if (this.get(t) !== e.get(t)) return !1;
      return !0;
    }
    forEach(e) {
      for (let t = this.offset, n = this.limit(); t < n; t++)
        e(this.segments[t]);
    }
    toArray() {
      return this.segments.slice(this.offset, this.limit());
    }
    static comparator(e, t) {
      const n = Math.min(e.length, t.length);
      for (let r = 0; r < n; r++) {
        const n = e.get(r),
          i = t.get(r);
        if (n < i) return -1;
        if (n > i) return 1;
      }
      return e.length < t.length ? -1 : e.length > t.length ? 1 : 0;
    }
  }
  class Es extends Ss {
    construct(e, t, n) {
      return new Es(e, t, n);
    }
    canonicalString() {
      return this.toArray().join("/");
    }
    toString() {
      return this.canonicalString();
    }
    toUriEncodedString() {
      return this.toArray().map(encodeURIComponent).join("/");
    }
    static fromString(...e) {
      const t = [];
      for (const n of e) {
        if (n.indexOf("//") >= 0)
          throw new os(
            ss.INVALID_ARGUMENT,
            `Invalid segment (${n}). Paths must not contain // in them.`
          );
        t.push(...n.split("/").filter((e) => e.length > 0));
      }
      return new Es(t);
    }
    static emptyPath() {
      return new Es([]);
    }
  }
  const Is = /^[_a-zA-Z][_a-zA-Z0-9]*$/;
  class Cs extends Ss {
    construct(e, t, n) {
      return new Cs(e, t, n);
    }
    static isValidIdentifier(e) {
      return Is.test(e);
    }
    canonicalString() {
      return this.toArray()
        .map(
          (e) => (
            (e = e.replace(/\\/g, "\\\\").replace(/`/g, "\\`")),
            Cs.isValidIdentifier(e) || (e = "`" + e + "`"),
            e
          )
        )
        .join(".");
    }
    toString() {
      return this.canonicalString();
    }
    isKeyField() {
      return 1 === this.length && "__name__" === this.get(0);
    }
    static keyField() {
      return new Cs(["__name__"]);
    }
    static fromServerFormat(e) {
      const t = [];
      let n = "",
        r = 0;
      const i = () => {
        if (0 === n.length)
          throw new os(
            ss.INVALID_ARGUMENT,
            `Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`
          );
        t.push(n), (n = "");
      };
      let s = !1;
      for (; r < e.length; ) {
        const t = e[r];
        if ("\\" === t) {
          if (r + 1 === e.length)
            throw new os(
              ss.INVALID_ARGUMENT,
              "Path has trailing escape character: " + e
            );
          const t = e[r + 1];
          if ("\\" !== t && "." !== t && "`" !== t)
            throw new os(
              ss.INVALID_ARGUMENT,
              "Path has invalid escape sequence: " + e
            );
          (n += t), (r += 2);
        } else
          "`" === t
            ? ((s = !s), r++)
            : "." !== t || s
            ? ((n += t), r++)
            : (i(), r++);
      }
      if ((i(), s))
        throw new os(ss.INVALID_ARGUMENT, "Unterminated ` in path: " + e);
      return new Cs(t);
    }
    static emptyPath() {
      return new Cs([]);
    }
  }
  class ks {
    constructor(e) {
      this.path = e;
    }
    static fromPath(e) {
      return new ks(Es.fromString(e));
    }
    static fromName(e) {
      return new ks(Es.fromString(e).popFirst(5));
    }
    static empty() {
      return new ks(Es.emptyPath());
    }
    get collectionGroup() {
      return this.path.popLast().lastSegment();
    }
    hasCollectionId(e) {
      return this.path.length >= 2 && this.path.get(this.path.length - 2) === e;
    }
    getCollectionGroup() {
      return this.path.get(this.path.length - 2);
    }
    getCollectionPath() {
      return this.path.popLast();
    }
    isEqual(e) {
      return null !== e && 0 === Es.comparator(this.path, e.path);
    }
    toString() {
      return this.path.toString();
    }
    static comparator(e, t) {
      return Es.comparator(e.path, t.path);
    }
    static isDocumentKey(e) {
      return e.length % 2 == 0;
    }
    static fromSegments(e) {
      return new ks(new Es(e.slice()));
    }
  }
  class Ts {
    constructor(e, t, n, r) {
      (this.indexId = e),
        (this.collectionGroup = t),
        (this.fields = n),
        (this.indexState = r);
    }
  }
  Ts.UNKNOWN_ID = -1;
  function Ls(e, t) {
    const n = e.toTimestamp().seconds,
      r = e.toTimestamp().nanoseconds + 1,
      i = ws.fromTimestamp(1e9 === r ? new bs(n + 1, 0) : new bs(n, r));
    return new Ns(i, ks.empty(), t);
  }
  function As(e) {
    return new Ns(e.readTime, e.key, -1);
  }
  class Ns {
    constructor(e, t, n) {
      (this.readTime = e), (this.documentKey = t), (this.largestBatchId = n);
    }
    static min() {
      return new Ns(ws.min(), ks.empty(), -1);
    }
    static max() {
      return new Ns(ws.max(), ks.empty(), -1);
    }
  }
  function Ps(e, t) {
    let n = e.readTime.compareTo(t.readTime);
    return 0 !== n
      ? n
      : ((n = ks.comparator(e.documentKey, t.documentKey)),
        0 !== n ? n : ys(e.largestBatchId, t.largestBatchId));
  }
  const Os =
    "The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";
  class Ds {
    constructor() {
      this.onCommittedListeners = [];
    }
    addOnCommittedListener(e) {
      this.onCommittedListeners.push(e);
    }
    raiseOnCommittedEvent() {
      this.onCommittedListeners.forEach((e) => e());
    }
  }
  async function xs(e) {
    if (e.code !== ss.FAILED_PRECONDITION || e.message !== Os) throw e;
    Xi("LocalStore", "Unexpectedly lost primary lease");
  }
  class Ms {
    constructor(e) {
      (this.nextCallback = null),
        (this.catchCallback = null),
        (this.result = void 0),
        (this.error = void 0),
        (this.isDone = !1),
        (this.callbackAttached = !1),
        e(
          (e) => {
            (this.isDone = !0),
              (this.result = e),
              this.nextCallback && this.nextCallback(e);
          },
          (e) => {
            (this.isDone = !0),
              (this.error = e),
              this.catchCallback && this.catchCallback(e);
          }
        );
    }
    catch(e) {
      return this.next(void 0, e);
    }
    next(e, t) {
      return (
        this.callbackAttached && ns(),
        (this.callbackAttached = !0),
        this.isDone
          ? this.error
            ? this.wrapFailure(t, this.error)
            : this.wrapSuccess(e, this.result)
          : new Ms((n, r) => {
              (this.nextCallback = (t) => {
                this.wrapSuccess(e, t).next(n, r);
              }),
                (this.catchCallback = (e) => {
                  this.wrapFailure(t, e).next(n, r);
                });
            })
      );
    }
    toPromise() {
      return new Promise((e, t) => {
        this.next(e, t);
      });
    }
    wrapUserFunction(e) {
      try {
        const t = e();
        return t instanceof Ms ? t : Ms.resolve(t);
      } catch (e) {
        return Ms.reject(e);
      }
    }
    wrapSuccess(e, t) {
      return e ? this.wrapUserFunction(() => e(t)) : Ms.resolve(t);
    }
    wrapFailure(e, t) {
      return e ? this.wrapUserFunction(() => e(t)) : Ms.reject(t);
    }
    static resolve(e) {
      return new Ms((t, n) => {
        t(e);
      });
    }
    static reject(e) {
      return new Ms((t, n) => {
        n(e);
      });
    }
    static waitFor(e) {
      return new Ms((t, n) => {
        let r = 0,
          i = 0,
          s = !1;
        e.forEach((e) => {
          ++r,
            e.next(
              () => {
                ++i, s && i === r && t();
              },
              (e) => n(e)
            );
        }),
          (s = !0),
          i === r && t();
      });
    }
    static or(e) {
      let t = Ms.resolve(!1);
      for (const n of e) t = t.next((e) => (e ? Ms.resolve(e) : n()));
      return t;
    }
    static forEach(e, t) {
      const n = [];
      return (
        e.forEach((e, r) => {
          n.push(t.call(this, e, r));
        }),
        this.waitFor(n)
      );
    }
    static mapArray(e, t) {
      return new Ms((n, r) => {
        const i = e.length,
          s = new Array(i);
        let o = 0;
        for (let a = 0; a < i; a++) {
          const c = a;
          t(e[c]).next(
            (e) => {
              (s[c] = e), ++o, o === i && n(s);
            },
            (e) => r(e)
          );
        }
      });
    }
    static doWhile(e, t) {
      return new Ms((n, r) => {
        const i = () => {
          !0 === e()
            ? t().next(() => {
                i();
              }, r)
            : n();
        };
        i();
      });
    }
  }
  function Rs(e) {
    const t = e.match(/Android ([\d.]+)/i),
      n = t ? t[1].split(".").slice(0, 2).join(".") : "-1";
    return Number(n);
  }
  function qs(e) {
    return "IndexedDbTransactionError" === e.name;
  }
  class Us {
    constructor(e, t) {
      (this.previousValue = e),
        t &&
          ((t.sequenceNumberHandler = (e) => this.ie(e)),
          (this.se = (e) => t.writeSequenceNumber(e)));
    }
    ie(e) {
      return (
        (this.previousValue = Math.max(e, this.previousValue)),
        this.previousValue
      );
    }
    next() {
      const e = ++this.previousValue;
      return this.se && this.se(e), e;
    }
  }
  function Vs(e) {
    return null == e;
  }
  function Fs(e) {
    return 0 === e && 1 / e == -1 / 0;
  }
  Us.oe = -1;
  const Bs = [
      "mutationQueues",
      "mutations",
      "documentMutations",
      "remoteDocuments",
      "targets",
      "owner",
      "targetGlobal",
      "targetDocuments",
      "clientMetadata",
      "remoteDocumentGlobal",
      "collectionParents",
      "bundles",
      "namedQueries",
    ],
    Hs = [
      "mutationQueues",
      "mutations",
      "documentMutations",
      "remoteDocumentsV14",
      "targets",
      "owner",
      "targetGlobal",
      "targetDocuments",
      "clientMetadata",
      "remoteDocumentGlobal",
      "collectionParents",
      "bundles",
      "namedQueries",
      "documentOverlays",
    ],
    js = Hs,
    $s = [...js, "indexConfiguration", "indexState", "indexEntries"];
  function zs(e) {
    let t = 0;
    for (const n in e) Object.prototype.hasOwnProperty.call(e, n) && t++;
    return t;
  }
  function Ks(e, t) {
    for (const n in e) Object.prototype.hasOwnProperty.call(e, n) && t(n, e[n]);
  }
  function Gs(e) {
    for (const t in e)
      if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
    return !0;
  }
  class Ws {
    constructor(e, t) {
      (this.comparator = e), (this.root = t || Js.EMPTY);
    }
    insert(e, t) {
      return new Ws(
        this.comparator,
        this.root
          .insert(e, t, this.comparator)
          .copy(null, null, Js.BLACK, null, null)
      );
    }
    remove(e) {
      return new Ws(
        this.comparator,
        this.root
          .remove(e, this.comparator)
          .copy(null, null, Js.BLACK, null, null)
      );
    }
    get(e) {
      let t = this.root;
      for (; !t.isEmpty(); ) {
        const n = this.comparator(e, t.key);
        if (0 === n) return t.value;
        n < 0 ? (t = t.left) : n > 0 && (t = t.right);
      }
      return null;
    }
    indexOf(e) {
      let t = 0,
        n = this.root;
      for (; !n.isEmpty(); ) {
        const r = this.comparator(e, n.key);
        if (0 === r) return t + n.left.size;
        r < 0 ? (n = n.left) : ((t += n.left.size + 1), (n = n.right));
      }
      return -1;
    }
    isEmpty() {
      return this.root.isEmpty();
    }
    get size() {
      return this.root.size;
    }
    minKey() {
      return this.root.minKey();
    }
    maxKey() {
      return this.root.maxKey();
    }
    inorderTraversal(e) {
      return this.root.inorderTraversal(e);
    }
    forEach(e) {
      this.inorderTraversal((t, n) => (e(t, n), !1));
    }
    toString() {
      const e = [];
      return (
        this.inorderTraversal((t, n) => (e.push(`${t}:${n}`), !1)),
        `{${e.join(", ")}}`
      );
    }
    reverseTraversal(e) {
      return this.root.reverseTraversal(e);
    }
    getIterator() {
      return new Qs(this.root, null, this.comparator, !1);
    }
    getIteratorFrom(e) {
      return new Qs(this.root, e, this.comparator, !1);
    }
    getReverseIterator() {
      return new Qs(this.root, null, this.comparator, !0);
    }
    getReverseIteratorFrom(e) {
      return new Qs(this.root, e, this.comparator, !0);
    }
  }
  class Qs {
    constructor(e, t, n, r) {
      (this.isReverse = r), (this.nodeStack = []);
      let i = 1;
      for (; !e.isEmpty(); )
        if (((i = t ? n(e.key, t) : 1), t && r && (i *= -1), i < 0))
          e = this.isReverse ? e.left : e.right;
        else {
          if (0 === i) {
            this.nodeStack.push(e);
            break;
          }
          this.nodeStack.push(e), (e = this.isReverse ? e.right : e.left);
        }
    }
    getNext() {
      let e = this.nodeStack.pop();
      const t = { key: e.key, value: e.value };
      if (this.isReverse)
        for (e = e.left; !e.isEmpty(); ) this.nodeStack.push(e), (e = e.right);
      else
        for (e = e.right; !e.isEmpty(); ) this.nodeStack.push(e), (e = e.left);
      return t;
    }
    hasNext() {
      return this.nodeStack.length > 0;
    }
    peek() {
      if (0 === this.nodeStack.length) return null;
      const e = this.nodeStack[this.nodeStack.length - 1];
      return { key: e.key, value: e.value };
    }
  }
  class Js {
    constructor(e, t, n, r, i) {
      (this.key = e),
        (this.value = t),
        (this.color = null != n ? n : Js.RED),
        (this.left = null != r ? r : Js.EMPTY),
        (this.right = null != i ? i : Js.EMPTY),
        (this.size = this.left.size + 1 + this.right.size);
    }
    copy(e, t, n, r, i) {
      return new Js(
        null != e ? e : this.key,
        null != t ? t : this.value,
        null != n ? n : this.color,
        null != r ? r : this.left,
        null != i ? i : this.right
      );
    }
    isEmpty() {
      return !1;
    }
    inorderTraversal(e) {
      return (
        this.left.inorderTraversal(e) ||
        e(this.key, this.value) ||
        this.right.inorderTraversal(e)
      );
    }
    reverseTraversal(e) {
      return (
        this.right.reverseTraversal(e) ||
        e(this.key, this.value) ||
        this.left.reverseTraversal(e)
      );
    }
    min() {
      return this.left.isEmpty() ? this : this.left.min();
    }
    minKey() {
      return this.min().key;
    }
    maxKey() {
      return this.right.isEmpty() ? this.key : this.right.maxKey();
    }
    insert(e, t, n) {
      let r = this;
      const i = n(e, r.key);
      return (
        (r =
          i < 0
            ? r.copy(null, null, null, r.left.insert(e, t, n), null)
            : 0 === i
            ? r.copy(null, t, null, null, null)
            : r.copy(null, null, null, null, r.right.insert(e, t, n))),
        r.fixUp()
      );
    }
    removeMin() {
      if (this.left.isEmpty()) return Js.EMPTY;
      let e = this;
      return (
        e.left.isRed() || e.left.left.isRed() || (e = e.moveRedLeft()),
        (e = e.copy(null, null, null, e.left.removeMin(), null)),
        e.fixUp()
      );
    }
    remove(e, t) {
      let n,
        r = this;
      if (t(e, r.key) < 0)
        r.left.isEmpty() ||
          r.left.isRed() ||
          r.left.left.isRed() ||
          (r = r.moveRedLeft()),
          (r = r.copy(null, null, null, r.left.remove(e, t), null));
      else {
        if (
          (r.left.isRed() && (r = r.rotateRight()),
          r.right.isEmpty() ||
            r.right.isRed() ||
            r.right.left.isRed() ||
            (r = r.moveRedRight()),
          0 === t(e, r.key))
        ) {
          if (r.right.isEmpty()) return Js.EMPTY;
          (n = r.right.min()),
            (r = r.copy(n.key, n.value, null, null, r.right.removeMin()));
        }
        r = r.copy(null, null, null, null, r.right.remove(e, t));
      }
      return r.fixUp();
    }
    isRed() {
      return this.color;
    }
    fixUp() {
      let e = this;
      return (
        e.right.isRed() && !e.left.isRed() && (e = e.rotateLeft()),
        e.left.isRed() && e.left.left.isRed() && (e = e.rotateRight()),
        e.left.isRed() && e.right.isRed() && (e = e.colorFlip()),
        e
      );
    }
    moveRedLeft() {
      let e = this.colorFlip();
      return (
        e.right.left.isRed() &&
          ((e = e.copy(null, null, null, null, e.right.rotateRight())),
          (e = e.rotateLeft()),
          (e = e.colorFlip())),
        e
      );
    }
    moveRedRight() {
      let e = this.colorFlip();
      return (
        e.left.left.isRed() && ((e = e.rotateRight()), (e = e.colorFlip())), e
      );
    }
    rotateLeft() {
      const e = this.copy(null, null, Js.RED, null, this.right.left);
      return this.right.copy(null, null, this.color, e, null);
    }
    rotateRight() {
      const e = this.copy(null, null, Js.RED, this.left.right, null);
      return this.left.copy(null, null, this.color, null, e);
    }
    colorFlip() {
      const e = this.left.copy(null, null, !this.left.color, null, null),
        t = this.right.copy(null, null, !this.right.color, null, null);
      return this.copy(null, null, !this.color, e, t);
    }
    checkMaxDepth() {
      const e = this.check();
      return Math.pow(2, e) <= this.size + 1;
    }
    check() {
      if (this.isRed() && this.left.isRed()) throw ns();
      if (this.right.isRed()) throw ns();
      const e = this.left.check();
      if (e !== this.right.check()) throw ns();
      return e + (this.isRed() ? 0 : 1);
    }
  }
  (Js.EMPTY = null),
    (Js.RED = !0),
    (Js.BLACK = !1),
    (Js.EMPTY = new (class {
      constructor() {
        this.size = 0;
      }
      get key() {
        throw ns();
      }
      get value() {
        throw ns();
      }
      get color() {
        throw ns();
      }
      get left() {
        throw ns();
      }
      get right() {
        throw ns();
      }
      copy(e, t, n, r, i) {
        return this;
      }
      insert(e, t, n) {
        return new Js(e, t);
      }
      remove(e, t) {
        return this;
      }
      isEmpty() {
        return !0;
      }
      inorderTraversal(e) {
        return !1;
      }
      reverseTraversal(e) {
        return !1;
      }
      minKey() {
        return null;
      }
      maxKey() {
        return null;
      }
      isRed() {
        return !1;
      }
      checkMaxDepth() {
        return !0;
      }
      check() {
        return 0;
      }
    })());
  class Ys {
    constructor(e) {
      (this.comparator = e), (this.data = new Ws(this.comparator));
    }
    has(e) {
      return null !== this.data.get(e);
    }
    first() {
      return this.data.minKey();
    }
    last() {
      return this.data.maxKey();
    }
    get size() {
      return this.data.size;
    }
    indexOf(e) {
      return this.data.indexOf(e);
    }
    forEach(e) {
      this.data.inorderTraversal((t, n) => (e(t), !1));
    }
    forEachInRange(e, t) {
      const n = this.data.getIteratorFrom(e[0]);
      for (; n.hasNext(); ) {
        const r = n.getNext();
        if (this.comparator(r.key, e[1]) >= 0) return;
        t(r.key);
      }
    }
    forEachWhile(e, t) {
      let n;
      for (
        n =
          void 0 !== t ? this.data.getIteratorFrom(t) : this.data.getIterator();
        n.hasNext();

      )
        if (!e(n.getNext().key)) return;
    }
    firstAfterOrEqual(e) {
      const t = this.data.getIteratorFrom(e);
      return t.hasNext() ? t.getNext().key : null;
    }
    getIterator() {
      return new Xs(this.data.getIterator());
    }
    getIteratorFrom(e) {
      return new Xs(this.data.getIteratorFrom(e));
    }
    add(e) {
      return this.copy(this.data.remove(e).insert(e, !0));
    }
    delete(e) {
      return this.has(e) ? this.copy(this.data.remove(e)) : this;
    }
    isEmpty() {
      return this.data.isEmpty();
    }
    unionWith(e) {
      let t = this;
      return (
        t.size < e.size && ((t = e), (e = this)),
        e.forEach((e) => {
          t = t.add(e);
        }),
        t
      );
    }
    isEqual(e) {
      if (!(e instanceof Ys)) return !1;
      if (this.size !== e.size) return !1;
      const t = this.data.getIterator(),
        n = e.data.getIterator();
      for (; t.hasNext(); ) {
        const e = t.getNext().key,
          r = n.getNext().key;
        if (0 !== this.comparator(e, r)) return !1;
      }
      return !0;
    }
    toArray() {
      const e = [];
      return (
        this.forEach((t) => {
          e.push(t);
        }),
        e
      );
    }
    toString() {
      const e = [];
      return this.forEach((t) => e.push(t)), "SortedSet(" + e.toString() + ")";
    }
    copy(e) {
      const t = new Ys(this.comparator);
      return (t.data = e), t;
    }
  }
  class Xs {
    constructor(e) {
      this.iter = e;
    }
    getNext() {
      return this.iter.getNext().key;
    }
    hasNext() {
      return this.iter.hasNext();
    }
  }
  class Zs {
    constructor(e) {
      (this.fields = e), e.sort(Cs.comparator);
    }
    static empty() {
      return new Zs([]);
    }
    unionWith(e) {
      let t = new Ys(Cs.comparator);
      for (const e of this.fields) t = t.add(e);
      for (const n of e) t = t.add(n);
      return new Zs(t.toArray());
    }
    covers(e) {
      for (const t of this.fields) if (t.isPrefixOf(e)) return !0;
      return !1;
    }
    isEqual(e) {
      return _s(this.fields, e.fields, (e, t) => e.isEqual(t));
    }
  }
  class eo extends Error {
    constructor() {
      super(...arguments), (this.name = "Base64DecodeError");
    }
  }
  class to {
    constructor(e) {
      this.binaryString = e;
    }
    static fromBase64String(e) {
      const t = (function (e) {
        try {
          return atob(e);
        } catch (e) {
          throw "undefined" != typeof DOMException && e instanceof DOMException
            ? new eo("Invalid base64 string: " + e)
            : e;
        }
      })(e);
      return new to(t);
    }
    static fromUint8Array(e) {
      const t = (function (e) {
        let t = "";
        for (let n = 0; n < e.length; ++n) t += String.fromCharCode(e[n]);
        return t;
      })(e);
      return new to(t);
    }
    [Symbol.iterator]() {
      let e = 0;
      return {
        next: () =>
          e < this.binaryString.length
            ? { value: this.binaryString.charCodeAt(e++), done: !1 }
            : { value: void 0, done: !0 },
      };
    }
    toBase64() {
      return (e = this.binaryString), btoa(e);
      var e;
    }
    toUint8Array() {
      return (function (e) {
        const t = new Uint8Array(e.length);
        for (let n = 0; n < e.length; n++) t[n] = e.charCodeAt(n);
        return t;
      })(this.binaryString);
    }
    approximateByteSize() {
      return 2 * this.binaryString.length;
    }
    compareTo(e) {
      return ys(this.binaryString, e.binaryString);
    }
    isEqual(e) {
      return this.binaryString === e.binaryString;
    }
  }
  to.EMPTY_BYTE_STRING = new to("");
  const no = new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
  function ro(e) {
    if ((rs(!!e), "string" == typeof e)) {
      let t = 0;
      const n = no.exec(e);
      if ((rs(!!n), n[1])) {
        let e = n[1];
        (e = (e + "000000000").substr(0, 9)), (t = Number(e));
      }
      const r = new Date(e);
      return { seconds: Math.floor(r.getTime() / 1e3), nanos: t };
    }
    return { seconds: io(e.seconds), nanos: io(e.nanos) };
  }
  function io(e) {
    return "number" == typeof e ? e : "string" == typeof e ? Number(e) : 0;
  }
  function so(e) {
    return "string" == typeof e ? to.fromBase64String(e) : to.fromUint8Array(e);
  }
  function oo(e) {
    var t, n;
    return (
      "server_timestamp" ===
      (null ===
        (n = (
          (null === (t = null == e ? void 0 : e.mapValue) || void 0 === t
            ? void 0
            : t.fields) || {}
        ).__type__) || void 0 === n
        ? void 0
        : n.stringValue)
    );
  }
  function ao(e) {
    const t = e.mapValue.fields.__previous_value__;
    return oo(t) ? ao(t) : t;
  }
  function co(e) {
    const t = ro(e.mapValue.fields.__local_write_time__.timestampValue);
    return new bs(t.seconds, t.nanos);
  }
  class lo {
    constructor(e, t, n, r, i, s, o, a, c) {
      (this.databaseId = e),
        (this.appId = t),
        (this.persistenceKey = n),
        (this.host = r),
        (this.ssl = i),
        (this.forceLongPolling = s),
        (this.autoDetectLongPolling = o),
        (this.longPollingOptions = a),
        (this.useFetchStreams = c);
    }
  }
  class uo {
    constructor(e, t) {
      (this.projectId = e), (this.database = t || "(default)");
    }
    static empty() {
      return new uo("", "");
    }
    get isDefaultDatabase() {
      return "(default)" === this.database;
    }
    isEqual(e) {
      return (
        e instanceof uo &&
        e.projectId === this.projectId &&
        e.database === this.database
      );
    }
  }
  const ho = { mapValue: { fields: { __type__: { stringValue: "__max__" } } } };
  function po(e) {
    return "nullValue" in e
      ? 0
      : "booleanValue" in e
      ? 1
      : "integerValue" in e || "doubleValue" in e
      ? 2
      : "timestampValue" in e
      ? 3
      : "stringValue" in e
      ? 5
      : "bytesValue" in e
      ? 6
      : "referenceValue" in e
      ? 7
      : "geoPointValue" in e
      ? 8
      : "arrayValue" in e
      ? 9
      : "mapValue" in e
      ? oo(e)
        ? 4
        : Lo(e)
        ? 9007199254740991
        : ko(e)
        ? 10
        : 11
      : ns();
  }
  function fo(e, t) {
    if (e === t) return !0;
    const n = po(e);
    if (n !== po(t)) return !1;
    switch (n) {
      case 0:
      case 9007199254740991:
        return !0;
      case 1:
        return e.booleanValue === t.booleanValue;
      case 4:
        return co(e).isEqual(co(t));
      case 3:
        return (function (e, t) {
          if (
            "string" == typeof e.timestampValue &&
            "string" == typeof t.timestampValue &&
            e.timestampValue.length === t.timestampValue.length
          )
            return e.timestampValue === t.timestampValue;
          const n = ro(e.timestampValue),
            r = ro(t.timestampValue);
          return n.seconds === r.seconds && n.nanos === r.nanos;
        })(e, t);
      case 5:
        return e.stringValue === t.stringValue;
      case 6:
        return (function (e, t) {
          return so(e.bytesValue).isEqual(so(t.bytesValue));
        })(e, t);
      case 7:
        return e.referenceValue === t.referenceValue;
      case 8:
        return (function (e, t) {
          return (
            io(e.geoPointValue.latitude) === io(t.geoPointValue.latitude) &&
            io(e.geoPointValue.longitude) === io(t.geoPointValue.longitude)
          );
        })(e, t);
      case 2:
        return (function (e, t) {
          if ("integerValue" in e && "integerValue" in t)
            return io(e.integerValue) === io(t.integerValue);
          if ("doubleValue" in e && "doubleValue" in t) {
            const n = io(e.doubleValue),
              r = io(t.doubleValue);
            return n === r ? Fs(n) === Fs(r) : isNaN(n) && isNaN(r);
          }
          return !1;
        })(e, t);
      case 9:
        return _s(e.arrayValue.values || [], t.arrayValue.values || [], fo);
      case 10:
      case 11:
        return (function (e, t) {
          const n = e.mapValue.fields || {},
            r = t.mapValue.fields || {};
          if (zs(n) !== zs(r)) return !1;
          for (const e in n)
            if (n.hasOwnProperty(e) && (void 0 === r[e] || !fo(n[e], r[e])))
              return !1;
          return !0;
        })(e, t);
      default:
        return ns();
    }
  }
  function mo(e, t) {
    return void 0 !== (e.values || []).find((e) => fo(e, t));
  }
  function go(e, t) {
    if (e === t) return 0;
    const n = po(e),
      r = po(t);
    if (n !== r) return ys(n, r);
    switch (n) {
      case 0:
      case 9007199254740991:
        return 0;
      case 1:
        return ys(e.booleanValue, t.booleanValue);
      case 2:
        return (function (e, t) {
          const n = io(e.integerValue || e.doubleValue),
            r = io(t.integerValue || t.doubleValue);
          return n < r
            ? -1
            : n > r
            ? 1
            : n === r
            ? 0
            : isNaN(n)
            ? isNaN(r)
              ? 0
              : -1
            : 1;
        })(e, t);
      case 3:
        return vo(e.timestampValue, t.timestampValue);
      case 4:
        return vo(co(e), co(t));
      case 5:
        return ys(e.stringValue, t.stringValue);
      case 6:
        return (function (e, t) {
          const n = so(e),
            r = so(t);
          return n.compareTo(r);
        })(e.bytesValue, t.bytesValue);
      case 7:
        return (function (e, t) {
          const n = e.split("/"),
            r = t.split("/");
          for (let e = 0; e < n.length && e < r.length; e++) {
            const t = ys(n[e], r[e]);
            if (0 !== t) return t;
          }
          return ys(n.length, r.length);
        })(e.referenceValue, t.referenceValue);
      case 8:
        return (function (e, t) {
          const n = ys(io(e.latitude), io(t.latitude));
          return 0 !== n ? n : ys(io(e.longitude), io(t.longitude));
        })(e.geoPointValue, t.geoPointValue);
      case 9:
        return yo(e.arrayValue, t.arrayValue);
      case 10:
        return (function (e, t) {
          var n, r, i, s;
          const o = e.fields || {},
            a = t.fields || {},
            c = null === (n = o.value) || void 0 === n ? void 0 : n.arrayValue,
            l = null === (r = a.value) || void 0 === r ? void 0 : r.arrayValue,
            u = ys(
              (null === (i = null == c ? void 0 : c.values) || void 0 === i
                ? void 0
                : i.length) || 0,
              (null === (s = null == l ? void 0 : l.values) || void 0 === s
                ? void 0
                : s.length) || 0
            );
          return 0 !== u ? u : yo(c, l);
        })(e.mapValue, t.mapValue);
      case 11:
        return (function (e, t) {
          if (e === ho.mapValue && t === ho.mapValue) return 0;
          if (e === ho.mapValue) return 1;
          if (t === ho.mapValue) return -1;
          const n = e.fields || {},
            r = Object.keys(n),
            i = t.fields || {},
            s = Object.keys(i);
          r.sort(), s.sort();
          for (let e = 0; e < r.length && e < s.length; ++e) {
            const t = ys(r[e], s[e]);
            if (0 !== t) return t;
            const o = go(n[r[e]], i[s[e]]);
            if (0 !== o) return o;
          }
          return ys(r.length, s.length);
        })(e.mapValue, t.mapValue);
      default:
        throw ns();
    }
  }
  function vo(e, t) {
    if ("string" == typeof e && "string" == typeof t && e.length === t.length)
      return ys(e, t);
    const n = ro(e),
      r = ro(t),
      i = ys(n.seconds, r.seconds);
    return 0 !== i ? i : ys(n.nanos, r.nanos);
  }
  function yo(e, t) {
    const n = e.values || [],
      r = t.values || [];
    for (let e = 0; e < n.length && e < r.length; ++e) {
      const t = go(n[e], r[e]);
      if (t) return t;
    }
    return ys(n.length, r.length);
  }
  function _o(e) {
    return bo(e);
  }
  function bo(e) {
    return "nullValue" in e
      ? "null"
      : "booleanValue" in e
      ? "" + e.booleanValue
      : "integerValue" in e
      ? "" + e.integerValue
      : "doubleValue" in e
      ? "" + e.doubleValue
      : "timestampValue" in e
      ? (function (e) {
          const t = ro(e);
          return `time(${t.seconds},${t.nanos})`;
        })(e.timestampValue)
      : "stringValue" in e
      ? e.stringValue
      : "bytesValue" in e
      ? (function (e) {
          return so(e).toBase64();
        })(e.bytesValue)
      : "referenceValue" in e
      ? (function (e) {
          return ks.fromName(e).toString();
        })(e.referenceValue)
      : "geoPointValue" in e
      ? (function (e) {
          return `geo(${e.latitude},${e.longitude})`;
        })(e.geoPointValue)
      : "arrayValue" in e
      ? (function (e) {
          let t = "[",
            n = !0;
          for (const r of e.values || [])
            n ? (n = !1) : (t += ","), (t += bo(r));
          return t + "]";
        })(e.arrayValue)
      : "mapValue" in e
      ? (function (e) {
          const t = Object.keys(e.fields || {}).sort();
          let n = "{",
            r = !0;
          for (const i of t)
            r ? (r = !1) : (n += ","), (n += `${i}:${bo(e.fields[i])}`);
          return n + "}";
        })(e.mapValue)
      : ns();
  }
  function wo(e) {
    return !!e && "integerValue" in e;
  }
  function So(e) {
    return !!e && "arrayValue" in e;
  }
  function Eo(e) {
    return !!e && "nullValue" in e;
  }
  function Io(e) {
    return !!e && "doubleValue" in e && isNaN(Number(e.doubleValue));
  }
  function Co(e) {
    return !!e && "mapValue" in e;
  }
  function ko(e) {
    var t, n;
    return (
      "__vector__" ===
      (null ===
        (n = (
          (null === (t = null == e ? void 0 : e.mapValue) || void 0 === t
            ? void 0
            : t.fields) || {}
        ).__type__) || void 0 === n
        ? void 0
        : n.stringValue)
    );
  }
  function To(e) {
    if (e.geoPointValue)
      return { geoPointValue: Object.assign({}, e.geoPointValue) };
    if (e.timestampValue && "object" == typeof e.timestampValue)
      return { timestampValue: Object.assign({}, e.timestampValue) };
    if (e.mapValue) {
      const t = { mapValue: { fields: {} } };
      return Ks(e.mapValue.fields, (e, n) => (t.mapValue.fields[e] = To(n))), t;
    }
    if (e.arrayValue) {
      const t = { arrayValue: { values: [] } };
      for (let n = 0; n < (e.arrayValue.values || []).length; ++n)
        t.arrayValue.values[n] = To(e.arrayValue.values[n]);
      return t;
    }
    return Object.assign({}, e);
  }
  function Lo(e) {
    return (
      "__max__" ===
      (((e.mapValue || {}).fields || {}).__type__ || {}).stringValue
    );
  }
  class Ao {
    constructor(e) {
      this.value = e;
    }
    static empty() {
      return new Ao({ mapValue: {} });
    }
    field(e) {
      if (e.isEmpty()) return this.value;
      {
        let t = this.value;
        for (let n = 0; n < e.length - 1; ++n)
          if (((t = (t.mapValue.fields || {})[e.get(n)]), !Co(t))) return null;
        return (t = (t.mapValue.fields || {})[e.lastSegment()]), t || null;
      }
    }
    set(e, t) {
      this.getFieldsMap(e.popLast())[e.lastSegment()] = To(t);
    }
    setAll(e) {
      let t = Cs.emptyPath(),
        n = {},
        r = [];
      e.forEach((e, i) => {
        if (!t.isImmediateParentOf(i)) {
          const e = this.getFieldsMap(t);
          this.applyChanges(e, n, r), (n = {}), (r = []), (t = i.popLast());
        }
        e ? (n[i.lastSegment()] = To(e)) : r.push(i.lastSegment());
      });
      const i = this.getFieldsMap(t);
      this.applyChanges(i, n, r);
    }
    delete(e) {
      const t = this.field(e.popLast());
      Co(t) && t.mapValue.fields && delete t.mapValue.fields[e.lastSegment()];
    }
    isEqual(e) {
      return fo(this.value, e.value);
    }
    getFieldsMap(e) {
      let t = this.value;
      t.mapValue.fields || (t.mapValue = { fields: {} });
      for (let n = 0; n < e.length; ++n) {
        let r = t.mapValue.fields[e.get(n)];
        (Co(r) && r.mapValue.fields) ||
          ((r = { mapValue: { fields: {} } }),
          (t.mapValue.fields[e.get(n)] = r)),
          (t = r);
      }
      return t.mapValue.fields;
    }
    applyChanges(e, t, n) {
      Ks(t, (t, n) => (e[t] = n));
      for (const t of n) delete e[t];
    }
    clone() {
      return new Ao(To(this.value));
    }
  }
  class No {
    constructor(e, t, n, r, i, s, o) {
      (this.key = e),
        (this.documentType = t),
        (this.version = n),
        (this.readTime = r),
        (this.createTime = i),
        (this.data = s),
        (this.documentState = o);
    }
    static newInvalidDocument(e) {
      return new No(e, 0, ws.min(), ws.min(), ws.min(), Ao.empty(), 0);
    }
    static newFoundDocument(e, t, n, r) {
      return new No(e, 1, t, ws.min(), n, r, 0);
    }
    static newNoDocument(e, t) {
      return new No(e, 2, t, ws.min(), ws.min(), Ao.empty(), 0);
    }
    static newUnknownDocument(e, t) {
      return new No(e, 3, t, ws.min(), ws.min(), Ao.empty(), 2);
    }
    convertToFoundDocument(e, t) {
      return (
        !this.createTime.isEqual(ws.min()) ||
          (2 !== this.documentType && 0 !== this.documentType) ||
          (this.createTime = e),
        (this.version = e),
        (this.documentType = 1),
        (this.data = t),
        (this.documentState = 0),
        this
      );
    }
    convertToNoDocument(e) {
      return (
        (this.version = e),
        (this.documentType = 2),
        (this.data = Ao.empty()),
        (this.documentState = 0),
        this
      );
    }
    convertToUnknownDocument(e) {
      return (
        (this.version = e),
        (this.documentType = 3),
        (this.data = Ao.empty()),
        (this.documentState = 2),
        this
      );
    }
    setHasCommittedMutations() {
      return (this.documentState = 2), this;
    }
    setHasLocalMutations() {
      return (this.documentState = 1), (this.version = ws.min()), this;
    }
    setReadTime(e) {
      return (this.readTime = e), this;
    }
    get hasLocalMutations() {
      return 1 === this.documentState;
    }
    get hasCommittedMutations() {
      return 2 === this.documentState;
    }
    get hasPendingWrites() {
      return this.hasLocalMutations || this.hasCommittedMutations;
    }
    isValidDocument() {
      return 0 !== this.documentType;
    }
    isFoundDocument() {
      return 1 === this.documentType;
    }
    isNoDocument() {
      return 2 === this.documentType;
    }
    isUnknownDocument() {
      return 3 === this.documentType;
    }
    isEqual(e) {
      return (
        e instanceof No &&
        this.key.isEqual(e.key) &&
        this.version.isEqual(e.version) &&
        this.documentType === e.documentType &&
        this.documentState === e.documentState &&
        this.data.isEqual(e.data)
      );
    }
    mutableCopy() {
      return new No(
        this.key,
        this.documentType,
        this.version,
        this.readTime,
        this.createTime,
        this.data.clone(),
        this.documentState
      );
    }
    toString() {
      return `Document(${this.key}, ${this.version}, ${JSON.stringify(
        this.data.value
      )}, {createTime: ${this.createTime}}), {documentType: ${
        this.documentType
      }}), {documentState: ${this.documentState}})`;
    }
  }
  class Po {
    constructor(e, t) {
      (this.position = e), (this.inclusive = t);
    }
  }
  function Oo(e, t, n) {
    let r = 0;
    for (let i = 0; i < e.position.length; i++) {
      const s = t[i],
        o = e.position[i];
      if (
        ((r = s.field.isKeyField()
          ? ks.comparator(ks.fromName(o.referenceValue), n.key)
          : go(o, n.data.field(s.field))),
        "desc" === s.dir && (r *= -1),
        0 !== r)
      )
        break;
    }
    return r;
  }
  function Do(e, t) {
    if (null === e) return null === t;
    if (null === t) return !1;
    if (e.inclusive !== t.inclusive || e.position.length !== t.position.length)
      return !1;
    for (let n = 0; n < e.position.length; n++)
      if (!fo(e.position[n], t.position[n])) return !1;
    return !0;
  }
  class xo {
    constructor(e, t = "asc") {
      (this.field = e), (this.dir = t);
    }
  }
  function Mo(e, t) {
    return e.dir === t.dir && e.field.isEqual(t.field);
  }
  class Ro {}
  class qo extends Ro {
    constructor(e, t, n) {
      super(), (this.field = e), (this.op = t), (this.value = n);
    }
    static create(e, t, n) {
      return e.isKeyField()
        ? "in" === t || "not-in" === t
          ? this.createKeyFieldInFilter(e, t, n)
          : new zo(e, t, n)
        : "array-contains" === t
        ? new Qo(e, n)
        : "in" === t
        ? new Jo(e, n)
        : "not-in" === t
        ? new Yo(e, n)
        : "array-contains-any" === t
        ? new Xo(e, n)
        : new qo(e, t, n);
    }
    static createKeyFieldInFilter(e, t, n) {
      return "in" === t ? new Ko(e, n) : new Go(e, n);
    }
    matches(e) {
      const t = e.data.field(this.field);
      return "!=" === this.op
        ? null !== t && this.matchesComparison(go(t, this.value))
        : null !== t &&
            po(this.value) === po(t) &&
            this.matchesComparison(go(t, this.value));
    }
    matchesComparison(e) {
      switch (this.op) {
        case "<":
          return e < 0;
        case "<=":
          return e <= 0;
        case "==":
          return 0 === e;
        case "!=":
          return 0 !== e;
        case ">":
          return e > 0;
        case ">=":
          return e >= 0;
        default:
          return ns();
      }
    }
    isInequality() {
      return ["<", "<=", ">", ">=", "!=", "not-in"].indexOf(this.op) >= 0;
    }
    getFlattenedFilters() {
      return [this];
    }
    getFilters() {
      return [this];
    }
  }
  class Uo extends Ro {
    constructor(e, t) {
      super(), (this.filters = e), (this.op = t), (this.ae = null);
    }
    static create(e, t) {
      return new Uo(e, t);
    }
    matches(e) {
      return Vo(this)
        ? void 0 === this.filters.find((t) => !t.matches(e))
        : void 0 !== this.filters.find((t) => t.matches(e));
    }
    getFlattenedFilters() {
      return (
        null !== this.ae ||
          (this.ae = this.filters.reduce(
            (e, t) => e.concat(t.getFlattenedFilters()),
            []
          )),
        this.ae
      );
    }
    getFilters() {
      return Object.assign([], this.filters);
    }
  }
  function Vo(e) {
    return "and" === e.op;
  }
  function Fo(e) {
    return Bo(e) && Vo(e);
  }
  function Bo(e) {
    for (const t of e.filters) if (t instanceof Uo) return !1;
    return !0;
  }
  function Ho(e) {
    if (e instanceof qo)
      return e.field.canonicalString() + e.op.toString() + _o(e.value);
    if (Fo(e)) return e.filters.map((e) => Ho(e)).join(",");
    {
      const t = e.filters.map((e) => Ho(e)).join(",");
      return `${e.op}(${t})`;
    }
  }
  function jo(e, t) {
    return e instanceof qo
      ? (function (e, t) {
          return (
            t instanceof qo &&
            e.op === t.op &&
            e.field.isEqual(t.field) &&
            fo(e.value, t.value)
          );
        })(e, t)
      : e instanceof Uo
      ? (function (e, t) {
          return (
            t instanceof Uo &&
            e.op === t.op &&
            e.filters.length === t.filters.length &&
            e.filters.reduce((e, n, r) => e && jo(n, t.filters[r]), !0)
          );
        })(e, t)
      : void ns();
  }
  function $o(e) {
    return e instanceof qo
      ? (function (e) {
          return `${e.field.canonicalString()} ${e.op} ${_o(e.value)}`;
        })(e)
      : e instanceof Uo
      ? (function (e) {
          return (
            e.op.toString() + " {" + e.getFilters().map($o).join(" ,") + "}"
          );
        })(e)
      : "Filter";
  }
  class zo extends qo {
    constructor(e, t, n) {
      super(e, t, n), (this.key = ks.fromName(n.referenceValue));
    }
    matches(e) {
      const t = ks.comparator(e.key, this.key);
      return this.matchesComparison(t);
    }
  }
  class Ko extends qo {
    constructor(e, t) {
      super(e, "in", t), (this.keys = Wo("in", t));
    }
    matches(e) {
      return this.keys.some((t) => t.isEqual(e.key));
    }
  }
  class Go extends qo {
    constructor(e, t) {
      super(e, "not-in", t), (this.keys = Wo("not-in", t));
    }
    matches(e) {
      return !this.keys.some((t) => t.isEqual(e.key));
    }
  }
  function Wo(e, t) {
    var n;
    return (
      (null === (n = t.arrayValue) || void 0 === n ? void 0 : n.values) || []
    ).map((e) => ks.fromName(e.referenceValue));
  }
  class Qo extends qo {
    constructor(e, t) {
      super(e, "array-contains", t);
    }
    matches(e) {
      const t = e.data.field(this.field);
      return So(t) && mo(t.arrayValue, this.value);
    }
  }
  class Jo extends qo {
    constructor(e, t) {
      super(e, "in", t);
    }
    matches(e) {
      const t = e.data.field(this.field);
      return null !== t && mo(this.value.arrayValue, t);
    }
  }
  class Yo extends qo {
    constructor(e, t) {
      super(e, "not-in", t);
    }
    matches(e) {
      if (mo(this.value.arrayValue, { nullValue: "NULL_VALUE" })) return !1;
      const t = e.data.field(this.field);
      return null !== t && !mo(this.value.arrayValue, t);
    }
  }
  class Xo extends qo {
    constructor(e, t) {
      super(e, "array-contains-any", t);
    }
    matches(e) {
      const t = e.data.field(this.field);
      return (
        !(!So(t) || !t.arrayValue.values) &&
        t.arrayValue.values.some((e) => mo(this.value.arrayValue, e))
      );
    }
  }
  class Zo {
    constructor(e, t = null, n = [], r = [], i = null, s = null, o = null) {
      (this.path = e),
        (this.collectionGroup = t),
        (this.orderBy = n),
        (this.filters = r),
        (this.limit = i),
        (this.startAt = s),
        (this.endAt = o),
        (this.ue = null);
    }
  }
  function ea(e, t = null, n = [], r = [], i = null, s = null, o = null) {
    return new Zo(e, t, n, r, i, s, o);
  }
  function ta(e) {
    const t = is(e);
    if (null === t.ue) {
      let e = t.path.canonicalString();
      null !== t.collectionGroup && (e += "|cg:" + t.collectionGroup),
        (e += "|f:"),
        (e += t.filters.map((e) => Ho(e)).join(",")),
        (e += "|ob:"),
        (e += t.orderBy
          .map((e) =>
            (function (e) {
              return e.field.canonicalString() + e.dir;
            })(e)
          )
          .join(",")),
        Vs(t.limit) || ((e += "|l:"), (e += t.limit)),
        t.startAt &&
          ((e += "|lb:"),
          (e += t.startAt.inclusive ? "b:" : "a:"),
          (e += t.startAt.position.map((e) => _o(e)).join(","))),
        t.endAt &&
          ((e += "|ub:"),
          (e += t.endAt.inclusive ? "a:" : "b:"),
          (e += t.endAt.position.map((e) => _o(e)).join(","))),
        (t.ue = e);
    }
    return t.ue;
  }
  function na(e, t) {
    if (e.limit !== t.limit) return !1;
    if (e.orderBy.length !== t.orderBy.length) return !1;
    for (let n = 0; n < e.orderBy.length; n++)
      if (!Mo(e.orderBy[n], t.orderBy[n])) return !1;
    if (e.filters.length !== t.filters.length) return !1;
    for (let n = 0; n < e.filters.length; n++)
      if (!jo(e.filters[n], t.filters[n])) return !1;
    return (
      e.collectionGroup === t.collectionGroup &&
      !!e.path.isEqual(t.path) &&
      !!Do(e.startAt, t.startAt) &&
      Do(e.endAt, t.endAt)
    );
  }
  function ra(e) {
    return (
      ks.isDocumentKey(e.path) &&
      null === e.collectionGroup &&
      0 === e.filters.length
    );
  }
  class ia {
    constructor(
      e,
      t = null,
      n = [],
      r = [],
      i = null,
      s = "F",
      o = null,
      a = null
    ) {
      (this.path = e),
        (this.collectionGroup = t),
        (this.explicitOrderBy = n),
        (this.filters = r),
        (this.limit = i),
        (this.limitType = s),
        (this.startAt = o),
        (this.endAt = a),
        (this.ce = null),
        (this.le = null),
        (this.he = null),
        this.startAt,
        this.endAt;
    }
  }
  function sa(e, t, n, r, i, s, o, a) {
    return new ia(e, t, n, r, i, s, o, a);
  }
  function oa(e) {
    return new ia(e);
  }
  function aa(e) {
    return (
      0 === e.filters.length &&
      null === e.limit &&
      null == e.startAt &&
      null == e.endAt &&
      (0 === e.explicitOrderBy.length ||
        (1 === e.explicitOrderBy.length &&
          e.explicitOrderBy[0].field.isKeyField()))
    );
  }
  function ca(e) {
    return null !== e.collectionGroup;
  }
  function la(e) {
    const t = is(e);
    if (null === t.ce) {
      t.ce = [];
      const e = new Set();
      for (const n of t.explicitOrderBy)
        t.ce.push(n), e.add(n.field.canonicalString());
      const n =
          t.explicitOrderBy.length > 0
            ? t.explicitOrderBy[t.explicitOrderBy.length - 1].dir
            : "asc",
        r = (function (e) {
          let t = new Ys(Cs.comparator);
          return (
            e.filters.forEach((e) => {
              e.getFlattenedFilters().forEach((e) => {
                e.isInequality() && (t = t.add(e.field));
              });
            }),
            t
          );
        })(t);
      r.forEach((r) => {
        e.has(r.canonicalString()) || r.isKeyField() || t.ce.push(new xo(r, n));
      }),
        e.has(Cs.keyField().canonicalString()) ||
          t.ce.push(new xo(Cs.keyField(), n));
    }
    return t.ce;
  }
  function ua(e) {
    const t = is(e);
    return t.le || (t.le = ha(t, la(e))), t.le;
  }
  function ha(e, t) {
    if ("F" === e.limitType)
      return ea(
        e.path,
        e.collectionGroup,
        t,
        e.filters,
        e.limit,
        e.startAt,
        e.endAt
      );
    {
      t = t.map((e) => {
        const t = "desc" === e.dir ? "asc" : "desc";
        return new xo(e.field, t);
      });
      const n = e.endAt ? new Po(e.endAt.position, e.endAt.inclusive) : null,
        r = e.startAt ? new Po(e.startAt.position, e.startAt.inclusive) : null;
      return ea(e.path, e.collectionGroup, t, e.filters, e.limit, n, r);
    }
  }
  function da(e, t, n) {
    return new ia(
      e.path,
      e.collectionGroup,
      e.explicitOrderBy.slice(),
      e.filters.slice(),
      t,
      n,
      e.startAt,
      e.endAt
    );
  }
  function pa(e, t) {
    return na(ua(e), ua(t)) && e.limitType === t.limitType;
  }
  function fa(e) {
    return `${ta(ua(e))}|lt:${e.limitType}`;
  }
  function ma(e) {
    return `Query(target=${(function (e) {
      let t = e.path.canonicalString();
      return (
        null !== e.collectionGroup &&
          (t += " collectionGroup=" + e.collectionGroup),
        e.filters.length > 0 &&
          (t += `, filters: [${e.filters.map((e) => $o(e)).join(", ")}]`),
        Vs(e.limit) || (t += ", limit: " + e.limit),
        e.orderBy.length > 0 &&
          (t += `, orderBy: [${e.orderBy
            .map((e) =>
              (function (e) {
                return `${e.field.canonicalString()} (${e.dir})`;
              })(e)
            )
            .join(", ")}]`),
        e.startAt &&
          ((t += ", startAt: "),
          (t += e.startAt.inclusive ? "b:" : "a:"),
          (t += e.startAt.position.map((e) => _o(e)).join(","))),
        e.endAt &&
          ((t += ", endAt: "),
          (t += e.endAt.inclusive ? "a:" : "b:"),
          (t += e.endAt.position.map((e) => _o(e)).join(","))),
        `Target(${t})`
      );
    })(ua(e))}; limitType=${e.limitType})`;
  }
  function ga(e, t) {
    return (
      t.isFoundDocument() &&
      (function (e, t) {
        const n = t.key.path;
        return null !== e.collectionGroup
          ? t.key.hasCollectionId(e.collectionGroup) && e.path.isPrefixOf(n)
          : ks.isDocumentKey(e.path)
          ? e.path.isEqual(n)
          : e.path.isImmediateParentOf(n);
      })(e, t) &&
      (function (e, t) {
        for (const n of la(e))
          if (!n.field.isKeyField() && null === t.data.field(n.field))
            return !1;
        return !0;
      })(e, t) &&
      (function (e, t) {
        for (const n of e.filters) if (!n.matches(t)) return !1;
        return !0;
      })(e, t) &&
      (function (e, t) {
        return (
          !(
            e.startAt &&
            !(function (e, t, n) {
              const r = Oo(e, t, n);
              return e.inclusive ? r <= 0 : r < 0;
            })(e.startAt, la(e), t)
          ) &&
          !(
            e.endAt &&
            !(function (e, t, n) {
              const r = Oo(e, t, n);
              return e.inclusive ? r >= 0 : r > 0;
            })(e.endAt, la(e), t)
          )
        );
      })(e, t)
    );
  }
  function va(e) {
    return (
      e.collectionGroup ||
      (e.path.length % 2 == 1
        ? e.path.lastSegment()
        : e.path.get(e.path.length - 2))
    );
  }
  function ya(e) {
    return (t, n) => {
      let r = !1;
      for (const i of la(e)) {
        const e = _a(i, t, n);
        if (0 !== e) return e;
        r = r || i.field.isKeyField();
      }
      return 0;
    };
  }
  function _a(e, t, n) {
    const r = e.field.isKeyField()
      ? ks.comparator(t.key, n.key)
      : (function (e, t, n) {
          const r = t.data.field(e),
            i = n.data.field(e);
          return null !== r && null !== i ? go(r, i) : ns();
        })(e.field, t, n);
    switch (e.dir) {
      case "asc":
        return r;
      case "desc":
        return -1 * r;
      default:
        return ns();
    }
  }
  class ba {
    constructor(e, t) {
      (this.mapKeyFn = e),
        (this.equalsFn = t),
        (this.inner = {}),
        (this.innerSize = 0);
    }
    get(e) {
      const t = this.mapKeyFn(e),
        n = this.inner[t];
      if (void 0 !== n)
        for (const [t, r] of n) if (this.equalsFn(t, e)) return r;
    }
    has(e) {
      return void 0 !== this.get(e);
    }
    set(e, t) {
      const n = this.mapKeyFn(e),
        r = this.inner[n];
      if (void 0 === r)
        return (this.inner[n] = [[e, t]]), void this.innerSize++;
      for (let n = 0; n < r.length; n++)
        if (this.equalsFn(r[n][0], e)) return void (r[n] = [e, t]);
      r.push([e, t]), this.innerSize++;
    }
    delete(e) {
      const t = this.mapKeyFn(e),
        n = this.inner[t];
      if (void 0 === n) return !1;
      for (let r = 0; r < n.length; r++)
        if (this.equalsFn(n[r][0], e))
          return (
            1 === n.length ? delete this.inner[t] : n.splice(r, 1),
            this.innerSize--,
            !0
          );
      return !1;
    }
    forEach(e) {
      Ks(this.inner, (t, n) => {
        for (const [t, r] of n) e(t, r);
      });
    }
    isEmpty() {
      return Gs(this.inner);
    }
    size() {
      return this.innerSize;
    }
  }
  const wa = new Ws(ks.comparator);
  function Sa() {
    return wa;
  }
  const Ea = new Ws(ks.comparator);
  function Ia(...e) {
    let t = Ea;
    for (const n of e) t = t.insert(n.key, n);
    return t;
  }
  function Ca(e) {
    let t = Ea;
    return e.forEach((e, n) => (t = t.insert(e, n.overlayedDocument))), t;
  }
  function ka() {
    return La();
  }
  function Ta() {
    return La();
  }
  function La() {
    return new ba(
      (e) => e.toString(),
      (e, t) => e.isEqual(t)
    );
  }
  new Ws(ks.comparator);
  const Aa = new Ys(ks.comparator);
  function Na(...e) {
    let t = Aa;
    for (const n of e) t = t.add(n);
    return t;
  }
  const Pa = new Ys(ys);
  function Oa() {
    return Pa;
  }
  function Da(e, t) {
    if (e.useProto3Json) {
      if (isNaN(t)) return { doubleValue: "NaN" };
      if (t === 1 / 0) return { doubleValue: "Infinity" };
      if (t === -1 / 0) return { doubleValue: "-Infinity" };
    }
    return { doubleValue: Fs(t) ? "-0" : t };
  }
  function xa(e) {
    return { integerValue: "" + e };
  }
  class Ma {
    constructor() {
      this._ = void 0;
    }
  }
  function Ra(e, t, n) {
    return e instanceof Va
      ? (function (e, t) {
          const n = {
            fields: {
              __type__: { stringValue: "server_timestamp" },
              __local_write_time__: {
                timestampValue: { seconds: e.seconds, nanos: e.nanoseconds },
              },
            },
          };
          return (
            t && oo(t) && (t = ao(t)),
            t && (n.fields.__previous_value__ = t),
            { mapValue: n }
          );
        })(n, t)
      : e instanceof Fa
      ? Ba(e, t)
      : e instanceof Ha
      ? ja(e, t)
      : (function (e, t) {
          const n = Ua(e, t),
            r = za(n) + za(e.Pe);
          return wo(n) && wo(e.Pe) ? xa(r) : Da(e.serializer, r);
        })(e, t);
  }
  function qa(e, t, n) {
    return e instanceof Fa ? Ba(e, t) : e instanceof Ha ? ja(e, t) : n;
  }
  function Ua(e, t) {
    return e instanceof $a
      ? (function (e) {
          return (
            wo(e) ||
            (function (e) {
              return !!e && "doubleValue" in e;
            })(e)
          );
        })(t)
        ? t
        : { integerValue: 0 }
      : null;
  }
  class Va extends Ma {}
  class Fa extends Ma {
    constructor(e) {
      super(), (this.elements = e);
    }
  }
  function Ba(e, t) {
    const n = Ka(t);
    for (const t of e.elements) n.some((e) => fo(e, t)) || n.push(t);
    return { arrayValue: { values: n } };
  }
  class Ha extends Ma {
    constructor(e) {
      super(), (this.elements = e);
    }
  }
  function ja(e, t) {
    let n = Ka(t);
    for (const t of e.elements) n = n.filter((e) => !fo(e, t));
    return { arrayValue: { values: n } };
  }
  class $a extends Ma {
    constructor(e, t) {
      super(), (this.serializer = e), (this.Pe = t);
    }
  }
  function za(e) {
    return io(e.integerValue || e.doubleValue);
  }
  function Ka(e) {
    return So(e) && e.arrayValue.values ? e.arrayValue.values.slice() : [];
  }
  class Ga {
    constructor(e, t) {
      (this.updateTime = e), (this.exists = t);
    }
    static none() {
      return new Ga();
    }
    static exists(e) {
      return new Ga(void 0, e);
    }
    static updateTime(e) {
      return new Ga(e);
    }
    get isNone() {
      return void 0 === this.updateTime && void 0 === this.exists;
    }
    isEqual(e) {
      return (
        this.exists === e.exists &&
        (this.updateTime
          ? !!e.updateTime && this.updateTime.isEqual(e.updateTime)
          : !e.updateTime)
      );
    }
  }
  function Wa(e, t) {
    return void 0 !== e.updateTime
      ? t.isFoundDocument() && t.version.isEqual(e.updateTime)
      : void 0 === e.exists || e.exists === t.isFoundDocument();
  }
  class Qa {}
  function Ja(e, t) {
    if (!e.hasLocalMutations || (t && 0 === t.fields.length)) return null;
    if (null === t)
      return e.isNoDocument()
        ? new sc(e.key, Ga.none())
        : new ec(e.key, e.data, Ga.none());
    {
      const n = e.data,
        r = Ao.empty();
      let i = new Ys(Cs.comparator);
      for (let e of t.fields)
        if (!i.has(e)) {
          let t = n.field(e);
          null === t && e.length > 1 && ((e = e.popLast()), (t = n.field(e))),
            null === t ? r.delete(e) : r.set(e, t),
            (i = i.add(e));
        }
      return new tc(e.key, r, new Zs(i.toArray()), Ga.none());
    }
  }
  function Ya(e, t, n) {
    e instanceof ec
      ? (function (e, t, n) {
          const r = e.value.clone(),
            i = rc(e.fieldTransforms, t, n.transformResults);
          r.setAll(i),
            t.convertToFoundDocument(n.version, r).setHasCommittedMutations();
        })(e, t, n)
      : e instanceof tc
      ? (function (e, t, n) {
          if (!Wa(e.precondition, t))
            return void t.convertToUnknownDocument(n.version);
          const r = rc(e.fieldTransforms, t, n.transformResults),
            i = t.data;
          i.setAll(nc(e)),
            i.setAll(r),
            t.convertToFoundDocument(n.version, i).setHasCommittedMutations();
        })(e, t, n)
      : (function (e, t, n) {
          t.convertToNoDocument(n.version).setHasCommittedMutations();
        })(0, t, n);
  }
  function Xa(e, t, n, r) {
    return e instanceof ec
      ? (function (e, t, n, r) {
          if (!Wa(e.precondition, t)) return n;
          const i = e.value.clone(),
            s = ic(e.fieldTransforms, r, t);
          return (
            i.setAll(s),
            t.convertToFoundDocument(t.version, i).setHasLocalMutations(),
            null
          );
        })(e, t, n, r)
      : e instanceof tc
      ? (function (e, t, n, r) {
          if (!Wa(e.precondition, t)) return n;
          const i = ic(e.fieldTransforms, r, t),
            s = t.data;
          return (
            s.setAll(nc(e)),
            s.setAll(i),
            t.convertToFoundDocument(t.version, s).setHasLocalMutations(),
            null === n
              ? null
              : n
                  .unionWith(e.fieldMask.fields)
                  .unionWith(e.fieldTransforms.map((e) => e.field))
          );
        })(e, t, n, r)
      : (function (e, t, n) {
          return Wa(e.precondition, t)
            ? (t.convertToNoDocument(t.version).setHasLocalMutations(), null)
            : n;
        })(e, t, n);
  }
  function Za(e, t) {
    return (
      e.type === t.type &&
      !!e.key.isEqual(t.key) &&
      !!e.precondition.isEqual(t.precondition) &&
      !!(function (e, t) {
        return (
          (void 0 === e && void 0 === t) ||
          (!(!e || !t) &&
            _s(e, t, (e, t) =>
              (function (e, t) {
                return (
                  e.field.isEqual(t.field) &&
                  (function (e, t) {
                    return (e instanceof Fa && t instanceof Fa) ||
                      (e instanceof Ha && t instanceof Ha)
                      ? _s(e.elements, t.elements, fo)
                      : e instanceof $a && t instanceof $a
                      ? fo(e.Pe, t.Pe)
                      : e instanceof Va && t instanceof Va;
                  })(e.transform, t.transform)
                );
              })(e, t)
            ))
        );
      })(e.fieldTransforms, t.fieldTransforms) &&
      (0 === e.type
        ? e.value.isEqual(t.value)
        : 1 !== e.type ||
          (e.data.isEqual(t.data) && e.fieldMask.isEqual(t.fieldMask)))
    );
  }
  class ec extends Qa {
    constructor(e, t, n, r = []) {
      super(),
        (this.key = e),
        (this.value = t),
        (this.precondition = n),
        (this.fieldTransforms = r),
        (this.type = 0);
    }
    getFieldMask() {
      return null;
    }
  }
  class tc extends Qa {
    constructor(e, t, n, r, i = []) {
      super(),
        (this.key = e),
        (this.data = t),
        (this.fieldMask = n),
        (this.precondition = r),
        (this.fieldTransforms = i),
        (this.type = 1);
    }
    getFieldMask() {
      return this.fieldMask;
    }
  }
  function nc(e) {
    const t = new Map();
    return (
      e.fieldMask.fields.forEach((n) => {
        if (!n.isEmpty()) {
          const r = e.data.field(n);
          t.set(n, r);
        }
      }),
      t
    );
  }
  function rc(e, t, n) {
    const r = new Map();
    rs(e.length === n.length);
    for (let i = 0; i < n.length; i++) {
      const s = e[i],
        o = s.transform,
        a = t.data.field(s.field);
      r.set(s.field, qa(o, a, n[i]));
    }
    return r;
  }
  function ic(e, t, n) {
    const r = new Map();
    for (const i of e) {
      const e = i.transform,
        s = n.data.field(i.field);
      r.set(i.field, Ra(e, s, t));
    }
    return r;
  }
  class sc extends Qa {
    constructor(e, t) {
      super(),
        (this.key = e),
        (this.precondition = t),
        (this.type = 2),
        (this.fieldTransforms = []);
    }
    getFieldMask() {
      return null;
    }
  }
  class oc {
    constructor(e, t, n, r) {
      (this.batchId = e),
        (this.localWriteTime = t),
        (this.baseMutations = n),
        (this.mutations = r);
    }
    applyToRemoteDocument(e, t) {
      const n = t.mutationResults;
      for (let t = 0; t < this.mutations.length; t++) {
        const r = this.mutations[t];
        r.key.isEqual(e.key) && Ya(r, e, n[t]);
      }
    }
    applyToLocalView(e, t) {
      for (const n of this.baseMutations)
        n.key.isEqual(e.key) && (t = Xa(n, e, t, this.localWriteTime));
      for (const n of this.mutations)
        n.key.isEqual(e.key) && (t = Xa(n, e, t, this.localWriteTime));
      return t;
    }
    applyToLocalDocumentSet(e, t) {
      const n = Ta();
      return (
        this.mutations.forEach((r) => {
          const i = e.get(r.key),
            s = i.overlayedDocument;
          let o = this.applyToLocalView(s, i.mutatedFields);
          o = t.has(r.key) ? null : o;
          const a = Ja(s, o);
          null !== a && n.set(r.key, a),
            s.isValidDocument() || s.convertToNoDocument(ws.min());
        }),
        n
      );
    }
    keys() {
      return this.mutations.reduce((e, t) => e.add(t.key), Na());
    }
    isEqual(e) {
      return (
        this.batchId === e.batchId &&
        _s(this.mutations, e.mutations, (e, t) => Za(e, t)) &&
        _s(this.baseMutations, e.baseMutations, (e, t) => Za(e, t))
      );
    }
  }
  class ac {
    constructor(e, t) {
      (this.largestBatchId = e), (this.mutation = t);
    }
    getKey() {
      return this.mutation.key;
    }
    isEqual(e) {
      return null !== e && this.mutation === e.mutation;
    }
    toString() {
      return `Overlay{\n      largestBatchId: ${
        this.largestBatchId
      },\n      mutation: ${this.mutation.toString()}\n    }`;
    }
  }
  class cc {
    constructor(e, t) {
      (this.count = e), (this.unchangedNames = t);
    }
  }
  var lc, uc;
  function hc(e) {
    if (void 0 === e) return Zi("GRPC error has no .code"), ss.UNKNOWN;
    switch (e) {
      case lc.OK:
        return ss.OK;
      case lc.CANCELLED:
        return ss.CANCELLED;
      case lc.UNKNOWN:
        return ss.UNKNOWN;
      case lc.DEADLINE_EXCEEDED:
        return ss.DEADLINE_EXCEEDED;
      case lc.RESOURCE_EXHAUSTED:
        return ss.RESOURCE_EXHAUSTED;
      case lc.INTERNAL:
        return ss.INTERNAL;
      case lc.UNAVAILABLE:
        return ss.UNAVAILABLE;
      case lc.UNAUTHENTICATED:
        return ss.UNAUTHENTICATED;
      case lc.INVALID_ARGUMENT:
        return ss.INVALID_ARGUMENT;
      case lc.NOT_FOUND:
        return ss.NOT_FOUND;
      case lc.ALREADY_EXISTS:
        return ss.ALREADY_EXISTS;
      case lc.PERMISSION_DENIED:
        return ss.PERMISSION_DENIED;
      case lc.FAILED_PRECONDITION:
        return ss.FAILED_PRECONDITION;
      case lc.ABORTED:
        return ss.ABORTED;
      case lc.OUT_OF_RANGE:
        return ss.OUT_OF_RANGE;
      case lc.UNIMPLEMENTED:
        return ss.UNIMPLEMENTED;
      case lc.DATA_LOSS:
        return ss.DATA_LOSS;
      default:
        return ns();
    }
  }
  ((uc = lc || (lc = {}))[(uc.OK = 0)] = "OK"),
    (uc[(uc.CANCELLED = 1)] = "CANCELLED"),
    (uc[(uc.UNKNOWN = 2)] = "UNKNOWN"),
    (uc[(uc.INVALID_ARGUMENT = 3)] = "INVALID_ARGUMENT"),
    (uc[(uc.DEADLINE_EXCEEDED = 4)] = "DEADLINE_EXCEEDED"),
    (uc[(uc.NOT_FOUND = 5)] = "NOT_FOUND"),
    (uc[(uc.ALREADY_EXISTS = 6)] = "ALREADY_EXISTS"),
    (uc[(uc.PERMISSION_DENIED = 7)] = "PERMISSION_DENIED"),
    (uc[(uc.UNAUTHENTICATED = 16)] = "UNAUTHENTICATED"),
    (uc[(uc.RESOURCE_EXHAUSTED = 8)] = "RESOURCE_EXHAUSTED"),
    (uc[(uc.FAILED_PRECONDITION = 9)] = "FAILED_PRECONDITION"),
    (uc[(uc.ABORTED = 10)] = "ABORTED"),
    (uc[(uc.OUT_OF_RANGE = 11)] = "OUT_OF_RANGE"),
    (uc[(uc.UNIMPLEMENTED = 12)] = "UNIMPLEMENTED"),
    (uc[(uc.INTERNAL = 13)] = "INTERNAL"),
    (uc[(uc.UNAVAILABLE = 14)] = "UNAVAILABLE"),
    (uc[(uc.DATA_LOSS = 15)] = "DATA_LOSS");
  let dc = null;
  function pc() {
    return new TextEncoder();
  }
  const fc = new Di([4294967295, 4294967295], 0);
  function mc(e) {
    const t = pc().encode(e),
      n = new xi();
    return n.update(t), new Uint8Array(n.digest());
  }
  function gc(e) {
    const t = new DataView(e.buffer),
      n = t.getUint32(0, !0),
      r = t.getUint32(4, !0),
      i = t.getUint32(8, !0),
      s = t.getUint32(12, !0);
    return [new Di([n, r], 0), new Di([i, s], 0)];
  }
  class vc {
    constructor(e, t, n) {
      if (
        ((this.bitmap = e),
        (this.padding = t),
        (this.hashCount = n),
        t < 0 || t >= 8)
      )
        throw new yc(`Invalid padding: ${t}`);
      if (n < 0) throw new yc(`Invalid hash count: ${n}`);
      if (e.length > 0 && 0 === this.hashCount)
        throw new yc(`Invalid hash count: ${n}`);
      if (0 === e.length && 0 !== t)
        throw new yc(`Invalid padding when bitmap length is 0: ${t}`);
      (this.Ie = 8 * e.length - t), (this.Te = Di.fromNumber(this.Ie));
    }
    Ee(e, t, n) {
      let r = e.add(t.multiply(Di.fromNumber(n)));
      return (
        1 === r.compare(fc) && (r = new Di([r.getBits(0), r.getBits(1)], 0)),
        r.modulo(this.Te).toNumber()
      );
    }
    de(e) {
      return !!(this.bitmap[Math.floor(e / 8)] & (1 << e % 8));
    }
    mightContain(e) {
      if (0 === this.Ie) return !1;
      const t = mc(e),
        [n, r] = gc(t);
      for (let e = 0; e < this.hashCount; e++) {
        const t = this.Ee(n, r, e);
        if (!this.de(t)) return !1;
      }
      return !0;
    }
    static create(e, t, n) {
      const r = e % 8 == 0 ? 0 : 8 - (e % 8),
        i = new Uint8Array(Math.ceil(e / 8)),
        s = new vc(i, r, t);
      return n.forEach((e) => s.insert(e)), s;
    }
    insert(e) {
      if (0 === this.Ie) return;
      const t = mc(e),
        [n, r] = gc(t);
      for (let e = 0; e < this.hashCount; e++) {
        const t = this.Ee(n, r, e);
        this.Ae(t);
      }
    }
    Ae(e) {
      const t = Math.floor(e / 8),
        n = e % 8;
      this.bitmap[t] |= 1 << n;
    }
  }
  class yc extends Error {
    constructor() {
      super(...arguments), (this.name = "BloomFilterError");
    }
  }
  class _c {
    constructor(e, t, n, r, i) {
      (this.snapshotVersion = e),
        (this.targetChanges = t),
        (this.targetMismatches = n),
        (this.documentUpdates = r),
        (this.resolvedLimboDocuments = i);
    }
    static createSynthesizedRemoteEventForCurrentChange(e, t, n) {
      const r = new Map();
      return (
        r.set(e, bc.createSynthesizedTargetChangeForCurrentChange(e, t, n)),
        new _c(ws.min(), r, new Ws(ys), Sa(), Na())
      );
    }
  }
  class bc {
    constructor(e, t, n, r, i) {
      (this.resumeToken = e),
        (this.current = t),
        (this.addedDocuments = n),
        (this.modifiedDocuments = r),
        (this.removedDocuments = i);
    }
    static createSynthesizedTargetChangeForCurrentChange(e, t, n) {
      return new bc(n, t, Na(), Na(), Na());
    }
  }
  class wc {
    constructor(e, t, n, r) {
      (this.Re = e), (this.removedTargetIds = t), (this.key = n), (this.Ve = r);
    }
  }
  class Sc {
    constructor(e, t) {
      (this.targetId = e), (this.me = t);
    }
  }
  class Ec {
    constructor(e, t, n = to.EMPTY_BYTE_STRING, r = null) {
      (this.state = e),
        (this.targetIds = t),
        (this.resumeToken = n),
        (this.cause = r);
    }
  }
  class Ic {
    constructor() {
      (this.fe = 0),
        (this.ge = Tc()),
        (this.pe = to.EMPTY_BYTE_STRING),
        (this.ye = !1),
        (this.we = !0);
    }
    get current() {
      return this.ye;
    }
    get resumeToken() {
      return this.pe;
    }
    get Se() {
      return 0 !== this.fe;
    }
    get be() {
      return this.we;
    }
    De(e) {
      e.approximateByteSize() > 0 && ((this.we = !0), (this.pe = e));
    }
    ve() {
      let e = Na(),
        t = Na(),
        n = Na();
      return (
        this.ge.forEach((r, i) => {
          switch (i) {
            case 0:
              e = e.add(r);
              break;
            case 2:
              t = t.add(r);
              break;
            case 1:
              n = n.add(r);
              break;
            default:
              ns();
          }
        }),
        new bc(this.pe, this.ye, e, t, n)
      );
    }
    Ce() {
      (this.we = !1), (this.ge = Tc());
    }
    Fe(e, t) {
      (this.we = !0), (this.ge = this.ge.insert(e, t));
    }
    Me(e) {
      (this.we = !0), (this.ge = this.ge.remove(e));
    }
    xe() {
      this.fe += 1;
    }
    Oe() {
      (this.fe -= 1), rs(this.fe >= 0);
    }
    Ne() {
      (this.we = !0), (this.ye = !0);
    }
  }
  class Cc {
    constructor(e) {
      (this.Le = e),
        (this.Be = new Map()),
        (this.ke = Sa()),
        (this.qe = kc()),
        (this.Qe = new Ws(ys));
    }
    Ke(e) {
      for (const t of e.Re)
        e.Ve && e.Ve.isFoundDocument()
          ? this.$e(t, e.Ve)
          : this.Ue(t, e.key, e.Ve);
      for (const t of e.removedTargetIds) this.Ue(t, e.key, e.Ve);
    }
    We(e) {
      this.forEachTarget(e, (t) => {
        const n = this.Ge(t);
        switch (e.state) {
          case 0:
            this.ze(t) && n.De(e.resumeToken);
            break;
          case 1:
            n.Oe(), n.Se || n.Ce(), n.De(e.resumeToken);
            break;
          case 2:
            n.Oe(), n.Se || this.removeTarget(t);
            break;
          case 3:
            this.ze(t) && (n.Ne(), n.De(e.resumeToken));
            break;
          case 4:
            this.ze(t) && (this.je(t), n.De(e.resumeToken));
            break;
          default:
            ns();
        }
      });
    }
    forEachTarget(e, t) {
      e.targetIds.length > 0
        ? e.targetIds.forEach(t)
        : this.Be.forEach((e, n) => {
            this.ze(n) && t(n);
          });
    }
    He(e) {
      const t = e.targetId,
        n = e.me.count,
        r = this.Je(t);
      if (r) {
        const i = r.target;
        if (ra(i))
          if (0 === n) {
            const e = new ks(i.path);
            this.Ue(t, e, No.newNoDocument(e, ws.min()));
          } else rs(1 === n);
        else {
          const r = this.Ye(t);
          if (r !== n) {
            const n = this.Ze(e),
              i = n ? this.Xe(n, e, r) : 1;
            if (0 !== i) {
              this.je(t);
              const e =
                2 === i
                  ? "TargetPurposeExistenceFilterMismatchBloom"
                  : "TargetPurposeExistenceFilterMismatch";
              this.Qe = this.Qe.insert(t, e);
            }
            null == dc ||
              dc.et(
                (function (e, t, n, r, i) {
                  var s, o, a, c, l, u;
                  const h = {
                      localCacheCount: e,
                      existenceFilterCount: t.count,
                      databaseId: n.database,
                      projectId: n.projectId,
                    },
                    d = t.unchangedNames;
                  return (
                    d &&
                      (h.bloomFilter = {
                        applied: 0 === i,
                        hashCount:
                          null !== (s = null == d ? void 0 : d.hashCount) &&
                          void 0 !== s
                            ? s
                            : 0,
                        bitmapLength:
                          null !==
                            (c =
                              null ===
                                (a =
                                  null === (o = null == d ? void 0 : d.bits) ||
                                  void 0 === o
                                    ? void 0
                                    : o.bitmap) || void 0 === a
                                ? void 0
                                : a.length) && void 0 !== c
                            ? c
                            : 0,
                        padding:
                          null !==
                            (u =
                              null === (l = null == d ? void 0 : d.bits) ||
                              void 0 === l
                                ? void 0
                                : l.padding) && void 0 !== u
                            ? u
                            : 0,
                        mightContain: (e) => {
                          var t;
                          return (
                            null !==
                              (t = null == r ? void 0 : r.mightContain(e)) &&
                            void 0 !== t &&
                            t
                          );
                        },
                      }),
                    h
                  );
                })(r, e.me, this.Le.tt(), n, i)
              );
          }
        }
      }
    }
    Ze(e) {
      const t = e.me.unchangedNames;
      if (!t || !t.bits) return null;
      const {
        bits: { bitmap: n = "", padding: r = 0 },
        hashCount: i = 0,
      } = t;
      let s, o;
      try {
        s = so(n).toUint8Array();
      } catch (e) {
        if (e instanceof eo)
          return (
            es(
              "Decoding the base64 bloom filter in existence filter failed (" +
                e.message +
                "); ignoring the bloom filter and falling back to full re-query."
            ),
            null
          );
        throw e;
      }
      try {
        o = new vc(s, r, i);
      } catch (e) {
        return (
          es(
            e instanceof yc
              ? "BloomFilter error: "
              : "Applying bloom filter failed: ",
            e
          ),
          null
        );
      }
      return 0 === o.Ie ? null : o;
    }
    Xe(e, t, n) {
      return t.me.count === n - this.nt(e, t.targetId) ? 0 : 2;
    }
    nt(e, t) {
      const n = this.Le.getRemoteKeysForTarget(t);
      let r = 0;
      return (
        n.forEach((n) => {
          const i = this.Le.tt(),
            s = `projects/${i.projectId}/databases/${
              i.database
            }/documents/${n.path.canonicalString()}`;
          e.mightContain(s) || (this.Ue(t, n, null), r++);
        }),
        r
      );
    }
    rt(e) {
      const t = new Map();
      this.Be.forEach((n, r) => {
        const i = this.Je(r);
        if (i) {
          if (n.current && ra(i.target)) {
            const t = new ks(i.target.path);
            null !== this.ke.get(t) ||
              this.it(r, t) ||
              this.Ue(r, t, No.newNoDocument(t, e));
          }
          n.be && (t.set(r, n.ve()), n.Ce());
        }
      });
      let n = Na();
      this.qe.forEach((e, t) => {
        let r = !0;
        t.forEachWhile((e) => {
          const t = this.Je(e);
          return (
            !t || "TargetPurposeLimboResolution" === t.purpose || ((r = !1), !1)
          );
        }),
          r && (n = n.add(e));
      }),
        this.ke.forEach((t, n) => n.setReadTime(e));
      const r = new _c(e, t, this.Qe, this.ke, n);
      return (this.ke = Sa()), (this.qe = kc()), (this.Qe = new Ws(ys)), r;
    }
    $e(e, t) {
      if (!this.ze(e)) return;
      const n = this.it(e, t.key) ? 2 : 0;
      this.Ge(e).Fe(t.key, n),
        (this.ke = this.ke.insert(t.key, t)),
        (this.qe = this.qe.insert(t.key, this.st(t.key).add(e)));
    }
    Ue(e, t, n) {
      if (!this.ze(e)) return;
      const r = this.Ge(e);
      this.it(e, t) ? r.Fe(t, 1) : r.Me(t),
        (this.qe = this.qe.insert(t, this.st(t).delete(e))),
        n && (this.ke = this.ke.insert(t, n));
    }
    removeTarget(e) {
      this.Be.delete(e);
    }
    Ye(e) {
      const t = this.Ge(e).ve();
      return (
        this.Le.getRemoteKeysForTarget(e).size +
        t.addedDocuments.size -
        t.removedDocuments.size
      );
    }
    xe(e) {
      this.Ge(e).xe();
    }
    Ge(e) {
      let t = this.Be.get(e);
      return t || ((t = new Ic()), this.Be.set(e, t)), t;
    }
    st(e) {
      let t = this.qe.get(e);
      return t || ((t = new Ys(ys)), (this.qe = this.qe.insert(e, t))), t;
    }
    ze(e) {
      const t = null !== this.Je(e);
      return t || Xi("WatchChangeAggregator", "Detected inactive target", e), t;
    }
    Je(e) {
      const t = this.Be.get(e);
      return t && t.Se ? null : this.Le.ot(e);
    }
    je(e) {
      this.Be.set(e, new Ic()),
        this.Le.getRemoteKeysForTarget(e).forEach((t) => {
          this.Ue(e, t, null);
        });
    }
    it(e, t) {
      return this.Le.getRemoteKeysForTarget(e).has(t);
    }
  }
  function kc() {
    return new Ws(ks.comparator);
  }
  function Tc() {
    return new Ws(ks.comparator);
  }
  const Lc = { asc: "ASCENDING", desc: "DESCENDING" },
    Ac = {
      "<": "LESS_THAN",
      "<=": "LESS_THAN_OR_EQUAL",
      ">": "GREATER_THAN",
      ">=": "GREATER_THAN_OR_EQUAL",
      "==": "EQUAL",
      "!=": "NOT_EQUAL",
      "array-contains": "ARRAY_CONTAINS",
      in: "IN",
      "not-in": "NOT_IN",
      "array-contains-any": "ARRAY_CONTAINS_ANY",
    },
    Nc = { and: "AND", or: "OR" };
  class Pc {
    constructor(e, t) {
      (this.databaseId = e), (this.useProto3Json = t);
    }
  }
  function Oc(e, t) {
    return e.useProto3Json || Vs(t) ? t : { value: t };
  }
  function Dc(e, t) {
    return e.useProto3Json
      ? `${new Date(1e3 * t.seconds)
          .toISOString()
          .replace(/\.\d*/, "")
          .replace("Z", "")}.${("000000000" + t.nanoseconds).slice(-9)}Z`
      : { seconds: "" + t.seconds, nanos: t.nanoseconds };
  }
  function xc(e, t) {
    return e.useProto3Json ? t.toBase64() : t.toUint8Array();
  }
  function Mc(e) {
    return (
      rs(!!e),
      ws.fromTimestamp(
        (function (e) {
          const t = ro(e);
          return new bs(t.seconds, t.nanos);
        })(e)
      )
    );
  }
  function Rc(e, t) {
    return qc(e, t).canonicalString();
  }
  function qc(e, t) {
    const n = (function (e) {
      return new Es(["projects", e.projectId, "databases", e.database]);
    })(e).child("documents");
    return void 0 === t ? n : n.child(t);
  }
  function Uc(e) {
    const t = Es.fromString(e);
    return rs(el(t)), t;
  }
  function Vc(e, t) {
    const n = Uc(t);
    if (n.get(1) !== e.databaseId.projectId)
      throw new os(
        ss.INVALID_ARGUMENT,
        "Tried to deserialize key from different project: " +
          n.get(1) +
          " vs " +
          e.databaseId.projectId
      );
    if (n.get(3) !== e.databaseId.database)
      throw new os(
        ss.INVALID_ARGUMENT,
        "Tried to deserialize key from different database: " +
          n.get(3) +
          " vs " +
          e.databaseId.database
      );
    return new ks(jc(n));
  }
  function Fc(e, t) {
    return Rc(e.databaseId, t);
  }
  function Bc(e) {
    const t = Uc(e);
    return 4 === t.length ? Es.emptyPath() : jc(t);
  }
  function Hc(e) {
    return new Es([
      "projects",
      e.databaseId.projectId,
      "databases",
      e.databaseId.database,
    ]).canonicalString();
  }
  function jc(e) {
    return rs(e.length > 4 && "documents" === e.get(4)), e.popFirst(5);
  }
  function $c(e, t) {
    return { documents: [Fc(e, t.path)] };
  }
  function zc(e, t) {
    const n = { structuredQuery: {} },
      r = t.path;
    let i;
    null !== t.collectionGroup
      ? ((i = r),
        (n.structuredQuery.from = [
          { collectionId: t.collectionGroup, allDescendants: !0 },
        ]))
      : ((i = r.popLast()),
        (n.structuredQuery.from = [{ collectionId: r.lastSegment() }])),
      (n.parent = Fc(e, i));
    const s = (function (e) {
      if (0 !== e.length) return Zc(Uo.create(e, "and"));
    })(t.filters);
    s && (n.structuredQuery.where = s);
    const o = (function (e) {
      if (0 !== e.length)
        return e.map((e) =>
          (function (e) {
            return { field: Yc(e.field), direction: Wc(e.dir) };
          })(e)
        );
    })(t.orderBy);
    o && (n.structuredQuery.orderBy = o);
    const a = Oc(e, t.limit);
    return (
      null !== a && (n.structuredQuery.limit = a),
      t.startAt &&
        (n.structuredQuery.startAt = (function (e) {
          return { before: e.inclusive, values: e.position };
        })(t.startAt)),
      t.endAt &&
        (n.structuredQuery.endAt = (function (e) {
          return { before: !e.inclusive, values: e.position };
        })(t.endAt)),
      { _t: n, parent: i }
    );
  }
  function Kc(e) {
    let t = Bc(e.parent);
    const n = e.structuredQuery,
      r = n.from ? n.from.length : 0;
    let i = null;
    if (r > 0) {
      rs(1 === r);
      const e = n.from[0];
      e.allDescendants ? (i = e.collectionId) : (t = t.child(e.collectionId));
    }
    let s = [];
    n.where &&
      (s = (function (e) {
        const t = Gc(e);
        return t instanceof Uo && Fo(t) ? t.getFilters() : [t];
      })(n.where));
    let o = [];
    n.orderBy &&
      (o = (function (e) {
        return e.map((e) =>
          (function (e) {
            return new xo(
              Xc(e.field),
              (function (e) {
                switch (e) {
                  case "ASCENDING":
                    return "asc";
                  case "DESCENDING":
                    return "desc";
                  default:
                    return;
                }
              })(e.direction)
            );
          })(e)
        );
      })(n.orderBy));
    let a = null;
    n.limit &&
      (a = (function (e) {
        let t;
        return (t = "object" == typeof e ? e.value : e), Vs(t) ? null : t;
      })(n.limit));
    let c = null;
    n.startAt &&
      (c = (function (e) {
        const t = !!e.before,
          n = e.values || [];
        return new Po(n, t);
      })(n.startAt));
    let l = null;
    return (
      n.endAt &&
        (l = (function (e) {
          const t = !e.before,
            n = e.values || [];
          return new Po(n, t);
        })(n.endAt)),
      sa(t, i, o, s, a, "F", c, l)
    );
  }
  function Gc(e) {
    return void 0 !== e.unaryFilter
      ? (function (e) {
          switch (e.unaryFilter.op) {
            case "IS_NAN":
              const t = Xc(e.unaryFilter.field);
              return qo.create(t, "==", { doubleValue: NaN });
            case "IS_NULL":
              const n = Xc(e.unaryFilter.field);
              return qo.create(n, "==", { nullValue: "NULL_VALUE" });
            case "IS_NOT_NAN":
              const r = Xc(e.unaryFilter.field);
              return qo.create(r, "!=", { doubleValue: NaN });
            case "IS_NOT_NULL":
              const i = Xc(e.unaryFilter.field);
              return qo.create(i, "!=", { nullValue: "NULL_VALUE" });
            default:
              return ns();
          }
        })(e)
      : void 0 !== e.fieldFilter
      ? (function (e) {
          return qo.create(
            Xc(e.fieldFilter.field),
            (function (e) {
              switch (e) {
                case "EQUAL":
                  return "==";
                case "NOT_EQUAL":
                  return "!=";
                case "GREATER_THAN":
                  return ">";
                case "GREATER_THAN_OR_EQUAL":
                  return ">=";
                case "LESS_THAN":
                  return "<";
                case "LESS_THAN_OR_EQUAL":
                  return "<=";
                case "ARRAY_CONTAINS":
                  return "array-contains";
                case "IN":
                  return "in";
                case "NOT_IN":
                  return "not-in";
                case "ARRAY_CONTAINS_ANY":
                  return "array-contains-any";
                default:
                  return ns();
              }
            })(e.fieldFilter.op),
            e.fieldFilter.value
          );
        })(e)
      : void 0 !== e.compositeFilter
      ? (function (e) {
          return Uo.create(
            e.compositeFilter.filters.map((e) => Gc(e)),
            (function (e) {
              switch (e) {
                case "AND":
                  return "and";
                case "OR":
                  return "or";
                default:
                  return ns();
              }
            })(e.compositeFilter.op)
          );
        })(e)
      : ns();
  }
  function Wc(e) {
    return Lc[e];
  }
  function Qc(e) {
    return Ac[e];
  }
  function Jc(e) {
    return Nc[e];
  }
  function Yc(e) {
    return { fieldPath: e.canonicalString() };
  }
  function Xc(e) {
    return Cs.fromServerFormat(e.fieldPath);
  }
  function Zc(e) {
    return e instanceof qo
      ? (function (e) {
          if ("==" === e.op) {
            if (Io(e.value))
              return { unaryFilter: { field: Yc(e.field), op: "IS_NAN" } };
            if (Eo(e.value))
              return { unaryFilter: { field: Yc(e.field), op: "IS_NULL" } };
          } else if ("!=" === e.op) {
            if (Io(e.value))
              return { unaryFilter: { field: Yc(e.field), op: "IS_NOT_NAN" } };
            if (Eo(e.value))
              return { unaryFilter: { field: Yc(e.field), op: "IS_NOT_NULL" } };
          }
          return {
            fieldFilter: { field: Yc(e.field), op: Qc(e.op), value: e.value },
          };
        })(e)
      : e instanceof Uo
      ? (function (e) {
          const t = e.getFilters().map((e) => Zc(e));
          return 1 === t.length
            ? t[0]
            : { compositeFilter: { op: Jc(e.op), filters: t } };
        })(e)
      : ns();
  }
  function el(e) {
    return e.length >= 4 && "projects" === e.get(0) && "databases" === e.get(2);
  }
  class tl {
    constructor(
      e,
      t,
      n,
      r,
      i = ws.min(),
      s = ws.min(),
      o = to.EMPTY_BYTE_STRING,
      a = null
    ) {
      (this.target = e),
        (this.targetId = t),
        (this.purpose = n),
        (this.sequenceNumber = r),
        (this.snapshotVersion = i),
        (this.lastLimboFreeSnapshotVersion = s),
        (this.resumeToken = o),
        (this.expectedCount = a);
    }
    withSequenceNumber(e) {
      return new tl(
        this.target,
        this.targetId,
        this.purpose,
        e,
        this.snapshotVersion,
        this.lastLimboFreeSnapshotVersion,
        this.resumeToken,
        this.expectedCount
      );
    }
    withResumeToken(e, t) {
      return new tl(
        this.target,
        this.targetId,
        this.purpose,
        this.sequenceNumber,
        t,
        this.lastLimboFreeSnapshotVersion,
        e,
        null
      );
    }
    withExpectedCount(e) {
      return new tl(
        this.target,
        this.targetId,
        this.purpose,
        this.sequenceNumber,
        this.snapshotVersion,
        this.lastLimboFreeSnapshotVersion,
        this.resumeToken,
        e
      );
    }
    withLastLimboFreeSnapshotVersion(e) {
      return new tl(
        this.target,
        this.targetId,
        this.purpose,
        this.sequenceNumber,
        this.snapshotVersion,
        e,
        this.resumeToken,
        this.expectedCount
      );
    }
  }
  class nl {
    constructor(e) {
      this.ct = e;
    }
  }
  function rl(e) {
    const t = Kc({ parent: e.parent, structuredQuery: e.structuredQuery });
    return "LAST" === e.limitType ? da(t, t.limit, "L") : t;
  }
  class il {
    constructor() {}
    It(e, t) {
      this.Tt(e, t), t.Et();
    }
    Tt(e, t) {
      if ("nullValue" in e) this.dt(t, 5);
      else if ("booleanValue" in e)
        this.dt(t, 10), t.At(e.booleanValue ? 1 : 0);
      else if ("integerValue" in e) this.dt(t, 15), t.At(io(e.integerValue));
      else if ("doubleValue" in e) {
        const n = io(e.doubleValue);
        isNaN(n) ? this.dt(t, 13) : (this.dt(t, 15), Fs(n) ? t.At(0) : t.At(n));
      } else if ("timestampValue" in e) {
        let n = e.timestampValue;
        this.dt(t, 20),
          "string" == typeof n && (n = ro(n)),
          t.Rt(`${n.seconds || ""}`),
          t.At(n.nanos || 0);
      } else if ("stringValue" in e) this.Vt(e.stringValue, t), this.ft(t);
      else if ("bytesValue" in e)
        this.dt(t, 30), t.gt(so(e.bytesValue)), this.ft(t);
      else if ("referenceValue" in e) this.yt(e.referenceValue, t);
      else if ("geoPointValue" in e) {
        const n = e.geoPointValue;
        this.dt(t, 45), t.At(n.latitude || 0), t.At(n.longitude || 0);
      } else
        "mapValue" in e
          ? Lo(e)
            ? this.dt(t, Number.MAX_SAFE_INTEGER)
            : ko(e)
            ? this.wt(e.mapValue, t)
            : (this.St(e.mapValue, t), this.ft(t))
          : "arrayValue" in e
          ? (this.bt(e.arrayValue, t), this.ft(t))
          : ns();
    }
    Vt(e, t) {
      this.dt(t, 25), this.Dt(e, t);
    }
    Dt(e, t) {
      t.Rt(e);
    }
    St(e, t) {
      const n = e.fields || {};
      this.dt(t, 55);
      for (const e of Object.keys(n)) this.Vt(e, t), this.Tt(n[e], t);
    }
    wt(e, t) {
      var n, r;
      const i = e.fields || {};
      this.dt(t, 53);
      const s = "value",
        o =
          (null ===
            (r =
              null === (n = i[s].arrayValue) || void 0 === n
                ? void 0
                : n.values) || void 0 === r
            ? void 0
            : r.length) || 0;
      this.dt(t, 15), t.At(io(o)), this.Vt(s, t), this.Tt(i[s], t);
    }
    bt(e, t) {
      const n = e.values || [];
      this.dt(t, 50);
      for (const e of n) this.Tt(e, t);
    }
    yt(e, t) {
      this.dt(t, 37),
        ks.fromName(e).path.forEach((e) => {
          this.dt(t, 60), this.Dt(e, t);
        });
    }
    dt(e, t) {
      e.At(t);
    }
    ft(e) {
      e.At(2);
    }
  }
  il.vt = new il();
  class sl {
    constructor() {
      this.un = new ol();
    }
    addToCollectionParentIndex(e, t) {
      return this.un.add(t), Ms.resolve();
    }
    getCollectionParents(e, t) {
      return Ms.resolve(this.un.getEntries(t));
    }
    addFieldIndex(e, t) {
      return Ms.resolve();
    }
    deleteFieldIndex(e, t) {
      return Ms.resolve();
    }
    deleteAllFieldIndexes(e) {
      return Ms.resolve();
    }
    createTargetIndexes(e, t) {
      return Ms.resolve();
    }
    getDocumentsMatchingTarget(e, t) {
      return Ms.resolve(null);
    }
    getIndexType(e, t) {
      return Ms.resolve(0);
    }
    getFieldIndexes(e, t) {
      return Ms.resolve([]);
    }
    getNextCollectionGroupToUpdate(e) {
      return Ms.resolve(null);
    }
    getMinOffset(e, t) {
      return Ms.resolve(Ns.min());
    }
    getMinOffsetFromCollectionGroup(e, t) {
      return Ms.resolve(Ns.min());
    }
    updateCollectionGroup(e, t, n) {
      return Ms.resolve();
    }
    updateIndexEntries(e, t) {
      return Ms.resolve();
    }
  }
  class ol {
    constructor() {
      this.index = {};
    }
    add(e) {
      const t = e.lastSegment(),
        n = e.popLast(),
        r = this.index[t] || new Ys(Es.comparator),
        i = !r.has(n);
      return (this.index[t] = r.add(n)), i;
    }
    has(e) {
      const t = e.lastSegment(),
        n = e.popLast(),
        r = this.index[t];
      return r && r.has(n);
    }
    getEntries(e) {
      return (this.index[e] || new Ys(Es.comparator)).toArray();
    }
  }
  new Uint8Array(0);
  class al {
    constructor(e, t, n) {
      (this.cacheSizeCollectionThreshold = e),
        (this.percentileToCollect = t),
        (this.maximumSequenceNumbersToCollect = n);
    }
    static withCacheSize(e) {
      return new al(
        e,
        al.DEFAULT_COLLECTION_PERCENTILE,
        al.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT
      );
    }
  }
  (al.DEFAULT_COLLECTION_PERCENTILE = 10),
    (al.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT = 1e3),
    (al.DEFAULT = new al(
      41943040,
      al.DEFAULT_COLLECTION_PERCENTILE,
      al.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT
    )),
    (al.DISABLED = new al(-1, 0, 0));
  class cl {
    constructor(e) {
      this.Ln = e;
    }
    next() {
      return (this.Ln += 2), this.Ln;
    }
    static Bn() {
      return new cl(0);
    }
    static kn() {
      return new cl(-1);
    }
  }
  class ll {
    constructor() {
      (this.changes = new ba(
        (e) => e.toString(),
        (e, t) => e.isEqual(t)
      )),
        (this.changesApplied = !1);
    }
    addEntry(e) {
      this.assertNotApplied(), this.changes.set(e.key, e);
    }
    removeEntry(e, t) {
      this.assertNotApplied(),
        this.changes.set(e, No.newInvalidDocument(e).setReadTime(t));
    }
    getEntry(e, t) {
      this.assertNotApplied();
      const n = this.changes.get(t);
      return void 0 !== n ? Ms.resolve(n) : this.getFromCache(e, t);
    }
    getEntries(e, t) {
      return this.getAllFromCache(e, t);
    }
    apply(e) {
      return (
        this.assertNotApplied(),
        (this.changesApplied = !0),
        this.applyChanges(e)
      );
    }
    assertNotApplied() {}
  }
  class ul {
    constructor(e, t) {
      (this.overlayedDocument = e), (this.mutatedFields = t);
    }
  }
  class hl {
    constructor(e, t, n, r) {
      (this.remoteDocumentCache = e),
        (this.mutationQueue = t),
        (this.documentOverlayCache = n),
        (this.indexManager = r);
    }
    getDocument(e, t) {
      let n = null;
      return this.documentOverlayCache
        .getOverlay(e, t)
        .next((r) => ((n = r), this.remoteDocumentCache.getEntry(e, t)))
        .next(
          (e) => (null !== n && Xa(n.mutation, e, Zs.empty(), bs.now()), e)
        );
    }
    getDocuments(e, t) {
      return this.remoteDocumentCache
        .getEntries(e, t)
        .next((t) => this.getLocalViewOfDocuments(e, t, Na()).next(() => t));
    }
    getLocalViewOfDocuments(e, t, n = Na()) {
      const r = ka();
      return this.populateOverlays(e, r, t).next(() =>
        this.computeViews(e, t, r, n).next((e) => {
          let t = Ia();
          return (
            e.forEach((e, n) => {
              t = t.insert(e, n.overlayedDocument);
            }),
            t
          );
        })
      );
    }
    getOverlayedDocuments(e, t) {
      const n = ka();
      return this.populateOverlays(e, n, t).next(() =>
        this.computeViews(e, t, n, Na())
      );
    }
    populateOverlays(e, t, n) {
      const r = [];
      return (
        n.forEach((e) => {
          t.has(e) || r.push(e);
        }),
        this.documentOverlayCache.getOverlays(e, r).next((e) => {
          e.forEach((e, n) => {
            t.set(e, n);
          });
        })
      );
    }
    computeViews(e, t, n, r) {
      let i = Sa();
      const s = La(),
        o = La();
      return (
        t.forEach((e, t) => {
          const o = n.get(t.key);
          r.has(t.key) && (void 0 === o || o.mutation instanceof tc)
            ? (i = i.insert(t.key, t))
            : void 0 !== o
            ? (s.set(t.key, o.mutation.getFieldMask()),
              Xa(o.mutation, t, o.mutation.getFieldMask(), bs.now()))
            : s.set(t.key, Zs.empty());
        }),
        this.recalculateAndSaveOverlays(e, i).next(
          (e) => (
            e.forEach((e, t) => s.set(e, t)),
            t.forEach((e, t) => {
              var n;
              return o.set(
                e,
                new ul(t, null !== (n = s.get(e)) && void 0 !== n ? n : null)
              );
            }),
            o
          )
        )
      );
    }
    recalculateAndSaveOverlays(e, t) {
      const n = La();
      let r = new Ws((e, t) => e - t),
        i = Na();
      return this.mutationQueue
        .getAllMutationBatchesAffectingDocumentKeys(e, t)
        .next((e) => {
          for (const i of e)
            i.keys().forEach((e) => {
              const s = t.get(e);
              if (null === s) return;
              let o = n.get(e) || Zs.empty();
              (o = i.applyToLocalView(s, o)), n.set(e, o);
              const a = (r.get(i.batchId) || Na()).add(e);
              r = r.insert(i.batchId, a);
            });
        })
        .next(() => {
          const s = [],
            o = r.getReverseIterator();
          for (; o.hasNext(); ) {
            const r = o.getNext(),
              a = r.key,
              c = r.value,
              l = Ta();
            c.forEach((e) => {
              if (!i.has(e)) {
                const r = Ja(t.get(e), n.get(e));
                null !== r && l.set(e, r), (i = i.add(e));
              }
            }),
              s.push(this.documentOverlayCache.saveOverlays(e, a, l));
          }
          return Ms.waitFor(s);
        })
        .next(() => n);
    }
    recalculateAndSaveOverlaysForDocumentKeys(e, t) {
      return this.remoteDocumentCache
        .getEntries(e, t)
        .next((t) => this.recalculateAndSaveOverlays(e, t));
    }
    getDocumentsMatchingQuery(e, t, n, r) {
      return (function (e) {
        return (
          ks.isDocumentKey(e.path) &&
          null === e.collectionGroup &&
          0 === e.filters.length
        );
      })(t)
        ? this.getDocumentsMatchingDocumentQuery(e, t.path)
        : ca(t)
        ? this.getDocumentsMatchingCollectionGroupQuery(e, t, n, r)
        : this.getDocumentsMatchingCollectionQuery(e, t, n, r);
    }
    getNextDocuments(e, t, n, r) {
      return this.remoteDocumentCache
        .getAllFromCollectionGroup(e, t, n, r)
        .next((i) => {
          const s =
            r - i.size > 0
              ? this.documentOverlayCache.getOverlaysForCollectionGroup(
                  e,
                  t,
                  n.largestBatchId,
                  r - i.size
                )
              : Ms.resolve(ka());
          let o = -1,
            a = i;
          return s.next((t) =>
            Ms.forEach(
              t,
              (t, n) => (
                o < n.largestBatchId && (o = n.largestBatchId),
                i.get(t)
                  ? Ms.resolve()
                  : this.remoteDocumentCache.getEntry(e, t).next((e) => {
                      a = a.insert(t, e);
                    })
              )
            )
              .next(() => this.populateOverlays(e, t, i))
              .next(() => this.computeViews(e, a, t, Na()))
              .next((e) => ({ batchId: o, changes: Ca(e) }))
          );
        });
    }
    getDocumentsMatchingDocumentQuery(e, t) {
      return this.getDocument(e, new ks(t)).next((e) => {
        let t = Ia();
        return e.isFoundDocument() && (t = t.insert(e.key, e)), t;
      });
    }
    getDocumentsMatchingCollectionGroupQuery(e, t, n, r) {
      const i = t.collectionGroup;
      let s = Ia();
      return this.indexManager.getCollectionParents(e, i).next((o) =>
        Ms.forEach(o, (o) => {
          const a = (function (e, t) {
            return new ia(
              t,
              null,
              e.explicitOrderBy.slice(),
              e.filters.slice(),
              e.limit,
              e.limitType,
              e.startAt,
              e.endAt
            );
          })(t, o.child(i));
          return this.getDocumentsMatchingCollectionQuery(e, a, n, r).next(
            (e) => {
              e.forEach((e, t) => {
                s = s.insert(e, t);
              });
            }
          );
        }).next(() => s)
      );
    }
    getDocumentsMatchingCollectionQuery(e, t, n, r) {
      let i;
      return this.documentOverlayCache
        .getOverlaysForCollection(e, t.path, n.largestBatchId)
        .next(
          (s) => (
            (i = s),
            this.remoteDocumentCache.getDocumentsMatchingQuery(e, t, n, i, r)
          )
        )
        .next((e) => {
          i.forEach((t, n) => {
            const r = n.getKey();
            null === e.get(r) && (e = e.insert(r, No.newInvalidDocument(r)));
          });
          let n = Ia();
          return (
            e.forEach((e, r) => {
              const s = i.get(e);
              void 0 !== s && Xa(s.mutation, r, Zs.empty(), bs.now()),
                ga(t, r) && (n = n.insert(e, r));
            }),
            n
          );
        });
    }
  }
  class dl {
    constructor(e) {
      (this.serializer = e), (this.hr = new Map()), (this.Pr = new Map());
    }
    getBundleMetadata(e, t) {
      return Ms.resolve(this.hr.get(t));
    }
    saveBundleMetadata(e, t) {
      return (
        this.hr.set(
          t.id,
          (function (e) {
            return {
              id: e.id,
              version: e.version,
              createTime: Mc(e.createTime),
            };
          })(t)
        ),
        Ms.resolve()
      );
    }
    getNamedQuery(e, t) {
      return Ms.resolve(this.Pr.get(t));
    }
    saveNamedQuery(e, t) {
      return (
        this.Pr.set(
          t.name,
          (function (e) {
            return {
              name: e.name,
              query: rl(e.bundledQuery),
              readTime: Mc(e.readTime),
            };
          })(t)
        ),
        Ms.resolve()
      );
    }
  }
  class pl {
    constructor() {
      (this.overlays = new Ws(ks.comparator)), (this.Ir = new Map());
    }
    getOverlay(e, t) {
      return Ms.resolve(this.overlays.get(t));
    }
    getOverlays(e, t) {
      const n = ka();
      return Ms.forEach(t, (t) =>
        this.getOverlay(e, t).next((e) => {
          null !== e && n.set(t, e);
        })
      ).next(() => n);
    }
    saveOverlays(e, t, n) {
      return (
        n.forEach((n, r) => {
          this.ht(e, t, r);
        }),
        Ms.resolve()
      );
    }
    removeOverlaysForBatchId(e, t, n) {
      const r = this.Ir.get(n);
      return (
        void 0 !== r &&
          (r.forEach((e) => (this.overlays = this.overlays.remove(e))),
          this.Ir.delete(n)),
        Ms.resolve()
      );
    }
    getOverlaysForCollection(e, t, n) {
      const r = ka(),
        i = t.length + 1,
        s = new ks(t.child("")),
        o = this.overlays.getIteratorFrom(s);
      for (; o.hasNext(); ) {
        const e = o.getNext().value,
          s = e.getKey();
        if (!t.isPrefixOf(s.path)) break;
        s.path.length === i && e.largestBatchId > n && r.set(e.getKey(), e);
      }
      return Ms.resolve(r);
    }
    getOverlaysForCollectionGroup(e, t, n, r) {
      let i = new Ws((e, t) => e - t);
      const s = this.overlays.getIterator();
      for (; s.hasNext(); ) {
        const e = s.getNext().value;
        if (e.getKey().getCollectionGroup() === t && e.largestBatchId > n) {
          let t = i.get(e.largestBatchId);
          null === t && ((t = ka()), (i = i.insert(e.largestBatchId, t))),
            t.set(e.getKey(), e);
        }
      }
      const o = ka(),
        a = i.getIterator();
      for (
        ;
        a.hasNext() &&
        (a.getNext().value.forEach((e, t) => o.set(e, t)), !(o.size() >= r));

      );
      return Ms.resolve(o);
    }
    ht(e, t, n) {
      const r = this.overlays.get(n.key);
      if (null !== r) {
        const e = this.Ir.get(r.largestBatchId).delete(n.key);
        this.Ir.set(r.largestBatchId, e);
      }
      this.overlays = this.overlays.insert(n.key, new ac(t, n));
      let i = this.Ir.get(t);
      void 0 === i && ((i = Na()), this.Ir.set(t, i)),
        this.Ir.set(t, i.add(n.key));
    }
  }
  class fl {
    constructor() {
      this.sessionToken = to.EMPTY_BYTE_STRING;
    }
    getSessionToken(e) {
      return Ms.resolve(this.sessionToken);
    }
    setSessionToken(e, t) {
      return (this.sessionToken = t), Ms.resolve();
    }
  }
  class ml {
    constructor() {
      (this.Tr = new Ys(gl.Er)), (this.dr = new Ys(gl.Ar));
    }
    isEmpty() {
      return this.Tr.isEmpty();
    }
    addReference(e, t) {
      const n = new gl(e, t);
      (this.Tr = this.Tr.add(n)), (this.dr = this.dr.add(n));
    }
    Rr(e, t) {
      e.forEach((e) => this.addReference(e, t));
    }
    removeReference(e, t) {
      this.Vr(new gl(e, t));
    }
    mr(e, t) {
      e.forEach((e) => this.removeReference(e, t));
    }
    gr(e) {
      const t = new ks(new Es([])),
        n = new gl(t, e),
        r = new gl(t, e + 1),
        i = [];
      return (
        this.dr.forEachInRange([n, r], (e) => {
          this.Vr(e), i.push(e.key);
        }),
        i
      );
    }
    pr() {
      this.Tr.forEach((e) => this.Vr(e));
    }
    Vr(e) {
      (this.Tr = this.Tr.delete(e)), (this.dr = this.dr.delete(e));
    }
    yr(e) {
      const t = new ks(new Es([])),
        n = new gl(t, e),
        r = new gl(t, e + 1);
      let i = Na();
      return (
        this.dr.forEachInRange([n, r], (e) => {
          i = i.add(e.key);
        }),
        i
      );
    }
    containsKey(e) {
      const t = new gl(e, 0),
        n = this.Tr.firstAfterOrEqual(t);
      return null !== n && e.isEqual(n.key);
    }
  }
  class gl {
    constructor(e, t) {
      (this.key = e), (this.wr = t);
    }
    static Er(e, t) {
      return ks.comparator(e.key, t.key) || ys(e.wr, t.wr);
    }
    static Ar(e, t) {
      return ys(e.wr, t.wr) || ks.comparator(e.key, t.key);
    }
  }
  class vl {
    constructor(e, t) {
      (this.indexManager = e),
        (this.referenceDelegate = t),
        (this.mutationQueue = []),
        (this.Sr = 1),
        (this.br = new Ys(gl.Er));
    }
    checkEmpty(e) {
      return Ms.resolve(0 === this.mutationQueue.length);
    }
    addMutationBatch(e, t, n, r) {
      const i = this.Sr;
      this.Sr++,
        this.mutationQueue.length > 0 &&
          this.mutationQueue[this.mutationQueue.length - 1];
      const s = new oc(i, t, n, r);
      this.mutationQueue.push(s);
      for (const t of r)
        (this.br = this.br.add(new gl(t.key, i))),
          this.indexManager.addToCollectionParentIndex(e, t.key.path.popLast());
      return Ms.resolve(s);
    }
    lookupMutationBatch(e, t) {
      return Ms.resolve(this.Dr(t));
    }
    getNextMutationBatchAfterBatchId(e, t) {
      const n = t + 1,
        r = this.vr(n),
        i = r < 0 ? 0 : r;
      return Ms.resolve(
        this.mutationQueue.length > i ? this.mutationQueue[i] : null
      );
    }
    getHighestUnacknowledgedBatchId() {
      return Ms.resolve(0 === this.mutationQueue.length ? -1 : this.Sr - 1);
    }
    getAllMutationBatches(e) {
      return Ms.resolve(this.mutationQueue.slice());
    }
    getAllMutationBatchesAffectingDocumentKey(e, t) {
      const n = new gl(t, 0),
        r = new gl(t, Number.POSITIVE_INFINITY),
        i = [];
      return (
        this.br.forEachInRange([n, r], (e) => {
          const t = this.Dr(e.wr);
          i.push(t);
        }),
        Ms.resolve(i)
      );
    }
    getAllMutationBatchesAffectingDocumentKeys(e, t) {
      let n = new Ys(ys);
      return (
        t.forEach((e) => {
          const t = new gl(e, 0),
            r = new gl(e, Number.POSITIVE_INFINITY);
          this.br.forEachInRange([t, r], (e) => {
            n = n.add(e.wr);
          });
        }),
        Ms.resolve(this.Cr(n))
      );
    }
    getAllMutationBatchesAffectingQuery(e, t) {
      const n = t.path,
        r = n.length + 1;
      let i = n;
      ks.isDocumentKey(i) || (i = i.child(""));
      const s = new gl(new ks(i), 0);
      let o = new Ys(ys);
      return (
        this.br.forEachWhile((e) => {
          const t = e.key.path;
          return !!n.isPrefixOf(t) && (t.length === r && (o = o.add(e.wr)), !0);
        }, s),
        Ms.resolve(this.Cr(o))
      );
    }
    Cr(e) {
      const t = [];
      return (
        e.forEach((e) => {
          const n = this.Dr(e);
          null !== n && t.push(n);
        }),
        t
      );
    }
    removeMutationBatch(e, t) {
      rs(0 === this.Fr(t.batchId, "removed")), this.mutationQueue.shift();
      let n = this.br;
      return Ms.forEach(t.mutations, (r) => {
        const i = new gl(r.key, t.batchId);
        return (
          (n = n.delete(i)),
          this.referenceDelegate.markPotentiallyOrphaned(e, r.key)
        );
      }).next(() => {
        this.br = n;
      });
    }
    On(e) {}
    containsKey(e, t) {
      const n = new gl(t, 0),
        r = this.br.firstAfterOrEqual(n);
      return Ms.resolve(t.isEqual(r && r.key));
    }
    performConsistencyCheck(e) {
      return this.mutationQueue.length, Ms.resolve();
    }
    Fr(e, t) {
      return this.vr(e);
    }
    vr(e) {
      return 0 === this.mutationQueue.length
        ? 0
        : e - this.mutationQueue[0].batchId;
    }
    Dr(e) {
      const t = this.vr(e);
      return t < 0 || t >= this.mutationQueue.length
        ? null
        : this.mutationQueue[t];
    }
  }
  class yl {
    constructor(e) {
      (this.Mr = e), (this.docs = new Ws(ks.comparator)), (this.size = 0);
    }
    setIndexManager(e) {
      this.indexManager = e;
    }
    addEntry(e, t) {
      const n = t.key,
        r = this.docs.get(n),
        i = r ? r.size : 0,
        s = this.Mr(t);
      return (
        (this.docs = this.docs.insert(n, {
          document: t.mutableCopy(),
          size: s,
        })),
        (this.size += s - i),
        this.indexManager.addToCollectionParentIndex(e, n.path.popLast())
      );
    }
    removeEntry(e) {
      const t = this.docs.get(e);
      t && ((this.docs = this.docs.remove(e)), (this.size -= t.size));
    }
    getEntry(e, t) {
      const n = this.docs.get(t);
      return Ms.resolve(
        n ? n.document.mutableCopy() : No.newInvalidDocument(t)
      );
    }
    getEntries(e, t) {
      let n = Sa();
      return (
        t.forEach((e) => {
          const t = this.docs.get(e);
          n = n.insert(
            e,
            t ? t.document.mutableCopy() : No.newInvalidDocument(e)
          );
        }),
        Ms.resolve(n)
      );
    }
    getDocumentsMatchingQuery(e, t, n, r) {
      let i = Sa();
      const s = t.path,
        o = new ks(s.child("")),
        a = this.docs.getIteratorFrom(o);
      for (; a.hasNext(); ) {
        const {
          key: e,
          value: { document: o },
        } = a.getNext();
        if (!s.isPrefixOf(e.path)) break;
        e.path.length > s.length + 1 ||
          Ps(As(o), n) <= 0 ||
          ((r.has(o.key) || ga(t, o)) &&
            (i = i.insert(o.key, o.mutableCopy())));
      }
      return Ms.resolve(i);
    }
    getAllFromCollectionGroup(e, t, n, r) {
      ns();
    }
    Or(e, t) {
      return Ms.forEach(this.docs, (e) => t(e));
    }
    newChangeBuffer(e) {
      return new _l(this);
    }
    getSize(e) {
      return Ms.resolve(this.size);
    }
  }
  class _l extends ll {
    constructor(e) {
      super(), (this.cr = e);
    }
    applyChanges(e) {
      const t = [];
      return (
        this.changes.forEach((n, r) => {
          r.isValidDocument()
            ? t.push(this.cr.addEntry(e, r))
            : this.cr.removeEntry(n);
        }),
        Ms.waitFor(t)
      );
    }
    getFromCache(e, t) {
      return this.cr.getEntry(e, t);
    }
    getAllFromCache(e, t) {
      return this.cr.getEntries(e, t);
    }
  }
  class bl {
    constructor(e) {
      (this.persistence = e),
        (this.Nr = new ba((e) => ta(e), na)),
        (this.lastRemoteSnapshotVersion = ws.min()),
        (this.highestTargetId = 0),
        (this.Lr = 0),
        (this.Br = new ml()),
        (this.targetCount = 0),
        (this.kr = cl.Bn());
    }
    forEachTarget(e, t) {
      return this.Nr.forEach((e, n) => t(n)), Ms.resolve();
    }
    getLastRemoteSnapshotVersion(e) {
      return Ms.resolve(this.lastRemoteSnapshotVersion);
    }
    getHighestSequenceNumber(e) {
      return Ms.resolve(this.Lr);
    }
    allocateTargetId(e) {
      return (
        (this.highestTargetId = this.kr.next()),
        Ms.resolve(this.highestTargetId)
      );
    }
    setTargetsMetadata(e, t, n) {
      return (
        n && (this.lastRemoteSnapshotVersion = n),
        t > this.Lr && (this.Lr = t),
        Ms.resolve()
      );
    }
    Kn(e) {
      this.Nr.set(e.target, e);
      const t = e.targetId;
      t > this.highestTargetId &&
        ((this.kr = new cl(t)), (this.highestTargetId = t)),
        e.sequenceNumber > this.Lr && (this.Lr = e.sequenceNumber);
    }
    addTargetData(e, t) {
      return this.Kn(t), (this.targetCount += 1), Ms.resolve();
    }
    updateTargetData(e, t) {
      return this.Kn(t), Ms.resolve();
    }
    removeTargetData(e, t) {
      return (
        this.Nr.delete(t.target),
        this.Br.gr(t.targetId),
        (this.targetCount -= 1),
        Ms.resolve()
      );
    }
    removeTargets(e, t, n) {
      let r = 0;
      const i = [];
      return (
        this.Nr.forEach((s, o) => {
          o.sequenceNumber <= t &&
            null === n.get(o.targetId) &&
            (this.Nr.delete(s),
            i.push(this.removeMatchingKeysForTargetId(e, o.targetId)),
            r++);
        }),
        Ms.waitFor(i).next(() => r)
      );
    }
    getTargetCount(e) {
      return Ms.resolve(this.targetCount);
    }
    getTargetData(e, t) {
      const n = this.Nr.get(t) || null;
      return Ms.resolve(n);
    }
    addMatchingKeys(e, t, n) {
      return this.Br.Rr(t, n), Ms.resolve();
    }
    removeMatchingKeys(e, t, n) {
      this.Br.mr(t, n);
      const r = this.persistence.referenceDelegate,
        i = [];
      return (
        r &&
          t.forEach((t) => {
            i.push(r.markPotentiallyOrphaned(e, t));
          }),
        Ms.waitFor(i)
      );
    }
    removeMatchingKeysForTargetId(e, t) {
      return this.Br.gr(t), Ms.resolve();
    }
    getMatchingKeysForTargetId(e, t) {
      const n = this.Br.yr(t);
      return Ms.resolve(n);
    }
    containsKey(e, t) {
      return Ms.resolve(this.Br.containsKey(t));
    }
  }
  class wl {
    constructor(e, t) {
      (this.qr = {}),
        (this.overlays = {}),
        (this.Qr = new Us(0)),
        (this.Kr = !1),
        (this.Kr = !0),
        (this.$r = new fl()),
        (this.referenceDelegate = e(this)),
        (this.Ur = new bl(this)),
        (this.indexManager = new sl()),
        (this.remoteDocumentCache = (function (e) {
          return new yl(e);
        })((e) => this.referenceDelegate.Wr(e))),
        (this.serializer = new nl(t)),
        (this.Gr = new dl(this.serializer));
    }
    start() {
      return Promise.resolve();
    }
    shutdown() {
      return (this.Kr = !1), Promise.resolve();
    }
    get started() {
      return this.Kr;
    }
    setDatabaseDeletedListener() {}
    setNetworkEnabled() {}
    getIndexManager(e) {
      return this.indexManager;
    }
    getDocumentOverlayCache(e) {
      let t = this.overlays[e.toKey()];
      return t || ((t = new pl()), (this.overlays[e.toKey()] = t)), t;
    }
    getMutationQueue(e, t) {
      let n = this.qr[e.toKey()];
      return (
        n ||
          ((n = new vl(t, this.referenceDelegate)), (this.qr[e.toKey()] = n)),
        n
      );
    }
    getGlobalsCache() {
      return this.$r;
    }
    getTargetCache() {
      return this.Ur;
    }
    getRemoteDocumentCache() {
      return this.remoteDocumentCache;
    }
    getBundleCache() {
      return this.Gr;
    }
    runTransaction(e, t, n) {
      Xi("MemoryPersistence", "Starting transaction:", e);
      const r = new Sl(this.Qr.next());
      return (
        this.referenceDelegate.zr(),
        n(r)
          .next((e) => this.referenceDelegate.jr(r).next(() => e))
          .toPromise()
          .then((e) => (r.raiseOnCommittedEvent(), e))
      );
    }
    Hr(e, t) {
      return Ms.or(
        Object.values(this.qr).map((n) => () => n.containsKey(e, t))
      );
    }
  }
  class Sl extends Ds {
    constructor(e) {
      super(), (this.currentSequenceNumber = e);
    }
  }
  class El {
    constructor(e) {
      (this.persistence = e), (this.Jr = new ml()), (this.Yr = null);
    }
    static Zr(e) {
      return new El(e);
    }
    get Xr() {
      if (this.Yr) return this.Yr;
      throw ns();
    }
    addReference(e, t, n) {
      return (
        this.Jr.addReference(n, t), this.Xr.delete(n.toString()), Ms.resolve()
      );
    }
    removeReference(e, t, n) {
      return (
        this.Jr.removeReference(n, t), this.Xr.add(n.toString()), Ms.resolve()
      );
    }
    markPotentiallyOrphaned(e, t) {
      return this.Xr.add(t.toString()), Ms.resolve();
    }
    removeTarget(e, t) {
      this.Jr.gr(t.targetId).forEach((e) => this.Xr.add(e.toString()));
      const n = this.persistence.getTargetCache();
      return n
        .getMatchingKeysForTargetId(e, t.targetId)
        .next((e) => {
          e.forEach((e) => this.Xr.add(e.toString()));
        })
        .next(() => n.removeTargetData(e, t));
    }
    zr() {
      this.Yr = new Set();
    }
    jr(e) {
      const t = this.persistence.getRemoteDocumentCache().newChangeBuffer();
      return Ms.forEach(this.Xr, (n) => {
        const r = ks.fromPath(n);
        return this.ei(e, r).next((e) => {
          e || t.removeEntry(r, ws.min());
        });
      }).next(() => ((this.Yr = null), t.apply(e)));
    }
    updateLimboDocument(e, t) {
      return this.ei(e, t).next((e) => {
        e ? this.Xr.delete(t.toString()) : this.Xr.add(t.toString());
      });
    }
    Wr(e) {
      return 0;
    }
    ei(e, t) {
      return Ms.or([
        () => Ms.resolve(this.Jr.containsKey(t)),
        () => this.persistence.getTargetCache().containsKey(e, t),
        () => this.persistence.Hr(e, t),
      ]);
    }
  }
  class Il {
    constructor(e, t, n, r) {
      (this.targetId = e), (this.fromCache = t), (this.$i = n), (this.Ui = r);
    }
    static Wi(e, t) {
      let n = Na(),
        r = Na();
      for (const e of t.docChanges)
        switch (e.type) {
          case 0:
            n = n.add(e.doc.key);
            break;
          case 1:
            r = r.add(e.doc.key);
        }
      return new Il(e, t.fromCache, n, r);
    }
  }
  class Cl {
    constructor() {
      this._documentReadCount = 0;
    }
    get documentReadCount() {
      return this._documentReadCount;
    }
    incrementDocumentReadCount(e) {
      this._documentReadCount += e;
    }
  }
  class kl {
    constructor() {
      (this.Gi = !1),
        (this.zi = !1),
        (this.ji = 100),
        (this.Hi = m() ? 8 : Rs(f()) > 0 ? 6 : 4);
    }
    initialize(e, t) {
      (this.Ji = e), (this.indexManager = t), (this.Gi = !0);
    }
    getDocumentsMatchingQuery(e, t, n, r) {
      const i = { result: null };
      return this.Yi(e, t)
        .next((e) => {
          i.result = e;
        })
        .next(() => {
          if (!i.result)
            return this.Zi(e, t, r, n).next((e) => {
              i.result = e;
            });
        })
        .next(() => {
          if (i.result) return;
          const n = new Cl();
          return this.Xi(e, t, n).next((r) => {
            if (((i.result = r), this.zi)) return this.es(e, t, n, r.size);
          });
        })
        .next(() => i.result);
    }
    es(e, t, n, r) {
      return n.documentReadCount < this.ji
        ? (Yi() <= D.DEBUG &&
            Xi(
              "QueryEngine",
              "SDK will not create cache indexes for query:",
              ma(t),
              "since it only creates cache indexes for collection contains",
              "more than or equal to",
              this.ji,
              "documents"
            ),
          Ms.resolve())
        : (Yi() <= D.DEBUG &&
            Xi(
              "QueryEngine",
              "Query:",
              ma(t),
              "scans",
              n.documentReadCount,
              "local documents and returns",
              r,
              "documents as results."
            ),
          n.documentReadCount > this.Hi * r
            ? (Yi() <= D.DEBUG &&
                Xi(
                  "QueryEngine",
                  "The SDK decides to create cache indexes for query:",
                  ma(t),
                  "as using cache indexes may help improve performance."
                ),
              this.indexManager.createTargetIndexes(e, ua(t)))
            : Ms.resolve());
    }
    Yi(e, t) {
      if (aa(t)) return Ms.resolve(null);
      let n = ua(t);
      return this.indexManager.getIndexType(e, n).next((r) =>
        0 === r
          ? null
          : (null !== t.limit &&
              1 === r &&
              ((t = da(t, null, "F")), (n = ua(t))),
            this.indexManager.getDocumentsMatchingTarget(e, n).next((r) => {
              const i = Na(...r);
              return this.Ji.getDocuments(e, i).next((r) =>
                this.indexManager.getMinOffset(e, n).next((n) => {
                  const s = this.ts(t, r);
                  return this.ns(t, s, i, n.readTime)
                    ? this.Yi(e, da(t, null, "F"))
                    : this.rs(e, s, t, n);
                })
              );
            }))
      );
    }
    Zi(e, t, n, r) {
      return aa(t) || r.isEqual(ws.min())
        ? Ms.resolve(null)
        : this.Ji.getDocuments(e, n).next((i) => {
            const s = this.ts(t, i);
            return this.ns(t, s, n, r)
              ? Ms.resolve(null)
              : (Yi() <= D.DEBUG &&
                  Xi(
                    "QueryEngine",
                    "Re-using previous result from %s to execute query: %s",
                    r.toString(),
                    ma(t)
                  ),
                this.rs(e, s, t, Ls(r, -1)).next((e) => e));
          });
    }
    ts(e, t) {
      let n = new Ys(ya(e));
      return (
        t.forEach((t, r) => {
          ga(e, r) && (n = n.add(r));
        }),
        n
      );
    }
    ns(e, t, n, r) {
      if (null === e.limit) return !1;
      if (n.size !== t.size) return !0;
      const i = "F" === e.limitType ? t.last() : t.first();
      return !!i && (i.hasPendingWrites || i.version.compareTo(r) > 0);
    }
    Xi(e, t, n) {
      return (
        Yi() <= D.DEBUG &&
          Xi(
            "QueryEngine",
            "Using full collection scan to execute query:",
            ma(t)
          ),
        this.Ji.getDocumentsMatchingQuery(e, t, Ns.min(), n)
      );
    }
    rs(e, t, n, r) {
      return this.Ji.getDocumentsMatchingQuery(e, n, r).next(
        (e) => (
          t.forEach((t) => {
            e = e.insert(t.key, t);
          }),
          e
        )
      );
    }
  }
  class Tl {
    constructor(e, t, n, r) {
      (this.persistence = e),
        (this.ss = t),
        (this.serializer = r),
        (this.os = new Ws(ys)),
        (this._s = new ba((e) => ta(e), na)),
        (this.us = new Map()),
        (this.cs = e.getRemoteDocumentCache()),
        (this.Ur = e.getTargetCache()),
        (this.Gr = e.getBundleCache()),
        this.ls(n);
    }
    ls(e) {
      (this.documentOverlayCache = this.persistence.getDocumentOverlayCache(e)),
        (this.indexManager = this.persistence.getIndexManager(e)),
        (this.mutationQueue = this.persistence.getMutationQueue(
          e,
          this.indexManager
        )),
        (this.localDocuments = new hl(
          this.cs,
          this.mutationQueue,
          this.documentOverlayCache,
          this.indexManager
        )),
        this.cs.setIndexManager(this.indexManager),
        this.ss.initialize(this.localDocuments, this.indexManager);
    }
    collectGarbage(e) {
      return this.persistence.runTransaction(
        "Collect garbage",
        "readwrite-primary",
        (t) => e.collect(t, this.os)
      );
    }
  }
  function Ll(e, t, n, r) {
    return new Tl(e, t, n, r);
  }
  async function Al(e, t) {
    const n = is(e);
    return await n.persistence.runTransaction(
      "Handle user change",
      "readonly",
      (e) => {
        let r;
        return n.mutationQueue
          .getAllMutationBatches(e)
          .next(
            (i) => ((r = i), n.ls(t), n.mutationQueue.getAllMutationBatches(e))
          )
          .next((t) => {
            const i = [],
              s = [];
            let o = Na();
            for (const e of r) {
              i.push(e.batchId);
              for (const t of e.mutations) o = o.add(t.key);
            }
            for (const e of t) {
              s.push(e.batchId);
              for (const t of e.mutations) o = o.add(t.key);
            }
            return n.localDocuments
              .getDocuments(e, o)
              .next((e) => ({ hs: e, removedBatchIds: i, addedBatchIds: s }));
          });
      }
    );
  }
  function Nl(e) {
    const t = is(e);
    return t.persistence.runTransaction(
      "Get last remote snapshot version",
      "readonly",
      (e) => t.Ur.getLastRemoteSnapshotVersion(e)
    );
  }
  function Pl(e, t, n) {
    let r = Na(),
      i = Na();
    return (
      n.forEach((e) => (r = r.add(e))),
      t.getEntries(e, r).next((e) => {
        let r = Sa();
        return (
          n.forEach((n, s) => {
            const o = e.get(n);
            s.isFoundDocument() !== o.isFoundDocument() && (i = i.add(n)),
              s.isNoDocument() && s.version.isEqual(ws.min())
                ? (t.removeEntry(n, s.readTime), (r = r.insert(n, s)))
                : !o.isValidDocument() ||
                  s.version.compareTo(o.version) > 0 ||
                  (0 === s.version.compareTo(o.version) && o.hasPendingWrites)
                ? (t.addEntry(s), (r = r.insert(n, s)))
                : Xi(
                    "LocalStore",
                    "Ignoring outdated watch update for ",
                    n,
                    ". Current version:",
                    o.version,
                    " Watch version:",
                    s.version
                  );
          }),
          { Ps: r, Is: i }
        );
      })
    );
  }
  function Ol(e, t) {
    const n = is(e);
    return n.persistence
      .runTransaction("Allocate target", "readwrite", (e) => {
        let r;
        return n.Ur.getTargetData(e, t).next((i) =>
          i
            ? ((r = i), Ms.resolve(r))
            : n.Ur.allocateTargetId(e).next(
                (i) => (
                  (r = new tl(
                    t,
                    i,
                    "TargetPurposeListen",
                    e.currentSequenceNumber
                  )),
                  n.Ur.addTargetData(e, r).next(() => r)
                )
              )
        );
      })
      .then((e) => {
        const r = n.os.get(e.targetId);
        return (
          (null === r || e.snapshotVersion.compareTo(r.snapshotVersion) > 0) &&
            ((n.os = n.os.insert(e.targetId, e)), n._s.set(t, e.targetId)),
          e
        );
      });
  }
  async function Dl(e, t, n) {
    const r = is(e),
      i = r.os.get(t),
      s = n ? "readwrite" : "readwrite-primary";
    try {
      n ||
        (await r.persistence.runTransaction("Release target", s, (e) =>
          r.persistence.referenceDelegate.removeTarget(e, i)
        ));
    } catch (e) {
      if (!qs(e)) throw e;
      Xi(
        "LocalStore",
        `Failed to update sequence numbers for target ${t}: ${e}`
      );
    }
    (r.os = r.os.remove(t)), r._s.delete(i.target);
  }
  function xl(e, t, n) {
    const r = is(e);
    let i = ws.min(),
      s = Na();
    return r.persistence.runTransaction("Execute query", "readwrite", (e) =>
      (function (e, t, n) {
        const r = is(e),
          i = r._s.get(n);
        return void 0 !== i
          ? Ms.resolve(r.os.get(i))
          : r.Ur.getTargetData(t, n);
      })(r, e, ua(t))
        .next((t) => {
          if (t)
            return (
              (i = t.lastLimboFreeSnapshotVersion),
              r.Ur.getMatchingKeysForTargetId(e, t.targetId).next((e) => {
                s = e;
              })
            );
        })
        .next(() =>
          r.ss.getDocumentsMatchingQuery(e, t, n ? i : ws.min(), n ? s : Na())
        )
        .next((e) => (Ml(r, va(t), e), { documents: e, Ts: s }))
    );
  }
  function Ml(e, t, n) {
    let r = e.us.get(t) || ws.min();
    n.forEach((e, t) => {
      t.readTime.compareTo(r) > 0 && (r = t.readTime);
    }),
      e.us.set(t, r);
  }
  class Rl {
    constructor() {
      this.activeTargetIds = Oa();
    }
    fs(e) {
      this.activeTargetIds = this.activeTargetIds.add(e);
    }
    gs(e) {
      this.activeTargetIds = this.activeTargetIds.delete(e);
    }
    Vs() {
      const e = {
        activeTargetIds: this.activeTargetIds.toArray(),
        updateTimeMs: Date.now(),
      };
      return JSON.stringify(e);
    }
  }
  class ql {
    constructor() {
      (this.so = new Rl()),
        (this.oo = {}),
        (this.onlineStateHandler = null),
        (this.sequenceNumberHandler = null);
    }
    addPendingMutation(e) {}
    updateMutationState(e, t, n) {}
    addLocalQueryTarget(e, t = !0) {
      return t && this.so.fs(e), this.oo[e] || "not-current";
    }
    updateQueryState(e, t, n) {
      this.oo[e] = t;
    }
    removeLocalQueryTarget(e) {
      this.so.gs(e);
    }
    isLocalQueryTarget(e) {
      return this.so.activeTargetIds.has(e);
    }
    clearQueryState(e) {
      delete this.oo[e];
    }
    getAllActiveQueryTargets() {
      return this.so.activeTargetIds;
    }
    isActiveQueryTarget(e) {
      return this.so.activeTargetIds.has(e);
    }
    start() {
      return (this.so = new Rl()), Promise.resolve();
    }
    handleUserChange(e, t, n) {}
    setOnlineState(e) {}
    shutdown() {}
    writeSequenceNumber(e) {}
    notifyBundleLoaded(e) {}
  }
  class Ul {
    _o(e) {}
    shutdown() {}
  }
  class Vl {
    constructor() {
      (this.ao = () => this.uo()),
        (this.co = () => this.lo()),
        (this.ho = []),
        this.Po();
    }
    _o(e) {
      this.ho.push(e);
    }
    shutdown() {
      window.removeEventListener("online", this.ao),
        window.removeEventListener("offline", this.co);
    }
    Po() {
      window.addEventListener("online", this.ao),
        window.addEventListener("offline", this.co);
    }
    uo() {
      Xi("ConnectivityMonitor", "Network connectivity changed: AVAILABLE");
      for (const e of this.ho) e(0);
    }
    lo() {
      Xi("ConnectivityMonitor", "Network connectivity changed: UNAVAILABLE");
      for (const e of this.ho) e(1);
    }
    static D() {
      return (
        "undefined" != typeof window &&
        void 0 !== window.addEventListener &&
        void 0 !== window.removeEventListener
      );
    }
  }
  let Fl = null;
  function Bl() {
    return (
      null === Fl
        ? (Fl = 268435456 + Math.round(2147483648 * Math.random()))
        : Fl++,
      "0x" + Fl.toString(16)
    );
  }
  const Hl = {
    BatchGetDocuments: "batchGet",
    Commit: "commit",
    RunQuery: "runQuery",
    RunAggregationQuery: "runAggregationQuery",
  };
  class jl {
    constructor(e) {
      (this.Io = e.Io), (this.To = e.To);
    }
    Eo(e) {
      this.Ao = e;
    }
    Ro(e) {
      this.Vo = e;
    }
    mo(e) {
      this.fo = e;
    }
    onMessage(e) {
      this.po = e;
    }
    close() {
      this.To();
    }
    send(e) {
      this.Io(e);
    }
    yo() {
      this.Ao();
    }
    wo() {
      this.Vo();
    }
    So(e) {
      this.fo(e);
    }
    bo(e) {
      this.po(e);
    }
  }
  const $l = "WebChannelConnection";
  class zl extends class {
    constructor(e) {
      (this.databaseInfo = e), (this.databaseId = e.databaseId);
      const t = e.ssl ? "https" : "http",
        n = encodeURIComponent(this.databaseId.projectId),
        r = encodeURIComponent(this.databaseId.database);
      (this.Do = t + "://" + e.host),
        (this.vo = `projects/${n}/databases/${r}`),
        (this.Co =
          "(default)" === this.databaseId.database
            ? `project_id=${n}`
            : `project_id=${n}&database_id=${r}`);
    }
    get Fo() {
      return !1;
    }
    Mo(e, t, n, r, i) {
      const s = Bl(),
        o = this.xo(e, t.toUriEncodedString());
      Xi("RestConnection", `Sending RPC '${e}' ${s}:`, o, n);
      const a = {
        "google-cloud-resource-prefix": this.vo,
        "x-goog-request-params": this.Co,
      };
      return (
        this.Oo(a, r, i),
        this.No(e, o, a, n).then(
          (t) => (Xi("RestConnection", `Received RPC '${e}' ${s}: `, t), t),
          (t) => {
            throw (
              (es(
                "RestConnection",
                `RPC '${e}' ${s} failed with error: `,
                t,
                "url: ",
                o,
                "request:",
                n
              ),
              t)
            );
          }
        )
      );
    }
    Lo(e, t, n, r, i, s) {
      return this.Mo(e, t, n, r, i);
    }
    Oo(e, t, n) {
      (e["X-Goog-Api-Client"] = "gl-js/ fire/" + Qi),
        (e["Content-Type"] = "text/plain"),
        this.databaseInfo.appId &&
          (e["X-Firebase-GMPID"] = this.databaseInfo.appId),
        t && t.headers.forEach((t, n) => (e[n] = t)),
        n && n.headers.forEach((t, n) => (e[n] = t));
    }
    xo(e, t) {
      const n = Hl[e];
      return `${this.Do}/v1/${t}:${n}`;
    }
    terminate() {}
  } {
    constructor(e) {
      super(e),
        (this.forceLongPolling = e.forceLongPolling),
        (this.autoDetectLongPolling = e.autoDetectLongPolling),
        (this.useFetchStreams = e.useFetchStreams),
        (this.longPollingOptions = e.longPollingOptions);
    }
    No(e, t, n, r) {
      const i = Bl();
      return new Promise((s, o) => {
        const a = new qi();
        a.setWithCredentials(!0),
          a.listenOnce(Vi.COMPLETE, () => {
            try {
              switch (a.getLastErrorCode()) {
                case Fi.NO_ERROR:
                  const t = a.getResponseJson();
                  Xi(
                    $l,
                    `XHR for RPC '${e}' ${i} received:`,
                    JSON.stringify(t)
                  ),
                    s(t);
                  break;
                case Fi.TIMEOUT:
                  Xi($l, `RPC '${e}' ${i} timed out`),
                    o(new os(ss.DEADLINE_EXCEEDED, "Request time out"));
                  break;
                case Fi.HTTP_ERROR:
                  const n = a.getStatus();
                  if (
                    (Xi(
                      $l,
                      `RPC '${e}' ${i} failed with status:`,
                      n,
                      "response text:",
                      a.getResponseText()
                    ),
                    n > 0)
                  ) {
                    let e = a.getResponseJson();
                    Array.isArray(e) && (e = e[0]);
                    const t = null == e ? void 0 : e.error;
                    if (t && t.status && t.message) {
                      const e = (function (e) {
                        const t = e.toLowerCase().replace(/_/g, "-");
                        return Object.values(ss).indexOf(t) >= 0
                          ? t
                          : ss.UNKNOWN;
                      })(t.status);
                      o(new os(e, t.message));
                    } else
                      o(
                        new os(
                          ss.UNKNOWN,
                          "Server responded with status " + a.getStatus()
                        )
                      );
                  } else o(new os(ss.UNAVAILABLE, "Connection failed."));
                  break;
                default:
                  ns();
              }
            } finally {
              Xi($l, `RPC '${e}' ${i} completed.`);
            }
          });
        const c = JSON.stringify(r);
        Xi($l, `RPC '${e}' ${i} sending request:`, r),
          a.send(t, "POST", c, n, 15);
      });
    }
    Bo(e, t, n) {
      const r = Bl(),
        i = [this.Do, "/", "google.firestore.v1.Firestore", "/", e, "/channel"],
        s = $i(),
        o = ji(),
        a = {
          httpSessionIdParam: "gsessionid",
          initMessageHeaders: {},
          messageUrlParams: {
            database: `projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`,
          },
          sendRawJson: !0,
          supportsCrossDomainXhr: !0,
          internalChannelParams: { forwardChannelRequestTimeoutMs: 6e5 },
          forceLongPolling: this.forceLongPolling,
          detectBufferingProxy: this.autoDetectLongPolling,
        },
        c = this.longPollingOptions.timeoutSeconds;
      void 0 !== c && (a.longPollingTimeout = Math.round(1e3 * c)),
        this.useFetchStreams && (a.useFetchStreams = !0),
        this.Oo(a.initMessageHeaders, t, n),
        (a.encodeInitMessageHeaders = !0);
      const l = i.join("");
      Xi($l, `Creating RPC '${e}' stream ${r}: ${l}`, a);
      const u = s.createWebChannel(l, a);
      let h = !1,
        d = !1;
      const p = new jl({
          Io: (t) => {
            d
              ? Xi(
                  $l,
                  `Not sending because RPC '${e}' stream ${r} is closed:`,
                  t
                )
              : (h ||
                  (Xi($l, `Opening RPC '${e}' stream ${r} transport.`),
                  u.open(),
                  (h = !0)),
                Xi($l, `RPC '${e}' stream ${r} sending:`, t),
                u.send(t));
          },
          To: () => u.close(),
        }),
        f = (e, t, n) => {
          e.listen(t, (e) => {
            try {
              n(e);
            } catch (e) {
              setTimeout(() => {
                throw e;
              }, 0);
            }
          });
        };
      return (
        f(u, Ui.EventType.OPEN, () => {
          d || (Xi($l, `RPC '${e}' stream ${r} transport opened.`), p.yo());
        }),
        f(u, Ui.EventType.CLOSE, () => {
          d ||
            ((d = !0),
            Xi($l, `RPC '${e}' stream ${r} transport closed`),
            p.So());
        }),
        f(u, Ui.EventType.ERROR, (t) => {
          d ||
            ((d = !0),
            es($l, `RPC '${e}' stream ${r} transport errored:`, t),
            p.So(
              new os(ss.UNAVAILABLE, "The operation could not be completed")
            ));
        }),
        f(u, Ui.EventType.MESSAGE, (t) => {
          var n;
          if (!d) {
            const i = t.data[0];
            rs(!!i);
            const s = i,
              o =
                s.error ||
                (null === (n = s[0]) || void 0 === n ? void 0 : n.error);
            if (o) {
              Xi($l, `RPC '${e}' stream ${r} received error:`, o);
              const t = o.status;
              let n = (function (e) {
                  const t = lc[e];
                  if (void 0 !== t) return hc(t);
                })(t),
                i = o.message;
              void 0 === n &&
                ((n = ss.INTERNAL),
                (i =
                  "Unknown error status: " + t + " with message " + o.message)),
                (d = !0),
                p.So(new os(n, i)),
                u.close();
            } else Xi($l, `RPC '${e}' stream ${r} received:`, i), p.bo(i);
          }
        }),
        f(o, Hi.STAT_EVENT, (t) => {
          t.stat === Bi.PROXY
            ? Xi($l, `RPC '${e}' stream ${r} detected buffering proxy`)
            : t.stat === Bi.NOPROXY &&
              Xi($l, `RPC '${e}' stream ${r} detected no buffering proxy`);
        }),
        setTimeout(() => {
          p.wo();
        }, 0),
        p
      );
    }
  }
  function Kl() {
    return "undefined" != typeof document ? document : null;
  }
  function Gl(e) {
    return new Pc(e, !0);
  }
  class Wl {
    constructor(e, t, n = 1e3, r = 1.5, i = 6e4) {
      (this.ui = e),
        (this.timerId = t),
        (this.ko = n),
        (this.qo = r),
        (this.Qo = i),
        (this.Ko = 0),
        (this.$o = null),
        (this.Uo = Date.now()),
        this.reset();
    }
    reset() {
      this.Ko = 0;
    }
    Wo() {
      this.Ko = this.Qo;
    }
    Go(e) {
      this.cancel();
      const t = Math.floor(this.Ko + this.zo()),
        n = Math.max(0, Date.now() - this.Uo),
        r = Math.max(0, t - n);
      r > 0 &&
        Xi(
          "ExponentialBackoff",
          `Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`
        ),
        (this.$o = this.ui.enqueueAfterDelay(
          this.timerId,
          r,
          () => ((this.Uo = Date.now()), e())
        )),
        (this.Ko *= this.qo),
        this.Ko < this.ko && (this.Ko = this.ko),
        this.Ko > this.Qo && (this.Ko = this.Qo);
    }
    jo() {
      null !== this.$o && (this.$o.skipDelay(), (this.$o = null));
    }
    cancel() {
      null !== this.$o && (this.$o.cancel(), (this.$o = null));
    }
    zo() {
      return (Math.random() - 0.5) * this.Ko;
    }
  }
  class Ql {
    constructor(e, t, n, r, i, s, o, a) {
      (this.ui = e),
        (this.Ho = n),
        (this.Jo = r),
        (this.connection = i),
        (this.authCredentialsProvider = s),
        (this.appCheckCredentialsProvider = o),
        (this.listener = a),
        (this.state = 0),
        (this.Yo = 0),
        (this.Zo = null),
        (this.Xo = null),
        (this.stream = null),
        (this.e_ = 0),
        (this.t_ = new Wl(e, t));
    }
    n_() {
      return 1 === this.state || 5 === this.state || this.r_();
    }
    r_() {
      return 2 === this.state || 3 === this.state;
    }
    start() {
      (this.e_ = 0), 4 !== this.state ? this.auth() : this.i_();
    }
    async stop() {
      this.n_() && (await this.close(0));
    }
    s_() {
      (this.state = 0), this.t_.reset();
    }
    o_() {
      this.r_() &&
        null === this.Zo &&
        (this.Zo = this.ui.enqueueAfterDelay(this.Ho, 6e4, () => this.__()));
    }
    a_(e) {
      this.u_(), this.stream.send(e);
    }
    async __() {
      if (this.r_()) return this.close(0);
    }
    u_() {
      this.Zo && (this.Zo.cancel(), (this.Zo = null));
    }
    c_() {
      this.Xo && (this.Xo.cancel(), (this.Xo = null));
    }
    async close(e, t) {
      this.u_(),
        this.c_(),
        this.t_.cancel(),
        this.Yo++,
        4 !== e
          ? this.t_.reset()
          : t && t.code === ss.RESOURCE_EXHAUSTED
          ? (Zi(t.toString()),
            Zi(
              "Using maximum backoff delay to prevent overloading the backend."
            ),
            this.t_.Wo())
          : t &&
            t.code === ss.UNAUTHENTICATED &&
            3 !== this.state &&
            (this.authCredentialsProvider.invalidateToken(),
            this.appCheckCredentialsProvider.invalidateToken()),
        null !== this.stream &&
          (this.l_(), this.stream.close(), (this.stream = null)),
        (this.state = e),
        await this.listener.mo(t);
    }
    l_() {}
    auth() {
      this.state = 1;
      const e = this.h_(this.Yo),
        t = this.Yo;
      Promise.all([
        this.authCredentialsProvider.getToken(),
        this.appCheckCredentialsProvider.getToken(),
      ]).then(
        ([e, n]) => {
          this.Yo === t && this.P_(e, n);
        },
        (t) => {
          e(() => {
            const e = new os(
              ss.UNKNOWN,
              "Fetching auth token failed: " + t.message
            );
            return this.I_(e);
          });
        }
      );
    }
    P_(e, t) {
      const n = this.h_(this.Yo);
      (this.stream = this.T_(e, t)),
        this.stream.Eo(() => {
          n(() => this.listener.Eo());
        }),
        this.stream.Ro(() => {
          n(
            () => (
              (this.state = 2),
              (this.Xo = this.ui.enqueueAfterDelay(
                this.Jo,
                1e4,
                () => (this.r_() && (this.state = 3), Promise.resolve())
              )),
              this.listener.Ro()
            )
          );
        }),
        this.stream.mo((e) => {
          n(() => this.I_(e));
        }),
        this.stream.onMessage((e) => {
          n(() => (1 == ++this.e_ ? this.E_(e) : this.onNext(e)));
        });
    }
    i_() {
      (this.state = 5),
        this.t_.Go(async () => {
          (this.state = 0), this.start();
        });
    }
    I_(e) {
      return (
        Xi("PersistentStream", `close with error: ${e}`),
        (this.stream = null),
        this.close(4, e)
      );
    }
    h_(e) {
      return (t) => {
        this.ui.enqueueAndForget(() =>
          this.Yo === e
            ? t()
            : (Xi(
                "PersistentStream",
                "stream callback skipped by getCloseGuardedDispatcher."
              ),
              Promise.resolve())
        );
      };
    }
  }
  class Jl extends Ql {
    constructor(e, t, n, r, i, s) {
      super(
        e,
        "listen_stream_connection_backoff",
        "listen_stream_idle",
        "health_check_timeout",
        t,
        n,
        r,
        s
      ),
        (this.serializer = i);
    }
    T_(e, t) {
      return this.connection.Bo("Listen", e, t);
    }
    E_(e) {
      return this.onNext(e);
    }
    onNext(e) {
      this.t_.reset();
      const t = (function (e, t) {
          let n;
          if ("targetChange" in t) {
            t.targetChange;
            const r = (function (e) {
                return "NO_CHANGE" === e
                  ? 0
                  : "ADD" === e
                  ? 1
                  : "REMOVE" === e
                  ? 2
                  : "CURRENT" === e
                  ? 3
                  : "RESET" === e
                  ? 4
                  : ns();
              })(t.targetChange.targetChangeType || "NO_CHANGE"),
              i = t.targetChange.targetIds || [],
              s = (function (e, t) {
                return e.useProto3Json
                  ? (rs(void 0 === t || "string" == typeof t),
                    to.fromBase64String(t || ""))
                  : (rs(
                      void 0 === t ||
                        t instanceof Buffer ||
                        t instanceof Uint8Array
                    ),
                    to.fromUint8Array(t || new Uint8Array()));
              })(e, t.targetChange.resumeToken),
              o = t.targetChange.cause,
              a =
                o &&
                (function (e) {
                  const t = void 0 === e.code ? ss.UNKNOWN : hc(e.code);
                  return new os(t, e.message || "");
                })(o);
            n = new Ec(r, i, s, a || null);
          } else if ("documentChange" in t) {
            t.documentChange;
            const r = t.documentChange;
            r.document, r.document.name, r.document.updateTime;
            const i = Vc(e, r.document.name),
              s = Mc(r.document.updateTime),
              o = r.document.createTime ? Mc(r.document.createTime) : ws.min(),
              a = new Ao({ mapValue: { fields: r.document.fields } }),
              c = No.newFoundDocument(i, s, o, a),
              l = r.targetIds || [],
              u = r.removedTargetIds || [];
            n = new wc(l, u, c.key, c);
          } else if ("documentDelete" in t) {
            t.documentDelete;
            const r = t.documentDelete;
            r.document;
            const i = Vc(e, r.document),
              s = r.readTime ? Mc(r.readTime) : ws.min(),
              o = No.newNoDocument(i, s),
              a = r.removedTargetIds || [];
            n = new wc([], a, o.key, o);
          } else if ("documentRemove" in t) {
            t.documentRemove;
            const r = t.documentRemove;
            r.document;
            const i = Vc(e, r.document),
              s = r.removedTargetIds || [];
            n = new wc([], s, i, null);
          } else {
            if (!("filter" in t)) return ns();
            {
              t.filter;
              const e = t.filter;
              e.targetId;
              const { count: r = 0, unchangedNames: i } = e,
                s = new cc(r, i),
                o = e.targetId;
              n = new Sc(o, s);
            }
          }
          return n;
        })(this.serializer, e),
        n = (function (e) {
          if (!("targetChange" in e)) return ws.min();
          const t = e.targetChange;
          return t.targetIds && t.targetIds.length
            ? ws.min()
            : t.readTime
            ? Mc(t.readTime)
            : ws.min();
        })(e);
      return this.listener.d_(t, n);
    }
    A_(e) {
      const t = {};
      (t.database = Hc(this.serializer)),
        (t.addTarget = (function (e, t) {
          let n;
          const r = t.target;
          if (
            ((n = ra(r) ? { documents: $c(e, r) } : { query: zc(e, r)._t }),
            (n.targetId = t.targetId),
            t.resumeToken.approximateByteSize() > 0)
          ) {
            n.resumeToken = xc(e, t.resumeToken);
            const r = Oc(e, t.expectedCount);
            null !== r && (n.expectedCount = r);
          } else if (t.snapshotVersion.compareTo(ws.min()) > 0) {
            n.readTime = Dc(e, t.snapshotVersion.toTimestamp());
            const r = Oc(e, t.expectedCount);
            null !== r && (n.expectedCount = r);
          }
          return n;
        })(this.serializer, e));
      const n = (function (e, t) {
        const n = (function (e) {
          switch (e) {
            case "TargetPurposeListen":
              return null;
            case "TargetPurposeExistenceFilterMismatch":
              return "existence-filter-mismatch";
            case "TargetPurposeExistenceFilterMismatchBloom":
              return "existence-filter-mismatch-bloom";
            case "TargetPurposeLimboResolution":
              return "limbo-document";
            default:
              return ns();
          }
        })(t.purpose);
        return null == n ? null : { "goog-listen-tags": n };
      })(this.serializer, e);
      n && (t.labels = n), this.a_(t);
    }
    R_(e) {
      const t = {};
      (t.database = Hc(this.serializer)), (t.removeTarget = e), this.a_(t);
    }
  }
  class Yl extends class {} {
    constructor(e, t, n, r) {
      super(),
        (this.authCredentials = e),
        (this.appCheckCredentials = t),
        (this.connection = n),
        (this.serializer = r),
        (this.y_ = !1);
    }
    w_() {
      if (this.y_)
        throw new os(
          ss.FAILED_PRECONDITION,
          "The client has already been terminated."
        );
    }
    Mo(e, t, n, r) {
      return (
        this.w_(),
        Promise.all([
          this.authCredentials.getToken(),
          this.appCheckCredentials.getToken(),
        ])
          .then(([i, s]) => this.connection.Mo(e, qc(t, n), r, i, s))
          .catch((e) => {
            throw "FirebaseError" === e.name
              ? (e.code === ss.UNAUTHENTICATED &&
                  (this.authCredentials.invalidateToken(),
                  this.appCheckCredentials.invalidateToken()),
                e)
              : new os(ss.UNKNOWN, e.toString());
          })
      );
    }
    Lo(e, t, n, r, i) {
      return (
        this.w_(),
        Promise.all([
          this.authCredentials.getToken(),
          this.appCheckCredentials.getToken(),
        ])
          .then(([s, o]) => this.connection.Lo(e, qc(t, n), r, s, o, i))
          .catch((e) => {
            throw "FirebaseError" === e.name
              ? (e.code === ss.UNAUTHENTICATED &&
                  (this.authCredentials.invalidateToken(),
                  this.appCheckCredentials.invalidateToken()),
                e)
              : new os(ss.UNKNOWN, e.toString());
          })
      );
    }
    terminate() {
      (this.y_ = !0), this.connection.terminate();
    }
  }
  class Xl {
    constructor(e, t) {
      (this.asyncQueue = e),
        (this.onlineStateHandler = t),
        (this.state = "Unknown"),
        (this.S_ = 0),
        (this.b_ = null),
        (this.D_ = !0);
    }
    v_() {
      0 === this.S_ &&
        (this.C_("Unknown"),
        (this.b_ = this.asyncQueue.enqueueAfterDelay(
          "online_state_timeout",
          1e4,
          () => (
            (this.b_ = null),
            this.F_("Backend didn't respond within 10 seconds."),
            this.C_("Offline"),
            Promise.resolve()
          )
        )));
    }
    M_(e) {
      "Online" === this.state
        ? this.C_("Unknown")
        : (this.S_++,
          this.S_ >= 1 &&
            (this.x_(),
            this.F_(
              `Connection failed 1 times. Most recent error: ${e.toString()}`
            ),
            this.C_("Offline")));
    }
    set(e) {
      this.x_(), (this.S_ = 0), "Online" === e && (this.D_ = !1), this.C_(e);
    }
    C_(e) {
      e !== this.state && ((this.state = e), this.onlineStateHandler(e));
    }
    F_(e) {
      const t = `Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;
      this.D_ ? (Zi(t), (this.D_ = !1)) : Xi("OnlineStateTracker", t);
    }
    x_() {
      null !== this.b_ && (this.b_.cancel(), (this.b_ = null));
    }
  }
  class Zl {
    constructor(e, t, n, r, i) {
      (this.localStore = e),
        (this.datastore = t),
        (this.asyncQueue = n),
        (this.remoteSyncer = {}),
        (this.O_ = []),
        (this.N_ = new Map()),
        (this.L_ = new Set()),
        (this.B_ = []),
        (this.k_ = i),
        this.k_._o((e) => {
          n.enqueueAndForget(async () => {
            cu(this) &&
              (Xi(
                "RemoteStore",
                "Restarting streams for network reachability change."
              ),
              await (async function (e) {
                const t = is(e);
                t.L_.add(4),
                  await tu(t),
                  t.q_.set("Unknown"),
                  t.L_.delete(4),
                  await eu(t);
              })(this));
          });
        }),
        (this.q_ = new Xl(n, r));
    }
  }
  async function eu(e) {
    if (cu(e)) for (const t of e.B_) await t(!0);
  }
  async function tu(e) {
    for (const t of e.B_) await t(!1);
  }
  function nu(e, t) {
    const n = is(e);
    n.N_.has(t.targetId) ||
      (n.N_.set(t.targetId, t), au(n) ? ou(n) : vu(n).r_() && iu(n, t));
  }
  function ru(e, t) {
    const n = is(e),
      r = vu(n);
    n.N_.delete(t),
      r.r_() && su(n, t),
      0 === n.N_.size && (r.r_() ? r.o_() : cu(n) && n.q_.set("Unknown"));
  }
  function iu(e, t) {
    if (
      (e.Q_.xe(t.targetId),
      t.resumeToken.approximateByteSize() > 0 ||
        t.snapshotVersion.compareTo(ws.min()) > 0)
    ) {
      const n = e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;
      t = t.withExpectedCount(n);
    }
    vu(e).A_(t);
  }
  function su(e, t) {
    e.Q_.xe(t), vu(e).R_(t);
  }
  function ou(e) {
    (e.Q_ = new Cc({
      getRemoteKeysForTarget: (t) => e.remoteSyncer.getRemoteKeysForTarget(t),
      ot: (t) => e.N_.get(t) || null,
      tt: () => e.datastore.serializer.databaseId,
    })),
      vu(e).start(),
      e.q_.v_();
  }
  function au(e) {
    return cu(e) && !vu(e).n_() && e.N_.size > 0;
  }
  function cu(e) {
    return 0 === is(e).L_.size;
  }
  function lu(e) {
    e.Q_ = void 0;
  }
  async function uu(e) {
    e.q_.set("Online");
  }
  async function hu(e) {
    e.N_.forEach((t, n) => {
      iu(e, t);
    });
  }
  async function du(e, t) {
    lu(e), au(e) ? (e.q_.M_(t), ou(e)) : e.q_.set("Unknown");
  }
  async function pu(e, t, n) {
    if ((e.q_.set("Online"), t instanceof Ec && 2 === t.state && t.cause))
      try {
        await (async function (e, t) {
          const n = t.cause;
          for (const r of t.targetIds)
            e.N_.has(r) &&
              (await e.remoteSyncer.rejectListen(r, n),
              e.N_.delete(r),
              e.Q_.removeTarget(r));
        })(e, t);
      } catch (n) {
        Xi(
          "RemoteStore",
          "Failed to remove targets %s: %s ",
          t.targetIds.join(","),
          n
        ),
          await fu(e, n);
      }
    else if (
      (t instanceof wc ? e.Q_.Ke(t) : t instanceof Sc ? e.Q_.He(t) : e.Q_.We(t),
      !n.isEqual(ws.min()))
    )
      try {
        const t = await Nl(e.localStore);
        n.compareTo(t) >= 0 &&
          (await (function (e, t) {
            const n = e.Q_.rt(t);
            return (
              n.targetChanges.forEach((n, r) => {
                if (n.resumeToken.approximateByteSize() > 0) {
                  const i = e.N_.get(r);
                  i && e.N_.set(r, i.withResumeToken(n.resumeToken, t));
                }
              }),
              n.targetMismatches.forEach((t, n) => {
                const r = e.N_.get(t);
                if (!r) return;
                e.N_.set(
                  t,
                  r.withResumeToken(to.EMPTY_BYTE_STRING, r.snapshotVersion)
                ),
                  su(e, t);
                const i = new tl(r.target, t, n, r.sequenceNumber);
                iu(e, i);
              }),
              e.remoteSyncer.applyRemoteEvent(n)
            );
          })(e, n));
      } catch (t) {
        Xi("RemoteStore", "Failed to raise snapshot:", t), await fu(e, t);
      }
  }
  async function fu(e, t, n) {
    if (!qs(t)) throw t;
    e.L_.add(1),
      await tu(e),
      e.q_.set("Offline"),
      n || (n = () => Nl(e.localStore)),
      e.asyncQueue.enqueueRetryable(async () => {
        Xi("RemoteStore", "Retrying IndexedDB access"),
          await n(),
          e.L_.delete(1),
          await eu(e);
      });
  }
  async function mu(e, t) {
    const n = is(e);
    n.asyncQueue.verifyOperationInProgress(),
      Xi("RemoteStore", "RemoteStore received new credentials");
    const r = cu(n);
    n.L_.add(3),
      await tu(n),
      r && n.q_.set("Unknown"),
      await n.remoteSyncer.handleCredentialChange(t),
      n.L_.delete(3),
      await eu(n);
  }
  async function gu(e, t) {
    const n = is(e);
    t
      ? (n.L_.delete(2), await eu(n))
      : t || (n.L_.add(2), await tu(n), n.q_.set("Unknown"));
  }
  function vu(e) {
    return (
      e.K_ ||
        ((e.K_ = (function (e, t, n) {
          const r = is(e);
          return (
            r.w_(),
            new Jl(
              t,
              r.connection,
              r.authCredentials,
              r.appCheckCredentials,
              r.serializer,
              n
            )
          );
        })(e.datastore, e.asyncQueue, {
          Eo: uu.bind(null, e),
          Ro: hu.bind(null, e),
          mo: du.bind(null, e),
          d_: pu.bind(null, e),
        })),
        e.B_.push(async (t) => {
          t
            ? (e.K_.s_(), au(e) ? ou(e) : e.q_.set("Unknown"))
            : (await e.K_.stop(), lu(e));
        })),
      e.K_
    );
  }
  class yu {
    constructor(e, t, n, r, i) {
      (this.asyncQueue = e),
        (this.timerId = t),
        (this.targetTimeMs = n),
        (this.op = r),
        (this.removalCallback = i),
        (this.deferred = new as()),
        (this.then = this.deferred.promise.then.bind(this.deferred.promise)),
        this.deferred.promise.catch((e) => {});
    }
    get promise() {
      return this.deferred.promise;
    }
    static createAndSchedule(e, t, n, r, i) {
      const s = Date.now() + n,
        o = new yu(e, t, s, r, i);
      return o.start(n), o;
    }
    start(e) {
      this.timerHandle = setTimeout(() => this.handleDelayElapsed(), e);
    }
    skipDelay() {
      return this.handleDelayElapsed();
    }
    cancel(e) {
      null !== this.timerHandle &&
        (this.clearTimeout(),
        this.deferred.reject(
          new os(ss.CANCELLED, "Operation cancelled" + (e ? ": " + e : ""))
        ));
    }
    handleDelayElapsed() {
      this.asyncQueue.enqueueAndForget(() =>
        null !== this.timerHandle
          ? (this.clearTimeout(),
            this.op().then((e) => this.deferred.resolve(e)))
          : Promise.resolve()
      );
    }
    clearTimeout() {
      null !== this.timerHandle &&
        (this.removalCallback(this),
        clearTimeout(this.timerHandle),
        (this.timerHandle = null));
    }
  }
  function _u(e, t) {
    if ((Zi("AsyncQueue", `${t}: ${e}`), qs(e)))
      return new os(ss.UNAVAILABLE, `${t}: ${e}`);
    throw e;
  }
  class bu {
    constructor(e) {
      (this.comparator = e
        ? (t, n) => e(t, n) || ks.comparator(t.key, n.key)
        : (e, t) => ks.comparator(e.key, t.key)),
        (this.keyedMap = Ia()),
        (this.sortedSet = new Ws(this.comparator));
    }
    static emptySet(e) {
      return new bu(e.comparator);
    }
    has(e) {
      return null != this.keyedMap.get(e);
    }
    get(e) {
      return this.keyedMap.get(e);
    }
    first() {
      return this.sortedSet.minKey();
    }
    last() {
      return this.sortedSet.maxKey();
    }
    isEmpty() {
      return this.sortedSet.isEmpty();
    }
    indexOf(e) {
      const t = this.keyedMap.get(e);
      return t ? this.sortedSet.indexOf(t) : -1;
    }
    get size() {
      return this.sortedSet.size;
    }
    forEach(e) {
      this.sortedSet.inorderTraversal((t, n) => (e(t), !1));
    }
    add(e) {
      const t = this.delete(e.key);
      return t.copy(t.keyedMap.insert(e.key, e), t.sortedSet.insert(e, null));
    }
    delete(e) {
      const t = this.get(e);
      return t
        ? this.copy(this.keyedMap.remove(e), this.sortedSet.remove(t))
        : this;
    }
    isEqual(e) {
      if (!(e instanceof bu)) return !1;
      if (this.size !== e.size) return !1;
      const t = this.sortedSet.getIterator(),
        n = e.sortedSet.getIterator();
      for (; t.hasNext(); ) {
        const e = t.getNext().key,
          r = n.getNext().key;
        if (!e.isEqual(r)) return !1;
      }
      return !0;
    }
    toString() {
      const e = [];
      return (
        this.forEach((t) => {
          e.push(t.toString());
        }),
        0 === e.length
          ? "DocumentSet ()"
          : "DocumentSet (\n  " + e.join("  \n") + "\n)"
      );
    }
    copy(e, t) {
      const n = new bu();
      return (
        (n.comparator = this.comparator), (n.keyedMap = e), (n.sortedSet = t), n
      );
    }
  }
  class wu {
    constructor() {
      this.W_ = new Ws(ks.comparator);
    }
    track(e) {
      const t = e.doc.key,
        n = this.W_.get(t);
      n
        ? 0 !== e.type && 3 === n.type
          ? (this.W_ = this.W_.insert(t, e))
          : 3 === e.type && 1 !== n.type
          ? (this.W_ = this.W_.insert(t, { type: n.type, doc: e.doc }))
          : 2 === e.type && 2 === n.type
          ? (this.W_ = this.W_.insert(t, { type: 2, doc: e.doc }))
          : 2 === e.type && 0 === n.type
          ? (this.W_ = this.W_.insert(t, { type: 0, doc: e.doc }))
          : 1 === e.type && 0 === n.type
          ? (this.W_ = this.W_.remove(t))
          : 1 === e.type && 2 === n.type
          ? (this.W_ = this.W_.insert(t, { type: 1, doc: n.doc }))
          : 0 === e.type && 1 === n.type
          ? (this.W_ = this.W_.insert(t, { type: 2, doc: e.doc }))
          : ns()
        : (this.W_ = this.W_.insert(t, e));
    }
    G_() {
      const e = [];
      return (
        this.W_.inorderTraversal((t, n) => {
          e.push(n);
        }),
        e
      );
    }
  }
  class Su {
    constructor(e, t, n, r, i, s, o, a, c) {
      (this.query = e),
        (this.docs = t),
        (this.oldDocs = n),
        (this.docChanges = r),
        (this.mutatedKeys = i),
        (this.fromCache = s),
        (this.syncStateChanged = o),
        (this.excludesMetadataChanges = a),
        (this.hasCachedResults = c);
    }
    static fromInitialDocuments(e, t, n, r, i) {
      const s = [];
      return (
        t.forEach((e) => {
          s.push({ type: 0, doc: e });
        }),
        new Su(e, t, bu.emptySet(t), s, n, r, !0, !1, i)
      );
    }
    get hasPendingWrites() {
      return !this.mutatedKeys.isEmpty();
    }
    isEqual(e) {
      if (
        !(
          this.fromCache === e.fromCache &&
          this.hasCachedResults === e.hasCachedResults &&
          this.syncStateChanged === e.syncStateChanged &&
          this.mutatedKeys.isEqual(e.mutatedKeys) &&
          pa(this.query, e.query) &&
          this.docs.isEqual(e.docs) &&
          this.oldDocs.isEqual(e.oldDocs)
        )
      )
        return !1;
      const t = this.docChanges,
        n = e.docChanges;
      if (t.length !== n.length) return !1;
      for (let e = 0; e < t.length; e++)
        if (t[e].type !== n[e].type || !t[e].doc.isEqual(n[e].doc)) return !1;
      return !0;
    }
  }
  class Eu {
    constructor() {
      (this.z_ = void 0), (this.j_ = []);
    }
    H_() {
      return this.j_.some((e) => e.J_());
    }
  }
  class Iu {
    constructor() {
      (this.queries = Cu()),
        (this.onlineState = "Unknown"),
        (this.Y_ = new Set());
    }
    terminate() {
      !(function (e, t) {
        const n = is(e),
          r = n.queries;
        (n.queries = Cu()),
          r.forEach((e, n) => {
            for (const e of n.j_) e.onError(t);
          });
      })(this, new os(ss.ABORTED, "Firestore shutting down"));
    }
  }
  function Cu() {
    return new ba((e) => fa(e), pa);
  }
  async function ku(e, t) {
    const n = is(e);
    let r = 3;
    const i = t.query;
    let s = n.queries.get(i);
    s ? !s.H_() && t.J_() && (r = 2) : ((s = new Eu()), (r = t.J_() ? 0 : 1));
    try {
      switch (r) {
        case 0:
          s.z_ = await n.onListen(i, !0);
          break;
        case 1:
          s.z_ = await n.onListen(i, !1);
          break;
        case 2:
          await n.onFirstRemoteStoreListen(i);
      }
    } catch (e) {
      const n = _u(e, `Initialization of query '${ma(t.query)}' failed`);
      return void t.onError(n);
    }
    n.queries.set(i, s),
      s.j_.push(t),
      t.Z_(n.onlineState),
      s.z_ && t.X_(s.z_) && Nu(n);
  }
  async function Tu(e, t) {
    const n = is(e),
      r = t.query;
    let i = 3;
    const s = n.queries.get(r);
    if (s) {
      const e = s.j_.indexOf(t);
      e >= 0 &&
        (s.j_.splice(e, 1),
        0 === s.j_.length
          ? (i = t.J_() ? 0 : 1)
          : !s.H_() && t.J_() && (i = 2));
    }
    switch (i) {
      case 0:
        return n.queries.delete(r), n.onUnlisten(r, !0);
      case 1:
        return n.queries.delete(r), n.onUnlisten(r, !1);
      case 2:
        return n.onLastRemoteStoreUnlisten(r);
      default:
        return;
    }
  }
  function Lu(e, t) {
    const n = is(e);
    let r = !1;
    for (const e of t) {
      const t = e.query,
        i = n.queries.get(t);
      if (i) {
        for (const t of i.j_) t.X_(e) && (r = !0);
        i.z_ = e;
      }
    }
    r && Nu(n);
  }
  function Au(e, t, n) {
    const r = is(e),
      i = r.queries.get(t);
    if (i) for (const e of i.j_) e.onError(n);
    r.queries.delete(t);
  }
  function Nu(e) {
    e.Y_.forEach((e) => {
      e.next();
    });
  }
  var Pu, Ou;
  ((Ou = Pu || (Pu = {})).ea = "default"), (Ou.Cache = "cache");
  class Du {
    constructor(e, t, n) {
      (this.query = e),
        (this.ta = t),
        (this.na = !1),
        (this.ra = null),
        (this.onlineState = "Unknown"),
        (this.options = n || {});
    }
    X_(e) {
      if (!this.options.includeMetadataChanges) {
        const t = [];
        for (const n of e.docChanges) 3 !== n.type && t.push(n);
        e = new Su(
          e.query,
          e.docs,
          e.oldDocs,
          t,
          e.mutatedKeys,
          e.fromCache,
          e.syncStateChanged,
          !0,
          e.hasCachedResults
        );
      }
      let t = !1;
      return (
        this.na
          ? this.ia(e) && (this.ta.next(e), (t = !0))
          : this.sa(e, this.onlineState) && (this.oa(e), (t = !0)),
        (this.ra = e),
        t
      );
    }
    onError(e) {
      this.ta.error(e);
    }
    Z_(e) {
      this.onlineState = e;
      let t = !1;
      return (
        this.ra &&
          !this.na &&
          this.sa(this.ra, e) &&
          (this.oa(this.ra), (t = !0)),
        t
      );
    }
    sa(e, t) {
      if (!e.fromCache) return !0;
      if (!this.J_()) return !0;
      const n = "Offline" !== t;
      return (
        (!this.options._a || !n) &&
        (!e.docs.isEmpty() || e.hasCachedResults || "Offline" === t)
      );
    }
    ia(e) {
      if (e.docChanges.length > 0) return !0;
      const t = this.ra && this.ra.hasPendingWrites !== e.hasPendingWrites;
      return (
        !(!e.syncStateChanged && !t) &&
        !0 === this.options.includeMetadataChanges
      );
    }
    oa(e) {
      (e = Su.fromInitialDocuments(
        e.query,
        e.docs,
        e.mutatedKeys,
        e.fromCache,
        e.hasCachedResults
      )),
        (this.na = !0),
        this.ta.next(e);
    }
    J_() {
      return this.options.source !== Pu.Cache;
    }
  }
  class xu {
    constructor(e) {
      this.key = e;
    }
  }
  class Mu {
    constructor(e) {
      this.key = e;
    }
  }
  class Ru {
    constructor(e, t) {
      (this.query = e),
        (this.Ta = t),
        (this.Ea = null),
        (this.hasCachedResults = !1),
        (this.current = !1),
        (this.da = Na()),
        (this.mutatedKeys = Na()),
        (this.Aa = ya(e)),
        (this.Ra = new bu(this.Aa));
    }
    get Va() {
      return this.Ta;
    }
    ma(e, t) {
      const n = t ? t.fa : new wu(),
        r = t ? t.Ra : this.Ra;
      let i = t ? t.mutatedKeys : this.mutatedKeys,
        s = r,
        o = !1;
      const a =
          "F" === this.query.limitType && r.size === this.query.limit
            ? r.last()
            : null,
        c =
          "L" === this.query.limitType && r.size === this.query.limit
            ? r.first()
            : null;
      if (
        (e.inorderTraversal((e, t) => {
          const l = r.get(e),
            u = ga(this.query, t) ? t : null,
            h = !!l && this.mutatedKeys.has(l.key),
            d =
              !!u &&
              (u.hasLocalMutations ||
                (this.mutatedKeys.has(u.key) && u.hasCommittedMutations));
          let p = !1;
          l && u
            ? l.data.isEqual(u.data)
              ? h !== d && (n.track({ type: 3, doc: u }), (p = !0))
              : this.ga(l, u) ||
                (n.track({ type: 2, doc: u }),
                (p = !0),
                ((a && this.Aa(u, a) > 0) || (c && this.Aa(u, c) < 0)) &&
                  (o = !0))
            : !l && u
            ? (n.track({ type: 0, doc: u }), (p = !0))
            : l &&
              !u &&
              (n.track({ type: 1, doc: l }), (p = !0), (a || c) && (o = !0)),
            p &&
              (u
                ? ((s = s.add(u)), (i = d ? i.add(e) : i.delete(e)))
                : ((s = s.delete(e)), (i = i.delete(e))));
        }),
        null !== this.query.limit)
      )
        for (; s.size > this.query.limit; ) {
          const e = "F" === this.query.limitType ? s.last() : s.first();
          (s = s.delete(e.key)),
            (i = i.delete(e.key)),
            n.track({ type: 1, doc: e });
        }
      return { Ra: s, fa: n, ns: o, mutatedKeys: i };
    }
    ga(e, t) {
      return (
        e.hasLocalMutations && t.hasCommittedMutations && !t.hasLocalMutations
      );
    }
    applyChanges(e, t, n, r) {
      const i = this.Ra;
      (this.Ra = e.Ra), (this.mutatedKeys = e.mutatedKeys);
      const s = e.fa.G_();
      s.sort(
        (e, t) =>
          (function (e, t) {
            const n = (e) => {
              switch (e) {
                case 0:
                  return 1;
                case 2:
                case 3:
                  return 2;
                case 1:
                  return 0;
                default:
                  return ns();
              }
            };
            return n(e) - n(t);
          })(e.type, t.type) || this.Aa(e.doc, t.doc)
      ),
        this.pa(n),
        (r = null != r && r);
      const o = t && !r ? this.ya() : [],
        a = 0 === this.da.size && this.current && !r ? 1 : 0,
        c = a !== this.Ea;
      return (
        (this.Ea = a),
        0 !== s.length || c
          ? {
              snapshot: new Su(
                this.query,
                e.Ra,
                i,
                s,
                e.mutatedKeys,
                0 === a,
                c,
                !1,
                !!n && n.resumeToken.approximateByteSize() > 0
              ),
              wa: o,
            }
          : { wa: o }
      );
    }
    Z_(e) {
      return this.current && "Offline" === e
        ? ((this.current = !1),
          this.applyChanges(
            {
              Ra: this.Ra,
              fa: new wu(),
              mutatedKeys: this.mutatedKeys,
              ns: !1,
            },
            !1
          ))
        : { wa: [] };
    }
    Sa(e) {
      return (
        !this.Ta.has(e) && !!this.Ra.has(e) && !this.Ra.get(e).hasLocalMutations
      );
    }
    pa(e) {
      e &&
        (e.addedDocuments.forEach((e) => (this.Ta = this.Ta.add(e))),
        e.modifiedDocuments.forEach((e) => {}),
        e.removedDocuments.forEach((e) => (this.Ta = this.Ta.delete(e))),
        (this.current = e.current));
    }
    ya() {
      if (!this.current) return [];
      const e = this.da;
      (this.da = Na()),
        this.Ra.forEach((e) => {
          this.Sa(e.key) && (this.da = this.da.add(e.key));
        });
      const t = [];
      return (
        e.forEach((e) => {
          this.da.has(e) || t.push(new Mu(e));
        }),
        this.da.forEach((n) => {
          e.has(n) || t.push(new xu(n));
        }),
        t
      );
    }
    ba(e) {
      (this.Ta = e.Ts), (this.da = Na());
      const t = this.ma(e.documents);
      return this.applyChanges(t, !0);
    }
    Da() {
      return Su.fromInitialDocuments(
        this.query,
        this.Ra,
        this.mutatedKeys,
        0 === this.Ea,
        this.hasCachedResults
      );
    }
  }
  class qu {
    constructor(e, t, n) {
      (this.query = e), (this.targetId = t), (this.view = n);
    }
  }
  class Uu {
    constructor(e) {
      (this.key = e), (this.va = !1);
    }
  }
  class Vu {
    constructor(e, t, n, r, i, s) {
      (this.localStore = e),
        (this.remoteStore = t),
        (this.eventManager = n),
        (this.sharedClientState = r),
        (this.currentUser = i),
        (this.maxConcurrentLimboResolutions = s),
        (this.Ca = {}),
        (this.Fa = new ba((e) => fa(e), pa)),
        (this.Ma = new Map()),
        (this.xa = new Set()),
        (this.Oa = new Ws(ks.comparator)),
        (this.Na = new Map()),
        (this.La = new ml()),
        (this.Ba = {}),
        (this.ka = new Map()),
        (this.qa = cl.kn()),
        (this.onlineState = "Unknown"),
        (this.Qa = void 0);
    }
    get isPrimaryClient() {
      return !0 === this.Qa;
    }
  }
  async function Fu(e, t, n = !0) {
    const r = rh(e);
    let i;
    const s = r.Fa.get(t);
    return (
      s
        ? (r.sharedClientState.addLocalQueryTarget(s.targetId),
          (i = s.view.Da()))
        : (i = await Hu(r, t, n, !0)),
      i
    );
  }
  async function Bu(e, t) {
    const n = rh(e);
    await Hu(n, t, !0, !1);
  }
  async function Hu(e, t, n, r) {
    const i = await Ol(e.localStore, ua(t)),
      s = i.targetId,
      o = e.sharedClientState.addLocalQueryTarget(s, n);
    let a;
    return (
      r && (a = await ju(e, t, s, "current" === o, i.resumeToken)),
      e.isPrimaryClient && n && nu(e.remoteStore, i),
      a
    );
  }
  async function ju(e, t, n, r, i) {
    e.Ka = (t, n, r) =>
      (async function (e, t, n, r) {
        let i = t.view.ma(n);
        i.ns &&
          (i = await xl(e.localStore, t.query, !1).then(({ documents: e }) =>
            t.view.ma(e, i)
          ));
        const s = r && r.targetChanges.get(t.targetId),
          o = r && null != r.targetMismatches.get(t.targetId),
          a = t.view.applyChanges(i, e.isPrimaryClient, s, o);
        return Yu(e, t.targetId, a.wa), a.snapshot;
      })(e, t, n, r);
    const s = await xl(e.localStore, t, !0),
      o = new Ru(t, s.Ts),
      a = o.ma(s.documents),
      c = bc.createSynthesizedTargetChangeForCurrentChange(
        n,
        r && "Offline" !== e.onlineState,
        i
      ),
      l = o.applyChanges(a, e.isPrimaryClient, c);
    Yu(e, n, l.wa);
    const u = new qu(t, n, o);
    return (
      e.Fa.set(t, u),
      e.Ma.has(n) ? e.Ma.get(n).push(t) : e.Ma.set(n, [t]),
      l.snapshot
    );
  }
  async function $u(e, t, n) {
    const r = is(e),
      i = r.Fa.get(t),
      s = r.Ma.get(i.targetId);
    if (s.length > 1)
      return (
        r.Ma.set(
          i.targetId,
          s.filter((e) => !pa(e, t))
        ),
        void r.Fa.delete(t)
      );
    r.isPrimaryClient
      ? (r.sharedClientState.removeLocalQueryTarget(i.targetId),
        r.sharedClientState.isActiveQueryTarget(i.targetId) ||
          (await Dl(r.localStore, i.targetId, !1)
            .then(() => {
              r.sharedClientState.clearQueryState(i.targetId),
                n && ru(r.remoteStore, i.targetId),
                Qu(r, i.targetId);
            })
            .catch(xs)))
      : (Qu(r, i.targetId), await Dl(r.localStore, i.targetId, !0));
  }
  async function zu(e, t) {
    const n = is(e),
      r = n.Fa.get(t),
      i = n.Ma.get(r.targetId);
    n.isPrimaryClient &&
      1 === i.length &&
      (n.sharedClientState.removeLocalQueryTarget(r.targetId),
      ru(n.remoteStore, r.targetId));
  }
  async function Ku(e, t) {
    const n = is(e);
    try {
      const e = await (function (e, t) {
        const n = is(e),
          r = t.snapshotVersion;
        let i = n.os;
        return n.persistence
          .runTransaction("Apply remote event", "readwrite-primary", (e) => {
            const s = n.cs.newChangeBuffer({ trackRemovals: !0 });
            i = n.os;
            const o = [];
            t.targetChanges.forEach((s, a) => {
              const c = i.get(a);
              if (!c) return;
              o.push(
                n.Ur.removeMatchingKeys(e, s.removedDocuments, a).next(() =>
                  n.Ur.addMatchingKeys(e, s.addedDocuments, a)
                )
              );
              let l = c.withSequenceNumber(e.currentSequenceNumber);
              null !== t.targetMismatches.get(a)
                ? (l = l
                    .withResumeToken(to.EMPTY_BYTE_STRING, ws.min())
                    .withLastLimboFreeSnapshotVersion(ws.min()))
                : s.resumeToken.approximateByteSize() > 0 &&
                  (l = l.withResumeToken(s.resumeToken, r)),
                (i = i.insert(a, l)),
                (function (e, t, n) {
                  return (
                    0 === e.resumeToken.approximateByteSize() ||
                    t.snapshotVersion.toMicroseconds() -
                      e.snapshotVersion.toMicroseconds() >=
                      3e8 ||
                    n.addedDocuments.size +
                      n.modifiedDocuments.size +
                      n.removedDocuments.size >
                      0
                  );
                })(c, l, s) && o.push(n.Ur.updateTargetData(e, l));
            });
            let a = Sa(),
              c = Na();
            if (
              (t.documentUpdates.forEach((r) => {
                t.resolvedLimboDocuments.has(r) &&
                  o.push(
                    n.persistence.referenceDelegate.updateLimboDocument(e, r)
                  );
              }),
              o.push(
                Pl(e, s, t.documentUpdates).next((e) => {
                  (a = e.Ps), (c = e.Is);
                })
              ),
              !r.isEqual(ws.min()))
            ) {
              const t = n.Ur.getLastRemoteSnapshotVersion(e).next((t) =>
                n.Ur.setTargetsMetadata(e, e.currentSequenceNumber, r)
              );
              o.push(t);
            }
            return Ms.waitFor(o)
              .next(() => s.apply(e))
              .next(() => n.localDocuments.getLocalViewOfDocuments(e, a, c))
              .next(() => a);
          })
          .then((e) => ((n.os = i), e));
      })(n.localStore, t);
      t.targetChanges.forEach((e, t) => {
        const r = n.Na.get(t);
        r &&
          (rs(
            e.addedDocuments.size +
              e.modifiedDocuments.size +
              e.removedDocuments.size <=
              1
          ),
          e.addedDocuments.size > 0
            ? (r.va = !0)
            : e.modifiedDocuments.size > 0
            ? rs(r.va)
            : e.removedDocuments.size > 0 && (rs(r.va), (r.va = !1)));
      }),
        await eh(n, e, t);
    } catch (e) {
      await xs(e);
    }
  }
  function Gu(e, t, n) {
    const r = is(e);
    if ((r.isPrimaryClient && 0 === n) || (!r.isPrimaryClient && 1 === n)) {
      const e = [];
      r.Fa.forEach((n, r) => {
        const i = r.view.Z_(t);
        i.snapshot && e.push(i.snapshot);
      }),
        (function (e, t) {
          const n = is(e);
          n.onlineState = t;
          let r = !1;
          n.queries.forEach((e, n) => {
            for (const e of n.j_) e.Z_(t) && (r = !0);
          }),
            r && Nu(n);
        })(r.eventManager, t),
        e.length && r.Ca.d_(e),
        (r.onlineState = t),
        r.isPrimaryClient && r.sharedClientState.setOnlineState(t);
    }
  }
  async function Wu(e, t, n) {
    const r = is(e);
    r.sharedClientState.updateQueryState(t, "rejected", n);
    const i = r.Na.get(t),
      s = i && i.key;
    if (s) {
      let e = new Ws(ks.comparator);
      e = e.insert(s, No.newNoDocument(s, ws.min()));
      const n = Na().add(s),
        i = new _c(ws.min(), new Map(), new Ws(ys), e, n);
      await Ku(r, i), (r.Oa = r.Oa.remove(s)), r.Na.delete(t), Zu(r);
    } else
      await Dl(r.localStore, t, !1)
        .then(() => Qu(r, t, n))
        .catch(xs);
  }
  function Qu(e, t, n = null) {
    e.sharedClientState.removeLocalQueryTarget(t);
    for (const r of e.Ma.get(t)) e.Fa.delete(r), n && e.Ca.$a(r, n);
    e.Ma.delete(t),
      e.isPrimaryClient &&
        e.La.gr(t).forEach((t) => {
          e.La.containsKey(t) || Ju(e, t);
        });
  }
  function Ju(e, t) {
    e.xa.delete(t.path.canonicalString());
    const n = e.Oa.get(t);
    null !== n &&
      (ru(e.remoteStore, n), (e.Oa = e.Oa.remove(t)), e.Na.delete(n), Zu(e));
  }
  function Yu(e, t, n) {
    for (const r of n)
      r instanceof xu
        ? (e.La.addReference(r.key, t), Xu(e, r))
        : r instanceof Mu
        ? (Xi("SyncEngine", "Document no longer in limbo: " + r.key),
          e.La.removeReference(r.key, t),
          e.La.containsKey(r.key) || Ju(e, r.key))
        : ns();
  }
  function Xu(e, t) {
    const n = t.key,
      r = n.path.canonicalString();
    e.Oa.get(n) ||
      e.xa.has(r) ||
      (Xi("SyncEngine", "New document in limbo: " + n), e.xa.add(r), Zu(e));
  }
  function Zu(e) {
    for (; e.xa.size > 0 && e.Oa.size < e.maxConcurrentLimboResolutions; ) {
      const t = e.xa.values().next().value;
      e.xa.delete(t);
      const n = new ks(Es.fromString(t)),
        r = e.qa.next();
      e.Na.set(r, new Uu(n)),
        (e.Oa = e.Oa.insert(n, r)),
        nu(
          e.remoteStore,
          new tl(ua(oa(n.path)), r, "TargetPurposeLimboResolution", Us.oe)
        );
    }
  }
  async function eh(e, t, n) {
    const r = is(e),
      i = [],
      s = [],
      o = [];
    r.Fa.isEmpty() ||
      (r.Fa.forEach((e, a) => {
        o.push(
          r.Ka(a, t, n).then((e) => {
            var t;
            if ((e || n) && r.isPrimaryClient) {
              const i = e
                ? !e.fromCache
                : null ===
                    (t =
                      null == n ? void 0 : n.targetChanges.get(a.targetId)) ||
                  void 0 === t
                ? void 0
                : t.current;
              r.sharedClientState.updateQueryState(
                a.targetId,
                i ? "current" : "not-current"
              );
            }
            if (e) {
              i.push(e);
              const t = Il.Wi(a.targetId, e);
              s.push(t);
            }
          })
        );
      }),
      await Promise.all(o),
      r.Ca.d_(i),
      await (async function (e, t) {
        const n = is(e);
        try {
          await n.persistence.runTransaction(
            "notifyLocalViewChanges",
            "readwrite",
            (e) =>
              Ms.forEach(t, (t) =>
                Ms.forEach(t.$i, (r) =>
                  n.persistence.referenceDelegate.addReference(e, t.targetId, r)
                ).next(() =>
                  Ms.forEach(t.Ui, (r) =>
                    n.persistence.referenceDelegate.removeReference(
                      e,
                      t.targetId,
                      r
                    )
                  )
                )
              )
          );
        } catch (e) {
          if (!qs(e)) throw e;
          Xi("LocalStore", "Failed to update sequence numbers: " + e);
        }
        for (const e of t) {
          const t = e.targetId;
          if (!e.fromCache) {
            const e = n.os.get(t),
              r = e.snapshotVersion,
              i = e.withLastLimboFreeSnapshotVersion(r);
            n.os = n.os.insert(t, i);
          }
        }
      })(r.localStore, s));
  }
  async function th(e, t) {
    const n = is(e);
    if (!n.currentUser.isEqual(t)) {
      Xi("SyncEngine", "User change. New user:", t.toKey());
      const e = await Al(n.localStore, t);
      (n.currentUser = t),
        (function (e, t) {
          e.ka.forEach((e) => {
            e.forEach((e) => {
              e.reject(new os(ss.CANCELLED, t));
            });
          }),
            e.ka.clear();
        })(
          n,
          "'waitForPendingWrites' promise is rejected due to a user change."
        ),
        n.sharedClientState.handleUserChange(
          t,
          e.removedBatchIds,
          e.addedBatchIds
        ),
        await eh(n, e.hs);
    }
  }
  function nh(e, t) {
    const n = is(e),
      r = n.Na.get(t);
    if (r && r.va) return Na().add(r.key);
    {
      let e = Na();
      const r = n.Ma.get(t);
      if (!r) return e;
      for (const t of r) {
        const r = n.Fa.get(t);
        e = e.unionWith(r.view.Va);
      }
      return e;
    }
  }
  function rh(e) {
    const t = is(e);
    return (
      (t.remoteStore.remoteSyncer.applyRemoteEvent = Ku.bind(null, t)),
      (t.remoteStore.remoteSyncer.getRemoteKeysForTarget = nh.bind(null, t)),
      (t.remoteStore.remoteSyncer.rejectListen = Wu.bind(null, t)),
      (t.Ca.d_ = Lu.bind(null, t.eventManager)),
      (t.Ca.$a = Au.bind(null, t.eventManager)),
      t
    );
  }
  class ih {
    constructor() {
      (this.kind = "memory"), (this.synchronizeTabs = !1);
    }
    async initialize(e) {
      (this.serializer = Gl(e.databaseInfo.databaseId)),
        (this.sharedClientState = this.Wa(e)),
        (this.persistence = this.Ga(e)),
        await this.persistence.start(),
        (this.localStore = this.za(e)),
        (this.gcScheduler = this.ja(e, this.localStore)),
        (this.indexBackfillerScheduler = this.Ha(e, this.localStore));
    }
    ja(e, t) {
      return null;
    }
    Ha(e, t) {
      return null;
    }
    za(e) {
      return Ll(this.persistence, new kl(), e.initialUser, this.serializer);
    }
    Ga(e) {
      return new wl(El.Zr, this.serializer);
    }
    Wa(e) {
      return new ql();
    }
    async terminate() {
      var e, t;
      null === (e = this.gcScheduler) || void 0 === e || e.stop(),
        null === (t = this.indexBackfillerScheduler) ||
          void 0 === t ||
          t.stop(),
        this.sharedClientState.shutdown(),
        await this.persistence.shutdown();
    }
  }
  ih.provider = { build: () => new ih() };
  class sh {
    async initialize(e, t) {
      this.localStore ||
        ((this.localStore = e.localStore),
        (this.sharedClientState = e.sharedClientState),
        (this.datastore = this.createDatastore(t)),
        (this.remoteStore = this.createRemoteStore(t)),
        (this.eventManager = this.createEventManager(t)),
        (this.syncEngine = this.createSyncEngine(t, !e.synchronizeTabs)),
        (this.sharedClientState.onlineStateHandler = (e) =>
          Gu(this.syncEngine, e, 1)),
        (this.remoteStore.remoteSyncer.handleCredentialChange = th.bind(
          null,
          this.syncEngine
        )),
        await gu(this.remoteStore, this.syncEngine.isPrimaryClient));
    }
    createEventManager(e) {
      return new Iu();
    }
    createDatastore(e) {
      const t = Gl(e.databaseInfo.databaseId),
        n = (function (e) {
          return new zl(e);
        })(e.databaseInfo);
      return (function (e, t, n, r) {
        return new Yl(e, t, n, r);
      })(e.authCredentials, e.appCheckCredentials, n, t);
    }
    createRemoteStore(e) {
      return (function (e, t, n, r, i) {
        return new Zl(e, t, n, r, i);
      })(
        this.localStore,
        this.datastore,
        e.asyncQueue,
        (e) => Gu(this.syncEngine, e, 0),
        Vl.D() ? new Vl() : new Ul()
      );
    }
    createSyncEngine(e, t) {
      return (function (e, t, n, r, i, s, o) {
        const a = new Vu(e, t, n, r, i, s);
        return o && (a.Qa = !0), a;
      })(
        this.localStore,
        this.remoteStore,
        this.eventManager,
        this.sharedClientState,
        e.initialUser,
        e.maxConcurrentLimboResolutions,
        t
      );
    }
    async terminate() {
      var e, t;
      await (async function (e) {
        const t = is(e);
        Xi("RemoteStore", "RemoteStore shutting down."),
          t.L_.add(5),
          await tu(t),
          t.k_.shutdown(),
          t.q_.set("Unknown");
      })(this.remoteStore),
        null === (e = this.datastore) || void 0 === e || e.terminate(),
        null === (t = this.eventManager) || void 0 === t || t.terminate();
    }
  }
  sh.provider = { build: () => new sh() };
  class oh {
    constructor(e) {
      (this.observer = e), (this.muted = !1);
    }
    next(e) {
      this.muted || (this.observer.next && this.Ya(this.observer.next, e));
    }
    error(e) {
      this.muted ||
        (this.observer.error
          ? this.Ya(this.observer.error, e)
          : Zi("Uncaught Error in snapshot listener:", e.toString()));
    }
    Za() {
      this.muted = !0;
    }
    Ya(e, t) {
      setTimeout(() => {
        this.muted || e(t);
      }, 0);
    }
  }
  class ah {
    constructor(e, t, n, r, i) {
      (this.authCredentials = e),
        (this.appCheckCredentials = t),
        (this.asyncQueue = n),
        (this.databaseInfo = r),
        (this.user = Wi.UNAUTHENTICATED),
        (this.clientId = vs.newId()),
        (this.authCredentialListener = () => Promise.resolve()),
        (this.appCheckCredentialListener = () => Promise.resolve()),
        (this._uninitializedComponentsProvider = i),
        this.authCredentials.start(n, async (e) => {
          Xi("FirestoreClient", "Received user=", e.uid),
            await this.authCredentialListener(e),
            (this.user = e);
        }),
        this.appCheckCredentials.start(
          n,
          (e) => (
            Xi("FirestoreClient", "Received new app check token=", e),
            this.appCheckCredentialListener(e, this.user)
          )
        );
    }
    get configuration() {
      return {
        asyncQueue: this.asyncQueue,
        databaseInfo: this.databaseInfo,
        clientId: this.clientId,
        authCredentials: this.authCredentials,
        appCheckCredentials: this.appCheckCredentials,
        initialUser: this.user,
        maxConcurrentLimboResolutions: 100,
      };
    }
    setCredentialChangeListener(e) {
      this.authCredentialListener = e;
    }
    setAppCheckTokenChangeListener(e) {
      this.appCheckCredentialListener = e;
    }
    terminate() {
      this.asyncQueue.enterRestrictedMode();
      const e = new as();
      return (
        this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async () => {
          try {
            this._onlineComponents &&
              (await this._onlineComponents.terminate()),
              this._offlineComponents &&
                (await this._offlineComponents.terminate()),
              this.authCredentials.shutdown(),
              this.appCheckCredentials.shutdown(),
              e.resolve();
          } catch (t) {
            const n = _u(t, "Failed to shutdown persistence");
            e.reject(n);
          }
        }),
        e.promise
      );
    }
  }
  async function ch(e, t) {
    e.asyncQueue.verifyOperationInProgress(),
      Xi("FirestoreClient", "Initializing OfflineComponentProvider");
    const n = e.configuration;
    await t.initialize(n);
    let r = n.initialUser;
    e.setCredentialChangeListener(async (e) => {
      r.isEqual(e) || (await Al(t.localStore, e), (r = e));
    }),
      t.persistence.setDatabaseDeletedListener(() => e.terminate()),
      (e._offlineComponents = t);
  }
  async function lh(e, t) {
    e.asyncQueue.verifyOperationInProgress();
    const n = await uh(e);
    Xi("FirestoreClient", "Initializing OnlineComponentProvider"),
      await t.initialize(n, e.configuration),
      e.setCredentialChangeListener((e) => mu(t.remoteStore, e)),
      e.setAppCheckTokenChangeListener((e, n) => mu(t.remoteStore, n)),
      (e._onlineComponents = t);
  }
  async function uh(e) {
    if (!e._offlineComponents)
      if (e._uninitializedComponentsProvider) {
        Xi("FirestoreClient", "Using user provided OfflineComponentProvider");
        try {
          await ch(e, e._uninitializedComponentsProvider._offline);
        } catch (t) {
          const n = t;
          if (
            !(function (e) {
              return "FirebaseError" === e.name
                ? e.code === ss.FAILED_PRECONDITION ||
                    e.code === ss.UNIMPLEMENTED
                : !(
                    "undefined" != typeof DOMException &&
                    e instanceof DOMException
                  ) ||
                    22 === e.code ||
                    20 === e.code ||
                    11 === e.code;
            })(n)
          )
            throw n;
          es(
            "Error using user provided cache. Falling back to memory cache: " +
              n
          ),
            await ch(e, new ih());
        }
      } else
        Xi("FirestoreClient", "Using default OfflineComponentProvider"),
          await ch(e, new ih());
    return e._offlineComponents;
  }
  async function hh(e) {
    return (
      e._onlineComponents ||
        (e._uninitializedComponentsProvider
          ? (Xi(
              "FirestoreClient",
              "Using user provided OnlineComponentProvider"
            ),
            await lh(e, e._uninitializedComponentsProvider._online))
          : (Xi("FirestoreClient", "Using default OnlineComponentProvider"),
            await lh(e, new sh()))),
      e._onlineComponents
    );
  }
  async function dh(e) {
    const t = await hh(e),
      n = t.eventManager;
    return (
      (n.onListen = Fu.bind(null, t.syncEngine)),
      (n.onUnlisten = $u.bind(null, t.syncEngine)),
      (n.onFirstRemoteStoreListen = Bu.bind(null, t.syncEngine)),
      (n.onLastRemoteStoreUnlisten = zu.bind(null, t.syncEngine)),
      n
    );
  }
  function ph(e, t, n = {}) {
    const r = new as();
    return (
      e.asyncQueue.enqueueAndForget(async () =>
        (function (e, t, n, r, i) {
          const s = new oh({
              next: (a) => {
                s.Za(), t.enqueueAndForget(() => Tu(e, o));
                const c = a.docs.has(n);
                !c && a.fromCache
                  ? i.reject(
                      new os(
                        ss.UNAVAILABLE,
                        "Failed to get document because the client is offline."
                      )
                    )
                  : c && a.fromCache && r && "server" === r.source
                  ? i.reject(
                      new os(
                        ss.UNAVAILABLE,
                        'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)'
                      )
                    )
                  : i.resolve(a);
              },
              error: (e) => i.reject(e),
            }),
            o = new Du(oa(n.path), s, { includeMetadataChanges: !0, _a: !0 });
          return ku(e, o);
        })(await dh(e), e.asyncQueue, t, n, r)
      ),
      r.promise
    );
  }
  function fh(e, t, n = {}) {
    const r = new as();
    return (
      e.asyncQueue.enqueueAndForget(async () =>
        (function (e, t, n, r, i) {
          const s = new oh({
              next: (n) => {
                s.Za(),
                  t.enqueueAndForget(() => Tu(e, o)),
                  n.fromCache && "server" === r.source
                    ? i.reject(
                        new os(
                          ss.UNAVAILABLE,
                          'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)'
                        )
                      )
                    : i.resolve(n);
              },
              error: (e) => i.reject(e),
            }),
            o = new Du(n, s, { includeMetadataChanges: !0, _a: !0 });
          return ku(e, o);
        })(await dh(e), e.asyncQueue, t, n, r)
      ),
      r.promise
    );
  }
  function mh(e) {
    const t = {};
    return (
      void 0 !== e.timeoutSeconds && (t.timeoutSeconds = e.timeoutSeconds), t
    );
  }
  const gh = new Map();
  function vh(e, t, n) {
    if (!n)
      throw new os(
        ss.INVALID_ARGUMENT,
        `Function ${e}() cannot be called with an empty ${t}.`
      );
  }
  function yh(e) {
    if (!ks.isDocumentKey(e))
      throw new os(
        ss.INVALID_ARGUMENT,
        `Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`
      );
  }
  function _h(e) {
    if (ks.isDocumentKey(e))
      throw new os(
        ss.INVALID_ARGUMENT,
        `Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`
      );
  }
  function bh(e) {
    if (void 0 === e) return "undefined";
    if (null === e) return "null";
    if ("string" == typeof e)
      return (
        e.length > 20 && (e = `${e.substring(0, 20)}...`), JSON.stringify(e)
      );
    if ("number" == typeof e || "boolean" == typeof e) return "" + e;
    if ("object" == typeof e) {
      if (e instanceof Array) return "an array";
      {
        const t = (function (e) {
          return e.constructor ? e.constructor.name : null;
        })(e);
        return t ? `a custom ${t} object` : "an object";
      }
    }
    return "function" == typeof e ? "a function" : ns();
  }
  function wh(e, t) {
    if (("_delegate" in e && (e = e._delegate), !(e instanceof t))) {
      if (t.name === e.constructor.name)
        throw new os(
          ss.INVALID_ARGUMENT,
          "Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?"
        );
      {
        const n = bh(e);
        throw new os(
          ss.INVALID_ARGUMENT,
          `Expected type '${t.name}', but it was: ${n}`
        );
      }
    }
    return e;
  }
  class Sh {
    constructor(e) {
      var t, n;
      if (void 0 === e.host) {
        if (void 0 !== e.ssl)
          throw new os(
            ss.INVALID_ARGUMENT,
            "Can't provide ssl option if host option is not set"
          );
        (this.host = "firestore.googleapis.com"), (this.ssl = !0);
      } else
        (this.host = e.host),
          (this.ssl = null === (t = e.ssl) || void 0 === t || t);
      if (
        ((this.credentials = e.credentials),
        (this.ignoreUndefinedProperties = !!e.ignoreUndefinedProperties),
        (this.localCache = e.localCache),
        void 0 === e.cacheSizeBytes)
      )
        this.cacheSizeBytes = 41943040;
      else {
        if (-1 !== e.cacheSizeBytes && e.cacheSizeBytes < 1048576)
          throw new os(
            ss.INVALID_ARGUMENT,
            "cacheSizeBytes must be at least 1048576"
          );
        this.cacheSizeBytes = e.cacheSizeBytes;
      }
      (function (e, t, n, r) {
        if (!0 === t && !0 === r)
          throw new os(
            ss.INVALID_ARGUMENT,
            `${e} and ${n} cannot be used together.`
          );
      })(
        "experimentalForceLongPolling",
        e.experimentalForceLongPolling,
        "experimentalAutoDetectLongPolling",
        e.experimentalAutoDetectLongPolling
      ),
        (this.experimentalForceLongPolling = !!e.experimentalForceLongPolling),
        this.experimentalForceLongPolling
          ? (this.experimentalAutoDetectLongPolling = !1)
          : void 0 === e.experimentalAutoDetectLongPolling
          ? (this.experimentalAutoDetectLongPolling = !0)
          : (this.experimentalAutoDetectLongPolling =
              !!e.experimentalAutoDetectLongPolling),
        (this.experimentalLongPollingOptions = mh(
          null !== (n = e.experimentalLongPollingOptions) && void 0 !== n
            ? n
            : {}
        )),
        (function (e) {
          if (void 0 !== e.timeoutSeconds) {
            if (isNaN(e.timeoutSeconds))
              throw new os(
                ss.INVALID_ARGUMENT,
                `invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`
              );
            if (e.timeoutSeconds < 5)
              throw new os(
                ss.INVALID_ARGUMENT,
                `invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`
              );
            if (e.timeoutSeconds > 30)
              throw new os(
                ss.INVALID_ARGUMENT,
                `invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`
              );
          }
        })(this.experimentalLongPollingOptions),
        (this.useFetchStreams = !!e.useFetchStreams);
    }
    isEqual(e) {
      return (
        this.host === e.host &&
        this.ssl === e.ssl &&
        this.credentials === e.credentials &&
        this.cacheSizeBytes === e.cacheSizeBytes &&
        this.experimentalForceLongPolling === e.experimentalForceLongPolling &&
        this.experimentalAutoDetectLongPolling ===
          e.experimentalAutoDetectLongPolling &&
        (function (e, t) {
          return e.timeoutSeconds === t.timeoutSeconds;
        })(
          this.experimentalLongPollingOptions,
          e.experimentalLongPollingOptions
        ) &&
        this.ignoreUndefinedProperties === e.ignoreUndefinedProperties &&
        this.useFetchStreams === e.useFetchStreams
      );
    }
  }
  class Eh {
    constructor(e, t, n, r) {
      (this._authCredentials = e),
        (this._appCheckCredentials = t),
        (this._databaseId = n),
        (this._app = r),
        (this.type = "firestore-lite"),
        (this._persistenceKey = "(lite)"),
        (this._settings = new Sh({})),
        (this._settingsFrozen = !1),
        (this._terminateTask = "notTerminated");
    }
    get app() {
      if (!this._app)
        throw new os(
          ss.FAILED_PRECONDITION,
          "Firestore was not initialized using the Firebase SDK. 'app' is not available"
        );
      return this._app;
    }
    get _initialized() {
      return this._settingsFrozen;
    }
    get _terminated() {
      return "notTerminated" !== this._terminateTask;
    }
    _setSettings(e) {
      if (this._settingsFrozen)
        throw new os(
          ss.FAILED_PRECONDITION,
          "Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object."
        );
      (this._settings = new Sh(e)),
        void 0 !== e.credentials &&
          (this._authCredentials = (function (e) {
            if (!e) return new ls();
            switch (e.type) {
              case "firstParty":
                return new ps(
                  e.sessionIndex || "0",
                  e.iamToken || null,
                  e.authTokenFactory || null
                );
              case "provider":
                return e.client;
              default:
                throw new os(
                  ss.INVALID_ARGUMENT,
                  "makeAuthCredentialsProvider failed due to invalid credential type"
                );
            }
          })(e.credentials));
    }
    _getSettings() {
      return this._settings;
    }
    _freezeSettings() {
      return (this._settingsFrozen = !0), this._settings;
    }
    _delete() {
      return (
        "notTerminated" === this._terminateTask &&
          (this._terminateTask = this._terminate()),
        this._terminateTask
      );
    }
    async _restart() {
      "notTerminated" === this._terminateTask
        ? await this._terminate()
        : (this._terminateTask = "notTerminated");
    }
    toJSON() {
      return {
        app: this._app,
        databaseId: this._databaseId,
        settings: this._settings,
      };
    }
    _terminate() {
      return (
        (function (e) {
          const t = gh.get(e);
          t &&
            (Xi("ComponentProvider", "Removing Datastore"),
            gh.delete(e),
            t.terminate());
        })(this),
        Promise.resolve()
      );
    }
  }
  function Ih(e, t, n, r = {}) {
    var i;
    const s = (e = wh(e, Eh))._getSettings(),
      a = `${t}:${n}`;
    if (
      ("firestore.googleapis.com" !== s.host &&
        s.host !== a &&
        es(
          "Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."
        ),
      e._setSettings(Object.assign(Object.assign({}, s), { host: a, ssl: !1 })),
      r.mockUserToken)
    ) {
      let t, n;
      if ("string" == typeof r.mockUserToken)
        (t = r.mockUserToken), (n = Wi.MOCK_USER);
      else {
        t = (function (e, t) {
          if (e.uid)
            throw new Error(
              'The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.'
            );
          const n = t || "demo-project",
            r = e.iat || 0,
            i = e.sub || e.user_id;
          if (!i)
            throw new Error(
              "mockUserToken must contain 'sub' or 'user_id' field!"
            );
          const s = Object.assign(
            {
              iss: `https://securetoken.google.com/${n}`,
              aud: n,
              iat: r,
              exp: r + 3600,
              auth_time: r,
              sub: i,
              user_id: i,
              firebase: { sign_in_provider: "custom", identities: {} },
            },
            e
          );
          return [
            o(JSON.stringify({ alg: "none", type: "JWT" })),
            o(JSON.stringify(s)),
            "",
          ].join(".");
        })(
          r.mockUserToken,
          null === (i = e._app) || void 0 === i ? void 0 : i.options.projectId
        );
        const s = r.mockUserToken.sub || r.mockUserToken.user_id;
        if (!s)
          throw new os(
            ss.INVALID_ARGUMENT,
            "mockUserToken must contain 'sub' or 'user_id' field!"
          );
        n = new Wi(s);
      }
      e._authCredentials = new us(new cs(t, n));
    }
  }
  class Ch {
    constructor(e, t, n) {
      (this.converter = t),
        (this._query = n),
        (this.type = "query"),
        (this.firestore = e);
    }
    withConverter(e) {
      return new Ch(this.firestore, e, this._query);
    }
  }
  class kh {
    constructor(e, t, n) {
      (this.converter = t),
        (this._key = n),
        (this.type = "document"),
        (this.firestore = e);
    }
    get _path() {
      return this._key.path;
    }
    get id() {
      return this._key.path.lastSegment();
    }
    get path() {
      return this._key.path.canonicalString();
    }
    get parent() {
      return new Th(this.firestore, this.converter, this._key.path.popLast());
    }
    withConverter(e) {
      return new kh(this.firestore, e, this._key);
    }
  }
  class Th extends Ch {
    constructor(e, t, n) {
      super(e, t, oa(n)), (this._path = n), (this.type = "collection");
    }
    get id() {
      return this._query.path.lastSegment();
    }
    get path() {
      return this._query.path.canonicalString();
    }
    get parent() {
      const e = this._path.popLast();
      return e.isEmpty() ? null : new kh(this.firestore, null, new ks(e));
    }
    withConverter(e) {
      return new Th(this.firestore, e, this._path);
    }
  }
  function Lh(e, t, ...n) {
    if (((e = T(e)), vh("collection", "path", t), e instanceof Eh)) {
      const r = Es.fromString(t, ...n);
      return _h(r), new Th(e, null, r);
    }
    {
      if (!(e instanceof kh || e instanceof Th))
        throw new os(
          ss.INVALID_ARGUMENT,
          "Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore"
        );
      const r = e._path.child(Es.fromString(t, ...n));
      return _h(r), new Th(e.firestore, null, r);
    }
  }
  function Ah(e, t, ...n) {
    if (
      ((e = T(e)),
      1 === arguments.length && (t = vs.newId()),
      vh("doc", "path", t),
      e instanceof Eh)
    ) {
      const r = Es.fromString(t, ...n);
      return yh(r), new kh(e, null, new ks(r));
    }
    {
      if (!(e instanceof kh || e instanceof Th))
        throw new os(
          ss.INVALID_ARGUMENT,
          "Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore"
        );
      const r = e._path.child(Es.fromString(t, ...n));
      return (
        yh(r),
        new kh(e.firestore, e instanceof Th ? e.converter : null, new ks(r))
      );
    }
  }
  class Nh {
    constructor(e = Promise.resolve()) {
      (this.Pu = []),
        (this.Iu = !1),
        (this.Tu = []),
        (this.Eu = null),
        (this.du = !1),
        (this.Au = !1),
        (this.Ru = []),
        (this.t_ = new Wl(this, "async_queue_retry")),
        (this.Vu = () => {
          const e = Kl();
          e &&
            Xi(
              "AsyncQueue",
              "Visibility state changed to " + e.visibilityState
            ),
            this.t_.jo();
        }),
        (this.mu = e);
      const t = Kl();
      t &&
        "function" == typeof t.addEventListener &&
        t.addEventListener("visibilitychange", this.Vu);
    }
    get isShuttingDown() {
      return this.Iu;
    }
    enqueueAndForget(e) {
      this.enqueue(e);
    }
    enqueueAndForgetEvenWhileRestricted(e) {
      this.fu(), this.gu(e);
    }
    enterRestrictedMode(e) {
      if (!this.Iu) {
        (this.Iu = !0), (this.Au = e || !1);
        const t = Kl();
        t &&
          "function" == typeof t.removeEventListener &&
          t.removeEventListener("visibilitychange", this.Vu);
      }
    }
    enqueue(e) {
      if ((this.fu(), this.Iu)) return new Promise(() => {});
      const t = new as();
      return this.gu(() =>
        this.Iu && this.Au
          ? Promise.resolve()
          : (e().then(t.resolve, t.reject), t.promise)
      ).then(() => t.promise);
    }
    enqueueRetryable(e) {
      this.enqueueAndForget(() => (this.Pu.push(e), this.pu()));
    }
    async pu() {
      if (0 !== this.Pu.length) {
        try {
          await this.Pu[0](), this.Pu.shift(), this.t_.reset();
        } catch (e) {
          if (!qs(e)) throw e;
          Xi("AsyncQueue", "Operation failed with retryable error: " + e);
        }
        this.Pu.length > 0 && this.t_.Go(() => this.pu());
      }
    }
    gu(e) {
      const t = this.mu.then(
        () => (
          (this.du = !0),
          e()
            .catch((e) => {
              (this.Eu = e), (this.du = !1);
              const t = (function (e) {
                let t = e.message || "";
                return (
                  e.stack &&
                    (t = e.stack.includes(e.message)
                      ? e.stack
                      : e.message + "\n" + e.stack),
                  t
                );
              })(e);
              throw (Zi("INTERNAL UNHANDLED ERROR: ", t), e);
            })
            .then((e) => ((this.du = !1), e))
        )
      );
      return (this.mu = t), t;
    }
    enqueueAfterDelay(e, t, n) {
      this.fu(), this.Ru.indexOf(e) > -1 && (t = 0);
      const r = yu.createAndSchedule(this, e, t, n, (e) => this.yu(e));
      return this.Tu.push(r), r;
    }
    fu() {
      this.Eu && ns();
    }
    verifyOperationInProgress() {}
    async wu() {
      let e;
      do {
        (e = this.mu), await e;
      } while (e !== this.mu);
    }
    Su(e) {
      for (const t of this.Tu) if (t.timerId === e) return !0;
      return !1;
    }
    bu(e) {
      return this.wu().then(() => {
        this.Tu.sort((e, t) => e.targetTimeMs - t.targetTimeMs);
        for (const t of this.Tu)
          if ((t.skipDelay(), "all" !== e && t.timerId === e)) break;
        return this.wu();
      });
    }
    Du(e) {
      this.Ru.push(e);
    }
    yu(e) {
      const t = this.Tu.indexOf(e);
      this.Tu.splice(t, 1);
    }
  }
  class Ph extends Eh {
    constructor(e, t, n, r) {
      super(e, t, n, r),
        (this.type = "firestore"),
        (this._queue = new Nh()),
        (this._persistenceKey = (null == r ? void 0 : r.name) || "[DEFAULT]");
    }
    async _terminate() {
      if (this._firestoreClient) {
        const e = this._firestoreClient.terminate();
        (this._queue = new Nh(e)), (this._firestoreClient = void 0), await e;
      }
    }
  }
  function Oh(e, t) {
    const n = "string" == typeof e ? e : t || "(default)",
      r = Ue("object" == typeof e ? e : $e(), "firestore").getImmediate({
        identifier: n,
      });
    if (!r._initialized) {
      const e = ((e) => {
        const t = u(e);
        if (!t) return;
        const n = t.lastIndexOf(":");
        if (n <= 0 || n + 1 === t.length)
          throw new Error(
            `Invalid host ${t} with no separate hostname and port!`
          );
        const r = parseInt(t.substring(n + 1), 10);
        return "[" === t[0]
          ? [t.substring(1, n - 1), r]
          : [t.substring(0, n), r];
      })("firestore");
      e && Ih(r, ...e);
    }
    return r;
  }
  function Dh(e) {
    if (e._terminated)
      throw new os(
        ss.FAILED_PRECONDITION,
        "The client has already been terminated."
      );
    return e._firestoreClient || xh(e), e._firestoreClient;
  }
  function xh(e) {
    var t, n, r;
    const i = e._freezeSettings(),
      s = (function (e, t, n, r) {
        return new lo(
          e,
          t,
          n,
          r.host,
          r.ssl,
          r.experimentalForceLongPolling,
          r.experimentalAutoDetectLongPolling,
          mh(r.experimentalLongPollingOptions),
          r.useFetchStreams
        );
      })(
        e._databaseId,
        (null === (t = e._app) || void 0 === t ? void 0 : t.options.appId) ||
          "",
        e._persistenceKey,
        i
      );
    e._componentsProvider ||
      ((null === (n = i.localCache) || void 0 === n
        ? void 0
        : n._offlineComponentProvider) &&
        (null === (r = i.localCache) || void 0 === r
          ? void 0
          : r._onlineComponentProvider) &&
        (e._componentsProvider = {
          _offline: i.localCache._offlineComponentProvider,
          _online: i.localCache._onlineComponentProvider,
        })),
      (e._firestoreClient = new ah(
        e._authCredentials,
        e._appCheckCredentials,
        e._queue,
        s,
        e._componentsProvider &&
          (function (e) {
            const t = null == e ? void 0 : e._online.build();
            return {
              _offline: null == e ? void 0 : e._offline.build(t),
              _online: t,
            };
          })(e._componentsProvider)
      ));
  }
  class Mh {
    constructor(e) {
      this._byteString = e;
    }
    static fromBase64String(e) {
      try {
        return new Mh(to.fromBase64String(e));
      } catch (e) {
        throw new os(
          ss.INVALID_ARGUMENT,
          "Failed to construct data from Base64 string: " + e
        );
      }
    }
    static fromUint8Array(e) {
      return new Mh(to.fromUint8Array(e));
    }
    toBase64() {
      return this._byteString.toBase64();
    }
    toUint8Array() {
      return this._byteString.toUint8Array();
    }
    toString() {
      return "Bytes(base64: " + this.toBase64() + ")";
    }
    isEqual(e) {
      return this._byteString.isEqual(e._byteString);
    }
  }
  class Rh {
    constructor(...e) {
      for (let t = 0; t < e.length; ++t)
        if (0 === e[t].length)
          throw new os(
            ss.INVALID_ARGUMENT,
            "Invalid field name at argument $(i + 1). Field names must not be empty."
          );
      this._internalPath = new Cs(e);
    }
    isEqual(e) {
      return this._internalPath.isEqual(e._internalPath);
    }
  }
  class qh {
    constructor(e, t) {
      if (!isFinite(e) || e < -90 || e > 90)
        throw new os(
          ss.INVALID_ARGUMENT,
          "Latitude must be a number between -90 and 90, but was: " + e
        );
      if (!isFinite(t) || t < -180 || t > 180)
        throw new os(
          ss.INVALID_ARGUMENT,
          "Longitude must be a number between -180 and 180, but was: " + t
        );
      (this._lat = e), (this._long = t);
    }
    get latitude() {
      return this._lat;
    }
    get longitude() {
      return this._long;
    }
    isEqual(e) {
      return this._lat === e._lat && this._long === e._long;
    }
    toJSON() {
      return { latitude: this._lat, longitude: this._long };
    }
    _compareTo(e) {
      return ys(this._lat, e._lat) || ys(this._long, e._long);
    }
  }
  class Uh {
    constructor(e) {
      this._values = (e || []).map((e) => e);
    }
    toArray() {
      return this._values.map((e) => e);
    }
    isEqual(e) {
      return (function (e, t) {
        if (e.length !== t.length) return !1;
        for (let n = 0; n < e.length; ++n) if (e[n] !== t[n]) return !1;
        return !0;
      })(this._values, e._values);
    }
  }
  const Vh = new RegExp("[~\\*/\\[\\]]");
  function Fh(e, t, n) {
    if (t.search(Vh) >= 0)
      throw Bh(
        `Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,
        e,
        !1,
        void 0,
        n
      );
    try {
      return new Rh(...t.split("."))._internalPath;
    } catch (r) {
      throw Bh(
        `Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,
        e,
        !1,
        void 0,
        n
      );
    }
  }
  function Bh(e, t, n, r, i) {
    const s = r && !r.isEmpty(),
      o = void 0 !== i;
    let a = `Function ${t}() called with invalid data`;
    n && (a += " (via `toFirestore()`)"), (a += ". ");
    let c = "";
    return (
      (s || o) &&
        ((c += " (found"),
        s && (c += ` in field ${r}`),
        o && (c += ` in document ${i}`),
        (c += ")")),
      new os(ss.INVALID_ARGUMENT, a + e + c)
    );
  }
  class Hh {
    constructor(e, t, n, r, i) {
      (this._firestore = e),
        (this._userDataWriter = t),
        (this._key = n),
        (this._document = r),
        (this._converter = i);
    }
    get id() {
      return this._key.path.lastSegment();
    }
    get ref() {
      return new kh(this._firestore, this._converter, this._key);
    }
    exists() {
      return null !== this._document;
    }
    data() {
      if (this._document) {
        if (this._converter) {
          const e = new jh(
            this._firestore,
            this._userDataWriter,
            this._key,
            this._document,
            null
          );
          return this._converter.fromFirestore(e);
        }
        return this._userDataWriter.convertValue(this._document.data.value);
      }
    }
    get(e) {
      if (this._document) {
        const t = this._document.data.field($h("DocumentSnapshot.get", e));
        if (null !== t) return this._userDataWriter.convertValue(t);
      }
    }
  }
  class jh extends Hh {
    data() {
      return super.data();
    }
  }
  function $h(e, t) {
    return "string" == typeof t
      ? Fh(e, t)
      : t instanceof Rh
      ? t._internalPath
      : t._delegate._internalPath;
  }
  function zh(e) {
    if ("L" === e.limitType && 0 === e.explicitOrderBy.length)
      throw new os(
        ss.UNIMPLEMENTED,
        "limitToLast() queries require specifying at least one orderBy() clause"
      );
  }
  class Kh {
    convertValue(e, t = "none") {
      switch (po(e)) {
        case 0:
          return null;
        case 1:
          return e.booleanValue;
        case 2:
          return io(e.integerValue || e.doubleValue);
        case 3:
          return this.convertTimestamp(e.timestampValue);
        case 4:
          return this.convertServerTimestamp(e, t);
        case 5:
          return e.stringValue;
        case 6:
          return this.convertBytes(so(e.bytesValue));
        case 7:
          return this.convertReference(e.referenceValue);
        case 8:
          return this.convertGeoPoint(e.geoPointValue);
        case 9:
          return this.convertArray(e.arrayValue, t);
        case 11:
          return this.convertObject(e.mapValue, t);
        case 10:
          return this.convertVectorValue(e.mapValue);
        default:
          throw ns();
      }
    }
    convertObject(e, t) {
      return this.convertObjectMap(e.fields, t);
    }
    convertObjectMap(e, t = "none") {
      const n = {};
      return (
        Ks(e, (e, r) => {
          n[e] = this.convertValue(r, t);
        }),
        n
      );
    }
    convertVectorValue(e) {
      var t, n, r;
      const i =
        null ===
          (r =
            null ===
              (n =
                null === (t = e.fields) || void 0 === t
                  ? void 0
                  : t.value.arrayValue) || void 0 === n
              ? void 0
              : n.values) || void 0 === r
          ? void 0
          : r.map((e) => io(e.doubleValue));
      return new Uh(i);
    }
    convertGeoPoint(e) {
      return new qh(io(e.latitude), io(e.longitude));
    }
    convertArray(e, t) {
      return (e.values || []).map((e) => this.convertValue(e, t));
    }
    convertServerTimestamp(e, t) {
      switch (t) {
        case "previous":
          const n = ao(e);
          return null == n ? null : this.convertValue(n, t);
        case "estimate":
          return this.convertTimestamp(co(e));
        default:
          return null;
      }
    }
    convertTimestamp(e) {
      const t = ro(e);
      return new bs(t.seconds, t.nanos);
    }
    convertDocumentKey(e, t) {
      const n = Es.fromString(e);
      rs(el(n));
      const r = new uo(n.get(1), n.get(3)),
        i = new ks(n.popFirst(5));
      return (
        r.isEqual(t) ||
          Zi(
            `Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`
          ),
        i
      );
    }
  }
  class Gh {
    constructor(e, t) {
      (this.hasPendingWrites = e), (this.fromCache = t);
    }
    isEqual(e) {
      return (
        this.hasPendingWrites === e.hasPendingWrites &&
        this.fromCache === e.fromCache
      );
    }
  }
  class Wh extends Hh {
    constructor(e, t, n, r, i, s) {
      super(e, t, n, r, s),
        (this._firestore = e),
        (this._firestoreImpl = e),
        (this.metadata = i);
    }
    exists() {
      return super.exists();
    }
    data(e = {}) {
      if (this._document) {
        if (this._converter) {
          const t = new Qh(
            this._firestore,
            this._userDataWriter,
            this._key,
            this._document,
            this.metadata,
            null
          );
          return this._converter.fromFirestore(t, e);
        }
        return this._userDataWriter.convertValue(
          this._document.data.value,
          e.serverTimestamps
        );
      }
    }
    get(e, t = {}) {
      if (this._document) {
        const n = this._document.data.field($h("DocumentSnapshot.get", e));
        if (null !== n)
          return this._userDataWriter.convertValue(n, t.serverTimestamps);
      }
    }
  }
  class Qh extends Wh {
    data(e = {}) {
      return super.data(e);
    }
  }
  class Jh {
    constructor(e, t, n, r) {
      (this._firestore = e),
        (this._userDataWriter = t),
        (this._snapshot = r),
        (this.metadata = new Gh(r.hasPendingWrites, r.fromCache)),
        (this.query = n);
    }
    get docs() {
      const e = [];
      return this.forEach((t) => e.push(t)), e;
    }
    get size() {
      return this._snapshot.docs.size;
    }
    get empty() {
      return 0 === this.size;
    }
    forEach(e, t) {
      this._snapshot.docs.forEach((n) => {
        e.call(
          t,
          new Qh(
            this._firestore,
            this._userDataWriter,
            n.key,
            n,
            new Gh(
              this._snapshot.mutatedKeys.has(n.key),
              this._snapshot.fromCache
            ),
            this.query.converter
          )
        );
      });
    }
    docChanges(e = {}) {
      const t = !!e.includeMetadataChanges;
      if (t && this._snapshot.excludesMetadataChanges)
        throw new os(
          ss.INVALID_ARGUMENT,
          "To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot()."
        );
      return (
        (this._cachedChanges &&
          this._cachedChangesIncludeMetadataChanges === t) ||
          ((this._cachedChanges = (function (e, t) {
            if (e._snapshot.oldDocs.isEmpty()) {
              let t = 0;
              return e._snapshot.docChanges.map((n) => {
                const r = new Qh(
                  e._firestore,
                  e._userDataWriter,
                  n.doc.key,
                  n.doc,
                  new Gh(
                    e._snapshot.mutatedKeys.has(n.doc.key),
                    e._snapshot.fromCache
                  ),
                  e.query.converter
                );
                return (
                  n.doc, { type: "added", doc: r, oldIndex: -1, newIndex: t++ }
                );
              });
            }
            {
              let n = e._snapshot.oldDocs;
              return e._snapshot.docChanges
                .filter((e) => t || 3 !== e.type)
                .map((t) => {
                  const r = new Qh(
                    e._firestore,
                    e._userDataWriter,
                    t.doc.key,
                    t.doc,
                    new Gh(
                      e._snapshot.mutatedKeys.has(t.doc.key),
                      e._snapshot.fromCache
                    ),
                    e.query.converter
                  );
                  let i = -1,
                    s = -1;
                  return (
                    0 !== t.type &&
                      ((i = n.indexOf(t.doc.key)), (n = n.delete(t.doc.key))),
                    1 !== t.type &&
                      ((n = n.add(t.doc)), (s = n.indexOf(t.doc.key))),
                    { type: Yh(t.type), doc: r, oldIndex: i, newIndex: s }
                  );
                });
            }
          })(this, t)),
          (this._cachedChangesIncludeMetadataChanges = t)),
        this._cachedChanges
      );
    }
  }
  function Yh(e) {
    switch (e) {
      case 0:
        return "added";
      case 2:
      case 3:
        return "modified";
      case 1:
        return "removed";
      default:
        return ns();
    }
  }
  function Xh(e) {
    e = wh(e, kh);
    const t = wh(e.firestore, Ph);
    return ph(Dh(t), e._key).then((n) => td(t, e, n));
  }
  class Zh extends Kh {
    constructor(e) {
      super(), (this.firestore = e);
    }
    convertBytes(e) {
      return new Mh(e);
    }
    convertReference(e) {
      const t = this.convertDocumentKey(e, this.firestore._databaseId);
      return new kh(this.firestore, null, t);
    }
  }
  function ed(e) {
    e = wh(e, Ch);
    const t = wh(e.firestore, Ph),
      n = Dh(t),
      r = new Zh(t);
    return zh(e._query), fh(n, e._query).then((n) => new Jh(t, r, e, n));
  }
  function td(e, t, n) {
    const r = n.docs.get(t._key),
      i = new Zh(e);
    return new Wh(
      e,
      i,
      t._key,
      r,
      new Gh(n.hasPendingWrites, n.fromCache),
      t.converter
    );
  }
  new WeakMap();
  !(function (e, t = !0) {
    !(function (e) {
      Qi = e;
    })(He),
      qe(
        new L(
          "firestore",
          (e, { instanceIdentifier: n, options: r }) => {
            const i = e.getProvider("app").getImmediate(),
              s = new Ph(
                new hs(e.getProvider("auth-internal")),
                new ms(e.getProvider("app-check-internal")),
                (function (e, t) {
                  if (
                    !Object.prototype.hasOwnProperty.apply(e.options, [
                      "projectId",
                    ])
                  )
                    throw new os(
                      ss.INVALID_ARGUMENT,
                      '"projectId" not provided in firebase.initializeApp.'
                    );
                  return new uo(e.options.projectId, t);
                })(i, n),
                i
              );
            return (
              (r = Object.assign({ useFetchStreams: t }, r)),
              s._setSettings(r),
              s
            );
          },
          "PUBLIC"
        ).setMultipleInstances(!0)
      ),
      Ke(Gi, "4.7.3", e),
      Ke(Gi, "4.7.3", "esm2017");
  })();
  const nd = {
    setFirebaseCookie: (e, t, n = "/") => {
      const r = new Date();
      r.setTime(r.getTime() + 9e5);
      const i = "expires=" + r.toUTCString();
      document.cookie = `${e}=${t}; ${i}; path=${n}`;
    },
    setFirebaseToken: async function (e, t, n, r, i, s) {
      try {
        const o = await bi(i, {
          method: e?.apiStatus?.get,
          headers: { ...e?.apiHeaders, authorization: r },
        });
        if ("200" != o.code || null === o.data)
          throw new Error("Firebase Token is not generated");
        {
          const { data: e } = o;
          this.setFirebaseCookie(s, e), this.firebaseSignIn(t, n, e);
        }
      } catch (e) {
        console.log("User not logged in");
      }
    },
    firebaseSignIn: async function (e, t, n) {
      console.log("=========================="),
        console.log("loaded"),
        console.log("==========================");
      async function r(e, t) {
        const n = Ah(e, t, "VehicleInfo"),
          r = await Xh(n);
        if (!r.exists()) {
          const e = null;
          return (
            console.log("No vehicle info found."),
            void dispatchEvent(
              new CustomEvent("vehicleInfoLoaded", { detail: e })
            )
          );
        }
        const i = r.data(),
          s = i?.userVehicles || [],
          o = await Promise.all(
            s.map(async (t) => {
              const n = await (async (e, t) => {
                const n = Ah(e, "realtimedb", "variantmaster", "IN", t),
                  r = await Xh(n);
                return r.exists() ? r.data() : null;
              })(e, t.vehicleModelCode);
              return n
                ? {
                    chassisNo: t.chassisNo,
                    vehicleModelCode: t.vehicleModelCode,
                    vehicleModelName: n.displayName,
                    registrationNo: t.registrationNo,
                    imageUrl: n.imageUrl,
                  }
                : null;
            })
          ),
          a = o.filter((e) => null !== e);
        return (
          dispatchEvent(new CustomEvent("vehicleInfoLoaded", { detail: a })), a
        );
      }
      try {
        await Xn(e, n),
          (function (e, t, n, r) {
            T(e).onAuthStateChanged(t, n, r);
          })(e, async (e) => {
            if (e) {
              const n = e.uid;
              try {
                await (async function (e, t) {
                  const n = Ah(e, t, "userInfo"),
                    r = await Xh(n),
                    i = r.exists() ? r.data() : null;
                  dispatchEvent(
                    new CustomEvent("userInfoLoaded", { detail: i })
                  );
                })(t, n),
                  await (async function (e, t) {
                    try {
                      const n = Lh(e, t, "userInfo", "discussionJoined"),
                        r = (await ed(n)).docs.map((e) => e.data());
                      return (
                        dispatchEvent(
                          new CustomEvent("discussionJoinedLoaded", {
                            detail: r,
                          })
                        ),
                        r
                      );
                    } catch (e) {
                      console.log("No discussions found in Firestore:", e);
                      const t = [];
                      return (
                        dispatchEvent(
                          new CustomEvent("discussionJoinedLoaded", {
                            detail: t,
                          })
                        ),
                        t
                      );
                    }
                  })(t, n),
                  await (async function (e, t) {
                    const n = Lh(
                        Ah(e, t, "VehicleServiceHistory"),
                        "serviceHistory"
                      ),
                      i = (await ed(n)).docs.map((e) => e.data()),
                      s = await r(e, t),
                      o = new Map();
                    if (s) {
                      s.forEach((e) => o.set(e.chassisNo, e));
                      const e = i.map((e) => {
                        const t = o.get(e.ChassisNo);
                        return t ? { ...e, ...t } : e;
                      });
                      dispatchEvent(
                        new CustomEvent("serviceHistoryLoaded", { detail: e })
                      );
                    }
                  })(t, n),
                  await (async function (e) {
                    const t = Lh(e, "/realtimedb/variantmaster/IN"),
                      n = (await ed(t)).docs.map((e) => e.data());
                    return (
                      dispatchEvent(
                        new CustomEvent("variantsLoaded", { detail: n })
                      ),
                      n
                    );
                  })(t),
                  await r(t, n);
              } catch (e) {
                console.error("Error getting document:", e);
              }
            } else console.log("User is signed out");
          });
      } catch (e) {
        console.log("Firebase Auth Error Code:", e.code),
          console.log("Firebase Auth Error Message:", e.message);
      }
    },
    setFirebaseConnection: function (e) {
      try {
        const t = ze().length ? ze()[0] : je(e),
          n = pi(t);
        return { app: t, auth: n, db: Oh(t) };
      } catch (e) {
        console.log("Error:", e);
      }
    },
    getFirebaseConfig: function (e, t, n) {
      const r = e.cluster.substring(0, 2).toLowerCase() + "-" + n,
        i = t.find((e) => e.firebaseRegion === r);
      if (!i)
        throw new Error(`No matching Firebase cluster found for cluster: ${r}`);
      return {
        apiKey: i.firebaseKey,
        authDomain: i.authDomain,
        projectId: i.projectId,
        databaseURL: i.countryListing,
      };
    },
    handleUserCluster: async function (e, t, n, r, i, s) {
      try {
        const o = this.getFirebaseConfig(t, n, i),
          { app: a, auth: c, db: l } = this.setFirebaseConnection(o),
          u = Si(s);
        if (u) this.firebaseSignIn(c, l, u);
        else {
          const o = t.cluster.substring(0, 2).toLowerCase() + "-" + i,
            a = n.find((e) => e.firebaseRegion === o);
          await this.setFirebaseToken(e, c, l, r, a.appId, s);
        }
      } catch (e) {
        console.error("Error handling Firebase connection:", e);
      }
    },
    init: async function (e, t, n, r, i, s) {
      await this.handleUserCluster(e, t, n, r, i, s);
    },
  };
  var rd = nd;
  const id = {
    init: function () {
      Ai.init();
      const e = wi(),
        t = document.querySelector(".sign-up")?.getAttribute("data-runmode"),
        n = document
          .querySelector(".sign-up")
          ?.getAttribute("refresh-token-api"),
        r = document
          .querySelector(".sign-up")
          ?.getAttribute("sub-domain-cookie"),
        i = t ? `firebaseToken-${t}` : "firebaseToken",
        { user_id: s, refresh_token: o, jwt_token: a } = Ii(r);
      const c = JSON.parse(e?.firebaseConfig),
        l = async (n) => {
          document.cookie = `${r}=; domain=.royalenfield.com; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`;
          let s = "";
          (s = i.includes(t) ? i : t ? `${i}-${t}` : `${i}-${e?.runMode}`),
            (document.cookie = `${s}=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`);
          const o = window.userData,
            a = o ? JSON.parse(o) : {};
          Li([
            "lastServiceHistoryData",
            "motorcycleFirebaseData",
            "motorcycleVariants",
            "userData",
            "serviceCostSessionStored",
          ]);
          const l = rd.getFirebaseConfig(a, c, t),
            { app: u, auth: h, db: d } = rd.setFirebaseConnection(l);
          if (h)
            try {
              await (function (e) {
                return T(e).signOut();
              })(h),
                console.log("User signed out successfully"),
                (window.location.href = n);
            } catch (e) {
              console.error("Error signing out: ", e);
            }
        };
      !(async function a(u) {
        try {
          if (u) {
            const h = {},
              d = await ki(h),
              p = await bi(`${e?.apiUrl?.verifyTokenApi}?hmac=${d}`, {
                method: e?.apiStatus?.get,
                headers: { ...e?.apiHeaders, authorization: u },
              });
            let f = await Ti(p);
            if ("200" == p.code && null !== p.data && f) {
              (document.querySelector(
                ".re__revamp-v4__logincta"
              ).style.display = "none"),
                (document.querySelector(".loggedIn").style.display = "block");
              const n = document.querySelector(".login");
              n &&
                ((n.style.display = "none !important "),
                n.classList.add("d-none"));
              const { data: r } = p;
              (window.userData = JSON.stringify(r)),
                r.cluster && rd.init(e, r, c, u, t, i),
                document
                  .querySelector(".booking-tab")
                  ?.querySelector(".service-tabs__inner-row")
                  .classList.add("d-none"),
                document
                  .querySelector(".service-tabs__steps-wrapper")
                  ?.classList.remove("d-none");
            }
            if (401 == p.code || 402 == p.code || 412 == p.code) {
              const t = { userId: s, refreshToken: o },
                i = await ki(t),
                c = await bi(n, {
                  method: e.apiStatus.post,
                  headers: {
                    ...e?.headers,
                    "Content-Type": e?.apiHeaders?.application_json,
                  },
                  body: JSON.stringify({ ...t, hmac: i }),
                });
              let u = await Ti(p);
              if (200 == c.code && u) Ei(s, o, c.data, r), a(c.data);
              else {
                const e = document
                  .getElementById("logout")
                  ?.getAttribute("data-href")
                  ?.replace("/content/royal-enfield", "");
                l(e);
              }
            }
          } else {
            Li([
              "lastServiceHistoryData",
              "motorcycleFirebaseData",
              "motorcycleVariants",
              "userData",
              "serviceCostSessionStored",
            ]),
              _i(),
              console.log("User not logged in");
          }
        } catch (e) {
          Li([
            "lastServiceHistoryData",
            "motorcycleFirebaseData",
            "motorcycleVariants",
            "userData",
            "serviceCostSessionStored",
          ]),
            _i(),
            console.log("User not logged in");
        }
      })(a),
        document.addEventListener("click", async function (t) {
          if (t.target.closest("#logout")) {
            t.preventDefault();
            const n = t.target.closest("#logout"),
              r = n
                .getAttribute("data-href")
                ?.replace("/content/royal-enfield", ""),
              i = n.getAttribute("logout-api");
            try {
              if (a) {
                const t = {},
                  n = await ki(t),
                  s = await bi(`${e?.apiUrl?.verifyTokenApi}?hmac=${n}`, {
                    method: e?.apiStatus?.get,
                    headers: { ...e?.apiHeaders, authorization: a },
                  });
                let o = await Ti(s);
                if ("200" == s.code && o) {
                  const { data: t } = s;
                  if (t._id) {
                    const t = {},
                      n = await ki(t),
                      s = await bi(`${i}?hmac=${n}`, {
                        method: e?.apiStatus?.get,
                        headers: { ...e?.apiHeaders, authorization: a },
                      });
                    (o = await Ti(s)),
                      "200" == s.code && null !== s.data && o && l(r);
                  }
                }
              }
            } catch (e) {
              console.error("Error:", e);
            }
          }
        });
      const u = document.querySelector(".tnc-wrap__label"),
        h = document.querySelector(".desc-tnc-back-button");
      u &&
        (u.addEventListener("click", function (e) {
          e.preventDefault();
          const t = document.querySelector(
            ".popup__content--personal-details-tnc"
          );
          console.log(t),
            t.classList.remove("d-none"),
            t.classList.add("re__revamp-v4__d-block-tabs");
        }),
        h.addEventListener("click", function (e) {
          e.preventDefault();
          const t = document.querySelector(
            ".popup__content--personal-details-tnc"
          );
          t.classList.add("d-none"),
            t.classList.remove("re__revamp-v4__d-block-tabs");
        })),
        Oi.init(),
        document.addEventListener("click", function (e) {
          if (
            "true" ===
            e.target
              .closest('[data-dismiss="modal"]')
              ?.getAttribute("data-incorrect-modal")
          )
            return !1;
          if (e.target.closest('[data-dismiss="modal"]')) {
            e.preventDefault();
            const t = document.getElementById("popup_otp_login");
            t &&
              (t.classList.add("d-none"),
              t.classList.remove("re__revamp-v4__d-block-tabs"),
              document.querySelector("body").classList.remove("popup-open"),
              (document.documentElement.style.overflow = ""),
              (document.body.style.overflow = ""));
          }
          if (
            e.target.classList.contains("close") ||
            e.target.classList.contains("re__revamp-v4__header-close-popup") ||
            e.target.classList.contains("reIcon-close")
          ) {
            e.preventDefault();
            const t = document.getElementById("popup_otp_login");
            t &&
              (t.classList.add("d-none"),
              t.classList.remove("re__revamp-v4__d-block-tabs"),
              document.querySelector("body").classList.remove("popup-open"),
              (document.documentElement.style.overflow = ""),
              (document.body.style.overflow = ""));
          }
        });
    },
    toggleLoginModal: function (e = !0, t) {
      const n = document.querySelector("#popup_otp_login");
      if (n) {
        if (t) {
          document.querySelector(".verify-btn").setAttribute("data-reload", t);
          document
            .querySelector(".re__revamp-v4__personal-details__signup-cta")
            .setAttribute("data-reload", t);
        }
        e
          ? (n.classList.remove("d-none"),
            n.classList.add("re__revamp-v4__d-block-tabs"),
            (n.style.display = "block"),
            (document.body.style.overflow = "hidden"),
            (document.documentElement.style.overflow = "hidden"),
            console.log("Login modal shown"))
          : (n.classList.add("d-none"),
            n.classList.remove("re__revamp-v4__d-block-tabs"),
            (n.style.display = "none"),
            (document.body.style.overflow = ""),
            (document.documentElement.style.overflow = ""),
            console.log("Login modal hidden"));
      } else console.warn("Login modal not found");
    },
    showLoginModal: function (e) {
      const t = { isLoggedIn: !1, jwt_token: null };
      return new Promise((n, r) => {
        const i = document
          .querySelector(".sign-up")
          ?.getAttribute("sub-domain-cookie");
        if (i)
          try {
            const { jwt_token: s } = Ii(i);
            s
              ? ((t.isLoggedIn = !0), (t.jwt_token = s), n(t))
              : (this.toggleLoginModal(!0, e), r(t));
          } catch (e) {
            console.warn("Error decoding auth cookie:", e);
          }
      });
    },
    hideLoginModal: function () {
      this.toggleLoginModal(!1);
    },
  };
  window.addEventListener("DOMContentLoaded", () => {
    setTimeout(() => {
      id.init();
    }, 0);
  }),
    (window.loginWithOtpComponent = id);
})();
